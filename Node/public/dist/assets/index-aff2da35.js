import{_ as O,l as h,m as N,H as T,a as w,o as x,c as g,b as u,F as X,j as q,n as B,B as b,t as E,u as s,d as f,e as m,z as v,q as z,y as i,f as F}from"./index-f999da55.js";import{f as A}from"./index-823fbab8.js";import{c as W}from"./index-4b37ecc4.js";const Y=[{icon:"icon-24gf-folderOpen",name:"新建文件夹",color:"#FFD153",command:"folder"},{icon:"icon-Word",name:"Create Online Word",color:"#2A8CFF",command:"word"},{icon:"icon-excel",name:"Create Online Excel",color:"#00C476",command:"excel"},{icon:"icon-wenben1",name:"Create Online TXT",color:"",command:"txt"},{icon:"icon-file-markdown1",name:"Create Markdown",color:"#1296db",command:"markdown"},{name:"更多类型",command:"more"},{name:"批量管理",command:"manage"}],J=_=>A({url:"/folder/createFolder",method:"post",data:_});const L=["onClick"],P=["onClick"],R={class:"dialog-footer"},U={__name:"index",emits:["create","close"],setup(_,{expose:M,emit:d}){let e=h({show:!1,title:"",input:"",warning:"",placeholder:""});const a=h({x:0,y:0,display:"none"});function V(o){switch(o){case"folder":e.type=o,e.show=!0,e.title="创建文件夹",e.warning="请输入文件夹名称",e.placeholder="请输入文件夹名称";break;case"word":e.type=o,e.show=!0,e.title="Create Word",e.warning="文件名称不能为空",e.placeholder="请输入文件名称";break;case"excel":e.type=o,e.show=!0,e.title="Create Excel",e.warning="文件名称不能为空",e.placeholder="请输入文件名称";break;case"txt":e.type=o,e.show=!0,e.title="Create TXT",e.warning="文件名称不能为空",e.placeholder="请输入文件名称";break;case"markdown":e.type=o,e.show=!0,e.title="Create Markdown",e.warning="文件名称不能为空",e.placeholder="请输入文件名称";break}}function S(o,t){if(t){a.x=o.pageX-o.offsetX,a.y=o.pageY-o.offsetY,a.display="block";return}let r=o.pageX,n=o.pageY;a.x=r,a.y=n,a.display="block"}function C(){a.display="none",d("close")}async function D(o,t){let{folderid:r}=F.currentRoute.value.query,n=await J({userid:o,foldername:t,parentfolderid:r});return n.code!==200?i.error(n.msg):(i.success(n.msg),n.data)}async function I(){if(!e.input)return i.warning(e.warning);let{userid:o}=JSON.parse(sessionStorage.getItem("user")),t={type:e.type};if(e.type==="folder"){let r=e.input,n=await D(o,r);t.id=n,t.name=r}else{let{userid:r}=JSON.parse(sessionStorage.getItem("user")),n=e.input,y=e.type,c={txt:"txt",markdown:"md",word:"docx",excel:"xlsx"}[e.type],k=F.currentRoute.value.query.folderid,p=await W({userid:r,filename:n,filetype:y,filesuffix:c,fileownerfolderid:k});if(p.code!==200)return i.error(p.msg);i.success(p.msg),t.id=p.data,t.name=n,t.suffix=c}e.show=!1,e.input="",d("create",t),d("close")}return N(()=>{let o=T();const t=document.querySelector("body");t.append?t.append(o.vnode.el):t.appendChild(o.vnode.el)}),M({showContentMenu:S,hiddenContentMenu:C}),(o,t)=>{const r=w("el-input"),n=w("el-button"),y=w("el-dialog");return x(),g("div",{class:"box",onClick:z(C,["stop","self"]),onContextmenu:t[4]||(t[4]=l=>l.preventDefault())},[u("div",{onContextmenu:t[0]||(t[0]=l=>l.preventDefault()),class:"contentmenu",style:b({left:a.x+"px",top:a.y+"px",display:a.display})},[(x(!0),g(X,null,q(s(Y),(l,c)=>(x(),g("div",{key:c,onClick:k=>V(l.command)},[u("i",{class:B(["iconfont",l.icon]),style:b({color:l.color})},null,6),u("span",null,E(l.name),1)],8,P))),128))],36),f(y,{modelValue:s(e).show,"onUpdate:modelValue":t[3]||(t[3]=l=>s(e).show=l),title:s(e).title,width:"30%"},{footer:m(()=>[u("span",R,[f(n,{onClick:t[2]||(t[2]=l=>(s(e).show=!1,d("close"),s(e).input=""))},{default:m(()=>[v(" 取消 ")]),_:1}),f(n,{type:"primary",onClick:I},{default:m(()=>[v(" 确定 ")]),_:1})])]),default:m(()=>[f(r,{modelValue:s(e).input,"onUpdate:modelValue":t[1]||(t[1]=l=>s(e).input=l),placeholder:s(e).placeholder},null,8,["modelValue","placeholder"])]),_:1},8,["modelValue","title"])],40,L)}}},G=O(U,[["__scopeId","data-v-05ffbf4e"]]);export{G as C};
