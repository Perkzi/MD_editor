var j2=Object.defineProperty;var F2=(n,t,e)=>t in n?j2(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var re=(n,t,e)=>(F2(n,typeof t!="symbol"?t+"":t,e),e);import{_ as Wo,a as Wi,o as dn,i as Ha,e as Ei,d as Ti,c as zn,F as uo,j as ho,b as ke,t as Us,k as B2,B as Yd,z as Xc,v as kp,r as Vi,l as Rl,m as If,u as Yr,y as jo,g as Fh,f as Bh,p as Of,h as Tf,I as fo,J as Pf,K as qf,L as Ia,M as vo,N as Uh,O as U2,w as z2,n as Zc,P as Ep,Q as H2,G as Cp,R as V2,S as $2,H as W2,T as G2,U as K2,D as Y2,V as J2}from"./index-54f00b74.js";import{c as X2,e as Z2}from"./execcontent-932843e6.js";import{b as Jd,d as Q2,s as t5,h as e5,i as n5}from"./index-d2199a5c.js";const r5={style:{width:"100%",height:"100%"}},i5={class:"dropdownItem"},s5=["innerHTML"],o5=["title"],a5={__name:"index",props:{trigger:{type:String,default:"click"},list:{type:Array,default:()=>[]}},emits:["handleCommand","handleOpen","handleClose"],setup(n,{emit:t}){const e=s=>t("handleCommand",s),r=()=>t("handleOpen"),i=()=>t("handleClose");return(s,o)=>{const a=Wi("el-dropdown-item"),c=Wi("el-dropdown-menu"),u=Wi("el-scrollbar"),d=Wi("el-dropdown");return dn(),Ha(d,{trigger:n.trigger,onHandleOpen:r,onHandleClose:i,onCommand:e},{dropdown:Ei(()=>[Ti(u,{height:"200px"},{default:Ei(()=>[Ti(c,null,{default:Ei(()=>[(dn(!0),zn(uo,null,ho(n.list,p=>(dn(),Ha(a,{key:p.command,command:p.command},{default:Ei(()=>[ke("div",i5,[ke("div",{innerHTML:p.userimg,class:"userimg_svg"},null,8,s5),ke("span",{title:p.username},Us(p.username),9,o5)])]),_:2},1032,["command"]))),128))]),_:1})]),_:1})]),default:Ei(()=>[ke("div",r5,[B2(s.$slots,"content",{},void 0,!0)])]),_:3},8,["trigger"])}}},Ip=Wo(a5,[["__scopeId","data-v-496abe18"]]);const l5={class:"list"},c5=["innerHTML"],u5={__name:"userList",props:{userList:{type:Array,default:()=>[]}},emits:["command"],setup(n,{emit:t}){const e=i=>t("command",i),r=i=>-10*i;return(i,s)=>{const o=Wi("el-avatar");return dn(),Ha(Ip,{list:n.userList,onCommand:e},{content:Ei(()=>[ke("div",l5,[(dn(!0),zn(uo,null,ho(n.userList.slice(0,3),(a,c)=>(dn(),zn("div",{style:Yd({transform:`translateX(${r(c)}px)`}),key:c,class:"userimg_svg",innerHTML:a.userimg},null,12,c5))),128)),n.userList.length>3?(dn(),Ha(o,{key:0,class:"allUser",shape:"square",style:Yd({transform:`translateX(${n.userList.length>3?-30:n.userList.length*-10}px)`})},{default:Ei(()=>[Xc(Us(n.userList.length),1)]),_:1},8,["style"])):kp("",!0)])]),_:1},8,["list"])}}},h5=Wo(u5,[["__scopeId","data-v-c3731921"]]);const f5={class:"list"},d5=["onClick"],p5={__name:"history",props:{versionList:{type:Array,default:()=>[]}},setup(n){const t=i=>console.log("Command triggered:",i),e=i=>{const s=new Date(i),o=s.getFullYear(),a=String(s.getMonth()+1).padStart(2,"0"),c=String(s.getDate()).padStart(2,"0");return`${o}-${a}-${c}`},r=i=>{console.log(i)};return(i,s)=>(dn(),Ha(Ip,{list:n.versionList,onCommand:t},{content:Ei(()=>[ke("div",f5,[(dn(!0),zn(uo,null,ho(n.versionList.slice(0,5),(o,a)=>(dn(),zn("div",{key:a},[ke("div",{class:"version-card",onClick:c=>r(o.fileid)},[ke("h4",null,"版本号: "+Us(o.index),1),ke("p",null,"创建时间: "+Us(e(o.createtime)),1)],8,d5)]))),128))])]),_:1},8,["list"]))}},g5=Wo(p5,[["__scopeId","data-v-41d30370"]]);const Ql=n=>(Of("data-v-fb96ac44"),n=n(),Tf(),n),m5={class:"header"},b5={class:"header-left"},v5=Ql(()=>ke("i",{class:"iconfont icon-shouye1",style:{color:"var(--main-color)"}},null,-1)),y5=[v5],w5=["title"],_5={key:0,class:"iconfont icon-shoucang"},A5={key:1,class:"iconfont icon-shoucang1"},x5={class:"header-left-news"},N5=Ql(()=>ke("i",{class:"iconfont icon-oko"},null,-1)),S5={class:"newUserName"},L5={class:"header-right"},k5={class:"header-right-userlist",title:"正在编辑的人"},E5=Ql(()=>ke("div",{class:"header-right-markdown",title:"切换模式"},[ke("i",{class:"iconfont icon-markdown1"})],-1)),C5=Ql(()=>ke("div",{class:"icon-container"},[ke("i",{class:"iconfont icon-lishi"})],-1)),I5=[C5],O5={key:0,class:"history-list"},T5=Ql(()=>ke("i",{class:"iconfont icon-xiaoxizhongxin"},null,-1)),P5={class:"header-right-shear",title:"分享"},q5={class:"header-right-userimg",title:"我的信息"},M5=["innerHTML"],R5={__name:"top",props:{socketuserlist:{type:Array},unread:{type:Number,default:0}},emits:["open"],setup(n,{emit:t}){const e=()=>t("open"),r=Vi([]);let i=Vi(""),s=Rl({usersvg:"",userimg:"",username:""});const o=Vi(!1);Vi("markdown");const a=x=>{},c=x=>{console.log("点击了history",x)};async function u(){let{username:x,userid:S}=JSON.parse(sessionStorage.getItem("user")),y=window.location.hash.split("edit/")[1],{data:A}=await Jd({userid:S,fileid:y}),{filename:w,filesuffix:k}=A,T=X2(x,y,w+"."+k);Z2(T),jo.success("分享链接已复制到粘贴板")}const d=()=>{o.value=!o.value,o.value?jo.success("已收藏"):jo.success("已取消")},p=Vi(!1),g=async x=>{var y;p.value=!p.value,x.stopPropagation();let S=new URLSearchParams(window.location.search).get("fileid");S||(S=(y=window.location.hash.split("/edit/")[1])==null?void 0:y.split("?")[0]);try{const{data:A}=await Q2({fileid:S}),w=Object.keys(A).map(k=>A[k]);console.log("Version history (array format)",w),r.value=w}catch(A){console.error("Failed to fetch version history:",A)}},f=()=>{Fh.state.WebsocketProvider.disconnect(),Fh.commit("setWebsocketProvider",null),Bh.push("/home/pages")};let v=null;return If(async()=>{var k;let{username:x,userid:S}=JSON.parse(sessionStorage.getItem("user"));v=x;let y=new URLSearchParams(window.location.search).get("fileid");y||(y=(k=window.location.hash.split("/edit/")[1])==null?void 0:k.split("?")[0]);let{data:A}=await Jd({userid:S,fileid:y});i.value=`${A.filename}.${A.suffix||A.filesuffix}`;let{userimg:w}=JSON.parse(sessionStorage.getItem("user"));w.toString().includes("<svg")?s.usersvg=w:s.userimg=w}),(x,S)=>{const y=Wi("el-badge"),A=Wi("el-button"),w=Wi("el-avatar");return dn(),zn("div",m5,[ke("div",b5,[ke("div",{class:"header-left-home",title:"返回首页",onClick:f},y5),ke("div",{class:"header-left-filename",title:Yr(i)},Us(Yr(i)),9,w5),ke("div",{class:"header-left-favor",onClick:d,title:"收藏"},[o.value?(dn(),zn("i",A5)):(dn(),zn("i",_5))]),ke("div",x5,[N5,ke("span",null,[Xc(" 上次修改: "),ke("span",S5,Us(Yr(v)),1),Xc(" 1分钟前 ")])])]),ke("div",L5,[ke("div",k5,[Ti(h5,{userList:n.socketuserlist,onCommand:a},null,8,["userList"])]),E5,ke("div",{class:"header-right-history",title:"历史记录",onClick:g},I5),p.value?(dn(),zn("div",O5,[Ti(g5,{versionList:r.value,onCommand:c},null,8,["versionList"])])):kp("",!0),ke("div",{class:"header-right-setting",title:"消息",onClick:e},[Ti(y,{value:n.unread||"",class:"item"},{default:Ei(()=>[T5]),_:1},8,["value"])]),ke("div",P5,[Ti(A,{type:"primary",size:"small",onClick:u},{default:Ei(()=>[Xc("分享")]),_:1})]),ke("div",q5,[Yr(s).usersvg?(dn(),zn("div",{key:0,class:"userimg_svg",innerHTML:Yr(s).usersvg},null,8,M5)):(dn(),Ha(w,{key:1,shape:"square",src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}))])])])}}},D5=Wo(R5,[["__scopeId","data-v-fb96ac44"]]),j5=["😀","😁","😂","😃","😄","😅","😆","😇","😈","😉","😊","😋","😌","😍","😎","😏","😐","😑","😒","😓","😔","😕","😖","😗","😘","😙","😚","😛","😜","😝","😞","😟","😠","😡","😢","😣","😤","😥","😦","😧","😨","😩","😪","😫","😬","😭","😮","😯","😰","😱","😲","😳","😴","😵","😶","😷","😸","😹","😺","😻","😼","😽","😾","😿","🙀","🙁","🙂","🙃","🙄","🙅🏻‍♀️","🙅🏻‍♂️","🙅🏻","🙅🏼‍♀️","🙅🏼‍♂️","🙅🏼","🙅🏽‍♀️","🙅🏽‍♂️","🙅🏽","🙅🏾‍♀️","🙅🏾‍♂️","🙅🏾","🙅🏿‍♀️","🙅🏿‍♂️","🙅🏿","🙅‍♀️","🙅‍♂️","🙅","🙆🏻‍♀️","🙆🏻‍♂️","🙆🏻","🙆🏼‍♀️","🙆🏼‍♂️","🙆🏼","🙆🏽‍♀️","🙆🏽‍♂️","🙆🏽","🙆🏾‍♀️","🙆🏾‍♂️","🙆🏾","🙆🏿‍♀️","🙆🏿‍♂️","🙆🏿","🙆‍♀️","🙆‍♂️","🙆","🙇🏻‍♀️","🙇🏻‍♂️","🙇🏻","🙇🏼‍♀️","🙇🏼‍♂️","🙇🏼","🙇🏽‍♀️","🙇🏽‍♂️","🙇🏽","🙇🏾‍♀️","🙇🏾‍♂️","🙇🏾","🙇🏿‍♀️","🙇🏿‍♂️","🙇🏿","🙇‍♀️","🙇‍♂️","🙇","🙈","🙉","🙊","🙋🏻‍♀️","🙋🏻‍♂️","🙋🏻","🙋🏼‍♀️","🙋🏼‍♂️","🙋🏼","🙋🏽‍♀️","🙋🏽‍♂️","🙋🏽","🙋🏾‍♀️","🙋🏾‍♂️","🙋🏾","🙋🏿‍♀️","🙋🏿‍♂️","🙋🏿","🙋‍♀️","🙋‍♂️","🙋","🙌🏻","🙌🏼","🙌🏽","🙌🏾","🙌🏿","🙌","🙍🏻‍♀️","🙍🏻‍♂️","🙍🏻","🙍🏼‍♀️","🙍🏼‍♂️","🙍🏼","🙍🏽‍♀️","🙍🏽‍♂️","🙍🏽","🙍🏾‍♀️","🙍🏾‍♂️","🙍🏾","🙍🏿‍♀️","🙍🏿‍♂️","🙍🏿","🙍‍♀️","🙍‍♂️","🙍","🙎🏻‍♀️","🙎🏻‍♂️","🙎🏻","🙎🏼‍♀️","🙎🏼‍♂️","🙎🏼","🙎🏽‍♀️","🙎🏽‍♂️","🙎🏽","🙎🏾‍♀️","🙎🏾‍♂️","🙎🏾","🙎🏿‍♀️","🙎🏿‍♂️","🙎🏿","🙎‍♀️","🙎‍♂️","🙎","🙏🏻","🙏🏼","🙏🏽","🙏🏾","🙏🏿","🙏","🚀","🚁","🚂","🚃","🚄","🚅","🚆","🚇","🚈","🚉","🚊","🚋","🚌","🚍","🚎","🚏","🚐","🚑","🚒","🚓","🚔","🚕","🚖","🚗","🚘","🚙","🚚","🚛","🚜","🚝","🚞","🚟","🚠","🚡","🚢","🚣🏻‍♀️","🚣🏻‍♂️","🚣🏻","🚣🏼‍♀️","🚣🏼‍♂️","🚣🏼","🚣🏽‍♀️","🚣🏽‍♂️","🚣🏽","🚣🏾‍♀️","🚣🏾‍♂️","🚣🏾","🚣🏿‍♀️","🚣🏿‍♂️","🚣🏿","🚣‍♀️","🚣‍♂️","🚣","🚤","🚥","🚦","🚧","🚨","🚩","🚪","🚫","🚬","🚭","🚮","🚯","🚰","🚱","🚲","🚳","🚴🏻‍♀️","🚴🏻‍♂️","🚴🏻","🚴🏼‍♀️","🚴🏼‍♂️","🚴🏼","🚴🏽‍♀️","🚴🏽‍♂️","🚴🏽","🚴🏾‍♀️","🚴🏾‍♂️","🚴🏾","🚴🏿‍♀️","🚴🏿‍♂️","🚴🏿","🚴‍♀️","🚴‍♂️","🚴","🚵🏻‍♀️","🚵🏻‍♂️","🚵🏻","🚵🏼‍♀️","🚵🏼‍♂️","🚵🏼","🚵🏽‍♀️","🚵🏽‍♂️","🚵🏽","🚵🏾‍♀️","🚵🏾‍♂️","🚵🏾","🚵🏿‍♀️","🚵🏿‍♂️","🚵🏿","🚵‍♀️","🚵‍♂️","🚵","🚶🏻‍♀️","🚶🏻‍♂️","🚶🏻","🚶🏼‍♀️","🚶🏼‍♂️","🚶🏼","🚶🏽‍♀️","🚶🏽‍♂️","🚶🏽","🚶🏾‍♀️","🚶🏾‍♂️","🚶🏾","🚶🏿‍♀️","🚶🏿‍♂️","🚶🏿","🚶‍♀️","🚶‍♂️","🚶","🚷","🚸","🚹","🚺","🚻","🚼","🚽","🚾","🚿","🛀🏻","🛀🏼","🛀🏽","🛀🏾","🛀🏿","🛀","🛁","🛂","🛃","🛄","🛅","🛋️","🛌🏻","🛌🏼","🛌🏽","🛌🏾","🛌🏿","🛌","🛍️","🛎️","🛏️","🛐","🛑","🛒","🛕","🛠️","🛡️","🛢️","🛣️","🛤️","🛥️","🛩️","🛫","🛬","🛰️","🛳️","🛴","🛵","🛶","🛷","🛸","🛹","🛺","🟠","🟡","🟢","🟣","🟤","🟥","🟦","🟧","🟨","🟩","🟪","🟫","🤍","🤎","🤏🏻","🤏🏼","🤏🏽","🤏🏾","🤏🏿","🤏","🤐","🤑","🤒","🤓","🤔","🤕","🤖","🤗","🤘🏻","🤘🏼","🤘🏽","🤘🏾","🤘🏿","🤘","🤙🏻","🤙🏼","🤙🏽","🤙🏾","🤙🏿","🤙","🤚🏻","🤚🏼","🤚🏽","🤚🏾","🤚🏿","🤚","🤛🏻","🤛🏼","🤛🏽","🤛🏾","🤛🏿","🤛","🤜🏻","🤜🏼","🤜🏽","🤜🏾","🤜🏿","🤜","🤝","🤞🏻","🤞🏼","🤞🏽","🤞🏾","🤞🏿","🤞","🤟🏻","🤟🏼","🤟🏽","🤟🏾","🤟🏿","🤟","🤠","🤡","🤢","🤣","🤤","🤥","🤦🏻‍♀️","🤦🏻‍♂️","🤦🏻","🤦🏼‍♀️","🤦🏼‍♂️","🤦🏼","🤦🏽‍♀️","🤦🏽‍♂️","🤦🏽","🤦🏾‍♀️","🤦🏾‍♂️","🤦🏾","🤦🏿‍♀️","🤦🏿‍♂️","🤦🏿","🤦‍♀️","🤦‍♂️","🤦","🤧","🤨","🤩","🤪","🤫","🤬","🤭","🤮","🤯","🤰🏻","🤰🏼","🤰🏽","🤰🏾","🤰🏿","🤰","🤱🏻","🤱🏼","🤱🏽","🤱🏾","🤱🏿","🤱","🤲🏻","🤲🏼","🤲🏽","🤲🏾","🤲🏿","🤲","🤳🏻","🤳🏼","🤳🏽","🤳🏾","🤳🏿","🤳","🤴🏻","🤴🏼","🤴🏽","🤴🏾","🤴🏿","🤴","🤵🏻‍♀️","🤵🏻‍♂️","🤵🏻","🤵🏼‍♀️","🤵🏼‍♂️","🤵🏼","🤵🏽‍♀️","🤵🏽‍♂️","🤵🏽","🤵🏾‍♀️","🤵🏾‍♂️","🤵🏾","🤵🏿‍♀️","🤵🏿‍♂️","🤵🏿","🤵‍♀️","🤵‍♂️","🤵","🤶🏻","🤶🏼","🤶🏽","🤶🏾","🤶🏿","🤶","🤷🏻‍♀️","🤷🏻‍♂️","🤷🏻","🤷🏼‍♀️","🤷🏼‍♂️","🤷🏼","🤷🏽‍♀️","🤷🏽‍♂️","🤷🏽","🤷🏾‍♀️","🤷🏾‍♂️","🤷🏾","🤷🏿‍♀️","🤷🏿‍♂️","🤷🏿","🤷‍♀️","🤷‍♂️","🤷","🤸🏻‍♀️","🤸🏻‍♂️","🤸🏻","🤸🏼‍♀️","🤸🏼‍♂️","🤸🏼","🤸🏽‍♀️","🤸🏽‍♂️","🤸🏽","🤸🏾‍♀️","🤸🏾‍♂️","🤸🏾","🤸🏿‍♀️","🤸🏿‍♂️","🤸🏿","🤸‍♀️","🤸‍♂️","🤸","🤹🏻‍♀️","🤹🏻‍♂️","🤹🏻","🤹🏼‍♀️","🤹🏼‍♂️","🤹🏼","🤹🏽‍♀️","🤹🏽‍♂️","🤹🏽","🤹🏾‍♀️","🤹🏾‍♂️","🤹🏾","🤹🏿‍♀️","🤹🏿‍♂️","🤹🏿","🤹‍♀️","🤹‍♂️","🤹","🤺","🤼‍♀️","🤼‍♂️","🤼","🤽🏻‍♀️","🤽🏻‍♂️","🤽🏻","🤽🏼‍♀️","🤽🏼‍♂️","🤽🏼","🤽🏽‍♀️","🤽🏽‍♂️","🤽🏽","🤽🏾‍♀️","🤽🏾‍♂️","🤽🏾","🤽🏿‍♀️","🤽🏿‍♂️","🤽🏿","🤽‍♀️","🤽‍♂️","🤽","🤾🏻‍♀️","🤾🏻‍♂️","🤾🏻","🤾🏼‍♀️","🤾🏼‍♂️","🤾🏼","🤾🏽‍♀️","🤾🏽‍♂️","🤾🏽","🤾🏾‍♀️","🤾🏾‍♂️","🤾🏾","🤾🏿‍♀️","🤾🏿‍♂️","🤾🏿","🤾‍♀️","🤾‍♂️","🤾","🤿","🥀","🥁","🥂","🥃","🥄","🥅","🥇","🥈","🥉","🥊","🥋","🥌","🥍","🥎","🥏","🥐","🥑","🥒","🥓","🥔","🥕","🥖","🥗","🥘","🥙","🥚","🥛","🥜","🥝","🥞","🥟","🥠","🥡","🥢","🥣","🥤","🥥","🥦","🥧","🥨","🥩","🥪","🥫","🥬","🥭","🥮","🥯","🥰","🥱","🥳","🥴","🥵","🥶","🥺"];var de=(n=>(n[n.TYPE=3]="TYPE",n[n.LEVEL=12]="LEVEL",n[n.ATTRIBUTE=13]="ATTRIBUTE",n[n.BLOT=14]="BLOT",n[n.INLINE=7]="INLINE",n[n.BLOCK=11]="BLOCK",n[n.BLOCK_BLOT=10]="BLOCK_BLOT",n[n.INLINE_BLOT=6]="INLINE_BLOT",n[n.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",n[n.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",n[n.ANY=15]="ANY",n))(de||{});class vs{constructor(t,e,r={}){this.attrName=t,this.keyName=e;const i=de.TYPE&de.ATTRIBUTE;this.scope=r.scope!=null?r.scope&de.LEVEL|i:de.ATTRIBUTE,r.whitelist!=null&&(this.whitelist=r.whitelist)}static keys(t){return Array.from(t.attributes).map(e=>e.name)}add(t,e){return this.canAdd(t,e)?(t.setAttribute(this.keyName,e),!0):!1}canAdd(t,e){return this.whitelist==null?!0:typeof e=="string"?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1}remove(t){t.removeAttribute(this.keyName)}value(t){const e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""}}class Oa extends Error{constructor(t){t="[Parchment] "+t,super(t),this.message=t,this.name=this.constructor.name}}const Op=class zh{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,e=!1){if(t==null)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(e){let r=null;try{r=t.parentNode}catch{return null}return this.find(r,e)}return null}create(t,e,r){const i=this.query(e);if(i==null)throw new Oa(`Unable to create ${e} blot`);const s=i,o=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:s.create(r),a=new s(t,o,r);return zh.blots.set(a.domNode,a),a}find(t,e=!1){return zh.find(t,e)}query(t,e=de.ANY){let r;return typeof t=="string"?r=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?r=this.types.text:typeof t=="number"?t&de.LEVEL&de.BLOCK?r=this.types.block:t&de.LEVEL&de.INLINE&&(r=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some(i=>(r=this.classes[i],!!r)),r=r||this.tags[t.tagName]),r==null?null:"scope"in r&&e&de.LEVEL&r.scope&&e&de.TYPE&r.scope?r:null}register(...t){return t.map(e=>{const r="blotName"in e,i="attrName"in e;if(!r&&!i)throw new Oa("Invalid definition");if(r&&e.blotName==="abstract")throw new Oa("Cannot register abstract class");const s=r?e.blotName:i?e.attrName:void 0;return this.types[s]=e,i?typeof e.keyName=="string"&&(this.attributes[e.keyName]=e):r&&(e.className&&(this.classes[e.className]=e),e.tagName&&(Array.isArray(e.tagName)?e.tagName=e.tagName.map(o=>o.toUpperCase()):e.tagName=e.tagName.toUpperCase(),(Array.isArray(e.tagName)?e.tagName:[e.tagName]).forEach(o=>{(this.tags[o]==null||e.className==null)&&(this.tags[o]=e)}))),e})}};Op.blots=new WeakMap;let Va=Op;function Xd(n,t){return(n.getAttribute("class")||"").split(/\s+/).filter(e=>e.indexOf(`${t}-`)===0)}class F5 extends vs{static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map(e=>e.split("-").slice(0,-1).join("-"))}add(t,e){return this.canAdd(t,e)?(this.remove(t),t.classList.add(`${this.keyName}-${e}`),!0):!1}remove(t){Xd(t,this.keyName).forEach(e=>{t.classList.remove(e)}),t.classList.length===0&&t.removeAttribute("class")}value(t){const e=(Xd(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""}}const Xi=F5;function uh(n){const t=n.split("-"),e=t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("");return t[0]+e}class B5 extends vs{static keys(t){return(t.getAttribute("style")||"").split(";").map(e=>e.split(":")[0].trim())}add(t,e){return this.canAdd(t,e)?(t.style[uh(this.keyName)]=e,!0):!1}remove(t){t.style[uh(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){const e=t.style[uh(this.keyName)];return this.canAdd(t,e)?e:""}}const Lo=B5;class U5{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,e){e?t.add(this.domNode,e)&&(t.value(this.domNode)!=null?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};const t=Va.find(this.domNode);if(t==null)return;const e=vs.keys(this.domNode),r=Xi.keys(this.domNode),i=Lo.keys(this.domNode);e.concat(r).concat(i).forEach(s=>{const o=t.scroll.query(s,de.ATTRIBUTE);o instanceof vs&&(this.attributes[o.attrName]=o)})}copy(t){Object.keys(this.attributes).forEach(e=>{const r=this.attributes[e].value(this.domNode);t.format(e,r)})}move(t){this.copy(t),Object.keys(this.attributes).forEach(e=>{this.attributes[e].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((t,e)=>(t[e]=this.attributes[e].value(this.domNode),t),{})}}const Su=U5,Tp=class{constructor(t,e){this.scroll=t,this.domNode=e,Va.blots.set(e,this),this.prev=null,this.next=null}static create(t){if(this.tagName==null)throw new Oa("Blot definition missing tagName");let e,r;return Array.isArray(this.tagName)?(typeof t=="string"?(r=t.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof t=="number"&&(r=t),typeof r=="number"?e=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?e=document.createElement(r):e=document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){const t=this.domNode.cloneNode(!1);return this.scroll.create(t)}detach(){this.parent!=null&&this.parent.removeChild(this),Va.blots.delete(this.domNode)}deleteAt(t,e){this.isolate(t,e).remove()}formatAt(t,e,r,i){const s=this.isolate(t,e);if(this.scroll.query(r,de.BLOT)!=null&&i)s.wrap(r,i);else if(this.scroll.query(r,de.ATTRIBUTE)!=null){const o=this.scroll.create(this.statics.scope);s.wrap(o),o.format(r,i)}}insertAt(t,e,r){const i=r==null?this.scroll.create("text",e):this.scroll.create(e,r),s=this.split(t);this.parent.insertBefore(i,s||void 0)}isolate(t,e){const r=this.split(t);if(r==null)throw new Error("Attempt to isolate at end");return r.split(e),r}length(){return 1}offset(t=this.parent){return this.parent==null||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)}optimize(t){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(t,e){const r=typeof t=="string"?this.scroll.create(t,e):t;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(t,e){return t===0?this:this.next}update(t,e){}wrap(t,e){const r=typeof t=="string"?this.scroll.create(t,e):t;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new Oa(`Cannot wrap ${t}`);return r.appendChild(this),r}};Tp.blotName="abstract";let Pp=Tp;const qp=class extends Pp{static value(t){return!0}index(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(t,e){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};qp.scope=de.INLINE_BLOT;let z5=qp;const Br=z5;class H5{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){const e=t.slice(1);this.append(...e)}}at(t){const e=this.iterator();let r=e();for(;r&&t>0;)t-=1,r=e();return r}contains(t){const e=this.iterator();let r=e();for(;r;){if(r===t)return!0;r=e()}return!1}indexOf(t){const e=this.iterator();let r=e(),i=0;for(;r;){if(r===t)return i;i+=1,r=e()}return-1}insertBefore(t,e){t!=null&&(this.remove(t),t.next=e,e!=null?(t.prev=e.prev,e.prev!=null&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):this.tail!=null?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let e=0,r=this.head;for(;r!=null;){if(r===t)return e;e+=r.length(),r=r.next}return-1}remove(t){this.contains(t)&&(t.prev!=null&&(t.prev.next=t.next),t.next!=null&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{const e=t;return t!=null&&(t=t.next),e}}find(t,e=!1){const r=this.iterator();let i=r();for(;i;){const s=i.length();if(t<s||e&&t===s&&(i.next==null||i.next.length()!==0))return[i,t];t-=s,i=r()}return[null,0]}forEach(t){const e=this.iterator();let r=e();for(;r;)t(r),r=e()}forEachAt(t,e,r){if(e<=0)return;const[i,s]=this.find(t);let o=t-s;const a=this.iterator(i);let c=a();for(;c&&o<t+e;){const u=c.length();t>o?r(c,t-o,Math.min(e,o+u-t)):r(c,0,Math.min(u,t+e-o)),o+=u,c=a()}}map(t){return this.reduce((e,r)=>(e.push(t(r)),e),[])}reduce(t,e){const r=this.iterator();let i=r();for(;i;)e=t(e,i),i=r();return e}}function Zd(n,t){const e=t.find(n);if(e)return e;try{return t.create(n)}catch{const r=t.create(de.INLINE);return Array.from(n.childNodes).forEach(i=>{r.domNode.appendChild(i)}),n.parentNode&&n.parentNode.replaceChild(r.domNode,n),r.attach(),r}}const Mp=class lo extends Pp{constructor(t,e){super(t,e),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach(t=>{t.attach()})}attachUI(t){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=t,lo.uiClass&&this.uiNode.classList.add(lo.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new H5,Array.from(this.domNode.childNodes).filter(t=>t!==this.uiNode).reverse().forEach(t=>{try{const e=Zd(t,this.scroll);this.insertBefore(e,this.children.head||void 0)}catch(e){if(e instanceof Oa)return;throw e}})}deleteAt(t,e){if(t===0&&e===this.length())return this.remove();this.children.forEachAt(t,e,(r,i,s)=>{r.deleteAt(i,s)})}descendant(t,e=0){const[r,i]=this.children.find(e);return t.blotName==null&&t(r)||t.blotName!=null&&r instanceof t?[r,i]:r instanceof lo?r.descendant(t,i):[null,-1]}descendants(t,e=0,r=Number.MAX_VALUE){let i=[],s=r;return this.children.forEachAt(e,r,(o,a,c)=>{(t.blotName==null&&t(o)||t.blotName!=null&&o instanceof t)&&i.push(o),o instanceof lo&&(i=i.concat(o.descendants(t,a,s))),s-=c}),i}detach(){this.children.forEach(t=>{t.detach()}),super.detach()}enforceAllowedChildren(){let t=!1;this.children.forEach(e=>{t||this.statics.allowedChildren.some(r=>e instanceof r)||(e.statics.scope===de.BLOCK_BLOT?(e.next!=null&&this.splitAfter(e),e.prev!=null&&this.splitAfter(e.prev),e.parent.unwrap(),t=!0):e instanceof lo?e.unwrap():e.remove())})}formatAt(t,e,r,i){this.children.forEachAt(t,e,(s,o,a)=>{s.formatAt(o,a,r,i)})}insertAt(t,e,r){const[i,s]=this.children.find(t);if(i)i.insertAt(s,e,r);else{const o=r==null?this.scroll.create("text",e):this.scroll.create(e,r);this.appendChild(o)}}insertBefore(t,e){t.parent!=null&&t.parent.children.remove(t);let r=null;this.children.insertBefore(t,e||null),t.parent=this,e!=null&&(r=e.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==r)&&this.domNode.insertBefore(t.domNode,r),t.attach()}length(){return this.children.reduce((t,e)=>t+e.length(),0)}moveChildren(t,e){this.children.forEach(r=>{t.insertBefore(r,e)})}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const e=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(e)}else this.remove()}path(t,e=!1){const[r,i]=this.children.find(t,e),s=[[this,t]];return r instanceof lo?s.concat(r.path(i,e)):(r!=null&&s.push([r,i]),s)}removeChild(t){this.children.remove(t)}replaceWith(t,e){const r=typeof t=="string"?this.scroll.create(t,e):t;return r instanceof lo&&this.moveChildren(r),super.replaceWith(r)}split(t,e=!1){if(!e){if(t===0)return this;if(t===this.length())return this.next}const r=this.clone();return this.parent&&this.parent.insertBefore(r,this.next||void 0),this.children.forEachAt(t,this.length(),(i,s,o)=>{const a=i.split(s,e);a!=null&&r.appendChild(a)}),r}splitAfter(t){const e=this.clone();for(;t.next!=null;)e.appendChild(t.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,e){const r=[],i=[];t.forEach(s=>{s.target===this.domNode&&s.type==="childList"&&(r.push(...s.addedNodes),i.push(...s.removedNodes))}),i.forEach(s=>{if(s.parentNode!=null&&s.tagName!=="IFRAME"&&document.body.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const o=this.scroll.find(s);o!=null&&(o.domNode.parentNode==null||o.domNode.parentNode===this.domNode)&&o.detach()}),r.filter(s=>s.parentNode===this.domNode&&s!==this.uiNode).sort((s,o)=>s===o?0:s.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(s=>{let o=null;s.nextSibling!=null&&(o=this.scroll.find(s.nextSibling));const a=Zd(s,this.scroll);(a.next!==o||a.next==null)&&(a.parent!=null&&a.parent.removeChild(this),this.insertBefore(a,o||void 0))}),this.enforceAllowedChildren()}};Mp.uiClass="";let V5=Mp;const Gi=V5;function $5(n,t){if(Object.keys(n).length!==Object.keys(t).length)return!1;for(const e in n)if(n[e]!==t[e])return!1;return!0}const va=class ya extends Gi{static create(t){return super.create(t)}static formats(t,e){const r=e.query(ya.blotName);if(!(r!=null&&t.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new Su(this.domNode)}format(t,e){if(t===this.statics.blotName&&!e)this.children.forEach(r=>{r instanceof ya||(r=r.wrap(ya.blotName,!0)),this.attributes.copy(r)}),this.unwrap();else{const r=this.scroll.query(t,de.INLINE);if(r==null)return;r instanceof vs?this.attributes.attribute(r,e):e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e)}}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(t[this.statics.blotName]=e),t}formatAt(t,e,r,i){this.formats()[r]!=null||this.scroll.query(r,de.ATTRIBUTE)?this.isolate(t,e).format(r,i):super.formatAt(t,e,r,i)}optimize(t){super.optimize(t);const e=this.formats();if(Object.keys(e).length===0)return this.unwrap();const r=this.next;r instanceof ya&&r.prev===this&&$5(e,r.formats())&&(r.moveChildren(this),r.remove())}replaceWith(t,e){const r=super.replaceWith(t,e);return this.attributes.copy(r),r}update(t,e){super.update(t,e),t.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}wrap(t,e){const r=super.wrap(t,e);return r instanceof ya&&this.attributes.move(r),r}};va.allowedChildren=[va,Br],va.blotName="inline",va.scope=de.INLINE_BLOT,va.tagName="SPAN";let W5=va;const Mf=W5,wa=class Hh extends Gi{static create(t){return super.create(t)}static formats(t,e){const r=e.query(Hh.blotName);if(!(r!=null&&t.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new Su(this.domNode)}format(t,e){const r=this.scroll.query(t,de.BLOCK);r!=null&&(r instanceof vs?this.attributes.attribute(r,e):t===this.statics.blotName&&!e?this.replaceWith(Hh.blotName):e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e))}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(t[this.statics.blotName]=e),t}formatAt(t,e,r,i){this.scroll.query(r,de.BLOCK)!=null?this.format(r,i):super.formatAt(t,e,r,i)}insertAt(t,e,r){if(r==null||this.scroll.query(e,de.INLINE)!=null)super.insertAt(t,e,r);else{const i=this.split(t);if(i!=null){const s=this.scroll.create(e,r);i.parent.insertBefore(s,i)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(t,e){const r=super.replaceWith(t,e);return this.attributes.copy(r),r}update(t,e){super.update(t,e),t.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}};wa.blotName="block",wa.scope=de.BLOCK_BLOT,wa.tagName="P",wa.allowedChildren=[Mf,wa,Br];let G5=wa;const Dl=G5,Vh=class extends Gi{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(t,e){super.deleteAt(t,e),this.enforceAllowedChildren()}formatAt(t,e,r,i){super.formatAt(t,e,r,i),this.enforceAllowedChildren()}insertAt(t,e,r){super.insertAt(t,e,r),this.enforceAllowedChildren()}optimize(t){super.optimize(t),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Vh.blotName="container",Vh.scope=de.BLOCK_BLOT;let K5=Vh;const Lu=K5;class Y5 extends Br{static formats(t,e){}format(t,e){super.formatAt(0,this.length(),t,e)}formatAt(t,e,r,i){t===0&&e===this.length()?this.format(r,i):super.formatAt(t,e,r,i)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const gi=Y5,J5={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},X5=100,_a=class extends Gi{constructor(t,e){super(null,e),this.registry=t,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,J5),this.attach()}create(t,e){return this.registry.create(this,t,e)}find(t,e=!1){const r=this.registry.find(t,e);return r?r.scroll===this?r:e?this.find(r.scroll.domNode.parentNode,!0):null:null}query(t,e=de.ANY){return this.registry.query(t,e)}register(...t){return this.registry.register(...t)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(t,e){this.update(),t===0&&e===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(t,e)}formatAt(t,e,r,i){this.update(),super.formatAt(t,e,r,i)}insertAt(t,e,r){this.update(),super.insertAt(t,e,r)}optimize(t=[],e={}){super.optimize(e);const r=e.mutationsMap||new WeakMap;let i=Array.from(this.observer.takeRecords());for(;i.length>0;)t.push(i.pop());const s=(c,u=!0)=>{c==null||c===this||c.domNode.parentNode!=null&&(r.has(c.domNode)||r.set(c.domNode,[]),u&&s(c.parent))},o=c=>{r.has(c.domNode)&&(c instanceof Gi&&c.children.forEach(o),r.delete(c.domNode),c.optimize(e))};let a=t;for(let c=0;a.length>0;c+=1){if(c>=X5)throw new Error("[Parchment] Maximum optimize iterations reached");for(a.forEach(u=>{const d=this.find(u.target,!0);d!=null&&(d.domNode===u.target&&(u.type==="childList"?(s(this.find(u.previousSibling,!1)),Array.from(u.addedNodes).forEach(p=>{const g=this.find(p,!1);s(g,!1),g instanceof Gi&&g.children.forEach(f=>{s(f,!1)})})):u.type==="attributes"&&s(d.prev)),s(d))}),this.children.forEach(o),a=Array.from(this.observer.takeRecords()),i=a.slice();i.length>0;)t.push(i.pop())}}update(t,e={}){t=t||this.observer.takeRecords();const r=new WeakMap;t.map(i=>{const s=this.find(i.target,!0);return s==null?null:r.has(s.domNode)?(r.get(s.domNode).push(i),null):(r.set(s.domNode,[i]),s)}).forEach(i=>{i!=null&&i!==this&&r.has(i.domNode)&&i.update(r.get(i.domNode)||[],e)}),e.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),e),this.optimize(t,e)}};_a.blotName="scroll",_a.defaultChild=Dl,_a.allowedChildren=[Dl,Lu],_a.scope=de.BLOCK_BLOT,_a.tagName="DIV";let Z5=_a;const Rf=Z5,$h=class Rp extends Br{static create(t){return document.createTextNode(t)}static value(t){return t.data}constructor(t,e){super(t,e),this.text=this.statics.value(this.domNode)}deleteAt(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)}index(t,e){return this.domNode===t?e:-1}insertAt(t,e,r){r==null?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,e,r)}length(){return this.text.length}optimize(t){super.optimize(t),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof Rp&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,e=!1){return[this.domNode,t]}split(t,e=!1){if(!e){if(t===0)return this;if(t===this.length())return this.next}const r=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(r,this.next||void 0),this.text=this.statics.value(this.domNode),r}update(t,e){t.some(r=>r.type==="characterData"&&r.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};$h.blotName="text",$h.scope=de.INLINE_BLOT;let Q5=$h;const hu=Q5,tm=Object.freeze(Object.defineProperty({__proto__:null,Attributor:vs,AttributorStore:Su,BlockBlot:Dl,ClassAttributor:Xi,ContainerBlot:Lu,EmbedBlot:gi,InlineBlot:Mf,LeafBlot:Br,ParentBlot:Gi,Registry:Va,Scope:de,ScrollBlot:Rf,StyleAttributor:Lo,TextBlot:hu},Symbol.toStringTag,{value:"Module"}));var Wh={exports:{}},fi=-1,Jr=1,vr=0;function jl(n,t,e,r,i){if(n===t)return n?[[vr,n]]:[];if(e!=null){var s=cm(n,t,e);if(s)return s}var o=Df(n,t),a=n.substring(0,o);n=n.substring(o),t=t.substring(o),o=ku(n,t);var c=n.substring(n.length-o);n=n.substring(0,n.length-o),t=t.substring(0,t.length-o);var u=em(n,t);return a&&u.unshift([vr,a]),c&&u.push([vr,c]),jf(u,i),r&&im(u),u}function em(n,t){var e;if(!n)return[[Jr,t]];if(!t)return[[fi,n]];var r=n.length>t.length?n:t,i=n.length>t.length?t:n,s=r.indexOf(i);if(s!==-1)return e=[[Jr,r.substring(0,s)],[vr,i],[Jr,r.substring(s+i.length)]],n.length>t.length&&(e[0][0]=e[2][0]=fi),e;if(i.length===1)return[[fi,n],[Jr,t]];var o=rm(n,t);if(o){var a=o[0],c=o[1],u=o[2],d=o[3],p=o[4],g=jl(a,u),f=jl(c,d);return g.concat([[vr,p]],f)}return nm(n,t)}function nm(n,t){for(var e=n.length,r=t.length,i=Math.ceil((e+r)/2),s=i,o=2*i,a=new Array(o),c=new Array(o),u=0;u<o;u++)a[u]=-1,c[u]=-1;a[s+1]=0,c[s+1]=0;for(var d=e-r,p=d%2!==0,g=0,f=0,v=0,x=0,S=0;S<i;S++){for(var y=-S+g;y<=S-f;y+=2){var A=s+y,w;y===-S||y!==S&&a[A-1]<a[A+1]?w=a[A+1]:w=a[A-1]+1;for(var k=w-y;w<e&&k<r&&n.charAt(w)===t.charAt(k);)w++,k++;if(a[A]=w,w>e)f+=2;else if(k>r)g+=2;else if(p){var T=s+d-y;if(T>=0&&T<o&&c[T]!==-1){var B=e-c[T];if(w>=B)return Qd(n,t,w,k)}}}for(var $=-S+v;$<=S-x;$+=2){var T=s+$,B;$===-S||$!==S&&c[T-1]<c[T+1]?B=c[T+1]:B=c[T-1]+1;for(var V=B-$;B<e&&V<r&&n.charAt(e-B-1)===t.charAt(r-V-1);)B++,V++;if(c[T]=B,B>e)x+=2;else if(V>r)v+=2;else if(!p){var A=s+d-$;if(A>=0&&A<o&&a[A]!==-1){var w=a[A],k=s+w-A;if(B=e-B,w>=B)return Qd(n,t,w,k)}}}}return[[fi,n],[Jr,t]]}function Qd(n,t,e,r){var i=n.substring(0,e),s=t.substring(0,r),o=n.substring(e),a=t.substring(r),c=jl(i,s),u=jl(o,a);return c.concat(u)}function Df(n,t){if(!n||!t||n.charAt(0)!==t.charAt(0))return 0;for(var e=0,r=Math.min(n.length,t.length),i=r,s=0;e<i;)n.substring(s,i)==t.substring(s,i)?(e=i,s=e):r=i,i=Math.floor((r-e)/2+e);return Dp(n.charCodeAt(i-1))&&i--,i}function t1(n,t){var e=n.length,r=t.length;if(e==0||r==0)return 0;e>r?n=n.substring(e-r):e<r&&(t=t.substring(0,e));var i=Math.min(e,r);if(n==t)return i;for(var s=0,o=1;;){var a=n.substring(i-o),c=t.indexOf(a);if(c==-1)return s;o+=c,(c==0||n.substring(i-o)==t.substring(0,o))&&(s=o,o++)}}function ku(n,t){if(!n||!t||n.slice(-1)!==t.slice(-1))return 0;for(var e=0,r=Math.min(n.length,t.length),i=r,s=0;e<i;)n.substring(n.length-i,n.length-s)==t.substring(t.length-i,t.length-s)?(e=i,s=e):r=i,i=Math.floor((r-e)/2+e);return jp(n.charCodeAt(n.length-i))&&i--,i}function rm(n,t){var e=n.length>t.length?n:t,r=n.length>t.length?t:n;if(e.length<4||r.length*2<e.length)return null;function i(f,v,x){for(var S=f.substring(x,x+Math.floor(f.length/4)),y=-1,A="",w,k,T,B;(y=v.indexOf(S,y+1))!==-1;){var $=Df(f.substring(x),v.substring(y)),V=ku(f.substring(0,x),v.substring(0,y));A.length<V+$&&(A=v.substring(y-V,y)+v.substring(y,y+$),w=f.substring(0,x-V),k=f.substring(x+$),T=v.substring(0,y-V),B=v.substring(y+$))}return A.length*2>=f.length?[w,k,T,B,A]:null}var s=i(e,r,Math.ceil(e.length/4)),o=i(e,r,Math.ceil(e.length/2)),a;if(!s&&!o)return null;o?s?a=s[4].length>o[4].length?s:o:a=o:a=s;var c,u,d,p;n.length>t.length?(c=a[0],u=a[1],d=a[2],p=a[3]):(d=a[0],p=a[1],c=a[2],u=a[3]);var g=a[4];return[c,u,d,p,g]}function im(n){for(var t=!1,e=[],r=0,i=null,s=0,o=0,a=0,c=0,u=0;s<n.length;)n[s][0]==vr?(e[r++]=s,o=c,a=u,c=0,u=0,i=n[s][1]):(n[s][0]==Jr?c+=n[s][1].length:u+=n[s][1].length,i&&i.length<=Math.max(o,a)&&i.length<=Math.max(c,u)&&(n.splice(e[r-1],0,[fi,i]),n[e[r-1]+1][0]=Jr,r--,r--,s=r>0?e[r-1]:-1,o=0,a=0,c=0,u=0,i=null,t=!0)),s++;for(t&&jf(n),am(n),s=1;s<n.length;){if(n[s-1][0]==fi&&n[s][0]==Jr){var d=n[s-1][1],p=n[s][1],g=t1(d,p),f=t1(p,d);g>=f?(g>=d.length/2||g>=p.length/2)&&(n.splice(s,0,[vr,p.substring(0,g)]),n[s-1][1]=d.substring(0,d.length-g),n[s+1][1]=p.substring(g),s++):(f>=d.length/2||f>=p.length/2)&&(n.splice(s,0,[vr,d.substring(0,f)]),n[s-1][0]=Jr,n[s-1][1]=p.substring(0,p.length-f),n[s+1][0]=fi,n[s+1][1]=d.substring(f),s++),s++}s++}}var e1=/[^a-zA-Z0-9]/,n1=/\s/,r1=/[\r\n]/,sm=/\n\r?\n$/,om=/^\r?\n\r?\n/;function am(n){function t(f,v){if(!f||!v)return 6;var x=f.charAt(f.length-1),S=v.charAt(0),y=x.match(e1),A=S.match(e1),w=y&&x.match(n1),k=A&&S.match(n1),T=w&&x.match(r1),B=k&&S.match(r1),$=T&&f.match(sm),V=B&&v.match(om);return $||V?5:T||B?4:y&&!w&&k?3:w||k?2:y||A?1:0}for(var e=1;e<n.length-1;){if(n[e-1][0]==vr&&n[e+1][0]==vr){var r=n[e-1][1],i=n[e][1],s=n[e+1][1],o=ku(r,i);if(o){var a=i.substring(i.length-o);r=r.substring(0,r.length-o),i=a+i.substring(0,i.length-o),s=a+s}for(var c=r,u=i,d=s,p=t(r,i)+t(i,s);i.charAt(0)===s.charAt(0);){r+=i.charAt(0),i=i.substring(1)+s.charAt(0),s=s.substring(1);var g=t(r,i)+t(i,s);g>=p&&(p=g,c=r,u=i,d=s)}n[e-1][1]!=c&&(c?n[e-1][1]=c:(n.splice(e-1,1),e--),n[e][1]=u,d?n[e+1][1]=d:(n.splice(e+1,1),e--))}e++}}function jf(n,t){n.push([vr,""]);for(var e=0,r=0,i=0,s="",o="",a;e<n.length;){if(e<n.length-1&&!n[e][1]){n.splice(e,1);continue}switch(n[e][0]){case Jr:i++,o+=n[e][1],e++;break;case fi:r++,s+=n[e][1],e++;break;case vr:var c=e-i-r-1;if(t){if(c>=0&&Bp(n[c][1])){var u=n[c][1].slice(-1);if(n[c][1]=n[c][1].slice(0,-1),s=u+s,o=u+o,!n[c][1]){n.splice(c,1),e--;var d=c-1;n[d]&&n[d][0]===Jr&&(i++,o=n[d][1]+o,d--),n[d]&&n[d][0]===fi&&(r++,s=n[d][1]+s,d--),c=d}}if(Fp(n[e][1])){var u=n[e][1].charAt(0);n[e][1]=n[e][1].slice(1),s+=u,o+=u}}if(e<n.length-1&&!n[e][1]){n.splice(e,1);break}if(s.length>0||o.length>0){s.length>0&&o.length>0&&(a=Df(o,s),a!==0&&(c>=0?n[c][1]+=o.substring(0,a):(n.splice(0,0,[vr,o.substring(0,a)]),e++),o=o.substring(a),s=s.substring(a)),a=ku(o,s),a!==0&&(n[e][1]=o.substring(o.length-a)+n[e][1],o=o.substring(0,o.length-a),s=s.substring(0,s.length-a)));var p=i+r;s.length===0&&o.length===0?(n.splice(e-p,p),e=e-p):s.length===0?(n.splice(e-p,p,[Jr,o]),e=e-p+1):o.length===0?(n.splice(e-p,p,[fi,s]),e=e-p+1):(n.splice(e-p,p,[fi,s],[Jr,o]),e=e-p+2)}e!==0&&n[e-1][0]===vr?(n[e-1][1]+=n[e][1],n.splice(e,1)):e++,i=0,r=0,s="",o="";break}}n[n.length-1][1]===""&&n.pop();var g=!1;for(e=1;e<n.length-1;)n[e-1][0]===vr&&n[e+1][0]===vr&&(n[e][1].substring(n[e][1].length-n[e-1][1].length)===n[e-1][1]?(n[e][1]=n[e-1][1]+n[e][1].substring(0,n[e][1].length-n[e-1][1].length),n[e+1][1]=n[e-1][1]+n[e+1][1],n.splice(e-1,1),g=!0):n[e][1].substring(0,n[e+1][1].length)==n[e+1][1]&&(n[e-1][1]+=n[e+1][1],n[e][1]=n[e][1].substring(n[e+1][1].length)+n[e+1][1],n.splice(e+1,1),g=!0)),e++;g&&jf(n,t)}function Dp(n){return n>=55296&&n<=56319}function jp(n){return n>=56320&&n<=57343}function Fp(n){return jp(n.charCodeAt(0))}function Bp(n){return Dp(n.charCodeAt(n.length-1))}function lm(n){for(var t=[],e=0;e<n.length;e++)n[e][1].length>0&&t.push(n[e]);return t}function hh(n,t,e,r){return Bp(n)||Fp(r)?null:lm([[vr,n],[fi,t],[Jr,e],[vr,r]])}function cm(n,t,e){var r=typeof e=="number"?{index:e,length:0}:e.oldRange,i=typeof e=="number"?null:e.newRange,s=n.length,o=t.length;if(r.length===0&&(i===null||i.length===0)){var a=r.index,c=n.slice(0,a),u=n.slice(a),d=i?i.index:null;t:{var p=a+o-s;if(d!==null&&d!==p||p<0||p>o)break t;var g=t.slice(0,p),f=t.slice(p);if(f!==u)break t;var v=Math.min(a,p),x=c.slice(0,v),S=g.slice(0,v);if(x!==S)break t;var y=c.slice(v),A=g.slice(v);return hh(x,y,A,u)}t:{if(d!==null&&d!==a)break t;var w=a,g=t.slice(0,w),f=t.slice(w);if(g!==c)break t;var k=Math.min(s-w,o-w),T=u.slice(u.length-k),B=f.slice(f.length-k);if(T!==B)break t;var y=u.slice(0,u.length-k),A=f.slice(0,f.length-k);return hh(c,y,A,T)}}if(r.length>0&&i&&i.length===0)t:{var x=n.slice(0,r.index),T=n.slice(r.index+r.length),v=x.length,k=T.length;if(o<v+k)break t;var S=t.slice(0,v),B=t.slice(o-k);if(x!==S||T!==B)break t;var y=n.slice(v,s-k),A=t.slice(v,o-k);return hh(x,y,A,T)}return null}function Eu(n,t,e,r){return jl(n,t,e,r,!0)}Eu.INSERT=Jr;Eu.DELETE=fi;Eu.EQUAL=vr;var um=Eu,fu={exports:{}};fu.exports;(function(n,t){var e=200,r="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",o="[object Array]",a="[object Boolean]",c="[object Date]",u="[object Error]",d="[object Function]",p="[object GeneratorFunction]",g="[object Map]",f="[object Number]",v="[object Object]",x="[object Promise]",S="[object RegExp]",y="[object Set]",A="[object String]",w="[object Symbol]",k="[object WeakMap]",T="[object ArrayBuffer]",B="[object DataView]",$="[object Float32Array]",V="[object Float64Array]",nt="[object Int8Array]",ct="[object Int16Array]",q="[object Int32Array]",D="[object Uint8Array]",W="[object Uint8ClampedArray]",z="[object Uint16Array]",Q="[object Uint32Array]",Z=/[\\^$.*+?()[\]{}|]/g,lt=/\w*$/,rt=/^\[object .+?Constructor\]$/,mt=/^(?:0|[1-9]\d*)$/,ht={};ht[s]=ht[o]=ht[T]=ht[B]=ht[a]=ht[c]=ht[$]=ht[V]=ht[nt]=ht[ct]=ht[q]=ht[g]=ht[f]=ht[v]=ht[S]=ht[y]=ht[A]=ht[w]=ht[D]=ht[W]=ht[z]=ht[Q]=!0,ht[u]=ht[d]=ht[k]=!1;var Dt=typeof fo=="object"&&fo&&fo.Object===Object&&fo,I=typeof self=="object"&&self&&self.Object===Object&&self,j=Dt||I||Function("return this")(),Y=t&&!t.nodeType&&t,L=Y&&!0&&n&&!n.nodeType&&n,M=L&&L.exports===Y;function H(_,F){return _.set(F[0],F[1]),_}function G(_,F){return _.add(F),_}function et(_,F){for(var tt=-1,Lt=_?_.length:0;++tt<Lt&&F(_[tt],tt,_)!==!1;);return _}function wt(_,F){for(var tt=-1,Lt=F.length,ve=_.length;++tt<Lt;)_[ve+tt]=F[tt];return _}function bt(_,F,tt,Lt){var ve=-1,he=_?_.length:0;for(Lt&&he&&(tt=_[++ve]);++ve<he;)tt=F(tt,_[ve],ve,_);return tt}function Ct(_,F){for(var tt=-1,Lt=Array(_);++tt<_;)Lt[tt]=F(tt);return Lt}function Et(_,F){return _==null?void 0:_[F]}function Ut(_){var F=!1;if(_!=null&&typeof _.toString!="function")try{F=!!(_+"")}catch{}return F}function _t(_){var F=-1,tt=Array(_.size);return _.forEach(function(Lt,ve){tt[++F]=[ve,Lt]}),tt}function J(_,F){return function(tt){return _(F(tt))}}function ae(_){var F=-1,tt=Array(_.size);return _.forEach(function(Lt){tt[++F]=Lt}),tt}var Vt=Array.prototype,Nt=Function.prototype,pt=Object.prototype,It=j["__core-js_shared__"],Mt=function(){var _=/[^.]+$/.exec(It&&It.keys&&It.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""}(),Ht=Nt.toString,zt=pt.hasOwnProperty,Zt=pt.toString,Jt=RegExp("^"+Ht.call(zt).replace(Z,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=M?j.Buffer:void 0,se=j.Symbol,Xt=j.Uint8Array,Kt=J(Object.getPrototypeOf,Object),$t=Object.create,cn=pt.propertyIsEnumerable,Fe=Vt.splice,Hn=Object.getOwnPropertySymbols,He=te?te.isBuffer:void 0,tn=J(Object.keys,Object),Rn=nr(j,"DataView"),Le=nr(j,"Map"),_n=nr(j,"Promise"),De=nr(j,"Set"),rn=nr(j,"WeakMap"),sn=nr(Object,"create"),Xe=Mn(Rn),ce=Mn(Le),Oe=Mn(_n),Yn=Mn(De),gn=Mn(rn),On=se?se.prototype:void 0,Jn=On?On.valueOf:void 0;function ee(_){var F=-1,tt=_?_.length:0;for(this.clear();++F<tt;){var Lt=_[F];this.set(Lt[0],Lt[1])}}function ln(){this.__data__=sn?sn(null):{}}function mn(_){return this.has(_)&&delete this.__data__[_]}function An(_){var F=this.__data__;if(sn){var tt=F[_];return tt===r?void 0:tt}return zt.call(F,_)?F[_]:void 0}function Ke(_){var F=this.__data__;return sn?F[_]!==void 0:zt.call(F,_)}function en(_,F){var tt=this.__data__;return tt[_]=sn&&F===void 0?r:F,this}ee.prototype.clear=ln,ee.prototype.delete=mn,ee.prototype.get=An,ee.prototype.has=Ke,ee.prototype.set=en;function Te(_){var F=-1,tt=_?_.length:0;for(this.clear();++F<tt;){var Lt=_[F];this.set(Lt[0],Lt[1])}}function kr(){this.__data__=[]}function wr(_){var F=this.__data__,tt=Wt(F,_);if(tt<0)return!1;var Lt=F.length-1;return tt==Lt?F.pop():Fe.call(F,tt,1),!0}function Tn(_){var F=this.__data__,tt=Wt(F,_);return tt<0?void 0:F[tt][1]}function Sn(_){return Wt(this.__data__,_)>-1}function Xn(_,F){var tt=this.__data__,Lt=Wt(tt,_);return Lt<0?tt.push([_,F]):tt[Lt][1]=F,this}Te.prototype.clear=kr,Te.prototype.delete=wr,Te.prototype.get=Tn,Te.prototype.has=Sn,Te.prototype.set=Xn;function Ve(_){var F=-1,tt=_?_.length:0;for(this.clear();++F<tt;){var Lt=_[F];this.set(Lt[0],Lt[1])}}function Zn(){this.__data__={hash:new ee,map:new(Le||Te),string:new ee}}function Dn(_){return er(this,_).delete(_)}function Vn(_){return er(this,_).get(_)}function Hr(_){return er(this,_).has(_)}function dt(_,F){return er(this,_).set(_,F),this}Ve.prototype.clear=Zn,Ve.prototype.delete=Dn,Ve.prototype.get=Vn,Ve.prototype.has=Hr,Ve.prototype.set=dt;function At(_){this.__data__=new Te(_)}function Ft(){this.__data__=new Te}function Qt(_){return this.__data__.delete(_)}function qe(_){return this.__data__.get(_)}function Ne(_){return this.__data__.has(_)}function ot(_,F){var tt=this.__data__;if(tt instanceof Te){var Lt=tt.__data__;if(!Le||Lt.length<e-1)return Lt.push([_,F]),this;tt=this.__data__=new Ve(Lt)}return tt.set(_,F),this}At.prototype.clear=Ft,At.prototype.delete=Qt,At.prototype.get=qe,At.prototype.has=Ne,At.prototype.set=ot;function xt(_,F){var tt=Ss(_)||rs(_)?Ct(_.length,String):[],Lt=tt.length,ve=!!Lt;for(var he in _)(F||zt.call(_,he))&&!(ve&&(he=="length"||Vr(he,Lt)))&&tt.push(he);return tt}function Bt(_,F,tt){var Lt=_[F];(!(zt.call(_,F)&&we(Lt,tt))||tt===void 0&&!(F in _))&&(_[F]=tt)}function Wt(_,F){for(var tt=_.length;tt--;)if(we(_[tt][0],F))return tt;return-1}function pe(_,F){return _&&bn(F,ks(F),_)}function Me(_,F,tt,Lt,ve,he,Ue){var We;if(Lt&&(We=he?Lt(_,ve,he,Ue):Lt(_)),We!==void 0)return We;if(!Xr(_))return _;var Pn=Ss(_);if(Pn){if(We=ns(_),!F)return Ee(_,We)}else{var je=Fn(_),kn=je==d||je==p;if(Ls(_))return Qn(_,F);if(je==v||je==s||kn&&!he){if(Ut(_))return he?_:{};if(We=mr(kn?{}:_),!F)return on(_,pe(We,_))}else{if(!ht[je])return he?_:{};We=Er(_,je,Me,F)}}Ue||(Ue=new At);var _r=Ue.get(_);if(_r)return _r;if(Ue.set(_,We),!Pn)var vn=tt?gr(_):ks(_);return et(vn||_,function(yn,Bn){vn&&(Bn=yn,yn=_[Bn]),Bt(We,Bn,Me(yn,F,tt,Lt,Bn,_,Ue))}),We}function Ze(_){return Xr(_)?$t(_):{}}function Se(_,F,tt){var Lt=F(_);return Ss(_)?Lt:wt(Lt,tt(_))}function un(_){return Zt.call(_)}function _e(_){if(!Xr(_)||qi(_))return!1;var F=mi(_)||Ut(_)?Jt:rt;return F.test(Mn(_))}function dr(_){if(!Ln(_))return tn(_);var F=[];for(var tt in Object(_))zt.call(_,tt)&&tt!="constructor"&&F.push(tt);return F}function Qn(_,F){if(F)return _.slice();var tt=new _.constructor(_.length);return _.copy(tt),tt}function pr(_){var F=new _.constructor(_.byteLength);return new Xt(F).set(new Xt(_)),F}function ue(_,F){var tt=F?pr(_.buffer):_.buffer;return new _.constructor(tt,_.byteOffset,_.byteLength)}function Be(_,F,tt){var Lt=F?tt(_t(_),!0):_t(_);return bt(Lt,H,new _.constructor)}function $e(_){var F=new _.constructor(_.source,lt.exec(_));return F.lastIndex=_.lastIndex,F}function ye(_,F,tt){var Lt=F?tt(ae(_),!0):ae(_);return bt(Lt,G,new _.constructor)}function me(_){return Jn?Object(Jn.call(_)):{}}function tr(_,F){var tt=F?pr(_.buffer):_.buffer;return new _.constructor(tt,_.byteOffset,_.length)}function Ee(_,F){var tt=-1,Lt=_.length;for(F||(F=Array(Lt));++tt<Lt;)F[tt]=_[tt];return F}function bn(_,F,tt,Lt){tt||(tt={});for(var ve=-1,he=F.length;++ve<he;){var Ue=F[ve],We=Lt?Lt(tt[Ue],_[Ue],Ue,tt,_):void 0;Bt(tt,Ue,We===void 0?_[Ue]:We)}return tt}function on(_,F){return bn(_,jn(_),F)}function gr(_){return Se(_,ks,jn)}function er(_,F){var tt=_.__data__;return $r(F)?tt[typeof F=="string"?"string":"hash"]:tt.map}function nr(_,F){var tt=Et(_,F);return _e(tt)?tt:void 0}var jn=Hn?J(Hn,Object):Es,Fn=un;(Rn&&Fn(new Rn(new ArrayBuffer(1)))!=B||Le&&Fn(new Le)!=g||_n&&Fn(_n.resolve())!=x||De&&Fn(new De)!=y||rn&&Fn(new rn)!=k)&&(Fn=function(_){var F=Zt.call(_),tt=F==v?_.constructor:void 0,Lt=tt?Mn(tt):void 0;if(Lt)switch(Lt){case Xe:return B;case ce:return g;case Oe:return x;case Yn:return y;case gn:return k}return F});function ns(_){var F=_.length,tt=_.constructor(F);return F&&typeof _[0]=="string"&&zt.call(_,"index")&&(tt.index=_.index,tt.input=_.input),tt}function mr(_){return typeof _.constructor=="function"&&!Ln(_)?Ze(Kt(_)):{}}function Er(_,F,tt,Lt){var ve=_.constructor;switch(F){case T:return pr(_);case a:case c:return new ve(+_);case B:return ue(_,Lt);case $:case V:case nt:case ct:case q:case D:case W:case z:case Q:return tr(_,Lt);case g:return Be(_,Lt,tt);case f:case A:return new ve(_);case S:return $e(_);case y:return ye(_,Lt,tt);case w:return me(_)}}function Vr(_,F){return F=F??i,!!F&&(typeof _=="number"||mt.test(_))&&_>-1&&_%1==0&&_<F}function $r(_){var F=typeof _;return F=="string"||F=="number"||F=="symbol"||F=="boolean"?_!=="__proto__":_===null}function qi(_){return!!Mt&&Mt in _}function Ln(_){var F=_&&_.constructor,tt=typeof F=="function"&&F.prototype||pt;return _===tt}function Mn(_){if(_!=null){try{return Ht.call(_)}catch{}try{return _+""}catch{}}return""}function Ns(_){return Me(_,!0,!0)}function we(_,F){return _===F||_!==_&&F!==F}function rs(_){return Ws(_)&&zt.call(_,"callee")&&(!cn.call(_,"callee")||Zt.call(_)==s)}var Ss=Array.isArray;function Cr(_){return _!=null&&is(_.length)&&!mi(_)}function Ws(_){return Gs(_)&&Cr(_)}var Ls=He||Mi;function mi(_){var F=Xr(_)?Zt.call(_):"";return F==d||F==p}function is(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=i}function Xr(_){var F=typeof _;return!!_&&(F=="object"||F=="function")}function Gs(_){return!!_&&typeof _=="object"}function ks(_){return Cr(_)?xt(_):dr(_)}function Es(){return[]}function Mi(){return!1}n.exports=Ns})(fu,fu.exports);var Up=fu.exports,du={exports:{}};du.exports;(function(n,t){var e=200,r="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",c="[object Array]",u="[object AsyncFunction]",d="[object Boolean]",p="[object Date]",g="[object Error]",f="[object Function]",v="[object GeneratorFunction]",x="[object Map]",S="[object Number]",y="[object Null]",A="[object Object]",w="[object Promise]",k="[object Proxy]",T="[object RegExp]",B="[object Set]",$="[object String]",V="[object Symbol]",nt="[object Undefined]",ct="[object WeakMap]",q="[object ArrayBuffer]",D="[object DataView]",W="[object Float32Array]",z="[object Float64Array]",Q="[object Int8Array]",Z="[object Int16Array]",lt="[object Int32Array]",rt="[object Uint8Array]",mt="[object Uint8ClampedArray]",ht="[object Uint16Array]",Dt="[object Uint32Array]",I=/[\\^$.*+?()[\]{}|]/g,j=/^\[object .+?Constructor\]$/,Y=/^(?:0|[1-9]\d*)$/,L={};L[W]=L[z]=L[Q]=L[Z]=L[lt]=L[rt]=L[mt]=L[ht]=L[Dt]=!0,L[a]=L[c]=L[q]=L[d]=L[D]=L[p]=L[g]=L[f]=L[x]=L[S]=L[A]=L[T]=L[B]=L[$]=L[ct]=!1;var M=typeof fo=="object"&&fo&&fo.Object===Object&&fo,H=typeof self=="object"&&self&&self.Object===Object&&self,G=M||H||Function("return this")(),et=t&&!t.nodeType&&t,wt=et&&!0&&n&&!n.nodeType&&n,bt=wt&&wt.exports===et,Ct=bt&&M.process,Et=function(){try{return Ct&&Ct.binding&&Ct.binding("util")}catch{}}(),Ut=Et&&Et.isTypedArray;function _t(_,F){for(var tt=-1,Lt=_==null?0:_.length,ve=0,he=[];++tt<Lt;){var Ue=_[tt];F(Ue,tt,_)&&(he[ve++]=Ue)}return he}function J(_,F){for(var tt=-1,Lt=F.length,ve=_.length;++tt<Lt;)_[ve+tt]=F[tt];return _}function ae(_,F){for(var tt=-1,Lt=_==null?0:_.length;++tt<Lt;)if(F(_[tt],tt,_))return!0;return!1}function Vt(_,F){for(var tt=-1,Lt=Array(_);++tt<_;)Lt[tt]=F(tt);return Lt}function Nt(_){return function(F){return _(F)}}function pt(_,F){return _.has(F)}function It(_,F){return _==null?void 0:_[F]}function Mt(_){var F=-1,tt=Array(_.size);return _.forEach(function(Lt,ve){tt[++F]=[ve,Lt]}),tt}function Ht(_,F){return function(tt){return _(F(tt))}}function zt(_){var F=-1,tt=Array(_.size);return _.forEach(function(Lt){tt[++F]=Lt}),tt}var Zt=Array.prototype,Jt=Function.prototype,te=Object.prototype,se=G["__core-js_shared__"],Xt=Jt.toString,Kt=te.hasOwnProperty,$t=function(){var _=/[^.]+$/.exec(se&&se.keys&&se.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""}(),cn=te.toString,Fe=RegExp("^"+Xt.call(Kt).replace(I,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Hn=bt?G.Buffer:void 0,He=G.Symbol,tn=G.Uint8Array,Rn=te.propertyIsEnumerable,Le=Zt.splice,_n=He?He.toStringTag:void 0,De=Object.getOwnPropertySymbols,rn=Hn?Hn.isBuffer:void 0,sn=Ht(Object.keys,Object),Xe=jn(G,"DataView"),ce=jn(G,"Map"),Oe=jn(G,"Promise"),Yn=jn(G,"Set"),gn=jn(G,"WeakMap"),On=jn(Object,"create"),Jn=Mn(Xe),ee=Mn(ce),ln=Mn(Oe),mn=Mn(Yn),An=Mn(gn),Ke=He?He.prototype:void 0,en=Ke?Ke.valueOf:void 0;function Te(_){var F=-1,tt=_==null?0:_.length;for(this.clear();++F<tt;){var Lt=_[F];this.set(Lt[0],Lt[1])}}function kr(){this.__data__=On?On(null):{},this.size=0}function wr(_){var F=this.has(_)&&delete this.__data__[_];return this.size-=F?1:0,F}function Tn(_){var F=this.__data__;if(On){var tt=F[_];return tt===r?void 0:tt}return Kt.call(F,_)?F[_]:void 0}function Sn(_){var F=this.__data__;return On?F[_]!==void 0:Kt.call(F,_)}function Xn(_,F){var tt=this.__data__;return this.size+=this.has(_)?0:1,tt[_]=On&&F===void 0?r:F,this}Te.prototype.clear=kr,Te.prototype.delete=wr,Te.prototype.get=Tn,Te.prototype.has=Sn,Te.prototype.set=Xn;function Ve(_){var F=-1,tt=_==null?0:_.length;for(this.clear();++F<tt;){var Lt=_[F];this.set(Lt[0],Lt[1])}}function Zn(){this.__data__=[],this.size=0}function Dn(_){var F=this.__data__,tt=Qn(F,_);if(tt<0)return!1;var Lt=F.length-1;return tt==Lt?F.pop():Le.call(F,tt,1),--this.size,!0}function Vn(_){var F=this.__data__,tt=Qn(F,_);return tt<0?void 0:F[tt][1]}function Hr(_){return Qn(this.__data__,_)>-1}function dt(_,F){var tt=this.__data__,Lt=Qn(tt,_);return Lt<0?(++this.size,tt.push([_,F])):tt[Lt][1]=F,this}Ve.prototype.clear=Zn,Ve.prototype.delete=Dn,Ve.prototype.get=Vn,Ve.prototype.has=Hr,Ve.prototype.set=dt;function At(_){var F=-1,tt=_==null?0:_.length;for(this.clear();++F<tt;){var Lt=_[F];this.set(Lt[0],Lt[1])}}function Ft(){this.size=0,this.__data__={hash:new Te,map:new(ce||Ve),string:new Te}}function Qt(_){var F=nr(this,_).delete(_);return this.size-=F?1:0,F}function qe(_){return nr(this,_).get(_)}function Ne(_){return nr(this,_).has(_)}function ot(_,F){var tt=nr(this,_),Lt=tt.size;return tt.set(_,F),this.size+=tt.size==Lt?0:1,this}At.prototype.clear=Ft,At.prototype.delete=Qt,At.prototype.get=qe,At.prototype.has=Ne,At.prototype.set=ot;function xt(_){var F=-1,tt=_==null?0:_.length;for(this.__data__=new At;++F<tt;)this.add(_[F])}function Bt(_){return this.__data__.set(_,r),this}function Wt(_){return this.__data__.has(_)}xt.prototype.add=xt.prototype.push=Bt,xt.prototype.has=Wt;function pe(_){var F=this.__data__=new Ve(_);this.size=F.size}function Me(){this.__data__=new Ve,this.size=0}function Ze(_){var F=this.__data__,tt=F.delete(_);return this.size=F.size,tt}function Se(_){return this.__data__.get(_)}function un(_){return this.__data__.has(_)}function _e(_,F){var tt=this.__data__;if(tt instanceof Ve){var Lt=tt.__data__;if(!ce||Lt.length<e-1)return Lt.push([_,F]),this.size=++tt.size,this;tt=this.__data__=new At(Lt)}return tt.set(_,F),this.size=tt.size,this}pe.prototype.clear=Me,pe.prototype.delete=Ze,pe.prototype.get=Se,pe.prototype.has=un,pe.prototype.set=_e;function dr(_,F){var tt=rs(_),Lt=!tt&&we(_),ve=!tt&&!Lt&&Cr(_),he=!tt&&!Lt&&!ve&&Gs(_),Ue=tt||Lt||ve||he,We=Ue?Vt(_.length,String):[],Pn=We.length;for(var je in _)(F||Kt.call(_,je))&&!(Ue&&(je=="length"||ve&&(je=="offset"||je=="parent")||he&&(je=="buffer"||je=="byteLength"||je=="byteOffset")||Er(je,Pn)))&&We.push(je);return We}function Qn(_,F){for(var tt=_.length;tt--;)if(Ns(_[tt][0],F))return tt;return-1}function pr(_,F,tt){var Lt=F(_);return rs(_)?Lt:J(Lt,tt(_))}function ue(_){return _==null?_===void 0?nt:y:_n&&_n in Object(_)?Fn(_):Ln(_)}function Be(_){return Xr(_)&&ue(_)==a}function $e(_,F,tt,Lt,ve){return _===F?!0:_==null||F==null||!Xr(_)&&!Xr(F)?_!==_&&F!==F:ye(_,F,tt,Lt,$e,ve)}function ye(_,F,tt,Lt,ve,he){var Ue=rs(_),We=rs(F),Pn=Ue?c:mr(_),je=We?c:mr(F);Pn=Pn==a?A:Pn,je=je==a?A:je;var kn=Pn==A,_r=je==A,vn=Pn==je;if(vn&&Cr(_)){if(!Cr(F))return!1;Ue=!0,kn=!1}if(vn&&!kn)return he||(he=new pe),Ue||Gs(_)?bn(_,F,tt,Lt,ve,he):on(_,F,Pn,tt,Lt,ve,he);if(!(tt&i)){var yn=kn&&Kt.call(_,"__wrapped__"),Bn=_r&&Kt.call(F,"__wrapped__");if(yn||Bn){var qr=yn?_.value():_,ii=Bn?F.value():F;return he||(he=new pe),ve(qr,ii,tt,Lt,he)}}return vn?(he||(he=new pe),gr(_,F,tt,Lt,ve,he)):!1}function me(_){if(!is(_)||$r(_))return!1;var F=Ls(_)?Fe:j;return F.test(Mn(_))}function tr(_){return Xr(_)&&mi(_.length)&&!!L[ue(_)]}function Ee(_){if(!qi(_))return sn(_);var F=[];for(var tt in Object(_))Kt.call(_,tt)&&tt!="constructor"&&F.push(tt);return F}function bn(_,F,tt,Lt,ve,he){var Ue=tt&i,We=_.length,Pn=F.length;if(We!=Pn&&!(Ue&&Pn>We))return!1;var je=he.get(_);if(je&&he.get(F))return je==F;var kn=-1,_r=!0,vn=tt&s?new xt:void 0;for(he.set(_,F),he.set(F,_);++kn<We;){var yn=_[kn],Bn=F[kn];if(Lt)var qr=Ue?Lt(Bn,yn,kn,F,_,he):Lt(yn,Bn,kn,_,F,he);if(qr!==void 0){if(qr)continue;_r=!1;break}if(vn){if(!ae(F,function(ii,Zr){if(!pt(vn,Zr)&&(yn===ii||ve(yn,ii,tt,Lt,he)))return vn.push(Zr)})){_r=!1;break}}else if(!(yn===Bn||ve(yn,Bn,tt,Lt,he))){_r=!1;break}}return he.delete(_),he.delete(F),_r}function on(_,F,tt,Lt,ve,he,Ue){switch(tt){case D:if(_.byteLength!=F.byteLength||_.byteOffset!=F.byteOffset)return!1;_=_.buffer,F=F.buffer;case q:return!(_.byteLength!=F.byteLength||!he(new tn(_),new tn(F)));case d:case p:case S:return Ns(+_,+F);case g:return _.name==F.name&&_.message==F.message;case T:case $:return _==F+"";case x:var We=Mt;case B:var Pn=Lt&i;if(We||(We=zt),_.size!=F.size&&!Pn)return!1;var je=Ue.get(_);if(je)return je==F;Lt|=s,Ue.set(_,F);var kn=bn(We(_),We(F),Lt,ve,he,Ue);return Ue.delete(_),kn;case V:if(en)return en.call(_)==en.call(F)}return!1}function gr(_,F,tt,Lt,ve,he){var Ue=tt&i,We=er(_),Pn=We.length,je=er(F),kn=je.length;if(Pn!=kn&&!Ue)return!1;for(var _r=Pn;_r--;){var vn=We[_r];if(!(Ue?vn in F:Kt.call(F,vn)))return!1}var yn=he.get(_);if(yn&&he.get(F))return yn==F;var Bn=!0;he.set(_,F),he.set(F,_);for(var qr=Ue;++_r<Pn;){vn=We[_r];var ii=_[vn],Zr=F[vn];if(Lt)var Qo=Ue?Lt(Zr,ii,vn,F,_,he):Lt(ii,Zr,vn,_,F,he);if(!(Qo===void 0?ii===Zr||ve(ii,Zr,tt,Lt,he):Qo)){Bn=!1;break}qr||(qr=vn=="constructor")}if(Bn&&!qr){var ss=_.constructor,os=F.constructor;ss!=os&&"constructor"in _&&"constructor"in F&&!(typeof ss=="function"&&ss instanceof ss&&typeof os=="function"&&os instanceof os)&&(Bn=!1)}return he.delete(_),he.delete(F),Bn}function er(_){return pr(_,ks,ns)}function nr(_,F){var tt=_.__data__;return Vr(F)?tt[typeof F=="string"?"string":"hash"]:tt.map}function jn(_,F){var tt=It(_,F);return me(tt)?tt:void 0}function Fn(_){var F=Kt.call(_,_n),tt=_[_n];try{_[_n]=void 0;var Lt=!0}catch{}var ve=cn.call(_);return Lt&&(F?_[_n]=tt:delete _[_n]),ve}var ns=De?function(_){return _==null?[]:(_=Object(_),_t(De(_),function(F){return Rn.call(_,F)}))}:Es,mr=ue;(Xe&&mr(new Xe(new ArrayBuffer(1)))!=D||ce&&mr(new ce)!=x||Oe&&mr(Oe.resolve())!=w||Yn&&mr(new Yn)!=B||gn&&mr(new gn)!=ct)&&(mr=function(_){var F=ue(_),tt=F==A?_.constructor:void 0,Lt=tt?Mn(tt):"";if(Lt)switch(Lt){case Jn:return D;case ee:return x;case ln:return w;case mn:return B;case An:return ct}return F});function Er(_,F){return F=F??o,!!F&&(typeof _=="number"||Y.test(_))&&_>-1&&_%1==0&&_<F}function Vr(_){var F=typeof _;return F=="string"||F=="number"||F=="symbol"||F=="boolean"?_!=="__proto__":_===null}function $r(_){return!!$t&&$t in _}function qi(_){var F=_&&_.constructor,tt=typeof F=="function"&&F.prototype||te;return _===tt}function Ln(_){return cn.call(_)}function Mn(_){if(_!=null){try{return Xt.call(_)}catch{}try{return _+""}catch{}}return""}function Ns(_,F){return _===F||_!==_&&F!==F}var we=Be(function(){return arguments}())?Be:function(_){return Xr(_)&&Kt.call(_,"callee")&&!Rn.call(_,"callee")},rs=Array.isArray;function Ss(_){return _!=null&&mi(_.length)&&!Ls(_)}var Cr=rn||Mi;function Ws(_,F){return $e(_,F)}function Ls(_){if(!is(_))return!1;var F=ue(_);return F==f||F==v||F==u||F==k}function mi(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=o}function is(_){var F=typeof _;return _!=null&&(F=="object"||F=="function")}function Xr(_){return _!=null&&typeof _=="object"}var Gs=Ut?Nt(Ut):tr;function ks(_){return Ss(_)?dr(_):Ee(_)}function Es(){return[]}function Mi(){return!1}n.exports=Ws})(du,du.exports);var zp=du.exports,Ff={};Object.defineProperty(Ff,"__esModule",{value:!0});const hm=Up,fm=zp;var Gh;(function(n){function t(s={},o={},a=!1){typeof s!="object"&&(s={}),typeof o!="object"&&(o={});let c=hm(o);a||(c=Object.keys(c).reduce((u,d)=>(c[d]!=null&&(u[d]=c[d]),u),{}));for(const u in s)s[u]!==void 0&&o[u]===void 0&&(c[u]=s[u]);return Object.keys(c).length>0?c:void 0}n.compose=t;function e(s={},o={}){typeof s!="object"&&(s={}),typeof o!="object"&&(o={});const a=Object.keys(s).concat(Object.keys(o)).reduce((c,u)=>(fm(s[u],o[u])||(c[u]=o[u]===void 0?null:o[u]),c),{});return Object.keys(a).length>0?a:void 0}n.diff=e;function r(s={},o={}){s=s||{};const a=Object.keys(o).reduce((c,u)=>(o[u]!==s[u]&&s[u]!==void 0&&(c[u]=o[u]),c),{});return Object.keys(s).reduce((c,u)=>(s[u]!==o[u]&&o[u]===void 0&&(c[u]=null),c),a)}n.invert=r;function i(s,o,a=!1){if(typeof s!="object")return o;if(typeof o!="object")return;if(!a)return o;const c=Object.keys(o).reduce((u,d)=>(s[d]===void 0&&(u[d]=o[d]),u),{});return Object.keys(c).length>0?c:void 0}n.transform=i})(Gh||(Gh={}));Ff.default=Gh;var Cu={};Object.defineProperty(Cu,"__esModule",{value:!0});var Kh;(function(n){function t(e){return typeof e.delete=="number"?e.delete:typeof e.retain=="number"?e.retain:typeof e.retain=="object"&&e.retain!==null?1:typeof e.insert=="string"?e.insert.length:1}n.length=t})(Kh||(Kh={}));Cu.default=Kh;var Bf={};Object.defineProperty(Bf,"__esModule",{value:!0});const i1=Cu;class dm{constructor(t){this.ops=t,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(t){t||(t=1/0);const e=this.ops[this.index];if(e){const r=this.offset,i=i1.default.length(e);if(t>=i-r?(t=i-r,this.index+=1,this.offset=0):this.offset+=t,typeof e.delete=="number")return{delete:t};{const s={};return e.attributes&&(s.attributes=e.attributes),typeof e.retain=="number"?s.retain=t:typeof e.retain=="object"&&e.retain!==null?s.retain=e.retain:typeof e.insert=="string"?s.insert=e.insert.substr(r,t):s.insert=e.insert,s}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?i1.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const t=this.ops[this.index];return t?typeof t.delete=="number"?"delete":typeof t.retain=="number"||typeof t.retain=="object"&&t.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const t=this.offset,e=this.index,r=this.next(),i=this.ops.slice(this.index);return this.offset=t,this.index=e,[r].concat(i)}}else return[]}}Bf.default=dm;(function(n,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeMap=t.OpIterator=t.Op=void 0;const e=um,r=Up,i=zp,s=Ff;t.AttributeMap=s.default;const o=Cu;t.Op=o.default;const a=Bf;t.OpIterator=a.default;const c=String.fromCharCode(0),u=(p,g)=>{if(typeof p!="object"||p===null)throw new Error(`cannot retain a ${typeof p}`);if(typeof g!="object"||g===null)throw new Error(`cannot retain a ${typeof g}`);const f=Object.keys(p)[0];if(!f||f!==Object.keys(g)[0])throw new Error(`embed types not matched: ${f} != ${Object.keys(g)[0]}`);return[f,p[f],g[f]]};class d{constructor(g){Array.isArray(g)?this.ops=g:g!=null&&Array.isArray(g.ops)?this.ops=g.ops:this.ops=[]}static registerEmbed(g,f){this.handlers[g]=f}static unregisterEmbed(g){delete this.handlers[g]}static getHandler(g){const f=this.handlers[g];if(!f)throw new Error(`no handlers for embed type "${g}"`);return f}insert(g,f){const v={};return typeof g=="string"&&g.length===0?this:(v.insert=g,f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(v.attributes=f),this.push(v))}delete(g){return g<=0?this:this.push({delete:g})}retain(g,f){if(typeof g=="number"&&g<=0)return this;const v={retain:g};return f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(v.attributes=f),this.push(v)}push(g){let f=this.ops.length,v=this.ops[f-1];if(g=r(g),typeof v=="object"){if(typeof g.delete=="number"&&typeof v.delete=="number")return this.ops[f-1]={delete:v.delete+g.delete},this;if(typeof v.delete=="number"&&g.insert!=null&&(f-=1,v=this.ops[f-1],typeof v!="object"))return this.ops.unshift(g),this;if(i(g.attributes,v.attributes)){if(typeof g.insert=="string"&&typeof v.insert=="string")return this.ops[f-1]={insert:v.insert+g.insert},typeof g.attributes=="object"&&(this.ops[f-1].attributes=g.attributes),this;if(typeof g.retain=="number"&&typeof v.retain=="number")return this.ops[f-1]={retain:v.retain+g.retain},typeof g.attributes=="object"&&(this.ops[f-1].attributes=g.attributes),this}}return f===this.ops.length?this.ops.push(g):this.ops.splice(f,0,g),this}chop(){const g=this.ops[this.ops.length-1];return g&&typeof g.retain=="number"&&!g.attributes&&this.ops.pop(),this}filter(g){return this.ops.filter(g)}forEach(g){this.ops.forEach(g)}map(g){return this.ops.map(g)}partition(g){const f=[],v=[];return this.forEach(x=>{(g(x)?f:v).push(x)}),[f,v]}reduce(g,f){return this.ops.reduce(g,f)}changeLength(){return this.reduce((g,f)=>f.insert?g+o.default.length(f):f.delete?g-f.delete:g,0)}length(){return this.reduce((g,f)=>g+o.default.length(f),0)}slice(g=0,f=1/0){const v=[],x=new a.default(this.ops);let S=0;for(;S<f&&x.hasNext();){let y;S<g?y=x.next(g-S):(y=x.next(f-S),v.push(y)),S+=o.default.length(y)}return new d(v)}compose(g){const f=new a.default(this.ops),v=new a.default(g.ops),x=[],S=v.peek();if(S!=null&&typeof S.retain=="number"&&S.attributes==null){let A=S.retain;for(;f.peekType()==="insert"&&f.peekLength()<=A;)A-=f.peekLength(),x.push(f.next());S.retain-A>0&&v.next(S.retain-A)}const y=new d(x);for(;f.hasNext()||v.hasNext();)if(v.peekType()==="insert")y.push(v.next());else if(f.peekType()==="delete")y.push(f.next());else{const A=Math.min(f.peekLength(),v.peekLength()),w=f.next(A),k=v.next(A);if(k.retain){const T={};if(typeof w.retain=="number")T.retain=typeof k.retain=="number"?A:k.retain;else if(typeof k.retain=="number")w.retain==null?T.insert=w.insert:T.retain=w.retain;else{const $=w.retain==null?"insert":"retain",[V,nt,ct]=u(w[$],k.retain),q=d.getHandler(V);T[$]={[V]:q.compose(nt,ct,$==="retain")}}const B=s.default.compose(w.attributes,k.attributes,typeof w.retain=="number");if(B&&(T.attributes=B),y.push(T),!v.hasNext()&&i(y.ops[y.ops.length-1],T)){const $=new d(f.rest());return y.concat($).chop()}}else typeof k.delete=="number"&&(typeof w.retain=="number"||typeof w.retain=="object"&&w.retain!==null)&&y.push(k)}return y.chop()}concat(g){const f=new d(this.ops.slice());return g.ops.length>0&&(f.push(g.ops[0]),f.ops=f.ops.concat(g.ops.slice(1))),f}diff(g,f){if(this.ops===g.ops)return new d;const v=[this,g].map(w=>w.map(k=>{if(k.insert!=null)return typeof k.insert=="string"?k.insert:c;const T=w===g?"on":"with";throw new Error("diff() called "+T+" non-document")}).join("")),x=new d,S=e(v[0],v[1],f,!0),y=new a.default(this.ops),A=new a.default(g.ops);return S.forEach(w=>{let k=w[1].length;for(;k>0;){let T=0;switch(w[0]){case e.INSERT:T=Math.min(A.peekLength(),k),x.push(A.next(T));break;case e.DELETE:T=Math.min(k,y.peekLength()),y.next(T),x.delete(T);break;case e.EQUAL:T=Math.min(y.peekLength(),A.peekLength(),k);const B=y.next(T),$=A.next(T);i(B.insert,$.insert)?x.retain(T,s.default.diff(B.attributes,$.attributes)):x.push($).delete(T);break}k-=T}}),x.chop()}eachLine(g,f=`
`){const v=new a.default(this.ops);let x=new d,S=0;for(;v.hasNext();){if(v.peekType()!=="insert")return;const y=v.peek(),A=o.default.length(y)-v.peekLength(),w=typeof y.insert=="string"?y.insert.indexOf(f,A)-A:-1;if(w<0)x.push(v.next());else if(w>0)x.push(v.next(w));else{if(g(x,v.next(1).attributes||{},S)===!1)return;S+=1,x=new d}}x.length()>0&&g(x,{},S)}invert(g){const f=new d;return this.reduce((v,x)=>{if(x.insert)f.delete(o.default.length(x));else{if(typeof x.retain=="number"&&x.attributes==null)return f.retain(x.retain),v+x.retain;if(x.delete||typeof x.retain=="number"){const S=x.delete||x.retain;return g.slice(v,v+S).forEach(A=>{x.delete?f.push(A):x.retain&&x.attributes&&f.retain(o.default.length(A),s.default.invert(x.attributes,A.attributes))}),v+S}else if(typeof x.retain=="object"&&x.retain!==null){const S=g.slice(v,v+1),y=new a.default(S.ops).next(),[A,w,k]=u(x.retain,y.insert),T=d.getHandler(A);return f.retain({[A]:T.invert(w,k)},s.default.invert(x.attributes,y.attributes)),v+1}}return v},0),f.chop()}transform(g,f=!1){if(f=!!f,typeof g=="number")return this.transformPosition(g,f);const v=g,x=new a.default(this.ops),S=new a.default(v.ops),y=new d;for(;x.hasNext()||S.hasNext();)if(x.peekType()==="insert"&&(f||S.peekType()!=="insert"))y.retain(o.default.length(x.next()));else if(S.peekType()==="insert")y.push(S.next());else{const A=Math.min(x.peekLength(),S.peekLength()),w=x.next(A),k=S.next(A);if(w.delete)continue;if(k.delete)y.push(k);else{const T=w.retain,B=k.retain;let $=typeof B=="object"&&B!==null?B:A;if(typeof T=="object"&&T!==null&&typeof B=="object"&&B!==null){const V=Object.keys(T)[0];if(V===Object.keys(B)[0]){const nt=d.getHandler(V);nt&&($={[V]:nt.transform(T[V],B[V],f)})}}y.retain($,s.default.transform(w.attributes,k.attributes,f))}}return y.chop()}transformPosition(g,f=!1){f=!!f;const v=new a.default(this.ops);let x=0;for(;v.hasNext()&&x<=g;){const S=v.peekLength(),y=v.peekType();if(v.next(),y==="delete"){g-=Math.min(S,g-x);continue}else y==="insert"&&(x<g||!f)&&(g+=S);x+=S}return g}}d.Op=o.default,d.OpIterator=a.default,d.AttributeMap=s.default,d.handlers={},t.default=d,n.exports=d,n.exports.default=d})(Wh,Wh.exports);var Pi=Wh.exports;const fe=Pf(Pi);class Zi extends gi{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}Zi.blotName="break";Zi.tagName="BR";let Yi=class extends hu{};function Iu(n){return n.replace(/[&<>"']/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[t])}const fs=class fs extends Mf{static compare(t,e){const r=fs.order.indexOf(t),i=fs.order.indexOf(e);return r>=0||i>=0?r-i:t===e?0:t<e?-1:1}formatAt(t,e,r,i){if(fs.compare(this.statics.blotName,r)<0&&this.scroll.query(r,de.BLOT)){const s=this.isolate(t,e);i&&s.wrap(r,i)}else super.formatAt(t,e,r,i)}optimize(t){if(super.optimize(t),this.parent instanceof fs&&fs.compare(this.statics.blotName,this.parent.statics.blotName)>0){const e=this.parent.isolate(this.offset(),this.length());this.moveChildren(e),e.wrap(this)}}};re(fs,"allowedChildren",[fs,Zi,gi,Yi]),re(fs,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);let ys=fs;const s1=1;class Tr extends Dl{constructor(){super(...arguments);re(this,"cache",{})}delta(){return this.cache.delta==null&&(this.cache.delta=Hp(this)),this.cache.delta}deleteAt(e,r){super.deleteAt(e,r),this.cache={}}formatAt(e,r,i,s){r<=0||(this.scroll.query(i,de.BLOCK)?e+r===this.length()&&this.format(i,s):super.formatAt(e,Math.min(r,this.length()-e-1),i,s),this.cache={})}insertAt(e,r,i){if(i!=null){super.insertAt(e,r,i),this.cache={};return}if(r.length===0)return;const s=r.split(`
`),o=s.shift();o.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),o):this.children.tail.insertAt(this.children.tail.length(),o),this.cache={});let a=this;s.reduce((c,u)=>(a=a.split(c,!0),a.insertAt(0,u),u.length),e+o.length)}insertBefore(e,r){const{head:i}=this.children;super.insertBefore(e,r),i instanceof Zi&&i.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+s1),this.cache.length}moveChildren(e,r){super.moveChildren(e,r),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r&&(e===0||e>=this.length()-s1)){const s=this.clone();return e===0?(this.parent.insertBefore(s,this),this):(this.parent.insertBefore(s,this.next),s)}const i=super.split(e,r);return this.cache={},i}}Tr.blotName="block";Tr.tagName="P";Tr.defaultChild=Zi;Tr.allowedChildren=[Zi,ys,gi,Yi];class Ci extends gi{attach(){super.attach(),this.attributes=new Su(this.domNode)}delta(){return new fe().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(t,e){const r=this.scroll.query(t,de.BLOCK_ATTRIBUTE);r!=null&&this.attributes.attribute(r,e)}formatAt(t,e,r,i){this.format(r,i)}insertAt(t,e,r){if(r!=null){super.insertAt(t,e,r);return}const i=e.split(`
`),s=i.pop(),o=i.map(c=>{const u=this.scroll.create(Tr.blotName);return u.insertAt(0,c),u}),a=this.split(t);o.forEach(c=>{this.parent.insertBefore(c,a)}),s&&this.parent.insertBefore(this.scroll.create("text",s),a)}}Ci.scope=de.BLOCK_BLOT;function Hp(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n.descendants(Br).reduce((e,r)=>r.length()===0?e:e.insert(r.value(),Li(r,{},t)),new fe).insert(`
`,Li(n))}function Li(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return n==null||("formats"in n&&typeof n.formats=="function"&&(t={...t,...n.formats()},e&&delete t["code-token"]),n.parent==null||n.parent.statics.blotName==="scroll"||n.parent.statics.scope!==n.statics.scope)?t:Li(n.parent,t,e)}const Ni=class Ni extends gi{static value(){}constructor(t,e,r){super(t,e),this.selection=r,this.textNode=document.createTextNode(Ni.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(t,e){if(this.savedLength!==0){super.format(t,e);return}let r=this,i=0;for(;r!=null&&r.statics.scope!==de.BLOCK_BLOT;)i+=r.offset(r.parent),r=r.parent;r!=null&&(this.savedLength=Ni.CONTENTS.length,r.optimize(),r.formatAt(i,Ni.CONTENTS.length,t,e),this.savedLength=0)}index(t,e){return t===this.textNode?0:super.index(t,e)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const t=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const e=this.prev instanceof Yi?this.prev:null,r=e?e.length():0,i=this.next instanceof Yi?this.next:null,s=i?i.text:"",{textNode:o}=this,a=o.data.split(Ni.CONTENTS).join("");o.data=Ni.CONTENTS;let c;if(e)c=e,(a||i)&&(e.insertAt(e.length(),a+s),i&&i.remove());else if(i)c=i,i.insertAt(0,a);else{const u=document.createTextNode(a);c=this.scroll.create(u),this.parent.insertBefore(c,this)}if(this.remove(),t){const u=(g,f)=>e&&g===e.domNode?f:g===o?r+f-1:i&&g===i.domNode?r+a.length+f:null,d=u(t.start.node,t.start.offset),p=u(t.end.node,t.end.offset);if(d!==null&&p!==null)return{startNode:c.domNode,startOffset:d,endNode:c.domNode,endOffset:p}}return null}update(t,e){if(t.some(r=>r.type==="characterData"&&r.target===this.textNode)){const r=this.restore();r&&(e.range=r)}}optimize(t){super.optimize(t);let{parent:e}=this;for(;e;){if(e.domNode.tagName==="A"){this.savedLength=Ni.CONTENTS.length,e.isolate(this.offset(e),this.length()).unwrap(),this.savedLength=0;break}e=e.parent}}value(){return""}};re(Ni,"blotName","cursor"),re(Ni,"className","ql-cursor"),re(Ni,"tagName","span"),re(Ni,"CONTENTS","\uFEFF");let $a=Ni;var Vp={exports:{}};(function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,p,g){if(typeof d!="function")throw new TypeError("The listener must be a function");var f=new i(d,p||c,g),v=e?e+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],f]:c._events[v].push(f):(c._events[v]=f,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],d,p;if(this._eventsCount===0)return u;for(p in d=this._events)t.call(d,p)&&u.push(e?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},a.prototype.listeners=function(u){var d=e?e+u:u,p=this._events[d];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,f=p.length,v=new Array(f);g<f;g++)v[g]=p[g].fn;return v},a.prototype.listenerCount=function(u){var d=e?e+u:u,p=this._events[d];return p?p.fn?1:p.length:0},a.prototype.emit=function(u,d,p,g,f,v){var x=e?e+u:u;if(!this._events[x])return!1;var S=this._events[x],y=arguments.length,A,w;if(S.fn){switch(S.once&&this.removeListener(u,S.fn,void 0,!0),y){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,d),!0;case 3:return S.fn.call(S.context,d,p),!0;case 4:return S.fn.call(S.context,d,p,g),!0;case 5:return S.fn.call(S.context,d,p,g,f),!0;case 6:return S.fn.call(S.context,d,p,g,f,v),!0}for(w=1,A=new Array(y-1);w<y;w++)A[w-1]=arguments[w];S.fn.apply(S.context,A)}else{var k=S.length,T;for(w=0;w<k;w++)switch(S[w].once&&this.removeListener(u,S[w].fn,void 0,!0),y){case 1:S[w].fn.call(S[w].context);break;case 2:S[w].fn.call(S[w].context,d);break;case 3:S[w].fn.call(S[w].context,d,p);break;case 4:S[w].fn.call(S[w].context,d,p,g);break;default:if(!A)for(T=1,A=new Array(y-1);T<y;T++)A[T-1]=arguments[T];S[w].fn.apply(S[w].context,A)}}return!0},a.prototype.on=function(u,d,p){return s(this,u,d,p,!1)},a.prototype.once=function(u,d,p){return s(this,u,d,p,!0)},a.prototype.removeListener=function(u,d,p,g){var f=e?e+u:u;if(!this._events[f])return this;if(!d)return o(this,f),this;var v=this._events[f];if(v.fn)v.fn===d&&(!g||v.once)&&(!p||v.context===p)&&o(this,f);else{for(var x=0,S=[],y=v.length;x<y;x++)(v[x].fn!==d||g&&!v[x].once||p&&v[x].context!==p)&&S.push(v[x]);S.length?this._events[f]=S.length===1?S[0]:S:o(this,f)}return this},a.prototype.removeAllListeners=function(u){var d;return u?(d=e?e+u:u,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,n.exports=a})(Vp);var pm=Vp.exports;const gm=Pf(pm),Yh=new WeakMap,Jh=["error","warn","log","info"];let Xh="warn";function $p(n){if(Xh&&Jh.indexOf(n)<=Jh.indexOf(Xh)){for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];console[n](...e)}}function Vs(n){return Jh.reduce((t,e)=>(t[e]=$p.bind(console,e,n),t),{})}Vs.level=n=>{Xh=n};$p.level=Vs.level;const fh=Vs("quill:events"),mm=["selectionchange","mousedown","mouseup","click"];mm.forEach(n=>{document.addEventListener(n,function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];Array.from(document.querySelectorAll(".ql-container")).forEach(i=>{const s=Yh.get(i);s&&s.emitter&&s.emitter.handleDOM(...e)})})});class oe extends gm{constructor(){super(),this.domListeners={},this.on("error",fh.error)}emit(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return fh.log.call(fh,...e),super.emit(...e)}handleDOM(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];(this.domListeners[t.type]||[]).forEach(s=>{let{node:o,handler:a}=s;(t.target===o||o.contains(t.target))&&a(t,...r)})}listenDOM(t,e,r){this.domListeners[t]||(this.domListeners[t]=[]),this.domListeners[t].push({node:e,handler:r})}}re(oe,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),re(oe,"sources",{API:"api",SILENT:"silent",USER:"user"});const dh=Vs("quill:selection");class Uo{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=t,this.length=e}}class bm{constructor(t,e){this.emitter=e,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new Uo(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,oe.sources.USER),1)}),this.emitter.on(oe.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const r=this.getNativeRange();r!=null&&r.start.node!==this.cursor.textNode&&this.emitter.once(oe.events.SCROLL_UPDATE,(i,s)=>{try{this.root.contains(r.start.node)&&this.root.contains(r.end.node)&&this.setNativeRange(r.start.node,r.start.offset,r.end.node,r.end.offset);const o=s.some(a=>a.type==="characterData"||a.type==="childList"||a.type==="attributes"&&a.target===this.root);this.update(o?oe.sources.SILENT:i)}catch{}})}),this.emitter.on(oe.events.SCROLL_OPTIMIZE,(r,i)=>{if(i.range){const{startNode:s,startOffset:o,endNode:a,endOffset:c}=i.range;this.setNativeRange(s,o,a,c),this.update(oe.sources.SILENT)}}),this.update(oe.sources.SILENT)}handleComposition(){this.emitter.on(oe.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(oe.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const t=this.cursor.restore();if(!t)return;setTimeout(()=>{this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(oe.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(t,e){this.scroll.update();const r=this.getNativeRange();if(!(r==null||!r.native.collapsed||this.scroll.query(t,de.BLOCK))){if(r.start.node!==this.cursor.textNode){const i=this.scroll.find(r.start.node,!1);if(i==null)return;if(i instanceof Br){const s=i.split(r.start.offset);i.parent.insertBefore(this.cursor,s)}else i.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const r=this.scroll.length();t=Math.min(t,r-1),e=Math.min(t+e,r-1)-t;let i,[s,o]=this.scroll.leaf(t);if(s==null)return null;if(e>0&&o===s.length()){const[d]=this.scroll.leaf(t+1);if(d){const[p]=this.scroll.line(t),[g]=this.scroll.line(t+1);p===g&&(s=d,o=0)}}[i,o]=s.position(o,!0);const a=document.createRange();if(e>0)return a.setStart(i,o),[s,o]=this.scroll.leaf(t+e),s==null?null:([i,o]=s.position(o,!0),a.setEnd(i,o),a.getBoundingClientRect());let c="left",u;if(i instanceof Text){if(!i.data.length)return null;o<i.data.length?(a.setStart(i,o),a.setEnd(i,o+1)):(a.setStart(i,o-1),a.setEnd(i,o),c="right"),u=a.getBoundingClientRect()}else{if(!(s.domNode instanceof Element))return null;u=s.domNode.getBoundingClientRect(),o>0&&(c="right")}return{bottom:u.top+u.height,height:u.height,left:u[c],right:u[c],top:u.top,width:0}}getNativeRange(){const t=document.getSelection();if(t==null||t.rangeCount<=0)return null;const e=t.getRangeAt(0);if(e==null)return null;const r=this.normalizeNative(e);return dh.info("getNativeRange",r),r}getRange(){const t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];const e=this.getNativeRange();return e==null?[null,null]:[this.normalizedToRange(e),e]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&ph(this.root,document.activeElement)}normalizedToRange(t){const e=[[t.start.node,t.start.offset]];t.native.collapsed||e.push([t.end.node,t.end.offset]);const r=e.map(o=>{const[a,c]=o,u=this.scroll.find(a,!0),d=u.offset(this.scroll);return c===0?d:u instanceof Br?d+u.index(a,c):d+u.length()}),i=Math.min(Math.max(...r),this.scroll.length()-1),s=Math.min(i,...r);return new Uo(s,i-s)}normalizeNative(t){if(!ph(this.root,t.startContainer)||!t.collapsed&&!ph(this.root,t.endContainer))return null;const e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach(r=>{let{node:i,offset:s}=r;for(;!(i instanceof Text)&&i.childNodes.length>0;)if(i.childNodes.length>s)i=i.childNodes[s],s=0;else if(i.childNodes.length===s)i=i.lastChild,i instanceof Text?s=i.data.length:i.childNodes.length>0?s=i.childNodes.length:s=i.childNodes.length+1;else break;r.node=i,r.offset=s}),e}rangeToNative(t){const e=this.scroll.length(),r=(i,s)=>{i=Math.min(e-1,i);const[o,a]=this.scroll.leaf(i);return o?o.position(a,s):[null,-1]};return[...r(t.index,!1),...r(t.index+t.length,!0)]}setNativeRange(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(dh.info("setNativeRange",t,e,r,i),t!=null&&(this.root.parentNode==null||t.parentNode==null||r.parentNode==null))return;const o=document.getSelection();if(o!=null)if(t!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:a}=this.getNativeRange()||{};if(a==null||s||t!==a.startContainer||e!==a.startOffset||r!==a.endContainer||i!==a.endOffset){t instanceof Element&&t.tagName==="BR"&&(e=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),r instanceof Element&&r.tagName==="BR"&&(i=Array.from(r.parentNode.childNodes).indexOf(r),r=r.parentNode);const c=document.createRange();c.setStart(t,e),c.setEnd(r,i),o.removeAllRanges(),o.addRange(c)}}else o.removeAllRanges(),this.root.blur()}setRange(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:oe.sources.API;if(typeof e=="string"&&(r=e,e=!1),dh.info("setRange",t),t!=null){const i=this.rangeToNative(t);this.setNativeRange(...i,e)}else this.setNativeRange(null);this.update(r)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:oe.sources.USER;const e=this.lastRange,[r,i]=this.getRange();if(this.lastRange=r,this.lastNative=i,this.lastRange!=null&&(this.savedRange=this.lastRange),!qf(e,this.lastRange)){if(!this.composing&&i!=null&&i.native.collapsed&&i.start.node!==this.cursor.textNode){const o=this.cursor.restore();o&&this.setNativeRange(o.startNode,o.startOffset,o.endNode,o.endOffset)}const s=[oe.events.SELECTION_CHANGE,Ia(this.lastRange),Ia(e),t];this.emitter.emit(oe.events.EDITOR_CHANGE,...s),t!==oe.sources.SILENT&&this.emitter.emit(...s)}}}function ph(n,t){try{t.parentNode}catch{return!1}return n.contains(t)}const vm=/^[ -~]*$/;class ym{constructor(t){this.scroll=t,this.delta=this.getDelta()}applyDelta(t){this.scroll.update();let e=this.scroll.length();this.scroll.batchStart();const r=o1(t),i=new fe;return _m(r.ops.slice()).reduce((o,a)=>{const c=Pi.Op.length(a);let u=a.attributes||{},d=!1,p=!1;if(a.insert!=null){if(i.retain(c),typeof a.insert=="string"){const v=a.insert;p=!v.endsWith(`
`)&&(e<=o||!!this.scroll.descendant(Ci,o)[0]),this.scroll.insertAt(o,v);const[x,S]=this.scroll.line(o);let y=vo({},Li(x));if(x instanceof Tr){const[A]=x.descendant(Br,S);A&&(y=vo(y,Li(A)))}u=Pi.AttributeMap.diff(y,u)||{}}else if(typeof a.insert=="object"){const v=Object.keys(a.insert)[0];if(v==null)return o;const x=this.scroll.query(v,de.INLINE)!=null;if(x)(e<=o||this.scroll.descendant(Ci,o)[0])&&(p=!0);else if(o>0){const[S,y]=this.scroll.descendant(Br,o-1);S instanceof Yi?S.value()[y]!==`
`&&(d=!0):S instanceof gi&&S.statics.scope===de.INLINE_BLOT&&(d=!0)}if(this.scroll.insertAt(o,v,a.insert[v]),x){const[S]=this.scroll.descendant(Br,o);if(S){const y=vo({},Li(S));u=Pi.AttributeMap.diff(y,u)||{}}}}e+=c}else if(i.push(a),a.retain!==null&&typeof a.retain=="object"){const v=Object.keys(a.retain)[0];if(v==null)return o;this.scroll.updateEmbedAt(o,v,a.retain[v])}Object.keys(u).forEach(v=>{this.scroll.formatAt(o,c,v,u[v])});const g=d?1:0,f=p?1:0;return e+=g+f,i.retain(g),i.delete(f),o+c+g+f},0),i.reduce((o,a)=>typeof a.delete=="number"?(this.scroll.deleteAt(o,a.delete),o):o+Pi.Op.length(a),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(r)}deleteText(t,e){return this.scroll.deleteAt(t,e),this.update(new fe().retain(t).delete(e))}formatLine(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(r).forEach(s=>{this.scroll.lines(t,Math.max(e,1)).forEach(o=>{o.format(s,r[s])})}),this.scroll.optimize();const i=new fe().retain(t).retain(e,Ia(r));return this.update(i)}formatText(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(r).forEach(s=>{this.scroll.formatAt(t,e,s,r[s])});const i=new fe().retain(t).retain(e,Ia(r));return this.update(i)}getContents(t,e){return this.delta.slice(t,t+e)}getDelta(){return this.scroll.lines().reduce((t,e)=>t.concat(e.delta()),new fe)}getFormat(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[],i=[];e===0?this.scroll.path(t).forEach(a=>{const[c]=a;c instanceof Tr?r.push(c):c instanceof Br&&i.push(c)}):(r=this.scroll.lines(t,e),i=this.scroll.descendants(Br,t,e));const[s,o]=[r,i].map(a=>{const c=a.shift();if(c==null)return{};let u=Li(c);for(;Object.keys(u).length>0;){const d=a.shift();if(d==null)return u;u=wm(Li(d),u)}return u});return{...s,...o}}getHTML(t,e){const[r,i]=this.scroll.line(t);if(r){const s=r.length();return r.length()>=i+e&&!(i===0&&e===s)?Fl(r,i,e,!0):Fl(this.scroll,t,e,!0)}return""}getText(t,e){return this.getContents(t,e).filter(r=>typeof r.insert=="string").map(r=>r.insert).join("")}insertContents(t,e){const r=o1(e),i=new fe().retain(t).concat(r);return this.scroll.insertContents(t,r),this.update(i)}insertEmbed(t,e,r){return this.scroll.insertAt(t,e,r),this.update(new fe().retain(t).insert({[e]:r}))}insertText(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return e=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(t,e),Object.keys(r).forEach(i=>{this.scroll.formatAt(t,e.length,i,r[i])}),this.update(new fe().retain(t).insert(e,Ia(r)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const t=this.scroll.children.head;if((t==null?void 0:t.statics.blotName)!==Tr.blotName)return!1;const e=t;return e.children.length>1?!1:e.children.head instanceof Zi}removeFormat(t,e){const r=this.getText(t,e),[i,s]=this.scroll.line(t+e);let o=0,a=new fe;i!=null&&(o=i.length()-s,a=i.delta().slice(s,s+o-1).insert(`
`));const u=this.getContents(t,e+o).diff(new fe().insert(r).concat(a)),d=new fe().retain(t).concat(u);return this.applyDelta(d)}update(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const i=this.delta;if(e.length===1&&e[0].type==="characterData"&&e[0].target.data.match(vm)&&this.scroll.find(e[0].target)){const s=this.scroll.find(e[0].target),o=Li(s),a=s.offset(this.scroll),c=e[0].oldValue.replace($a.CONTENTS,""),u=new fe().insert(c),d=new fe().insert(s.value()),p=r&&{oldRange:a1(r.oldRange,-a),newRange:a1(r.newRange,-a)};t=new fe().retain(a).concat(u.diff(d,p)).reduce((f,v)=>v.insert?f.insert(v.insert,o):f.push(v),new fe),this.delta=i.compose(t)}else this.delta=this.getDelta(),(!t||!qf(i.compose(t),this.delta))&&(t=i.diff(this.delta,r));return t}}function Aa(n,t,e){if(n.length===0){const[f]=gh(e.pop());return t<=0?`</li></${f}>`:`</li></${f}>${Aa([],t-1,e)}`}const[{child:r,offset:i,length:s,indent:o,type:a},...c]=n,[u,d]=gh(a);if(o>t)return e.push(a),o===t+1?`<${u}><li${d}>${Fl(r,i,s)}${Aa(c,o,e)}`:`<${u}><li>${Aa(n,t+1,e)}`;const p=e[e.length-1];if(o===t&&a===p)return`</li><li${d}>${Fl(r,i,s)}${Aa(c,o,e)}`;const[g]=gh(e.pop());return`</li></${g}>${Aa(n,t-1,e)}`}function Fl(n,t,e){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in n&&typeof n.html=="function")return n.html(t,e);if(n instanceof Yi)return Iu(n.value().slice(t,t+e));if(n instanceof Gi){if(n.statics.blotName==="list-container"){const u=[];return n.children.forEachAt(t,e,(d,p,g)=>{const f="formats"in d&&typeof d.formats=="function"?d.formats():{};u.push({child:d,offset:p,length:g,indent:f.indent||0,type:f.list})}),Aa(u,-1,[])}const i=[];if(n.children.forEachAt(t,e,(u,d,p)=>{i.push(Fl(u,d,p))}),r||n.statics.blotName==="list")return i.join("");const{outerHTML:s,innerHTML:o}=n.domNode,[a,c]=s.split(`>${o}<`);return a==="<table"?`<table style="border: 1px solid #000;">${i.join("")}<${c}`:`${a}>${i.join("")}<${c}`}return n.domNode instanceof Element?n.domNode.outerHTML:""}function wm(n,t){return Object.keys(t).reduce((e,r)=>{if(n[r]==null)return e;const i=t[r];return i===n[r]?e[r]=i:Array.isArray(i)?i.indexOf(n[r])<0?e[r]=i.concat([n[r]]):e[r]=i:e[r]=[i,n[r]],e},{})}function gh(n){const t=n==="ordered"?"ol":"ul";switch(n){case"checked":return[t,' data-list="checked"'];case"unchecked":return[t,' data-list="unchecked"'];default:return[t,""]}}function o1(n){return n.reduce((t,e)=>{if(typeof e.insert=="string"){const r=e.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return t.insert(r,e.attributes)}return t.push(e)},new fe)}function a1(n,t){let{index:e,length:r}=n;return new Uo(e+t,r)}function _m(n){const t=[];return n.forEach(e=>{typeof e.insert=="string"?e.insert.split(`
`).forEach((i,s)=>{s&&t.push({insert:`
`,attributes:e.attributes}),i&&t.push({insert:i,attributes:e.attributes})}):t.push(e)}),t}class Qi{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=t,this.options=e}}re(Qi,"DEFAULTS",{});const Dc="\uFEFF";class Uf extends gi{constructor(t,e){super(t,e),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(r=>{this.contentNode.appendChild(r)}),this.leftGuard=document.createTextNode(Dc),this.rightGuard=document.createTextNode(Dc),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(t,e){return t===this.leftGuard?0:t===this.rightGuard?1:super.index(t,e)}restore(t){let e=null,r;const i=t.data.split(Dc).join("");if(t===this.leftGuard)if(this.prev instanceof Yi){const s=this.prev.length();this.prev.insertAt(s,i),e={startNode:this.prev.domNode,startOffset:s+i.length}}else r=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(r),this),e={startNode:r,startOffset:i.length};else t===this.rightGuard&&(this.next instanceof Yi?(this.next.insertAt(0,i),e={startNode:this.next.domNode,startOffset:i.length}):(r=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(r),this.next),e={startNode:r,startOffset:i.length}));return t.data=Dc,e}update(t,e){t.forEach(r=>{if(r.type==="characterData"&&(r.target===this.leftGuard||r.target===this.rightGuard)){const i=this.restore(r.target);i&&(e.range=i)}})}}class Am{constructor(t,e){re(this,"isComposing",!1);this.scroll=t,this.emitter=e,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",t=>{this.isComposing||this.handleCompositionStart(t)}),this.scroll.domNode.addEventListener("compositionend",t=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(t)})})}handleCompositionStart(t){const e=t.target instanceof Node?this.scroll.find(t.target,!0):null;e&&!(e instanceof Uf)&&(this.emitter.emit(oe.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(oe.events.COMPOSITION_START,t),this.isComposing=!0)}handleCompositionEnd(t){this.emitter.emit(oe.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(oe.events.COMPOSITION_END,t),this.isComposing=!1}}const ql=class ql{constructor(t,e){re(this,"modules",{});this.quill=t,this.options=e}init(){Object.keys(this.options.modules).forEach(t=>{this.modules[t]==null&&this.addModule(t)})}addModule(t){const e=this.quill.constructor.import(`modules/${t}`);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}};re(ql,"DEFAULTS",{modules:{}}),re(ql,"themes",{default:ql});let Wa=ql;const xm=n=>n.parentElement||n.getRootNode().host||null,Nm=n=>{const t=n.getBoundingClientRect(),e="offsetWidth"in n&&Math.abs(t.width)/n.offsetWidth||1,r="offsetHeight"in n&&Math.abs(t.height)/n.offsetHeight||1;return{top:t.top,right:t.left+n.clientWidth*e,bottom:t.top+n.clientHeight*r,left:t.left}},jc=n=>{const t=parseInt(n,10);return Number.isNaN(t)?0:t},l1=(n,t,e,r,i,s)=>n<e&&t>r?0:n<e?-(e-n+i):t>r?t-n>r-e?n+i-e:t-r+s:0,Sm=(n,t)=>{var s,o,a;const e=n.ownerDocument;let r=t,i=n;for(;i;){const c=i===e.body,u=c?{top:0,right:((s=window.visualViewport)==null?void 0:s.width)??e.documentElement.clientWidth,bottom:((o=window.visualViewport)==null?void 0:o.height)??e.documentElement.clientHeight,left:0}:Nm(i),d=getComputedStyle(i),p=l1(r.left,r.right,u.left,u.right,jc(d.scrollPaddingLeft),jc(d.scrollPaddingRight)),g=l1(r.top,r.bottom,u.top,u.bottom,jc(d.scrollPaddingTop),jc(d.scrollPaddingBottom));if(p||g)if(c)(a=e.defaultView)==null||a.scrollBy(p,g);else{const{scrollLeft:f,scrollTop:v}=i;g&&(i.scrollTop+=g),p&&(i.scrollLeft+=p);const x=i.scrollLeft-f,S=i.scrollTop-v;r={left:r.left-x,top:r.top-S,right:r.right-x,bottom:r.bottom-S}}i=c||d.position==="fixed"?null:xm(i)}},Lm=100,km=["block","break","cursor","inline","scroll","text"],Em=(n,t,e)=>{const r=new Va;return km.forEach(i=>{const s=t.query(i);s&&r.register(s)}),n.forEach(i=>{let s=t.query(i);s||e.error(`Cannot register "${i}" specified in "formats" config. Are you sure it was registered?`);let o=0;for(;s;)if(r.register(s),s="blotName"in s?s.requiredContainer??null:null,o+=1,o>Lm){e.error(`Cycle detected in registering blot requiredContainer: "${i}"`);break}}),r},Ta=Vs("quill"),Fc=new Va;Gi.uiClass="ql-ui";const zi=class zi{static debug(t){t===!0&&(t="log"),Vs.level(t)}static find(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Yh.get(t)||Fc.find(t,e)}static import(t){return this.imports[t]==null&&Ta.error(`Cannot import ${t}. Are you sure it was registered?`),this.imports[t]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const t=arguments.length<=0?void 0:arguments[0],e=!!(!(arguments.length<=1)&&arguments[1]),r="attrName"in t?t.attrName:t.blotName;typeof r=="string"?this.register(`formats/${r}`,t,e):Object.keys(t).forEach(i=>{this.register(i,t[i],e)})}else{const t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],r=!!(!(arguments.length<=2)&&arguments[2]);this.imports[t]!=null&&!r&&Ta.warn(`Overwriting ${t} with`,e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&e&&typeof e!="boolean"&&e.blotName!=="abstract"&&Fc.register(e),typeof e.register=="function"&&e.register(Fc)}}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=Cm(t,e),this.container=this.options.container,this.container==null){Ta.error("Invalid Quill container",t);return}this.options.debug&&zi.debug(this.options.debug);const r=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",Yh.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new oe;const i=Rf.blotName,s=this.options.registry.query(i);if(!s||!("blotName"in s))throw new Error(`Cannot initialize Quill without "${i}" blot`);if(this.scroll=new s(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new ym(this.scroll),this.selection=new bm(this.scroll,this.emitter),this.composition=new Am(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(oe.events.EDITOR_CHANGE,o=>{o===oe.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(oe.events.SCROLL_UPDATE,(o,a)=>{const c=this.selection.lastRange,[u]=this.selection.getRange(),d=c&&u?{oldRange:c,newRange:u}:void 0;Fi.call(this,()=>this.editor.update(null,a,d),o)}),this.emitter.on(oe.events.SCROLL_EMBED_UPDATE,(o,a)=>{const c=this.selection.lastRange,[u]=this.selection.getRange(),d=c&&u?{oldRange:c,newRange:u}:void 0;Fi.call(this,()=>{const p=new fe().retain(o.offset(this)).retain({[o.statics.blotName]:a});return this.editor.update(p,[],d)},zi.sources.USER)}),r){const o=this.clipboard.convert({html:`${r}<p><br></p>`,text:`
`});this.setContents(o)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof t=="string"){const r=t;t=document.createElement("div"),t.classList.add(r)}return this.container.insertBefore(t,e),t}blur(){this.selection.setRange(null)}deleteText(t,e,r){return[t,e,,r]=Rs(t,e,r),Fi.call(this,()=>this.editor.deleteText(t,e),r,t,-1*e)}disable(){this.enable(!1)}editReadOnly(t){this.allowReadOnlyEdits=!0;const e=t();return this.allowReadOnlyEdits=!1,e}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}focus(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()}format(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:oe.sources.API;return Fi.call(this,()=>{const i=this.getSelection(!0);let s=new fe;if(i==null)return s;if(this.scroll.query(t,de.BLOCK))s=this.editor.formatLine(i.index,i.length,{[t]:e});else{if(i.length===0)return this.selection.format(t,e),s;s=this.editor.formatText(i.index,i.length,{[t]:e})}return this.setSelection(i,oe.sources.SILENT),s},r)}formatLine(t,e,r,i,s){let o;return[t,e,o,s]=Rs(t,e,r,i,s),Fi.call(this,()=>this.editor.formatLine(t,e,o),s,t,0)}formatText(t,e,r,i,s){let o;return[t,e,o,s]=Rs(t,e,r,i,s),Fi.call(this,()=>this.editor.formatText(t,e,o),s,t,0)}getBounds(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=null;if(typeof t=="number"?r=this.selection.getBounds(t,e):r=this.selection.getBounds(t.index,t.length),!r)return null;const i=this.container.getBoundingClientRect();return{bottom:r.bottom-i.top,height:r.height,left:r.left-i.left,right:r.right-i.left,top:r.top-i.top,width:r.width}}getContents(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-t;return[t,e]=Rs(t,e),this.editor.getContents(t,e)}getFormat(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof t=="number"?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}getIndex(t){return t.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(t){return this.scroll.leaf(t)}getLine(t){return this.scroll.line(t)}getLines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof t!="number"?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}getModule(t){return this.theme.modules[t]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(e=e??this.getLength()-t),[t,e]=Rs(t,e),this.editor.getHTML(t,e)}getText(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(e=e??this.getLength()-t),[t,e]=Rs(t,e),this.editor.getText(t,e)}hasFocus(){return this.selection.hasFocus()}insertEmbed(t,e,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:zi.sources.API;return Fi.call(this,()=>this.editor.insertEmbed(t,e,r),i,t)}insertText(t,e,r,i,s){let o;return[t,,o,s]=Rs(t,0,r,i,s),Fi.call(this,()=>this.editor.insertText(t,e,o),s,t,e.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(t,e,r){return[t,e,,r]=Rs(t,e,r),Fi.call(this,()=>this.editor.removeFormat(t,e),r,t)}scrollRectIntoView(t){Sm(this.root,t)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const t=this.selection.lastRange,e=t&&this.selection.getBounds(t.index,t.length);e&&this.scrollRectIntoView(e)}setContents(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:oe.sources.API;return Fi.call(this,()=>{t=new fe(t);const r=this.getLength(),i=this.editor.deleteText(0,r),s=this.editor.insertContents(0,t),o=this.editor.deleteText(this.getLength()-1,1);return i.compose(s).compose(o)},e)}setSelection(t,e,r){t==null?this.selection.setRange(null,e||zi.sources.API):([t,e,,r]=Rs(t,e,r),this.selection.setRange(new Uo(Math.max(0,t),e),r),r!==oe.sources.SILENT&&this.scrollSelectionIntoView())}setText(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:oe.sources.API;const r=new fe().insert(t);return this.setContents(r,e)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:oe.sources.USER;const e=this.scroll.update(t);return this.selection.update(t),e}updateContents(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:oe.sources.API;return Fi.call(this,()=>(t=new fe(t),this.editor.applyDelta(t)),e,!0)}};re(zi,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Fc,theme:"default"}),re(zi,"events",oe.events),re(zi,"sources",oe.sources),re(zi,"version","2.0.2"),re(zi,"imports",{delta:fe,parchment:tm,"core/module":Qi,"core/theme":Wa});let Tt=zi;function c1(n){return typeof n=="string"?document.querySelector(n):n}function mh(n){return Object.entries(n??{}).reduce((t,e)=>{let[r,i]=e;return{...t,[r]:i===!0?{}:i}},{})}function u1(n){return Object.fromEntries(Object.entries(n).filter(t=>t[1]!==void 0))}function Cm(n,t){const e=c1(n);if(!e)throw new Error("Invalid Quill container");const i=!t.theme||t.theme===Tt.DEFAULTS.theme?Wa:Tt.import(`themes/${t.theme}`);if(!i)throw new Error(`Invalid theme ${t.theme}. Did you register it?`);const{modules:s,...o}=Tt.DEFAULTS,{modules:a,...c}=i.DEFAULTS;let u=mh(t.modules);u!=null&&u.toolbar&&u.toolbar.constructor!==Object&&(u={...u,toolbar:{container:u.toolbar}});const d=vo({},mh(s),mh(a),u),p={...o,...u1(c),...u1(t)};let g=t.registry;return g?t.formats&&Ta.warn('Ignoring "formats" option because "registry" is specified'):g=t.formats?Em(t.formats,p.registry,Ta):p.registry,{...p,registry:g,container:e,theme:i,modules:Object.entries(d).reduce((f,v)=>{let[x,S]=v;if(!S)return f;const y=Tt.import(`modules/${x}`);return y==null?(Ta.error(`Cannot load ${x} module. Are you sure you registered it?`),f):{...f,[x]:vo({},y.DEFAULTS||{},S)}},{}),bounds:c1(p.bounds)}}function Fi(n,t,e,r){if(!this.isEnabled()&&t===oe.sources.USER&&!this.allowReadOnlyEdits)return new fe;let i=e==null?null:this.getSelection();const s=this.editor.delta,o=n();if(i!=null&&(e===!0&&(e=i.index),r==null?i=h1(i,o,t):r!==0&&(i=h1(i,e,r,t)),this.setSelection(i,oe.sources.SILENT)),o.length()>0){const a=[oe.events.TEXT_CHANGE,o,s,t];this.emitter.emit(oe.events.EDITOR_CHANGE,...a),t!==oe.sources.SILENT&&this.emitter.emit(...a)}return o}function Rs(n,t,e,r,i){let s={};return typeof n.index=="number"&&typeof n.length=="number"?typeof t!="number"?(i=r,r=e,e=t,t=n.length,n=n.index):(t=n.length,n=n.index):typeof t!="number"&&(i=r,r=e,e=t,t=0),typeof e=="object"?(s=e,i=r):typeof e=="string"&&(r!=null?s[e]=r:i=e),i=i||oe.sources.API,[n,t,s,i]}function h1(n,t,e,r){const i=typeof e=="number"?e:0;if(n==null)return null;let s,o;return t&&typeof t.transformPosition=="function"?[s,o]=[n.index,n.index+n.length].map(a=>t.transformPosition(a,r!==oe.sources.USER)):[s,o]=[n.index,n.index+n.length].map(a=>a<t||a===t&&r===oe.sources.USER?a:i>=0?a+i:Math.max(t,a+i)),new Uo(s,o-s)}class Go extends Lu{}function f1(n){return n instanceof Tr||n instanceof Ci}function d1(n){return typeof n.updateContent=="function"}class xa extends Rf{constructor(t,e,r){let{emitter:i}=r;super(t,e),this.emitter=i,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",s=>this.handleDragStart(s))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const t=this.batch;this.batch=!1,this.update(t)}emitMount(t){this.emitter.emit(oe.events.SCROLL_BLOT_MOUNT,t)}emitUnmount(t){this.emitter.emit(oe.events.SCROLL_BLOT_UNMOUNT,t)}emitEmbedUpdate(t,e){this.emitter.emit(oe.events.SCROLL_EMBED_UPDATE,t,e)}deleteAt(t,e){const[r,i]=this.line(t),[s]=this.line(t+e);if(super.deleteAt(t,e),s!=null&&r!==s&&i>0){if(r instanceof Ci||s instanceof Ci){this.optimize();return}const o=s.children.head instanceof Zi?null:s.children.head;r.moveChildren(s,o),r.remove()}this.optimize()}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",t?"true":"false")}formatAt(t,e,r,i){super.formatAt(t,e,r,i),this.optimize()}insertAt(t,e,r){if(t>=this.length())if(r==null||this.scroll.query(e,de.BLOCK)==null){const i=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(i),r==null&&e.endsWith(`
`)?i.insertAt(0,e.slice(0,-1),r):i.insertAt(0,e,r)}else{const i=this.scroll.create(e,r);this.appendChild(i)}else super.insertAt(t,e,r);this.optimize()}insertBefore(t,e){if(t.statics.scope===de.INLINE_BLOT){const r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(t),super.insertBefore(r,e)}else super.insertBefore(t,e)}insertContents(t,e){const r=this.deltaToRenderBlocks(e.concat(new fe().insert(`
`))),i=r.pop();if(i==null)return;this.batchStart();const s=r.shift();if(s){const c=s.type==="block"&&(s.delta.length()===0||!this.descendant(Ci,t)[0]&&t<this.length()),u=s.type==="block"?s.delta:new fe().insert({[s.key]:s.value});bh(this,t,u);const d=s.type==="block"?1:0,p=t+u.length()+d;c&&this.insertAt(p-1,`
`);const g=Li(this.line(t)[0]),f=Pi.AttributeMap.diff(g,s.attributes)||{};Object.keys(f).forEach(v=>{this.formatAt(p-1,1,v,f[v])}),t=p}let[o,a]=this.children.find(t);if(r.length&&(o&&(o=o.split(a),a=0),r.forEach(c=>{if(c.type==="block"){const u=this.createBlock(c.attributes,o||void 0);bh(u,0,c.delta)}else{const u=this.create(c.key,c.value);this.insertBefore(u,o||void 0),Object.keys(c.attributes).forEach(d=>{u.format(d,c.attributes[d])})}})),i.type==="block"&&i.delta.length()){const c=o?o.offset(o.scroll)+a:this.length();bh(this,c,i.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(t){const e=this.path(t).pop();if(!e)return[null,-1];const[r,i]=e;return r instanceof Br?[r,i]:[null,-1]}line(t){return t===this.length()?this.line(t-1):this.descendant(f1,t)}lines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const r=(i,s,o)=>{let a=[],c=o;return i.children.forEachAt(s,o,(u,d,p)=>{f1(u)?a.push(u):u instanceof Lu&&(a=a.concat(r(u,d,c))),c-=p}),a};return r(this,t,e)}optimize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(t,e),t.length>0&&this.emitter.emit(oe.events.SCROLL_OPTIMIZE,t,e))}path(t){return super.path(t).slice(1)}remove(){}update(t){if(this.batch){Array.isArray(t)&&(this.batch=this.batch.concat(t));return}let e=oe.sources.USER;typeof t=="string"&&(e=t),Array.isArray(t)||(t=this.observer.takeRecords()),t=t.filter(r=>{let{target:i}=r;const s=this.find(i,!0);return s&&!d1(s)}),t.length>0&&this.emitter.emit(oe.events.SCROLL_BEFORE_UPDATE,e,t),super.update(t.concat([])),t.length>0&&this.emitter.emit(oe.events.SCROLL_UPDATE,e,t)}updateEmbedAt(t,e,r){const[i]=this.descendant(s=>s instanceof Ci,t);i&&i.statics.blotName===e&&d1(i)&&i.updateContent(r)}handleDragStart(t){t.preventDefault()}deltaToRenderBlocks(t){const e=[];let r=new fe;return t.forEach(i=>{const s=i==null?void 0:i.insert;if(s)if(typeof s=="string"){const o=s.split(`
`);o.slice(0,-1).forEach(c=>{r.insert(c,i.attributes),e.push({type:"block",delta:r,attributes:i.attributes??{}}),r=new fe});const a=o[o.length-1];a&&r.insert(a,i.attributes)}else{const o=Object.keys(s)[0];if(!o)return;this.query(o,de.INLINE)?r.push(i):(r.length()&&e.push({type:"block",delta:r,attributes:{}}),r=new fe,e.push({type:"blockEmbed",key:o,value:s[o],attributes:i.attributes??{}}))}}),r.length()&&e.push({type:"block",delta:r,attributes:{}}),e}createBlock(t,e){let r;const i={};Object.entries(t).forEach(a=>{let[c,u]=a;this.query(c,de.BLOCK&de.BLOT)!=null?r=c:i[c]=u});const s=this.create(r||this.statics.defaultChild.blotName,r?t[r]:void 0);this.insertBefore(s,e||void 0);const o=s.length();return Object.entries(i).forEach(a=>{let[c,u]=a;s.formatAt(0,o,c,u)}),s}}re(xa,"blotName","scroll"),re(xa,"className","ql-editor"),re(xa,"tagName","DIV"),re(xa,"defaultChild",Tr),re(xa,"allowedChildren",[Tr,Ci,Go]);function bh(n,t,e){e.reduce((r,i)=>{const s=Pi.Op.length(i);let o=i.attributes||{};if(i.insert!=null){if(typeof i.insert=="string"){const a=i.insert;n.insertAt(r,a);const[c]=n.descendant(Br,r),u=Li(c);o=Pi.AttributeMap.diff(u,o)||{}}else if(typeof i.insert=="object"){const a=Object.keys(i.insert)[0];if(a==null)return r;if(n.insertAt(r,a,i.insert[a]),n.scroll.query(a,de.INLINE)!=null){const[u]=n.descendant(Br,r),d=Li(u);o=Pi.AttributeMap.diff(d,o)||{}}}}return Object.keys(o).forEach(a=>{n.formatAt(r,s,a,o[a])}),r+s},t)}const zf={scope:de.BLOCK,whitelist:["right","center","justify"]},Im=new vs("align","align",zf),Wp=new Xi("align","ql-align",zf),Gp=new Lo("align","text-align",zf);class Kp extends Lo{value(t){let e=super.value(t);return e.startsWith("rgb(")?(e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${e.split(",").map(i=>`00${parseInt(i,10).toString(16)}`.slice(-2)).join("")}`):e}}const Om=new Xi("color","ql-color",{scope:de.INLINE}),Hf=new Kp("color","color",{scope:de.INLINE}),Tm=new Xi("background","ql-bg",{scope:de.INLINE}),Vf=new Kp("background","background-color",{scope:de.INLINE});class Ko extends Go{static create(t){const e=super.create(t);return e.setAttribute("spellcheck","false"),e}code(t,e){return this.children.map(r=>r.length()<=1?"":r.domNode.innerText).join(`
`).slice(t,t+e)}html(t,e){return`<pre>
${Iu(this.code(t,e))}
</pre>`}}class zr extends Tr{static register(){Tt.register(Ko)}}re(zr,"TAB","  ");class $f extends ys{}$f.blotName="code";$f.tagName="CODE";zr.blotName="code-block";zr.className="ql-code-block";zr.tagName="DIV";Ko.blotName="code-block-container";Ko.className="ql-code-block-container";Ko.tagName="DIV";Ko.allowedChildren=[zr];zr.allowedChildren=[Yi,Zi,$a];zr.requiredContainer=Ko;const Wf={scope:de.BLOCK,whitelist:["rtl"]},Yp=new vs("direction","dir",Wf),Jp=new Xi("direction","ql-direction",Wf),Xp=new Lo("direction","direction",Wf),Zp={scope:de.INLINE,whitelist:["serif","monospace"]},Qp=new Xi("font","ql-font",Zp);class Pm extends Lo{value(t){return super.value(t).replace(/["']/g,"")}}const t0=new Pm("font","font-family",Zp),e0=new Xi("size","ql-size",{scope:de.INLINE,whitelist:["small","large","huge"]}),n0=new Lo("size","font-size",{scope:de.INLINE,whitelist:["10px","18px","32px"]}),qm=Vs("quill:keyboard"),Mm=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class Ou extends Qi{static match(t,e){return["altKey","ctrlKey","metaKey","shiftKey"].some(r=>!!e[r]!==t[r]&&e[r]!==null)?!1:e.key===t.key||e.key===t.which}constructor(t,e){super(t,e),this.bindings={},Object.keys(this.options.bindings).forEach(r=>{this.options.bindings[r]&&this.addBinding(this.options.bindings[r])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=Dm(t);if(i==null){qm.warn("Attempted to add invalid keyboard binding",i);return}typeof e=="function"&&(e={handler:e}),typeof r=="function"&&(r={handler:r}),(Array.isArray(i.key)?i.key:[i.key]).forEach(o=>{const a={...i,key:o,...e,...r};this.bindings[a.key]=this.bindings[a.key]||[],this.bindings[a.key].push(a)})}listen(){this.quill.root.addEventListener("keydown",t=>{if(t.defaultPrevented||t.isComposing||t.keyCode===229&&(t.key==="Enter"||t.key==="Backspace"))return;const i=(this.bindings[t.key]||[]).concat(this.bindings[t.which]||[]).filter(y=>Ou.match(t,y));if(i.length===0)return;const s=Tt.find(t.target,!0);if(s&&s.scroll!==this.quill.scroll)return;const o=this.quill.getSelection();if(o==null||!this.quill.hasFocus())return;const[a,c]=this.quill.getLine(o.index),[u,d]=this.quill.getLeaf(o.index),[p,g]=o.length===0?[u,d]:this.quill.getLeaf(o.index+o.length),f=u instanceof hu?u.value().slice(0,d):"",v=p instanceof hu?p.value().slice(g):"",x={collapsed:o.length===0,empty:o.length===0&&a.length()<=1,format:this.quill.getFormat(o),line:a,offset:c,prefix:f,suffix:v,event:t};i.some(y=>{if(y.collapsed!=null&&y.collapsed!==x.collapsed||y.empty!=null&&y.empty!==x.empty||y.offset!=null&&y.offset!==x.offset)return!1;if(Array.isArray(y.format)){if(y.format.every(A=>x.format[A]==null))return!1}else if(typeof y.format=="object"&&!Object.keys(y.format).every(A=>y.format[A]===!0?x.format[A]!=null:y.format[A]===!1?x.format[A]==null:qf(y.format[A],x.format[A])))return!1;return y.prefix!=null&&!y.prefix.test(x.prefix)||y.suffix!=null&&!y.suffix.test(x.suffix)?!1:y.handler.call(this,o,x,y)!==!0})&&t.preventDefault()})}handleBackspace(t,e){const r=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(t.index===0||this.quill.getLength()<=1)return;let i={};const[s]=this.quill.getLine(t.index);let o=new fe().retain(t.index-r).delete(r);if(e.offset===0){const[a]=this.quill.getLine(t.index-1);if(a&&!(a.statics.blotName==="block"&&a.length()<=1)){const u=s.formats(),d=this.quill.getFormat(t.index-1,1);if(i=Pi.AttributeMap.diff(u,d)||{},Object.keys(i).length>0){const p=new fe().retain(t.index+s.length()-2).retain(1,i);o=o.compose(p)}}}this.quill.updateContents(o,Tt.sources.USER),this.quill.focus()}handleDelete(t,e){const r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(t.index>=this.quill.getLength()-r)return;let i={};const[s]=this.quill.getLine(t.index);let o=new fe().retain(t.index).delete(r);if(e.offset>=s.length()-1){const[a]=this.quill.getLine(t.index+1);if(a){const c=s.formats(),u=this.quill.getFormat(t.index,1);i=Pi.AttributeMap.diff(c,u)||{},Object.keys(i).length>0&&(o=o.retain(a.length()-1).retain(1,i))}}this.quill.updateContents(o,Tt.sources.USER),this.quill.focus()}handleDeleteRange(t){Gf({range:t,quill:this.quill}),this.quill.focus()}handleEnter(t,e){const r=Object.keys(e.format).reduce((s,o)=>(this.quill.scroll.query(o,de.BLOCK)&&!Array.isArray(e.format[o])&&(s[o]=e.format[o]),s),{}),i=new fe().retain(t.index).delete(t.length).insert(`
`,r);this.quill.updateContents(i,Tt.sources.USER),this.quill.setSelection(t.index+1,Tt.sources.SILENT),this.quill.focus()}}const Rm={bindings:{bold:vh("bold"),italic:vh("italic"),underline:vh("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(n,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","+1",Tt.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(n,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","-1",Tt.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(n,t){t.format.indent!=null?this.quill.format("indent","-1",Tt.sources.USER):t.format.list!=null&&this.quill.format("list",!1,Tt.sources.USER)}},"indent code-block":p1(!0),"outdent code-block":p1(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(n){this.quill.deleteText(n.index-1,1,Tt.sources.USER)}},tab:{key:"Tab",handler(n,t){if(t.format.table)return!0;this.quill.history.cutoff();const e=new fe().retain(n.index).delete(n.length).insert("	");return this.quill.updateContents(e,Tt.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index+1,Tt.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,Tt.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(n,t){const e={list:!1};t.format.indent&&(e.indent=!1),this.quill.formatLine(n.index,n.length,e,Tt.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(n){const[t,e]=this.quill.getLine(n.index),r={...t.formats(),list:"checked"},i=new fe().retain(n.index).insert(`
`,r).retain(t.length()-e-1).retain(1,{list:"unchecked"});this.quill.updateContents(i,Tt.sources.USER),this.quill.setSelection(n.index+1,Tt.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(n,t){const[e,r]=this.quill.getLine(n.index),i=new fe().retain(n.index).insert(`
`,t.format).retain(e.length()-r-1).retain(1,{header:null});this.quill.updateContents(i,Tt.sources.USER),this.quill.setSelection(n.index+1,Tt.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(n){const t=this.quill.getModule("table");if(t){const[e,r,i,s]=t.getTable(n),o=jm(e,r,i,s);if(o==null)return;let a=e.offset();if(o<0){const c=new fe().retain(a).insert(`
`);this.quill.updateContents(c,Tt.sources.USER),this.quill.setSelection(n.index+1,n.length,Tt.sources.SILENT)}else if(o>0){a+=e.length();const c=new fe().retain(a).insert(`
`);this.quill.updateContents(c,Tt.sources.USER),this.quill.setSelection(a,Tt.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(n,t){const{event:e,line:r}=t,i=r.offset(this.quill.scroll);e.shiftKey?this.quill.setSelection(i-1,Tt.sources.USER):this.quill.setSelection(i+r.length(),Tt.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(n,t){if(this.quill.scroll.query("list")==null)return!0;const{length:e}=t.prefix,[r,i]=this.quill.getLine(n.index);if(i>e)return!0;let s;switch(t.prefix.trim()){case"[]":case"[ ]":s="unchecked";break;case"[x]":s="checked";break;case"-":case"*":s="bullet";break;default:s="ordered"}this.quill.insertText(n.index," ",Tt.sources.USER),this.quill.history.cutoff();const o=new fe().retain(n.index-i).delete(e+1).retain(r.length()-2-i).retain(1,{list:s});return this.quill.updateContents(o,Tt.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index-e,Tt.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(n){const[t,e]=this.quill.getLine(n.index);let r=2,i=t;for(;i!=null&&i.length()<=1&&i.formats()["code-block"];)if(i=i.prev,r-=1,r<=0){const s=new fe().retain(n.index+t.length()-e-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(s,Tt.sources.USER),this.quill.setSelection(n.index-1,Tt.sources.SILENT),!1}return!0}},"embed left":Bc("ArrowLeft",!1),"embed left shift":Bc("ArrowLeft",!0),"embed right":Bc("ArrowRight",!1),"embed right shift":Bc("ArrowRight",!0),"table down":g1(!1),"table up":g1(!0)}};Ou.DEFAULTS=Rm;function p1(n){return{key:"Tab",shiftKey:!n,format:{"code-block":!0},handler(t,e){let{event:r}=e;const i=this.quill.scroll.query("code-block"),{TAB:s}=i;if(t.length===0&&!r.shiftKey){this.quill.insertText(t.index,s,Tt.sources.USER),this.quill.setSelection(t.index+s.length,Tt.sources.SILENT);return}const o=t.length===0?this.quill.getLines(t.index,1):this.quill.getLines(t);let{index:a,length:c}=t;o.forEach((u,d)=>{n?(u.insertAt(0,s),d===0?a+=s.length:c+=s.length):u.domNode.textContent.startsWith(s)&&(u.deleteAt(0,s.length),d===0?a-=s.length:c-=s.length)}),this.quill.update(Tt.sources.USER),this.quill.setSelection(a,c,Tt.sources.SILENT)}}}function Bc(n,t){return{key:n,shiftKey:t,altKey:null,[n==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:i}=r;n==="ArrowRight"&&(i+=r.length+1);const[s]=this.quill.getLeaf(i);return s instanceof gi?(n==="ArrowLeft"?t?this.quill.setSelection(r.index-1,r.length+1,Tt.sources.USER):this.quill.setSelection(r.index-1,Tt.sources.USER):t?this.quill.setSelection(r.index,r.length+1,Tt.sources.USER):this.quill.setSelection(r.index+r.length+1,Tt.sources.USER),!1):!0}}}function vh(n){return{key:n[0],shortKey:!0,handler(t,e){this.quill.format(n,!e.format[n],Tt.sources.USER)}}}function g1(n){return{key:n?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(t,e){const r=n?"prev":"next",i=e.line,s=i.parent[r];if(s!=null){if(s.statics.blotName==="table-row"){let o=s.children.head,a=i;for(;a.prev!=null;)a=a.prev,o=o.next;const c=o.offset(this.quill.scroll)+Math.min(e.offset,o.length()-1);this.quill.setSelection(c,0,Tt.sources.USER)}}else{const o=i.table()[r];o!=null&&(n?this.quill.setSelection(o.offset(this.quill.scroll)+o.length()-1,0,Tt.sources.USER):this.quill.setSelection(o.offset(this.quill.scroll),0,Tt.sources.USER))}return!1}}}function Dm(n){if(typeof n=="string"||typeof n=="number")n={key:n};else if(typeof n=="object")n=Ia(n);else return null;return n.shortKey&&(n[Mm]=n.shortKey,delete n.shortKey),n}function Gf(n){let{quill:t,range:e}=n;const r=t.getLines(e);let i={};if(r.length>1){const s=r[0].formats(),o=r[r.length-1].formats();i=Pi.AttributeMap.diff(o,s)||{}}t.deleteText(e,Tt.sources.USER),Object.keys(i).length>0&&t.formatLine(e.index,1,i,Tt.sources.USER),t.setSelection(e.index,Tt.sources.SILENT)}function jm(n,t,e,r){return t.prev==null&&t.next==null?e.prev==null&&e.next==null?r===0?-1:1:e.prev==null?-1:1:t.prev==null?-1:t.next==null?1:null}const Fm=/font-weight:\s*normal/,Bm=["P","OL","UL"],m1=n=>n&&Bm.includes(n.tagName),Um=n=>{Array.from(n.querySelectorAll("br")).filter(t=>m1(t.previousElementSibling)&&m1(t.nextElementSibling)).forEach(t=>{var e;(e=t.parentNode)==null||e.removeChild(t)})},zm=n=>{Array.from(n.querySelectorAll('b[style*="font-weight"]')).filter(t=>{var e;return(e=t.getAttribute("style"))==null?void 0:e.match(Fm)}).forEach(t=>{var r;const e=n.createDocumentFragment();e.append(...t.childNodes),(r=t.parentNode)==null||r.replaceChild(e,t)})};function Hm(n){n.querySelector('[id^="docs-internal-guid-"]')&&(zm(n),Um(n))}const Vm=/\bmso-list:[^;]*ignore/i,$m=/\bmso-list:[^;]*\bl(\d+)/i,Wm=/\bmso-list:[^;]*\blevel(\d+)/i,Gm=(n,t)=>{const e=n.getAttribute("style"),r=e==null?void 0:e.match($m);if(!r)return null;const i=Number(r[1]),s=e==null?void 0:e.match(Wm),o=s?Number(s[1]):1,a=new RegExp(`@list l${i}:level${o}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),c=t.match(a),u=c&&c[1]==="bullet"?"bullet":"ordered";return{id:i,indent:o,type:u,element:n}},Km=n=>{var o,a;const t=Array.from(n.querySelectorAll("[style*=mso-list]")),e=[],r=[];t.forEach(c=>{(c.getAttribute("style")||"").match(Vm)?e.push(c):r.push(c)}),e.forEach(c=>{var u;return(u=c.parentNode)==null?void 0:u.removeChild(c)});const i=n.documentElement.innerHTML,s=r.map(c=>Gm(c,i)).filter(c=>c);for(;s.length;){const c=[];let u=s.shift();for(;u;)c.push(u),u=s.length&&((o=s[0])==null?void 0:o.element)===u.element.nextElementSibling&&s[0].id===u.id?s.shift():null;const d=document.createElement("ul");c.forEach(f=>{const v=document.createElement("li");v.setAttribute("data-list",f.type),f.indent>1&&v.setAttribute("class",`ql-indent-${f.indent-1}`),v.innerHTML=f.element.innerHTML,d.appendChild(v)});const p=(a=c[0])==null?void 0:a.element,{parentNode:g}=p??{};p&&(g==null||g.replaceChild(d,p)),c.slice(1).forEach(f=>{let{element:v}=f;g==null||g.removeChild(v)})}};function Ym(n){n.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&Km(n)}const Jm=[Ym,Hm],Xm=n=>{n.documentElement&&Jm.forEach(t=>{t(n)})},Zm=Vs("quill:clipboard"),Qm=[[Node.TEXT_NODE,hb],[Node.TEXT_NODE,v1],["br",ib],[Node.ELEMENT_NODE,v1],[Node.ELEMENT_NODE,rb],[Node.ELEMENT_NODE,nb],[Node.ELEMENT_NODE,cb],["li",ab],["ol, ul",lb],["pre",sb],["tr",ub],["b",yh("bold")],["i",yh("italic")],["strike",yh("strike")],["style",ob]],tb=[Im,Yp].reduce((n,t)=>(n[t.keyName]=t,n),{}),b1=[Gp,Vf,Hf,Xp,t0,n0].reduce((n,t)=>(n[t.keyName]=t,n),{});class r0 extends Qi{constructor(t,e){super(t,e),this.quill.root.addEventListener("copy",r=>this.onCaptureCopy(r,!1)),this.quill.root.addEventListener("cut",r=>this.onCaptureCopy(r,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],Qm.concat(this.options.matchers??[]).forEach(r=>{let[i,s]=r;this.addMatcher(i,s)})}addMatcher(t,e){this.matchers.push([t,e])}convert(t){let{html:e,text:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i[zr.blotName])return new fe().insert(r||"",{[zr.blotName]:i[zr.blotName]});if(!e)return new fe().insert(r||"",i);const s=this.convertHTML(e);return tc(s,`
`)&&(s.ops[s.ops.length-1].attributes==null||i.table)?s.compose(new fe().retain(s.length()-1).delete(1)):s}normalizeHTML(t){Xm(t)}convertHTML(t){const e=new DOMParser().parseFromString(t,"text/html");this.normalizeHTML(e);const r=e.body,i=new WeakMap,[s,o]=this.prepareMatching(r,i);return Kf(this.quill.scroll,r,s,o,i)}dangerouslyPasteHTML(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Tt.sources.API;if(typeof t=="string"){const i=this.convert({html:t,text:""});this.quill.setContents(i,e),this.quill.setSelection(0,Tt.sources.SILENT)}else{const i=this.convert({html:e,text:""});this.quill.updateContents(new fe().retain(t).concat(i),r),this.quill.setSelection(t+i.length(),Tt.sources.SILENT)}}onCaptureCopy(t){var o,a;let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t.defaultPrevented)return;t.preventDefault();const[r]=this.quill.selection.getRange();if(r==null)return;const{html:i,text:s}=this.onCopy(r,e);(o=t.clipboardData)==null||o.setData("text/plain",s),(a=t.clipboardData)==null||a.setData("text/html",i),e&&Gf({range:r,quill:this.quill})}normalizeURIList(t){return t.split(/\r?\n/).filter(e=>e[0]!=="#").join(`
`)}onCapturePaste(t){var o,a,c,u,d;if(t.defaultPrevented||!this.quill.isEnabled())return;t.preventDefault();const e=this.quill.getSelection(!0);if(e==null)return;const r=(o=t.clipboardData)==null?void 0:o.getData("text/html");let i=(a=t.clipboardData)==null?void 0:a.getData("text/plain");if(!r&&!i){const p=(c=t.clipboardData)==null?void 0:c.getData("text/uri-list");p&&(i=this.normalizeURIList(p))}const s=Array.from(((u=t.clipboardData)==null?void 0:u.files)||[]);if(!r&&s.length>0){this.quill.uploader.upload(e,s);return}if(r&&s.length>0){const p=new DOMParser().parseFromString(r,"text/html");if(p.body.childElementCount===1&&((d=p.body.firstElementChild)==null?void 0:d.tagName)==="IMG"){this.quill.uploader.upload(e,s);return}}this.onPaste(e,{html:r,text:i})}onCopy(t){const e=this.quill.getText(t);return{html:this.quill.getSemanticHTML(t),text:e}}onPaste(t,e){let{text:r,html:i}=e;const s=this.quill.getFormat(t.index),o=this.convert({text:r,html:i},s);Zm.log("onPaste",o,{text:r,html:i});const a=new fe().retain(t.index).delete(t.length).concat(o);this.quill.updateContents(a,Tt.sources.USER),this.quill.setSelection(a.length()-t.length,Tt.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(t,e){const r=[],i=[];return this.matchers.forEach(s=>{const[o,a]=s;switch(o){case Node.TEXT_NODE:i.push(a);break;case Node.ELEMENT_NODE:r.push(a);break;default:Array.from(t.querySelectorAll(o)).forEach(c=>{if(e.has(c)){const u=e.get(c);u==null||u.push(a)}else e.set(c,[a])});break}}),[r,i]}}re(r0,"DEFAULTS",{matchers:[]});function Yo(n,t,e,r){return r.query(t)?n.reduce((i,s)=>{if(!s.insert)return i;if(s.attributes&&s.attributes[t])return i.push(s);const o=e?{[t]:e}:{};return i.insert(s.insert,{...o,...s.attributes})},new fe):n}function tc(n,t){let e="";for(let r=n.ops.length-1;r>=0&&e.length<t.length;--r){const i=n.ops[r];if(typeof i.insert!="string")break;e=i.insert+e}return e.slice(-1*t.length)===t}function po(n,t){if(!(n instanceof Element))return!1;const e=t.query(n);return e&&e.prototype instanceof gi?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(n.tagName.toLowerCase())}function eb(n,t){return n.previousElementSibling&&n.nextElementSibling&&!po(n.previousElementSibling,t)&&!po(n.nextElementSibling,t)}const Uc=new WeakMap;function i0(n){return n==null?!1:(Uc.has(n)||(n.tagName==="PRE"?Uc.set(n,!0):Uc.set(n,i0(n.parentNode))),Uc.get(n))}function Kf(n,t,e,r,i){return t.nodeType===t.TEXT_NODE?r.reduce((s,o)=>o(t,s,n),new fe):t.nodeType===t.ELEMENT_NODE?Array.from(t.childNodes||[]).reduce((s,o)=>{let a=Kf(n,o,e,r,i);return o.nodeType===t.ELEMENT_NODE&&(a=e.reduce((c,u)=>u(o,c,n),a),a=(i.get(o)||[]).reduce((c,u)=>u(o,c,n),a)),s.concat(a)},new fe):new fe}function yh(n){return(t,e,r)=>Yo(e,n,!0,r)}function nb(n,t,e){const r=vs.keys(n),i=Xi.keys(n),s=Lo.keys(n),o={};return r.concat(i).concat(s).forEach(a=>{let c=e.query(a,de.ATTRIBUTE);c!=null&&(o[c.attrName]=c.value(n),o[c.attrName])||(c=tb[a],c!=null&&(c.attrName===a||c.keyName===a)&&(o[c.attrName]=c.value(n)||void 0),c=b1[a],c!=null&&(c.attrName===a||c.keyName===a)&&(c=b1[a],o[c.attrName]=c.value(n)||void 0))}),Object.entries(o).reduce((a,c)=>{let[u,d]=c;return Yo(a,u,d,e)},t)}function rb(n,t,e){const r=e.query(n);if(r==null)return t;if(r.prototype instanceof gi){const i={},s=r.value(n);if(s!=null)return i[r.blotName]=s,new fe().insert(i,r.formats(n,e))}else if(r.prototype instanceof Dl&&!tc(t,`
`)&&t.insert(`
`),"blotName"in r&&"formats"in r&&typeof r.formats=="function")return Yo(t,r.blotName,r.formats(n,e),e);return t}function ib(n,t){return tc(t,`
`)||t.insert(`
`),t}function sb(n,t,e){const r=e.query("code-block"),i=r&&"formats"in r&&typeof r.formats=="function"?r.formats(n,e):!0;return Yo(t,"code-block",i,e)}function ob(){return new fe}function ab(n,t,e){const r=e.query(n);if(r==null||r.blotName!=="list"||!tc(t,`
`))return t;let i=-1,s=n.parentNode;for(;s!=null;)["OL","UL"].includes(s.tagName)&&(i+=1),s=s.parentNode;return i<=0?t:t.reduce((o,a)=>a.insert?a.attributes&&typeof a.attributes.indent=="number"?o.push(a):o.insert(a.insert,{indent:i,...a.attributes||{}}):o,new fe)}function lb(n,t,e){const r=n;let i=r.tagName==="OL"?"ordered":"bullet";const s=r.getAttribute("data-checked");return s&&(i=s==="true"?"checked":"unchecked"),Yo(t,"list",i,e)}function v1(n,t,e){if(!tc(t,`
`)){if(po(n,e)&&(n.childNodes.length>0||n instanceof HTMLParagraphElement))return t.insert(`
`);if(t.length()>0&&n.nextSibling){let r=n.nextSibling;for(;r!=null;){if(po(r,e))return t.insert(`
`);const i=e.query(r);if(i&&i.prototype instanceof Ci)return t.insert(`
`);r=r.firstChild}}}return t}function cb(n,t,e){var s;const r={},i=n.style||{};return i.fontStyle==="italic"&&(r.italic=!0),i.textDecoration==="underline"&&(r.underline=!0),i.textDecoration==="line-through"&&(r.strike=!0),((s=i.fontWeight)!=null&&s.startsWith("bold")||parseInt(i.fontWeight,10)>=700)&&(r.bold=!0),t=Object.entries(r).reduce((o,a)=>{let[c,u]=a;return Yo(o,c,u,e)},t),parseFloat(i.textIndent||0)>0?new fe().insert("	").concat(t):t}function ub(n,t,e){var i,s;const r=((i=n.parentElement)==null?void 0:i.tagName)==="TABLE"?n.parentElement:(s=n.parentElement)==null?void 0:s.parentElement;if(r!=null){const a=Array.from(r.querySelectorAll("tr")).indexOf(n)+1;return Yo(t,"table",a,e)}return t}function hb(n,t,e){var i;let r=n.data;if(((i=n.parentElement)==null?void 0:i.tagName)==="O:P")return t.insert(r.trim());if(!i0(n)){if(r.trim().length===0&&r.includes(`
`)&&!eb(n,e))return t;const s=(o,a)=>{const c=a.replace(/[^\u00a0]/g,"");return c.length<1&&o?" ":c};r=r.replace(/\r\n/g," ").replace(/\n/g," "),r=r.replace(/\s\s+/g,s.bind(s,!0)),(n.previousSibling==null&&n.parentElement!=null&&po(n.parentElement,e)||n.previousSibling instanceof Element&&po(n.previousSibling,e))&&(r=r.replace(/^\s+/,s.bind(s,!1))),(n.nextSibling==null&&n.parentElement!=null&&po(n.parentElement,e)||n.nextSibling instanceof Element&&po(n.nextSibling,e))&&(r=r.replace(/\s+$/,s.bind(s,!1)))}return t.insert(r)}class s0 extends Qi{constructor(e,r){super(e,r);re(this,"lastRecorded",0);re(this,"ignoreChange",!1);re(this,"stack",{undo:[],redo:[]});re(this,"currentRange",null);this.quill.on(Tt.events.EDITOR_CHANGE,(i,s,o,a)=>{i===Tt.events.SELECTION_CHANGE?s&&a!==Tt.sources.SILENT&&(this.currentRange=s):i===Tt.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||a===Tt.sources.USER?this.record(s,o):this.transform(s)),this.currentRange=Zh(this.currentRange,s))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",i=>{i.inputType==="historyUndo"?(this.undo(),i.preventDefault()):i.inputType==="historyRedo"&&(this.redo(),i.preventDefault())})}change(e,r){if(this.stack[e].length===0)return;const i=this.stack[e].pop();if(!i)return;const s=this.quill.getContents(),o=i.delta.invert(s);this.stack[r].push({delta:o,range:Zh(i.range,o)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(i.delta,Tt.sources.USER),this.ignoreChange=!1,this.restoreSelection(i)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,r){if(e.ops.length===0)return;this.stack.redo=[];let i=e.invert(r),s=this.currentRange;const o=Date.now();if(this.lastRecorded+this.options.delay>o&&this.stack.undo.length>0){const a=this.stack.undo.pop();a&&(i=i.compose(a.delta),s=a.range)}else this.lastRecorded=o;i.length()!==0&&(this.stack.undo.push({delta:i,range:s}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){y1(this.stack.undo,e),y1(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,Tt.sources.USER);else{const r=db(this.quill.scroll,e.delta);this.quill.setSelection(r,Tt.sources.USER)}}}re(s0,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});function y1(n,t){let e=t;for(let r=n.length-1;r>=0;r-=1){const i=n[r];n[r]={delta:e.transform(i.delta,!0),range:i.range&&Zh(i.range,e)},e=i.delta.transform(e),n[r].delta.length()===0&&n.splice(r,1)}}function fb(n,t){const e=t.ops[t.ops.length-1];return e==null?!1:e.insert!=null?typeof e.insert=="string"&&e.insert.endsWith(`
`):e.attributes!=null?Object.keys(e.attributes).some(r=>n.query(r,de.BLOCK)!=null):!1}function db(n,t){const e=t.reduce((i,s)=>i+(s.delete||0),0);let r=t.length()-e;return fb(n,t)&&(r-=1),r}function Zh(n,t){if(!n)return n;const e=t.transformPosition(n.index),r=t.transformPosition(n.index+n.length);return{index:e,length:r-e}}class o0 extends Qi{constructor(t,e){super(t,e),t.root.addEventListener("drop",r=>{var o;r.preventDefault();let i=null;if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(r.clientX,r.clientY);else if(document.caretPositionFromPoint){const a=document.caretPositionFromPoint(r.clientX,r.clientY);i=document.createRange(),i.setStart(a.offsetNode,a.offset),i.setEnd(a.offsetNode,a.offset)}const s=i&&t.selection.normalizeNative(i);if(s){const a=t.selection.normalizedToRange(s);(o=r.dataTransfer)!=null&&o.files&&this.upload(a,r.dataTransfer.files)}})}upload(t,e){const r=[];Array.from(e).forEach(i=>{var s;i&&((s=this.options.mimetypes)!=null&&s.includes(i.type))&&r.push(i)}),r.length>0&&this.options.handler.call(this,t,r)}}o0.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(n,t){if(!this.quill.scroll.query("image"))return;const e=t.map(r=>new Promise(i=>{const s=new FileReader;s.onload=()=>{i(s.result)},s.readAsDataURL(r)}));Promise.all(e).then(r=>{const i=r.reduce((s,o)=>s.insert({image:o}),new fe().retain(n.index).delete(n.length));this.quill.updateContents(i,oe.sources.USER),this.quill.setSelection(n.index+r.length,oe.sources.SILENT)})}};const pb=["insertText","insertReplacementText"];class gb extends Qi{constructor(t,e){super(t,e),t.root.addEventListener("beforeinput",r=>{this.handleBeforeInput(r)}),/Android/i.test(navigator.userAgent)||t.on(Tt.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(t){Gf({range:t,quill:this.quill})}replaceText(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t.length===0)return!1;if(e){const r=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents(new fe().retain(t.index).insert(e,r),Tt.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+e.length,0,Tt.sources.SILENT),!0}handleBeforeInput(t){if(this.quill.composition.isComposing||t.defaultPrevented||!pb.includes(t.inputType))return;const e=t.getTargetRanges?t.getTargetRanges()[0]:null;if(!e||e.collapsed===!0)return;const r=mb(t);if(r==null)return;const i=this.quill.selection.normalizeNative(e),s=i?this.quill.selection.normalizedToRange(i):null;s&&this.replaceText(s,r)&&t.preventDefault()}handleCompositionStart(){const t=this.quill.getSelection();t&&this.replaceText(t)}}function mb(n){var t;return typeof n.data=="string"?n.data:(t=n.dataTransfer)!=null&&t.types.includes("text/plain")?n.dataTransfer.getData("text/plain"):null}const bb=/Mac/i.test(navigator.platform),vb=100,yb=n=>!!(n.key==="ArrowLeft"||n.key==="ArrowRight"||n.key==="ArrowUp"||n.key==="ArrowDown"||n.key==="Home"||bb&&n.key==="a"&&n.ctrlKey===!0);class wb extends Qi{constructor(e,r){super(e,r);re(this,"isListening",!1);re(this,"selectionChangeDeadline",0);this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,r){let{line:i,event:s}=r;if(!(i instanceof Gi)||!i.uiNode)return!0;const o=getComputedStyle(i.domNode).direction==="rtl";return o&&s.key!=="ArrowRight"||!o&&s.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(s.shiftKey?1:0),Tt.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&yb(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+vb,this.isListening)return;this.isListening=!0;const e=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){const e=document.getSelection();if(!e)return;const r=e.getRangeAt(0);if(r.collapsed!==!0||r.startOffset!==0)return;const i=this.quill.scroll.find(r.startContainer);if(!(i instanceof Gi)||!i.uiNode)return;const s=document.createRange();s.setStartAfter(i.uiNode),s.setEndAfter(i.uiNode),e.removeAllRanges(),e.addRange(s)}}Tt.register({"blots/block":Tr,"blots/block/embed":Ci,"blots/break":Zi,"blots/container":Go,"blots/cursor":$a,"blots/embed":Uf,"blots/inline":ys,"blots/scroll":xa,"blots/text":Yi,"modules/clipboard":r0,"modules/history":s0,"modules/keyboard":Ou,"modules/uploader":o0,"modules/input":gb,"modules/uiNode":wb});class _b extends Xi{add(t,e){let r=0;if(e==="+1"||e==="-1"){const i=this.value(t)||0;r=e==="+1"?i+1:i-1}else typeof e=="number"&&(r=e);return r===0?(this.remove(t),!0):super.add(t,r.toString())}canAdd(t,e){return super.canAdd(t,e)||super.canAdd(t,parseInt(e,10))}value(t){return parseInt(super.value(t),10)||void 0}}const Ab=new _b("indent","ql-indent",{scope:de.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class Qh extends Tr{}re(Qh,"blotName","blockquote"),re(Qh,"tagName","blockquote");class tf extends Tr{static formats(t){return this.tagName.indexOf(t.tagName)+1}}re(tf,"blotName","header"),re(tf,"tagName",["H1","H2","H3","H4","H5","H6"]);class ec extends Go{}ec.blotName="list-container";ec.tagName="OL";class nc extends Tr{static create(t){const e=super.create();return e.setAttribute("data-list",t),e}static formats(t){return t.getAttribute("data-list")||void 0}static register(){Tt.register(ec)}constructor(t,e){super(t,e);const r=e.ownerDocument.createElement("span"),i=s=>{if(!t.isEnabled())return;const o=this.statics.formats(e,t);o==="checked"?(this.format("list","unchecked"),s.preventDefault()):o==="unchecked"&&(this.format("list","checked"),s.preventDefault())};r.addEventListener("mousedown",i),r.addEventListener("touchstart",i),this.attachUI(r)}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-list",e):super.format(t,e)}}nc.blotName="list";nc.tagName="LI";ec.allowedChildren=[nc];nc.requiredContainer=ec;class Bl extends ys{static create(){return super.create()}static formats(){return!0}optimize(t){super.optimize(t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}re(Bl,"blotName","bold"),re(Bl,"tagName",["STRONG","B"]);class ef extends Bl{}re(ef,"blotName","italic"),re(ef,"tagName",["EM","I"]);class go extends ys{static create(t){const e=super.create(t);return e.setAttribute("href",this.sanitize(t)),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e}static formats(t){return t.getAttribute("href")}static sanitize(t){return a0(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}format(t,e){t!==this.statics.blotName||!e?super.format(t,e):this.domNode.setAttribute("href",this.constructor.sanitize(e))}}re(go,"blotName","link"),re(go,"tagName","A"),re(go,"SANITIZED_URL","about:blank"),re(go,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);function a0(n,t){const e=document.createElement("a");e.href=n;const r=e.href.slice(0,e.href.indexOf(":"));return t.indexOf(r)>-1}class nf extends ys{static create(t){return t==="super"?document.createElement("sup"):t==="sub"?document.createElement("sub"):super.create(t)}static formats(t){if(t.tagName==="SUB")return"sub";if(t.tagName==="SUP")return"super"}}re(nf,"blotName","script"),re(nf,"tagName",["SUB","SUP"]);class rf extends Bl{}re(rf,"blotName","strike"),re(rf,"tagName",["S","STRIKE"]);class sf extends ys{}re(sf,"blotName","underline"),re(sf,"tagName","U");class Qc extends Uf{static create(t){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const e=super.create(t);return typeof t=="string"&&(window.katex.render(t,e,{throwOnError:!1,errorColor:"#f00"}),e.setAttribute("data-value",t)),e}static value(t){return t.getAttribute("data-value")}html(){const{formula:t}=this.value();return`<span>${t}</span>`}}re(Qc,"blotName","formula"),re(Qc,"className","ql-formula"),re(Qc,"tagName","SPAN");const w1=["alt","height","width"];var Jc;let xb=(Jc=class extends gi{static create(t){const e=super.create(t);return typeof t=="string"&&e.setAttribute("src",this.sanitize(t)),e}static formats(t){return w1.reduce((e,r)=>(t.hasAttribute(r)&&(e[r]=t.getAttribute(r)),e),{})}static match(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}static sanitize(t){return a0(t,["http","https","data"])?t:"//:0"}static value(t){return t.getAttribute("src")}format(t,e){w1.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}},re(Jc,"blotName","image"),re(Jc,"tagName","IMG"),Jc);const _1=["height","width"];class tu extends Ci{static create(t){const e=super.create(t);return e.setAttribute("frameborder","0"),e.setAttribute("allowfullscreen","true"),e.setAttribute("src",this.sanitize(t)),e}static formats(t){return _1.reduce((e,r)=>(t.hasAttribute(r)&&(e[r]=t.getAttribute(r)),e),{})}static sanitize(t){return go.sanitize(t)}static value(t){return t.getAttribute("src")}format(t,e){_1.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}html(){const{video:t}=this.value();return`<a href="${t}">${t}</a>`}}re(tu,"blotName","video"),re(tu,"className","ql-video"),re(tu,"tagName","IFRAME");const kl=new Xi("code-token","hljs",{scope:de.INLINE});class zs extends ys{static formats(t,e){for(;t!=null&&t!==e.domNode;){if(t.classList&&t.classList.contains(zr.className))return super.formats(t,e);t=t.parentNode}}constructor(t,e,r){super(t,e,r),kl.add(this.domNode,r)}format(t,e){t!==zs.blotName?super.format(t,e):e?kl.add(this.domNode,e):(kl.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),kl.value(this.domNode)||this.unwrap()}}zs.blotName="code-token";zs.className="ql-token";class ki extends zr{static create(t){const e=super.create(t);return typeof t=="string"&&e.setAttribute("data-language",t),e}static formats(t){return t.getAttribute("data-language")||"plain"}static register(){}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-language",e):super.format(t,e)}replaceWith(t,e){return this.formatAt(0,this.length(),zs.blotName,!1),super.replaceWith(t,e)}}class El extends Ko{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(t,e){t===ki.blotName&&(this.forceNext=!0,this.children.forEach(r=>{r.format(t,e)}))}formatAt(t,e,r,i){r===ki.blotName&&(this.forceNext=!0),super.formatAt(t,e,r,i)}highlight(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const i=`${Array.from(this.domNode.childNodes).filter(o=>o!==this.uiNode).map(o=>o.textContent).join(`
`)}
`,s=ki.formats(this.children.head.domNode);if(e||this.forceNext||this.cachedText!==i){if(i.trim().length>0||this.cachedText==null){const o=this.children.reduce((c,u)=>c.concat(Hp(u,!1)),new fe),a=t(i,s);o.diff(a).reduce((c,u)=>{let{retain:d,attributes:p}=u;return d?(p&&Object.keys(p).forEach(g=>{[ki.blotName,zs.blotName].includes(g)&&this.formatAt(c,d,g,p[g])}),c+d):c},0)}this.cachedText=i,this.forceNext=!1}}html(t,e){const[r]=this.children.find(t);return`<pre data-language="${r?ki.formats(r.domNode):"plain"}">
${Iu(this.code(t,e))}
</pre>`}optimize(t){if(super.optimize(t),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const e=ki.formats(this.children.head.domNode);e!==this.uiNode.value&&(this.uiNode.value=e)}}}El.allowedChildren=[ki];ki.requiredContainer=El;ki.allowedChildren=[zs,$a,Yi,Zi];const Nb=(n,t,e)=>{if(typeof n.versionString=="string"){const r=n.versionString.split(".")[0];if(parseInt(r,10)>=11)return n.highlight(e,{language:t}).value}return n.highlight(t,e).value};class l0 extends Qi{static register(){Tt.register(zs,!0),Tt.register(ki,!0),Tt.register(El,!0)}constructor(t,e){if(super(t,e),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((r,i)=>{let{key:s}=i;return r[s]=!0,r},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(Tt.events.SCROLL_BLOT_MOUNT,t=>{if(!(t instanceof El))return;const e=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(r=>{let{key:i,label:s}=r;const o=e.ownerDocument.createElement("option");o.textContent=s,o.setAttribute("value",i),e.appendChild(o)}),e.addEventListener("change",()=>{t.format(ki.blotName,e.value),this.quill.root.focus(),this.highlight(t,!0)}),t.uiNode==null&&(t.attachUI(e),t.children.head&&(e.value=ki.formats(t.children.head.domNode)))})}initTimer(){let t=null;this.quill.on(Tt.events.SCROLL_OPTIMIZE,()=>{t&&clearTimeout(t),t=setTimeout(()=>{this.highlight(),t=null},this.options.interval)})}highlight(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(Tt.sources.USER);const r=this.quill.getSelection();(t==null?this.quill.scroll.descendants(El):[t]).forEach(s=>{s.highlight(this.highlightBlot,e)}),this.quill.update(Tt.sources.SILENT),r!=null&&this.quill.setSelection(r,Tt.sources.SILENT)}highlightBlot(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(e=this.languages[e]?e:"plain",e==="plain")return Iu(t).split(`
`).reduce((i,s,o)=>(o!==0&&i.insert(`
`,{[zr.blotName]:e}),i.insert(s)),new fe);const r=this.quill.root.ownerDocument.createElement("div");return r.classList.add(zr.className),r.innerHTML=Nb(this.options.hljs,e,t),Kf(this.quill.scroll,r,[(i,s)=>{const o=kl.value(i);return o?s.compose(new fe().retain(s.length(),{[zs.blotName]:o})):s}],[(i,s)=>i.data.split(`
`).reduce((o,a,c)=>(c!==0&&o.insert(`
`,{[zr.blotName]:e}),o.insert(a)),s)],new WeakMap)}}l0.DEFAULTS={hljs:(()=>window.hljs)(),interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};const Ml=class Ml extends Tr{static create(t){const e=super.create();return t?e.setAttribute("data-row",t):e.setAttribute("data-row",Yf()),e}static formats(t){if(t.hasAttribute("data-row"))return t.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(t,e){t===Ml.blotName&&e?this.domNode.setAttribute("data-row",e):super.format(t,e)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}};re(Ml,"blotName","table"),re(Ml,"tagName","TD");let $i=Ml;class Hs extends Go{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const t=this.children.head.formats(),e=this.children.tail.formats(),r=this.next.children.head.formats(),i=this.next.children.tail.formats();return t.table===e.table&&t.table===r.table&&t.table===i.table}return!1}optimize(t){super.optimize(t),this.children.forEach(e=>{if(e.next==null)return;const r=e.formats(),i=e.next.formats();if(r.table!==i.table){const s=this.splitAfter(e);s&&s.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}re(Hs,"blotName","table-row"),re(Hs,"tagName","TR");class gs extends Go{}re(gs,"blotName","table-body"),re(gs,"tagName","TBODY");class Ga extends Go{balanceCells(){const t=this.descendants(Hs),e=t.reduce((r,i)=>Math.max(i.children.length,r),0);t.forEach(r=>{new Array(e-r.children.length).fill(0).forEach(()=>{let i;r.children.head!=null&&(i=$i.formats(r.children.head.domNode));const s=this.scroll.create($i.blotName,i);r.appendChild(s),s.optimize()})})}cells(t){return this.rows().map(e=>e.children.at(t))}deleteColumn(t){const[e]=this.descendant(gs);e==null||e.children.head==null||e.children.forEach(r=>{const i=r.children.at(t);i!=null&&i.remove()})}insertColumn(t){const[e]=this.descendant(gs);e==null||e.children.head==null||e.children.forEach(r=>{const i=r.children.at(t),s=$i.formats(r.children.head.domNode),o=this.scroll.create($i.blotName,s);r.insertBefore(o,i)})}insertRow(t){const[e]=this.descendant(gs);if(e==null||e.children.head==null)return;const r=Yf(),i=this.scroll.create(Hs.blotName);e.children.head.children.forEach(()=>{const o=this.scroll.create($i.blotName,r);i.appendChild(o)});const s=e.children.at(t);e.insertBefore(i,s)}rows(){const t=this.children.head;return t==null?[]:t.children.map(e=>e)}}re(Ga,"blotName","table-container"),re(Ga,"tagName","TABLE");Ga.allowedChildren=[gs];gs.requiredContainer=Ga;gs.allowedChildren=[Hs];Hs.requiredContainer=gs;Hs.allowedChildren=[$i];$i.requiredContainer=Hs;function Yf(){return`row-${Math.random().toString(36).slice(2,6)}`}class Sb extends Qi{static register(){Tt.register($i),Tt.register(Hs),Tt.register(gs),Tt.register(Ga)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Ga).forEach(t=>{t.balanceCells()})}deleteColumn(){const[t,,e]=this.getTable();e!=null&&(t.deleteColumn(e.cellOffset()),this.quill.update(Tt.sources.USER))}deleteRow(){const[,t]=this.getTable();t!=null&&(t.remove(),this.quill.update(Tt.sources.USER))}deleteTable(){const[t]=this.getTable();if(t==null)return;const e=t.offset();t.remove(),this.quill.update(Tt.sources.USER),this.quill.setSelection(e,Tt.sources.SILENT)}getTable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(t==null)return[null,null,null,-1];const[e,r]=this.quill.getLine(t.index);if(e==null||e.statics.blotName!==$i.blotName)return[null,null,null,-1];const i=e.parent;return[i.parent.parent,i,e,r]}insertColumn(t){const e=this.quill.getSelection();if(!e)return;const[r,i,s]=this.getTable(e);if(s==null)return;const o=s.cellOffset();r.insertColumn(o+t),this.quill.update(Tt.sources.USER);let a=i.rowOffset();t===0&&(a+=1),this.quill.setSelection(e.index+a,e.length,Tt.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(t){const e=this.quill.getSelection();if(!e)return;const[r,i,s]=this.getTable(e);if(s==null)return;const o=i.rowOffset();r.insertRow(o+t),this.quill.update(Tt.sources.USER),t>0?this.quill.setSelection(e,Tt.sources.SILENT):this.quill.setSelection(e.index+i.children.length,e.length,Tt.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(t,e){const r=this.quill.getSelection();if(r==null)return;const i=new Array(t).fill(0).reduce(s=>{const o=new Array(e).fill(`
`).join("");return s.insert(o,{table:Yf()})},new fe().retain(r.index));this.quill.updateContents(i,Tt.sources.USER),this.quill.setSelection(r.index,Tt.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(Tt.events.SCROLL_OPTIMIZE,t=>{t.some(e=>["TD","TR","TBODY","TABLE"].includes(e.target.tagName)?(this.quill.once(Tt.events.TEXT_CHANGE,(r,i,s)=>{s===Tt.sources.USER&&this.balanceTables()}),!0):!1)})}}const A1=Vs("quill:toolbar");class Jf extends Qi{constructor(t,e){var r,i;if(super(t,e),Array.isArray(this.options.container)){const s=document.createElement("div");s.setAttribute("role","toolbar"),Lb(s,this.options.container),(i=(r=t.container)==null?void 0:r.parentNode)==null||i.insertBefore(s,t.container),this.container=s}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){A1.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(s=>{var a;const o=(a=this.options.handlers)==null?void 0:a[s];o&&this.addHandler(s,o)}),Array.from(this.container.querySelectorAll("button, select")).forEach(s=>{this.attach(s)}),this.quill.on(Tt.events.EDITOR_CHANGE,()=>{const[s]=this.quill.selection.getRange();this.update(s)})}addHandler(t,e){this.handlers[t]=e}attach(t){let e=Array.from(t.classList).find(i=>i.indexOf("ql-")===0);if(!e)return;if(e=e.slice(3),t.tagName==="BUTTON"&&t.setAttribute("type","button"),this.handlers[e]==null&&this.quill.scroll.query(e)==null){A1.warn("ignoring attaching to nonexistent format",e,t);return}const r=t.tagName==="SELECT"?"change":"click";t.addEventListener(r,i=>{let s;if(t.tagName==="SELECT"){if(t.selectedIndex<0)return;const a=t.options[t.selectedIndex];a.hasAttribute("selected")?s=!1:s=a.value||!1}else t.classList.contains("ql-active")?s=!1:s=t.value||!t.hasAttribute("value"),i.preventDefault();this.quill.focus();const[o]=this.quill.selection.getRange();if(this.handlers[e]!=null)this.handlers[e].call(this,s);else if(this.quill.scroll.query(e).prototype instanceof gi){if(s=prompt(`Enter ${e}`),!s)return;this.quill.updateContents(new fe().retain(o.index).delete(o.length).insert({[e]:s}),Tt.sources.USER)}else this.quill.format(e,s,Tt.sources.USER);this.update(o)}),this.controls.push([e,t])}update(t){const e=t==null?{}:this.quill.getFormat(t);this.controls.forEach(r=>{const[i,s]=r;if(s.tagName==="SELECT"){let o=null;if(t==null)o=null;else if(e[i]==null)o=s.querySelector("option[selected]");else if(!Array.isArray(e[i])){let a=e[i];typeof a=="string"&&(a=a.replace(/"/g,'\\"')),o=s.querySelector(`option[value="${a}"]`)}o==null?(s.value="",s.selectedIndex=-1):o.selected=!0}else if(t==null)s.classList.remove("ql-active"),s.setAttribute("aria-pressed","false");else if(s.hasAttribute("value")){const o=e[i],a=o===s.getAttribute("value")||o!=null&&o.toString()===s.getAttribute("value")||o==null&&!s.getAttribute("value");s.classList.toggle("ql-active",a),s.setAttribute("aria-pressed",a.toString())}else{const o=e[i]!=null;s.classList.toggle("ql-active",o),s.setAttribute("aria-pressed",o.toString())}})}}Jf.DEFAULTS={};function x1(n,t,e){const r=document.createElement("button");r.setAttribute("type","button"),r.classList.add(`ql-${t}`),r.setAttribute("aria-pressed","false"),e!=null?(r.value=e,r.setAttribute("aria-label",`${t}: ${e}`)):r.setAttribute("aria-label",t),n.appendChild(r)}function Lb(n,t){Array.isArray(t[0])||(t=[t]),t.forEach(e=>{const r=document.createElement("span");r.classList.add("ql-formats"),e.forEach(i=>{if(typeof i=="string")x1(r,i);else{const s=Object.keys(i)[0],o=i[s];Array.isArray(o)?kb(r,s,o):x1(r,s,o)}}),n.appendChild(r)})}function kb(n,t,e){const r=document.createElement("select");r.classList.add(`ql-${t}`),e.forEach(i=>{const s=document.createElement("option");i!==!1?s.setAttribute("value",String(i)):s.setAttribute("selected","selected"),r.appendChild(s)}),n.appendChild(r)}Jf.DEFAULTS={container:null,handlers:{clean(){const n=this.quill.getSelection();if(n!=null)if(n.length===0){const t=this.quill.getFormat();Object.keys(t).forEach(e=>{this.quill.scroll.query(e,de.INLINE)!=null&&this.quill.format(e,!1,Tt.sources.USER)})}else this.quill.removeFormat(n.index,n.length,Tt.sources.USER)},direction(n){const{align:t}=this.quill.getFormat();n==="rtl"&&t==null?this.quill.format("align","right",Tt.sources.USER):!n&&t==="right"&&this.quill.format("align",!1,Tt.sources.USER),this.quill.format("direction",n,Tt.sources.USER)},indent(n){const t=this.quill.getSelection(),e=this.quill.getFormat(t),r=parseInt(e.indent||0,10);if(n==="+1"||n==="-1"){let i=n==="+1"?1:-1;e.direction==="rtl"&&(i*=-1),this.quill.format("indent",r+i,Tt.sources.USER)}},link(n){n===!0&&(n=prompt("Enter link URL:")),this.quill.format("link",n,Tt.sources.USER)},list(n){const t=this.quill.getSelection(),e=this.quill.getFormat(t);n==="check"?e.list==="checked"||e.list==="unchecked"?this.quill.format("list",!1,Tt.sources.USER):this.quill.format("list","unchecked",Tt.sources.USER):this.quill.format("list",n,Tt.sources.USER)}}};const Eb='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',Cb='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',Ib='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',Ob='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',Tb='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',Pb='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',qb='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',Mb='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',N1='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',Rb='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',Db='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',jb='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',Fb='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',Bb='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',Ub='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',zb='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',Hb='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',Vb='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',$b='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',Wb='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',Gb='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',Kb='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',Yb='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',Jb='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',Xb='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',Zb='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',Qb='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',tv='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',ev='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',nv='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',rv='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',iv='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',sv='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',Ul={align:{"":Eb,center:Cb,right:Ib,justify:Ob},background:Tb,blockquote:Pb,bold:qb,clean:Mb,code:N1,"code-block":N1,color:Rb,direction:{"":Db,rtl:jb},formula:Fb,header:{1:Bb,2:Ub,3:zb,4:Hb,5:Vb,6:$b},italic:Wb,image:Gb,indent:{"+1":Kb,"-1":Yb},link:Jb,list:{bullet:Xb,check:Zb,ordered:Qb},script:{sub:tv,super:ev},strike:nv,table:rv,underline:iv,video:sv},ov='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let S1=0;function L1(n,t){n.setAttribute(t,`${n.getAttribute(t)!=="true"}`)}class Tu{constructor(t){this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",e=>{switch(e.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),e.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),L1(this.label,"aria-expanded"),L1(this.options,"aria-hidden")}buildItem(t){const e=document.createElement("span");e.tabIndex="0",e.setAttribute("role","button"),e.classList.add("ql-picker-item");const r=t.getAttribute("value");return r&&e.setAttribute("data-value",r),t.textContent&&e.setAttribute("data-label",t.textContent),e.addEventListener("click",()=>{this.selectItem(e,!0)}),e.addEventListener("keydown",i=>{switch(i.key){case"Enter":this.selectItem(e,!0),i.preventDefault();break;case"Escape":this.escape(),i.preventDefault();break}}),e}buildLabel(){const t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=ov,t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}buildOptions(){const t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id=`ql-picker-options-${S1}`,S1+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,Array.from(this.select.options).forEach(e=>{const r=this.buildItem(e);t.appendChild(r),e.selected===!0&&this.selectItem(r)}),this.container.appendChild(t)}buildPicker(){Array.from(this.select.attributes).forEach(t=>{this.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=this.container.querySelector(".ql-selected");t!==r&&(r!=null&&r.classList.remove("ql-selected"),t!=null&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let t;if(this.select.selectedIndex>-1){const r=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(r)}else this.selectItem(null);const e=t!=null&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",e)}}class c0 extends Tu{constructor(t,e){super(t),this.label.innerHTML=e,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(r=>{r.classList.add("ql-primary")})}buildItem(t){const e=super.buildItem(t);return e.style.backgroundColor=t.getAttribute("value")||"",e}selectItem(t,e){super.selectItem(t,e);const r=this.label.querySelector(".ql-color-label"),i=t&&t.getAttribute("data-value")||"";r&&(r.tagName==="line"?r.style.stroke=i:r.style.fill=i)}}class u0 extends Tu{constructor(t,e){super(t),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(r=>{r.innerHTML=e[r.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(t,e){super.selectItem(t,e);const r=t||this.defaultItem;if(r!=null){if(this.label.innerHTML===r.innerHTML)return;this.label.innerHTML=r.innerHTML}}}const av=n=>{const{overflowY:t}=getComputedStyle(n,null);return t!=="visible"&&t!=="clip"};class h0{constructor(t,e){this.quill=t,this.boundsContainer=e||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,av(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(t){const e=t.left+t.width/2-this.root.offsetWidth/2,r=t.bottom+this.quill.root.scrollTop;this.root.style.left=`${e}px`,this.root.style.top=`${r}px`,this.root.classList.remove("ql-flip");const i=this.boundsContainer.getBoundingClientRect(),s=this.root.getBoundingClientRect();let o=0;if(s.right>i.right&&(o=i.right-s.right,this.root.style.left=`${e+o}px`),s.left<i.left&&(o=i.left-s.left,this.root.style.left=`${e+o}px`),s.bottom>i.bottom){const a=s.bottom-s.top,c=t.bottom-t.top+a;this.root.style.top=`${r-c}px`,this.root.classList.add("ql-flip")}return o}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const lv=[!1,"center","right","justify"],cv=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],uv=[!1,"serif","monospace"],hv=["1","2","3",!1],fv=["small",!1,"large","huge"];class rc extends Wa{constructor(t,e){super(t,e);const r=i=>{if(!document.body.contains(t.root)){document.body.removeEventListener("click",r);return}this.tooltip!=null&&!this.tooltip.root.contains(i.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(s=>{s.container.contains(i.target)||s.close()})};t.emitter.listenDOM("click",document.body,r)}addModule(t){const e=super.addModule(t);return t==="toolbar"&&this.extendToolbar(e),e}buildButtons(t,e){Array.from(t).forEach(r=>{(r.getAttribute("class")||"").split(/\s+/).forEach(s=>{if(s.startsWith("ql-")&&(s=s.slice(3),e[s]!=null))if(s==="direction")r.innerHTML=e[s][""]+e[s].rtl;else if(typeof e[s]=="string")r.innerHTML=e[s];else{const o=r.value||"";o!=null&&e[s][o]&&(r.innerHTML=e[s][o])}})})}buildPickers(t,e){this.pickers=Array.from(t).map(i=>{if(i.classList.contains("ql-align")&&(i.querySelector("option")==null&&Nl(i,lv),typeof e.align=="object"))return new u0(i,e.align);if(i.classList.contains("ql-background")||i.classList.contains("ql-color")){const s=i.classList.contains("ql-background")?"background":"color";return i.querySelector("option")==null&&Nl(i,cv,s==="background"?"#ffffff":"#000000"),new c0(i,e[s])}return i.querySelector("option")==null&&(i.classList.contains("ql-font")?Nl(i,uv):i.classList.contains("ql-header")?Nl(i,hv):i.classList.contains("ql-size")&&Nl(i,fv)),new Tu(i)});const r=()=>{this.pickers.forEach(i=>{i.update()})};this.quill.on(oe.events.EDITOR_CHANGE,r)}}rc.DEFAULTS=vo({},Wa.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let n=this.container.querySelector("input.ql-image[type=file]");n==null&&(n=document.createElement("input"),n.setAttribute("type","file"),n.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),n.classList.add("ql-image"),n.addEventListener("change",()=>{const t=this.quill.getSelection(!0);this.quill.uploader.upload(t,n.files),n.value=""}),this.container.appendChild(n)),n.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class f0 extends h0{constructor(t,e){super(t,e),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",t=>{t.key==="Enter"?(this.save(),t.preventDefault()):t.key==="Escape"&&(this.cancel(),t.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;e!=null?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const r=this.quill.getBounds(this.quill.selection.savedRange);r!=null&&this.position(r),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${t}`)||""),this.root.setAttribute("data-mode",t)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:t}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:e}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,oe.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,oe.sources.USER)),this.quill.root.scrollTop=e;break}case"video":t=dv(t);case"formula":{if(!t)break;const e=this.quill.getSelection(!0);if(e!=null){const r=e.index+e.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),t,oe.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(r+1," ",oe.sources.USER),this.quill.setSelection(r+2,oe.sources.USER)}break}}this.textbox.value="",this.hide()}}function dv(n){let t=n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?`${t[1]||"https"}://www.youtube.com/embed/${t[2]}?showinfo=0`:(t=n.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${t[1]||"https"}://player.vimeo.com/video/${t[2]}/`:n}function Nl(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;t.forEach(r=>{const i=document.createElement("option");r===e?i.setAttribute("selected","selected"):i.setAttribute("value",String(r)),n.appendChild(i)})}const pv=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class d0 extends f0{constructor(t,e){super(t,e),this.quill.on(oe.events.EDITOR_CHANGE,(r,i,s,o)=>{if(r===oe.events.SELECTION_CHANGE)if(i!=null&&i.length>0&&o===oe.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const a=this.quill.getLines(i.index,i.length);if(a.length===1){const c=this.quill.getBounds(i);c!=null&&this.position(c)}else{const c=a[a.length-1],u=this.quill.getIndex(c),d=Math.min(c.length()-1,i.index+i.length-u),p=this.quill.getBounds(new Uo(u,d));p!=null&&this.position(p)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(oe.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const t=this.quill.getSelection();if(t!=null){const e=this.quill.getBounds(t);e!=null&&this.position(e)}},1)})}cancel(){this.show()}position(t){const e=super.position(t),r=this.root.querySelector(".ql-tooltip-arrow");return r.style.marginLeft="",e!==0&&(r.style.marginLeft=`${-1*e-r.offsetWidth/2}px`),e}}re(d0,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));class p0 extends rc{constructor(t,e){e.modules.toolbar!=null&&e.modules.toolbar.container==null&&(e.modules.toolbar.container=pv),super(t,e),this.quill.container.classList.add("ql-bubble")}extendToolbar(t){this.tooltip=new d0(this.quill,this.options.bounds),t.container!=null&&(this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),Ul),this.buildPickers(t.container.querySelectorAll("select"),Ul))}}p0.DEFAULTS=vo({},rc.DEFAULTS,{modules:{toolbar:{handlers:{link(n){n?this.quill.theme.tooltip.edit():this.quill.format("link",!1,Tt.sources.USER)}}}}});const gv=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class g0 extends f0{constructor(){super(...arguments);re(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){const r=this.linkRange;this.restoreFocus(),this.quill.formatText(r,"link",!1,oe.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(oe.events.SELECTION_CHANGE,(e,r,i)=>{if(e!=null){if(e.length===0&&i===oe.sources.USER){const[s,o]=this.quill.scroll.descendant(go,e.index);if(s!=null){this.linkRange=new Uo(e.index-o,s.length());const a=go.formats(s.domNode);this.preview.textContent=a,this.preview.setAttribute("href",a),this.show();const c=this.quill.getBounds(this.linkRange);c!=null&&this.position(c);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}re(g0,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));class m0 extends rc{constructor(t,e){e.modules.toolbar!=null&&e.modules.toolbar.container==null&&(e.modules.toolbar.container=gv),super(t,e),this.quill.container.classList.add("ql-snow")}extendToolbar(t){t.container!=null&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),Ul),this.buildPickers(t.container.querySelectorAll("select"),Ul),this.tooltip=new g0(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(e,r)=>{t.handlers.link.call(t,!r.format.link)}))}}m0.DEFAULTS=vo({},rc.DEFAULTS,{modules:{toolbar:{handlers:{link(n){if(n){const t=this.quill.getSelection();if(t==null||t.length===0)return;let e=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(e)&&e.indexOf("mailto:")!==0&&(e=`mailto:${e}`);const{tooltip:r}=this.quill.theme;r.edit("link",e)}else this.quill.format("link",!1,Tt.sources.USER)}}}}});Tt.register({"attributors/attribute/direction":Yp,"attributors/class/align":Wp,"attributors/class/background":Tm,"attributors/class/color":Om,"attributors/class/direction":Jp,"attributors/class/font":Qp,"attributors/class/size":e0,"attributors/style/align":Gp,"attributors/style/background":Vf,"attributors/style/color":Hf,"attributors/style/direction":Xp,"attributors/style/font":t0,"attributors/style/size":n0},!0);Tt.register({"formats/align":Wp,"formats/direction":Jp,"formats/indent":Ab,"formats/background":Vf,"formats/color":Hf,"formats/font":Qp,"formats/size":e0,"formats/blockquote":Qh,"formats/code-block":zr,"formats/header":tf,"formats/list":nc,"formats/bold":Bl,"formats/code":$f,"formats/italic":ef,"formats/link":go,"formats/script":nf,"formats/strike":rf,"formats/underline":sf,"formats/formula":Qc,"formats/image":xb,"formats/video":tu,"modules/syntax":l0,"modules/table":Sb,"modules/toolbar":Jf,"themes/bubble":p0,"themes/snow":m0,"ui/icons":Ul,"ui/picker":Tu,"ui/icon-picker":u0,"ui/color-picker":c0,"ui/tooltip":h0},!0);var b0={exports:{}};/*! For license information please see quill-cursors.js.LICENSE.txt */(function(n,t){(function(e,r){n.exports=r()})(self,()=>(()=>{var e={582:(o,a,c)=>{c.d(a,{Z:()=>f});var u=c(81),d=c.n(u),p=c(645),g=c.n(p)()(d());g.push([o.id,".ql-container{position:relative;overflow:hidden}@media(pointer: coarse){.ql-cursor-caret-container{z-index:-1}}.ql-cursor.hidden{display:none}.ql-cursor .ql-cursor-caret-container,.ql-cursor .ql-cursor-flag{position:absolute}.ql-cursor .ql-cursor-flag{z-index:1;transform:translate3d(-1px, -100%, 0);opacity:0;visibility:hidden;color:#fff;padding-bottom:2px;border-radius:0 3px 3px 0}.ql-cursor .ql-cursor-flag.flag-flipped{border-radius:3px 0 0 3px;transform:translate3d(calc(-100% + 1px ), -100%, 0)}@media screen{.ql-cursor .ql-cursor-flag{transition:opacity 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms,visibility 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms}}.ql-cursor .ql-cursor-flag .ql-cursor-name{margin-left:5px;margin-right:5px;display:inline-block;margin-top:-2px;white-space:nowrap}.ql-cursor .ql-cursor-flag.no-delay[style]{transition-delay:unset !important}.ql-cursor .ql-cursor-caret-container{cursor:text;margin-left:-9px;padding:0 9px}.ql-cursor .ql-cursor-caret-container.hover+.ql-cursor-flag{opacity:1;visibility:visible;transition:none}.ql-cursor .ql-cursor-caret-container.no-pointer{pointer-events:none}.ql-cursor .ql-cursor-caret-container .ql-cursor-caret{position:absolute;top:0;bottom:0;width:2px;margin-left:-1px;background-color:attr(data-color)}.ql-cursor .ql-cursor-selection-block{position:absolute;pointer-events:none}",""]);const f=g},645:o=>{o.exports=function(a){var c=[];return c.toString=function(){return this.map(function(u){var d="",p=u[5]!==void 0;return u[4]&&(d+="@supports (".concat(u[4],") {")),u[2]&&(d+="@media ".concat(u[2]," {")),p&&(d+="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {")),d+=a(u),p&&(d+="}"),u[2]&&(d+="}"),u[4]&&(d+="}"),d}).join("")},c.i=function(u,d,p,g,f){typeof u=="string"&&(u=[[null,u,void 0]]);var v={};if(p)for(var x=0;x<this.length;x++){var S=this[x][0];S!=null&&(v[S]=!0)}for(var y=0;y<u.length;y++){var A=[].concat(u[y]);p&&v[A[0]]||(f!==void 0&&(A[5]===void 0||(A[1]="@layer".concat(A[5].length>0?" ".concat(A[5]):""," {").concat(A[1],"}")),A[5]=f),d&&(A[2]&&(A[1]="@media ".concat(A[2]," {").concat(A[1],"}")),A[2]=d),g&&(A[4]?(A[1]="@supports (".concat(A[4],") {").concat(A[1],"}"),A[4]=g):A[4]="".concat(g)),c.push(A))}},c}},81:o=>{o.exports=function(a){return a[1]}},529:o=>{var a=-1;function c(w,k,T,B){if(w===k)return w?[[0,w]]:[];if(T!=null){var $=function(D,W,z){var Q=typeof z=="number"?{index:z,length:0}:z.oldRange,Z=typeof z=="number"?null:z.newRange,lt=D.length,rt=W.length;if(Q.length===0&&(Z===null||Z.length===0)){var mt=Q.index,ht=D.slice(0,mt),Dt=D.slice(mt),I=Z?Z.index:null,j=mt+rt-lt;if((I===null||I===j)&&!(j<0||j>rt)){var Y=W.slice(0,j);if((H=W.slice(j))===Dt){var L=Math.min(mt,j);if((et=ht.slice(0,L))===(bt=Y.slice(0,L)))return y(et,ht.slice(L),Y.slice(L),Dt)}}if(I===null||I===mt){var M=mt,H=(Y=W.slice(0,M),W.slice(M));if(Y===ht){var G=Math.min(lt-M,rt-M);if((wt=Dt.slice(Dt.length-G))===(Ct=H.slice(H.length-G)))return y(ht,Dt.slice(0,Dt.length-G),H.slice(0,H.length-G),wt)}}}if(Q.length>0&&Z&&Z.length===0){var et=D.slice(0,Q.index),wt=D.slice(Q.index+Q.length);if(!(rt<(L=et.length)+(G=wt.length))){var bt=W.slice(0,L),Ct=W.slice(rt-G);if(et===bt&&wt===Ct)return y(et,D.slice(L,lt-G),W.slice(L,rt-G),wt)}}return null}(w,k,T);if($)return $}var V=d(w,k),nt=w.substring(0,V);V=p(w=w.substring(V),k=k.substring(V));var ct=w.substring(w.length-V),q=function(D,W){var z;if(!D)return[[1,W]];if(!W)return[[a,D]];var Q=D.length>W.length?D:W,Z=D.length>W.length?W:D,lt=Q.indexOf(Z);if(lt!==-1)return z=[[1,Q.substring(0,lt)],[0,Z],[1,Q.substring(lt+Z.length)]],D.length>W.length&&(z[0][0]=z[2][0]=a),z;if(Z.length===1)return[[a,D],[1,W]];var rt=function(M,H){var G=M.length>H.length?M:H,et=M.length>H.length?H:M;if(G.length<4||2*et.length<G.length)return null;function wt(Vt,Nt,pt){for(var It,Mt,Ht,zt,Zt=Vt.substring(pt,pt+Math.floor(Vt.length/4)),Jt=-1,te="";(Jt=Nt.indexOf(Zt,Jt+1))!==-1;){var se=d(Vt.substring(pt),Nt.substring(Jt)),Xt=p(Vt.substring(0,pt),Nt.substring(0,Jt));te.length<Xt+se&&(te=Nt.substring(Jt-Xt,Jt)+Nt.substring(Jt,Jt+se),It=Vt.substring(0,pt-Xt),Mt=Vt.substring(pt+se),Ht=Nt.substring(0,Jt-Xt),zt=Nt.substring(Jt+se))}return 2*te.length>=Vt.length?[It,Mt,Ht,zt,te]:null}var bt,Ct,Et,Ut,_t,J=wt(G,et,Math.ceil(G.length/4)),ae=wt(G,et,Math.ceil(G.length/2));return J||ae?(bt=ae?J&&J[4].length>ae[4].length?J:ae:J,M.length>H.length?(Ct=bt[0],Et=bt[1],Ut=bt[2],_t=bt[3]):(Ut=bt[0],_t=bt[1],Ct=bt[2],Et=bt[3]),[Ct,Et,Ut,_t,bt[4]]):null}(D,W);if(rt){var mt=rt[0],ht=rt[1],Dt=rt[2],I=rt[3],j=rt[4],Y=c(mt,Dt),L=c(ht,I);return Y.concat([[0,j]],L)}return function(M,H){for(var G=M.length,et=H.length,wt=Math.ceil((G+et)/2),bt=wt,Ct=2*wt,Et=new Array(Ct),Ut=new Array(Ct),_t=0;_t<Ct;_t++)Et[_t]=-1,Ut[_t]=-1;Et[bt+1]=0,Ut[bt+1]=0;for(var J=G-et,ae=J%2!=0,Vt=0,Nt=0,pt=0,It=0,Mt=0;Mt<wt;Mt++){for(var Ht=-Mt+Vt;Ht<=Mt-Nt;Ht+=2){for(var zt=bt+Ht,Zt=(Kt=Ht===-Mt||Ht!==Mt&&Et[zt-1]<Et[zt+1]?Et[zt+1]:Et[zt-1]+1)-Ht;Kt<G&&Zt<et&&M.charAt(Kt)===H.charAt(Zt);)Kt++,Zt++;if(Et[zt]=Kt,Kt>G)Nt+=2;else if(Zt>et)Vt+=2;else if(ae&&(se=bt+J-Ht)>=0&&se<Ct&&Ut[se]!==-1&&Kt>=(te=G-Ut[se]))return u(M,H,Kt,Zt)}for(var Jt=-Mt+pt;Jt<=Mt-It;Jt+=2){for(var te,se=bt+Jt,Xt=(te=Jt===-Mt||Jt!==Mt&&Ut[se-1]<Ut[se+1]?Ut[se+1]:Ut[se-1]+1)-Jt;te<G&&Xt<et&&M.charAt(G-te-1)===H.charAt(et-Xt-1);)te++,Xt++;if(Ut[se]=te,te>G)It+=2;else if(Xt>et)pt+=2;else if(!ae){var Kt;if((zt=bt+J-Jt)>=0&&zt<Ct&&Et[zt]!==-1&&(Zt=bt+(Kt=Et[zt])-zt,Kt>=(te=G-te)))return u(M,H,Kt,Zt)}}}return[[a,M],[1,H]]}(D,W)}(w=w.substring(0,w.length-V),k=k.substring(0,k.length-V));return nt&&q.unshift([0,nt]),ct&&q.push([0,ct]),g(q,B),q}function u(w,k,T,B){var $=w.substring(0,T),V=k.substring(0,B),nt=w.substring(T),ct=k.substring(B),q=c($,V),D=c(nt,ct);return q.concat(D)}function d(w,k){if(!w||!k||w.charAt(0)!==k.charAt(0))return 0;for(var T=0,B=Math.min(w.length,k.length),$=B,V=0;T<$;)w.substring(V,$)==k.substring(V,$)?V=T=$:B=$,$=Math.floor((B-T)/2+T);return f(w.charCodeAt($-1))&&$--,$}function p(w,k){if(!w||!k||w.slice(-1)!==k.slice(-1))return 0;for(var T=0,B=Math.min(w.length,k.length),$=B,V=0;T<$;)w.substring(w.length-$,w.length-V)==k.substring(k.length-$,k.length-V)?V=T=$:B=$,$=Math.floor((B-T)/2+T);return v(w.charCodeAt(w.length-$))&&$--,$}function g(w,k){w.push([0,""]);for(var T,B=0,$=0,V=0,nt="",ct="";B<w.length;)if(B<w.length-1&&!w[B][1])w.splice(B,1);else switch(w[B][0]){case 1:V++,ct+=w[B][1],B++;break;case a:$++,nt+=w[B][1],B++;break;case 0:var q=B-V-$-1;if(k){if(q>=0&&S(w[q][1])){var D=w[q][1].slice(-1);if(w[q][1]=w[q][1].slice(0,-1),nt=D+nt,ct=D+ct,!w[q][1]){w.splice(q,1),B--;var W=q-1;w[W]&&w[W][0]===1&&(V++,ct=w[W][1]+ct,W--),w[W]&&w[W][0]===a&&($++,nt=w[W][1]+nt,W--),q=W}}x(w[B][1])&&(D=w[B][1].charAt(0),w[B][1]=w[B][1].slice(1),nt+=D,ct+=D)}if(B<w.length-1&&!w[B][1]){w.splice(B,1);break}if(nt.length>0||ct.length>0){nt.length>0&&ct.length>0&&((T=d(ct,nt))!==0&&(q>=0?w[q][1]+=ct.substring(0,T):(w.splice(0,0,[0,ct.substring(0,T)]),B++),ct=ct.substring(T),nt=nt.substring(T)),(T=p(ct,nt))!==0&&(w[B][1]=ct.substring(ct.length-T)+w[B][1],ct=ct.substring(0,ct.length-T),nt=nt.substring(0,nt.length-T)));var z=V+$;nt.length===0&&ct.length===0?(w.splice(B-z,z),B-=z):nt.length===0?(w.splice(B-z,z,[1,ct]),B=B-z+1):ct.length===0?(w.splice(B-z,z,[a,nt]),B=B-z+1):(w.splice(B-z,z,[a,nt],[1,ct]),B=B-z+2)}B!==0&&w[B-1][0]===0?(w[B-1][1]+=w[B][1],w.splice(B,1)):B++,V=0,$=0,nt="",ct=""}w[w.length-1][1]===""&&w.pop();var Q=!1;for(B=1;B<w.length-1;)w[B-1][0]===0&&w[B+1][0]===0&&(w[B][1].substring(w[B][1].length-w[B-1][1].length)===w[B-1][1]?(w[B][1]=w[B-1][1]+w[B][1].substring(0,w[B][1].length-w[B-1][1].length),w[B+1][1]=w[B-1][1]+w[B+1][1],w.splice(B-1,1),Q=!0):w[B][1].substring(0,w[B+1][1].length)==w[B+1][1]&&(w[B-1][1]+=w[B+1][1],w[B][1]=w[B][1].substring(w[B+1][1].length)+w[B+1][1],w.splice(B+1,1),Q=!0)),B++;Q&&g(w,k)}function f(w){return w>=55296&&w<=56319}function v(w){return w>=56320&&w<=57343}function x(w){return v(w.charCodeAt(0))}function S(w){return f(w.charCodeAt(w.length-1))}function y(w,k,T,B){return S(w)||x(B)?null:function($){for(var V=[],nt=0;nt<$.length;nt++)$[nt][1].length>0&&V.push($[nt]);return V}([[0,w],[a,k],[1,T],[0,B]])}function A(w,k,T){return c(w,k,T,!0)}A.INSERT=1,A.DELETE=a,A.EQUAL=0,o.exports=A},465:(o,a,c)=>{o=c.nmd(o);var u="__lodash_hash_undefined__",d=9007199254740991,p="[object Arguments]",g="[object Boolean]",f="[object Date]",v="[object Function]",x="[object GeneratorFunction]",S="[object Map]",y="[object Number]",A="[object Object]",w="[object Promise]",k="[object RegExp]",T="[object Set]",B="[object String]",$="[object Symbol]",V="[object WeakMap]",nt="[object ArrayBuffer]",ct="[object DataView]",q="[object Float32Array]",D="[object Float64Array]",W="[object Int8Array]",z="[object Int16Array]",Q="[object Int32Array]",Z="[object Uint8Array]",lt="[object Uint8ClampedArray]",rt="[object Uint16Array]",mt="[object Uint32Array]",ht=/\w*$/,Dt=/^\[object .+?Constructor\]$/,I=/^(?:0|[1-9]\d*)$/,j={};j[p]=j["[object Array]"]=j[nt]=j[ct]=j[g]=j[f]=j[q]=j[D]=j[W]=j[z]=j[Q]=j[S]=j[y]=j[A]=j[k]=j[T]=j[B]=j[$]=j[Z]=j[lt]=j[rt]=j[mt]=!0,j["[object Error]"]=j[v]=j[V]=!1;var Y=typeof c.g=="object"&&c.g&&c.g.Object===Object&&c.g,L=typeof self=="object"&&self&&self.Object===Object&&self,M=Y||L||Function("return this")(),H=a&&!a.nodeType&&a,G=H&&o&&!o.nodeType&&o,et=G&&G.exports===H;function wt(ot,xt){return ot.set(xt[0],xt[1]),ot}function bt(ot,xt){return ot.add(xt),ot}function Ct(ot,xt,Bt,Wt){var pe=-1,Me=ot?ot.length:0;for(Wt&&Me&&(Bt=ot[++pe]);++pe<Me;)Bt=xt(Bt,ot[pe],pe,ot);return Bt}function Et(ot){var xt=!1;if(ot!=null&&typeof ot.toString!="function")try{xt=!!(ot+"")}catch{}return xt}function Ut(ot){var xt=-1,Bt=Array(ot.size);return ot.forEach(function(Wt,pe){Bt[++xt]=[pe,Wt]}),Bt}function _t(ot,xt){return function(Bt){return ot(xt(Bt))}}function J(ot){var xt=-1,Bt=Array(ot.size);return ot.forEach(function(Wt){Bt[++xt]=Wt}),Bt}var ae,Vt=Array.prototype,Nt=Function.prototype,pt=Object.prototype,It=M["__core-js_shared__"],Mt=(ae=/[^.]+$/.exec(It&&It.keys&&It.keys.IE_PROTO||""))?"Symbol(src)_1."+ae:"",Ht=Nt.toString,zt=pt.hasOwnProperty,Zt=pt.toString,Jt=RegExp("^"+Ht.call(zt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=et?M.Buffer:void 0,se=M.Symbol,Xt=M.Uint8Array,Kt=_t(Object.getPrototypeOf,Object),$t=Object.create,cn=pt.propertyIsEnumerable,Fe=Vt.splice,Hn=Object.getOwnPropertySymbols,He=te?te.isBuffer:void 0,tn=_t(Object.keys,Object),Rn=Sn(M,"DataView"),Le=Sn(M,"Map"),_n=Sn(M,"Promise"),De=Sn(M,"Set"),rn=Sn(M,"WeakMap"),sn=Sn(Object,"create"),Xe=Vn(Rn),ce=Vn(Le),Oe=Vn(_n),Yn=Vn(De),gn=Vn(rn),On=se?se.prototype:void 0,Jn=On?On.valueOf:void 0;function ee(ot){var xt=-1,Bt=ot?ot.length:0;for(this.clear();++xt<Bt;){var Wt=ot[xt];this.set(Wt[0],Wt[1])}}function ln(ot){var xt=-1,Bt=ot?ot.length:0;for(this.clear();++xt<Bt;){var Wt=ot[xt];this.set(Wt[0],Wt[1])}}function mn(ot){var xt=-1,Bt=ot?ot.length:0;for(this.clear();++xt<Bt;){var Wt=ot[xt];this.set(Wt[0],Wt[1])}}function An(ot){this.__data__=new ln(ot)}function Ke(ot,xt,Bt){var Wt=ot[xt];zt.call(ot,xt)&&Hr(Wt,Bt)&&(Bt!==void 0||xt in ot)||(ot[xt]=Bt)}function en(ot,xt){for(var Bt=ot.length;Bt--;)if(Hr(ot[Bt][0],xt))return Bt;return-1}function Te(ot,xt,Bt,Wt,pe,Me,Ze){var Se;if(Wt&&(Se=Me?Wt(ot,pe,Me,Ze):Wt(ot)),Se!==void 0)return Se;if(!qe(ot))return ot;var un=dt(ot);if(un){if(Se=function(ue){var Be=ue.length,$e=ue.constructor(Be);return Be&&typeof ue[0]=="string"&&zt.call(ue,"index")&&($e.index=ue.index,$e.input=ue.input),$e}(ot),!xt)return function(ue,Be){var $e=-1,ye=ue.length;for(Be||(Be=Array(ye));++$e<ye;)Be[$e]=ue[$e];return Be}(ot,Se)}else{var _e=Ve(ot),dr=_e==v||_e==x;if(Ft(ot))return function(ue,Be){if(Be)return ue.slice();var $e=new ue.constructor(ue.length);return ue.copy($e),$e}(ot,xt);if(_e==A||_e==p||dr&&!Me){if(Et(ot))return Me?ot:{};if(Se=function(ue){return typeof ue.constructor!="function"||Dn(ue)?{}:qe(Be=Kt(ue))?$t(Be):{};var Be}(dr?{}:ot),!xt)return function(ue,Be){return wr(ue,Xn(ue),Be)}(ot,function(ue,Be){return ue&&wr(Be,Ne(Be),ue)}(Se,ot))}else{if(!j[_e])return Me?ot:{};Se=function(ue,Be,$e,ye){var me,tr=ue.constructor;switch(Be){case nt:return kr(ue);case g:case f:return new tr(+ue);case ct:return function(Ee,bn){var on=bn?kr(Ee.buffer):Ee.buffer;return new Ee.constructor(on,Ee.byteOffset,Ee.byteLength)}(ue,ye);case q:case D:case W:case z:case Q:case Z:case lt:case rt:case mt:return function(Ee,bn){var on=bn?kr(Ee.buffer):Ee.buffer;return new Ee.constructor(on,Ee.byteOffset,Ee.length)}(ue,ye);case S:return function(Ee,bn,on){return Ct(bn?on(Ut(Ee),!0):Ut(Ee),wt,new Ee.constructor)}(ue,ye,$e);case y:case B:return new tr(ue);case k:return function(Ee){var bn=new Ee.constructor(Ee.source,ht.exec(Ee));return bn.lastIndex=Ee.lastIndex,bn}(ue);case T:return function(Ee,bn,on){return Ct(bn?on(J(Ee),!0):J(Ee),bt,new Ee.constructor)}(ue,ye,$e);case $:return me=ue,Jn?Object(Jn.call(me)):{}}}(ot,_e,Te,xt)}}Ze||(Ze=new An);var Qn=Ze.get(ot);if(Qn)return Qn;if(Ze.set(ot,Se),!un)var pr=Bt?function(ue){return function(Be,$e,ye){var me=$e(Be);return dt(Be)?me:function(tr,Ee){for(var bn=-1,on=Ee.length,gr=tr.length;++bn<on;)tr[gr+bn]=Ee[bn];return tr}(me,ye(Be))}(ue,Ne,Xn)}(ot):Ne(ot);return function(ue,Be){for(var $e=-1,ye=ue?ue.length:0;++$e<ye&&Be(ue[$e],$e)!==!1;);}(pr||ot,function(ue,Be){pr&&(ue=ot[Be=ue]),Ke(Se,Be,Te(ue,xt,Bt,Wt,Be,ot,Ze))}),Se}function kr(ot){var xt=new ot.constructor(ot.byteLength);return new Xt(xt).set(new Xt(ot)),xt}function wr(ot,xt,Bt,Wt){Bt||(Bt={});for(var pe=-1,Me=xt.length;++pe<Me;){var Ze=xt[pe],Se=Wt?Wt(Bt[Ze],ot[Ze],Ze,Bt,ot):void 0;Ke(Bt,Ze,Se===void 0?ot[Ze]:Se)}return Bt}function Tn(ot,xt){var Bt,Wt,pe=ot.__data__;return((Wt=typeof(Bt=xt))=="string"||Wt=="number"||Wt=="symbol"||Wt=="boolean"?Bt!=="__proto__":Bt===null)?pe[typeof xt=="string"?"string":"hash"]:pe.map}function Sn(ot,xt){var Bt=function(Wt,pe){return Wt==null?void 0:Wt[pe]}(ot,xt);return function(Wt){return!(!qe(Wt)||(pe=Wt,Mt&&Mt in pe))&&(Qt(Wt)||Et(Wt)?Jt:Dt).test(Vn(Wt));var pe}(Bt)?Bt:void 0}ee.prototype.clear=function(){this.__data__=sn?sn(null):{}},ee.prototype.delete=function(ot){return this.has(ot)&&delete this.__data__[ot]},ee.prototype.get=function(ot){var xt=this.__data__;if(sn){var Bt=xt[ot];return Bt===u?void 0:Bt}return zt.call(xt,ot)?xt[ot]:void 0},ee.prototype.has=function(ot){var xt=this.__data__;return sn?xt[ot]!==void 0:zt.call(xt,ot)},ee.prototype.set=function(ot,xt){return this.__data__[ot]=sn&&xt===void 0?u:xt,this},ln.prototype.clear=function(){this.__data__=[]},ln.prototype.delete=function(ot){var xt=this.__data__,Bt=en(xt,ot);return!(Bt<0||(Bt==xt.length-1?xt.pop():Fe.call(xt,Bt,1),0))},ln.prototype.get=function(ot){var xt=this.__data__,Bt=en(xt,ot);return Bt<0?void 0:xt[Bt][1]},ln.prototype.has=function(ot){return en(this.__data__,ot)>-1},ln.prototype.set=function(ot,xt){var Bt=this.__data__,Wt=en(Bt,ot);return Wt<0?Bt.push([ot,xt]):Bt[Wt][1]=xt,this},mn.prototype.clear=function(){this.__data__={hash:new ee,map:new(Le||ln),string:new ee}},mn.prototype.delete=function(ot){return Tn(this,ot).delete(ot)},mn.prototype.get=function(ot){return Tn(this,ot).get(ot)},mn.prototype.has=function(ot){return Tn(this,ot).has(ot)},mn.prototype.set=function(ot,xt){return Tn(this,ot).set(ot,xt),this},An.prototype.clear=function(){this.__data__=new ln},An.prototype.delete=function(ot){return this.__data__.delete(ot)},An.prototype.get=function(ot){return this.__data__.get(ot)},An.prototype.has=function(ot){return this.__data__.has(ot)},An.prototype.set=function(ot,xt){var Bt=this.__data__;if(Bt instanceof ln){var Wt=Bt.__data__;if(!Le||Wt.length<199)return Wt.push([ot,xt]),this;Bt=this.__data__=new mn(Wt)}return Bt.set(ot,xt),this};var Xn=Hn?_t(Hn,Object):function(){return[]},Ve=function(ot){return Zt.call(ot)};function Zn(ot,xt){return!!(xt=xt??d)&&(typeof ot=="number"||I.test(ot))&&ot>-1&&ot%1==0&&ot<xt}function Dn(ot){var xt=ot&&ot.constructor;return ot===(typeof xt=="function"&&xt.prototype||pt)}function Vn(ot){if(ot!=null){try{return Ht.call(ot)}catch{}try{return ot+""}catch{}}return""}function Hr(ot,xt){return ot===xt||ot!=ot&&xt!=xt}(Rn&&Ve(new Rn(new ArrayBuffer(1)))!=ct||Le&&Ve(new Le)!=S||_n&&Ve(_n.resolve())!=w||De&&Ve(new De)!=T||rn&&Ve(new rn)!=V)&&(Ve=function(ot){var xt=Zt.call(ot),Bt=xt==A?ot.constructor:void 0,Wt=Bt?Vn(Bt):void 0;if(Wt)switch(Wt){case Xe:return ct;case ce:return S;case Oe:return w;case Yn:return T;case gn:return V}return xt});var dt=Array.isArray;function At(ot){return ot!=null&&function(xt){return typeof xt=="number"&&xt>-1&&xt%1==0&&xt<=d}(ot.length)&&!Qt(ot)}var Ft=He||function(){return!1};function Qt(ot){var xt=qe(ot)?Zt.call(ot):"";return xt==v||xt==x}function qe(ot){var xt=typeof ot;return!!ot&&(xt=="object"||xt=="function")}function Ne(ot){return At(ot)?function(xt,Bt){var Wt=dt(xt)||function(Se){return function(un){return function(_e){return!!_e&&typeof _e=="object"}(un)&&At(un)}(Se)&&zt.call(Se,"callee")&&(!cn.call(Se,"callee")||Zt.call(Se)==p)}(xt)?function(Se,un){for(var _e=-1,dr=Array(Se);++_e<Se;)dr[_e]=un(_e);return dr}(xt.length,String):[],pe=Wt.length,Me=!!pe;for(var Ze in xt)!Bt&&!zt.call(xt,Ze)||Me&&(Ze=="length"||Zn(Ze,pe))||Wt.push(Ze);return Wt}(ot):function(xt){if(!Dn(xt))return tn(xt);var Bt=[];for(var Wt in Object(xt))zt.call(xt,Wt)&&Wt!="constructor"&&Bt.push(Wt);return Bt}(ot)}o.exports=function(ot){return Te(ot,!0,!0)}},307:(o,a,c)=>{o=c.nmd(o);var u="__lodash_hash_undefined__",d=9007199254740991,p="[object Arguments]",g="[object Array]",f="[object Boolean]",v="[object Date]",x="[object Error]",S="[object Function]",y="[object Map]",A="[object Number]",w="[object Object]",k="[object Promise]",T="[object RegExp]",B="[object Set]",$="[object String]",V="[object WeakMap]",nt="[object ArrayBuffer]",ct="[object DataView]",q=/^\[object .+?Constructor\]$/,D=/^(?:0|[1-9]\d*)$/,W={};W["[object Float32Array]"]=W["[object Float64Array]"]=W["[object Int8Array]"]=W["[object Int16Array]"]=W["[object Int32Array]"]=W["[object Uint8Array]"]=W["[object Uint8ClampedArray]"]=W["[object Uint16Array]"]=W["[object Uint32Array]"]=!0,W[p]=W[g]=W[nt]=W[f]=W[ct]=W[v]=W[x]=W[S]=W[y]=W[A]=W[w]=W[T]=W[B]=W[$]=W[V]=!1;var z=typeof c.g=="object"&&c.g&&c.g.Object===Object&&c.g,Q=typeof self=="object"&&self&&self.Object===Object&&self,Z=z||Q||Function("return this")(),lt=a&&!a.nodeType&&a,rt=lt&&o&&!o.nodeType&&o,mt=rt&&rt.exports===lt,ht=mt&&z.process,Dt=function(){try{return ht&&ht.binding&&ht.binding("util")}catch{}}(),I=Dt&&Dt.isTypedArray;function j(dt,At){for(var Ft=-1,Qt=dt==null?0:dt.length;++Ft<Qt;)if(At(dt[Ft],Ft,dt))return!0;return!1}function Y(dt){var At=-1,Ft=Array(dt.size);return dt.forEach(function(Qt,qe){Ft[++At]=[qe,Qt]}),Ft}function L(dt){var At=-1,Ft=Array(dt.size);return dt.forEach(function(Qt){Ft[++At]=Qt}),Ft}var M,H,G,et=Array.prototype,wt=Function.prototype,bt=Object.prototype,Ct=Z["__core-js_shared__"],Et=wt.toString,Ut=bt.hasOwnProperty,_t=(M=/[^.]+$/.exec(Ct&&Ct.keys&&Ct.keys.IE_PROTO||""))?"Symbol(src)_1."+M:"",J=bt.toString,ae=RegExp("^"+Et.call(Ut).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vt=mt?Z.Buffer:void 0,Nt=Z.Symbol,pt=Z.Uint8Array,It=bt.propertyIsEnumerable,Mt=et.splice,Ht=Nt?Nt.toStringTag:void 0,zt=Object.getOwnPropertySymbols,Zt=Vt?Vt.isBuffer:void 0,Jt=(H=Object.keys,G=Object,function(dt){return H(G(dt))}),te=mn(Z,"DataView"),se=mn(Z,"Map"),Xt=mn(Z,"Promise"),Kt=mn(Z,"Set"),$t=mn(Z,"WeakMap"),cn=mn(Object,"create"),Fe=Te(te),Hn=Te(se),He=Te(Xt),tn=Te(Kt),Rn=Te($t),Le=Nt?Nt.prototype:void 0,_n=Le?Le.valueOf:void 0;function De(dt){var At=-1,Ft=dt==null?0:dt.length;for(this.clear();++At<Ft;){var Qt=dt[At];this.set(Qt[0],Qt[1])}}function rn(dt){var At=-1,Ft=dt==null?0:dt.length;for(this.clear();++At<Ft;){var Qt=dt[At];this.set(Qt[0],Qt[1])}}function sn(dt){var At=-1,Ft=dt==null?0:dt.length;for(this.clear();++At<Ft;){var Qt=dt[At];this.set(Qt[0],Qt[1])}}function Xe(dt){var At=-1,Ft=dt==null?0:dt.length;for(this.__data__=new sn;++At<Ft;)this.add(dt[At])}function ce(dt){var At=this.__data__=new rn(dt);this.size=At.size}function Oe(dt,At){for(var Ft=dt.length;Ft--;)if(kr(dt[Ft][0],At))return Ft;return-1}function Yn(dt){return dt==null?dt===void 0?"[object Undefined]":"[object Null]":Ht&&Ht in Object(dt)?function(At){var Ft=Ut.call(At,Ht),Qt=At[Ht];try{At[Ht]=void 0;var qe=!0}catch{}var Ne=J.call(At);return qe&&(Ft?At[Ht]=Qt:delete At[Ht]),Ne}(dt):function(At){return J.call(At)}(dt)}function gn(dt){return Dn(dt)&&Yn(dt)==p}function On(dt,At,Ft,Qt,qe){return dt===At||(dt==null||At==null||!Dn(dt)&&!Dn(At)?dt!=dt&&At!=At:function(Ne,ot,xt,Bt,Wt,pe){var Me=Tn(Ne),Ze=Tn(ot),Se=Me?g:Ke(Ne),un=Ze?g:Ke(ot),_e=(Se=Se==p?w:Se)==w,dr=(un=un==p?w:un)==w,Qn=Se==un;if(Qn&&Sn(Ne)){if(!Sn(ot))return!1;Me=!0,_e=!1}if(Qn&&!_e)return pe||(pe=new ce),Me||Vn(Ne)?Jn(Ne,ot,xt,Bt,Wt,pe):function(ye,me,tr,Ee,bn,on,gr){switch(tr){case ct:if(ye.byteLength!=me.byteLength||ye.byteOffset!=me.byteOffset)return!1;ye=ye.buffer,me=me.buffer;case nt:return!(ye.byteLength!=me.byteLength||!on(new pt(ye),new pt(me)));case f:case v:case A:return kr(+ye,+me);case x:return ye.name==me.name&&ye.message==me.message;case T:case $:return ye==me+"";case y:var er=Y;case B:var nr=1&Ee;if(er||(er=L),ye.size!=me.size&&!nr)return!1;var jn=gr.get(ye);if(jn)return jn==me;Ee|=2,gr.set(ye,me);var Fn=Jn(er(ye),er(me),Ee,bn,on,gr);return gr.delete(ye),Fn;case"[object Symbol]":if(_n)return _n.call(ye)==_n.call(me)}return!1}(Ne,ot,Se,xt,Bt,Wt,pe);if(!(1&xt)){var pr=_e&&Ut.call(Ne,"__wrapped__"),ue=dr&&Ut.call(ot,"__wrapped__");if(pr||ue){var Be=pr?Ne.value():Ne,$e=ue?ot.value():ot;return pe||(pe=new ce),Wt(Be,$e,xt,Bt,pe)}}return!!Qn&&(pe||(pe=new ce),function(ye,me,tr,Ee,bn,on){var gr=1&tr,er=ee(ye),nr=er.length;if(nr!=ee(me).length&&!gr)return!1;for(var jn=nr;jn--;){var Fn=er[jn];if(!(gr?Fn in me:Ut.call(me,Fn)))return!1}var ns=on.get(ye);if(ns&&on.get(me))return ns==me;var mr=!0;on.set(ye,me),on.set(me,ye);for(var Er=gr;++jn<nr;){var Vr=ye[Fn=er[jn]],$r=me[Fn];if(Ee)var qi=gr?Ee($r,Vr,Fn,me,ye,on):Ee(Vr,$r,Fn,ye,me,on);if(!(qi===void 0?Vr===$r||bn(Vr,$r,tr,Ee,on):qi)){mr=!1;break}Er||(Er=Fn=="constructor")}if(mr&&!Er){var Ln=ye.constructor,Mn=me.constructor;Ln==Mn||!("constructor"in ye)||!("constructor"in me)||typeof Ln=="function"&&Ln instanceof Ln&&typeof Mn=="function"&&Mn instanceof Mn||(mr=!1)}return on.delete(ye),on.delete(me),mr}(Ne,ot,xt,Bt,Wt,pe))}(dt,At,Ft,Qt,On,qe))}function Jn(dt,At,Ft,Qt,qe,Ne){var ot=1&Ft,xt=dt.length,Bt=At.length;if(xt!=Bt&&!(ot&&Bt>xt))return!1;var Wt=Ne.get(dt);if(Wt&&Ne.get(At))return Wt==At;var pe=-1,Me=!0,Ze=2&Ft?new Xe:void 0;for(Ne.set(dt,At),Ne.set(At,dt);++pe<xt;){var Se=dt[pe],un=At[pe];if(Qt)var _e=ot?Qt(un,Se,pe,At,dt,Ne):Qt(Se,un,pe,dt,At,Ne);if(_e!==void 0){if(_e)continue;Me=!1;break}if(Ze){if(!j(At,function(dr,Qn){if(pr=Qn,!Ze.has(pr)&&(Se===dr||qe(Se,dr,Ft,Qt,Ne)))return Ze.push(Qn);var pr})){Me=!1;break}}else if(Se!==un&&!qe(Se,un,Ft,Qt,Ne)){Me=!1;break}}return Ne.delete(dt),Ne.delete(At),Me}function ee(dt){return function(At,Ft,Qt){var qe=Ft(At);return Tn(At)?qe:function(Ne,ot){for(var xt=-1,Bt=ot.length,Wt=Ne.length;++xt<Bt;)Ne[Wt+xt]=ot[xt];return Ne}(qe,Qt(At))}(dt,Hr,An)}function ln(dt,At){var Ft,Qt,qe=dt.__data__;return((Qt=typeof(Ft=At))=="string"||Qt=="number"||Qt=="symbol"||Qt=="boolean"?Ft!=="__proto__":Ft===null)?qe[typeof At=="string"?"string":"hash"]:qe.map}function mn(dt,At){var Ft=function(Qt,qe){return Qt==null?void 0:Qt[qe]}(dt,At);return function(Qt){return!(!Zn(Qt)||function(qe){return!!_t&&_t in qe}(Qt))&&(Xn(Qt)?ae:q).test(Te(Qt))}(Ft)?Ft:void 0}De.prototype.clear=function(){this.__data__=cn?cn(null):{},this.size=0},De.prototype.delete=function(dt){var At=this.has(dt)&&delete this.__data__[dt];return this.size-=At?1:0,At},De.prototype.get=function(dt){var At=this.__data__;if(cn){var Ft=At[dt];return Ft===u?void 0:Ft}return Ut.call(At,dt)?At[dt]:void 0},De.prototype.has=function(dt){var At=this.__data__;return cn?At[dt]!==void 0:Ut.call(At,dt)},De.prototype.set=function(dt,At){var Ft=this.__data__;return this.size+=this.has(dt)?0:1,Ft[dt]=cn&&At===void 0?u:At,this},rn.prototype.clear=function(){this.__data__=[],this.size=0},rn.prototype.delete=function(dt){var At=this.__data__,Ft=Oe(At,dt);return!(Ft<0||(Ft==At.length-1?At.pop():Mt.call(At,Ft,1),--this.size,0))},rn.prototype.get=function(dt){var At=this.__data__,Ft=Oe(At,dt);return Ft<0?void 0:At[Ft][1]},rn.prototype.has=function(dt){return Oe(this.__data__,dt)>-1},rn.prototype.set=function(dt,At){var Ft=this.__data__,Qt=Oe(Ft,dt);return Qt<0?(++this.size,Ft.push([dt,At])):Ft[Qt][1]=At,this},sn.prototype.clear=function(){this.size=0,this.__data__={hash:new De,map:new(se||rn),string:new De}},sn.prototype.delete=function(dt){var At=ln(this,dt).delete(dt);return this.size-=At?1:0,At},sn.prototype.get=function(dt){return ln(this,dt).get(dt)},sn.prototype.has=function(dt){return ln(this,dt).has(dt)},sn.prototype.set=function(dt,At){var Ft=ln(this,dt),Qt=Ft.size;return Ft.set(dt,At),this.size+=Ft.size==Qt?0:1,this},Xe.prototype.add=Xe.prototype.push=function(dt){return this.__data__.set(dt,u),this},Xe.prototype.has=function(dt){return this.__data__.has(dt)},ce.prototype.clear=function(){this.__data__=new rn,this.size=0},ce.prototype.delete=function(dt){var At=this.__data__,Ft=At.delete(dt);return this.size=At.size,Ft},ce.prototype.get=function(dt){return this.__data__.get(dt)},ce.prototype.has=function(dt){return this.__data__.has(dt)},ce.prototype.set=function(dt,At){var Ft=this.__data__;if(Ft instanceof rn){var Qt=Ft.__data__;if(!se||Qt.length<199)return Qt.push([dt,At]),this.size=++Ft.size,this;Ft=this.__data__=new sn(Qt)}return Ft.set(dt,At),this.size=Ft.size,this};var An=zt?function(dt){return dt==null?[]:(dt=Object(dt),function(At,Ft){for(var Qt=-1,qe=At==null?0:At.length,Ne=0,ot=[];++Qt<qe;){var xt=At[Qt];Bt=xt,It.call(dt,Bt)&&(ot[Ne++]=xt)}var Bt;return ot}(zt(dt)))}:function(){return[]},Ke=Yn;function en(dt,At){return!!(At=At??d)&&(typeof dt=="number"||D.test(dt))&&dt>-1&&dt%1==0&&dt<At}function Te(dt){if(dt!=null){try{return Et.call(dt)}catch{}try{return dt+""}catch{}}return""}function kr(dt,At){return dt===At||dt!=dt&&At!=At}(te&&Ke(new te(new ArrayBuffer(1)))!=ct||se&&Ke(new se)!=y||Xt&&Ke(Xt.resolve())!=k||Kt&&Ke(new Kt)!=B||$t&&Ke(new $t)!=V)&&(Ke=function(dt){var At=Yn(dt),Ft=At==w?dt.constructor:void 0,Qt=Ft?Te(Ft):"";if(Qt)switch(Qt){case Fe:return ct;case Hn:return y;case He:return k;case tn:return B;case Rn:return V}return At});var wr=gn(function(){return arguments}())?gn:function(dt){return Dn(dt)&&Ut.call(dt,"callee")&&!It.call(dt,"callee")},Tn=Array.isArray,Sn=Zt||function(){return!1};function Xn(dt){if(!Zn(dt))return!1;var At=Yn(dt);return At==S||At=="[object GeneratorFunction]"||At=="[object AsyncFunction]"||At=="[object Proxy]"}function Ve(dt){return typeof dt=="number"&&dt>-1&&dt%1==0&&dt<=d}function Zn(dt){var At=typeof dt;return dt!=null&&(At=="object"||At=="function")}function Dn(dt){return dt!=null&&typeof dt=="object"}var Vn=I?function(dt){return function(At){return dt(At)}}(I):function(dt){return Dn(dt)&&Ve(dt.length)&&!!W[Yn(dt)]};function Hr(dt){return(At=dt)!=null&&Ve(At.length)&&!Xn(At)?function(Ft,Qt){var qe=Tn(Ft),Ne=!qe&&wr(Ft),ot=!qe&&!Ne&&Sn(Ft),xt=!qe&&!Ne&&!ot&&Vn(Ft),Bt=qe||Ne||ot||xt,Wt=Bt?function(Ze,Se){for(var un=-1,_e=Array(Ze);++un<Ze;)_e[un]=Se(un);return _e}(Ft.length,String):[],pe=Wt.length;for(var Me in Ft)!Qt&&!Ut.call(Ft,Me)||Bt&&(Me=="length"||ot&&(Me=="offset"||Me=="parent")||xt&&(Me=="buffer"||Me=="byteLength"||Me=="byteOffset")||en(Me,pe))||Wt.push(Me);return Wt}(dt):function(Ft){if(qe=(Qt=Ft)&&Qt.constructor,Qt!==(typeof qe=="function"&&qe.prototype||bt))return Jt(Ft);var Qt,qe,Ne=[];for(var ot in Object(Ft))Ut.call(Ft,ot)&&ot!="constructor"&&Ne.push(ot);return Ne}(dt);var At}o.exports=function(dt,At){return On(dt,At)}},210:function(o,a,c){var u=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(a,"__esModule",{value:!0});var d,p=u(c(465)),g=u(c(307));(function(f){f.compose=function(v,x,S){v===void 0&&(v={}),x===void 0&&(x={}),typeof v!="object"&&(v={}),typeof x!="object"&&(x={});var y=p.default(x);for(var A in S||(y=Object.keys(y).reduce(function(w,k){return y[k]!=null&&(w[k]=y[k]),w},{})),v)v[A]!==void 0&&x[A]===void 0&&(y[A]=v[A]);return Object.keys(y).length>0?y:void 0},f.diff=function(v,x){v===void 0&&(v={}),x===void 0&&(x={}),typeof v!="object"&&(v={}),typeof x!="object"&&(x={});var S=Object.keys(v).concat(Object.keys(x)).reduce(function(y,A){return g.default(v[A],x[A])||(y[A]=x[A]===void 0?null:x[A]),y},{});return Object.keys(S).length>0?S:void 0},f.invert=function(v,x){v===void 0&&(v={}),x===void 0&&(x={}),v=v||{};var S=Object.keys(x).reduce(function(y,A){return x[A]!==v[A]&&v[A]!==void 0&&(y[A]=x[A]),y},{});return Object.keys(v).reduce(function(y,A){return v[A]!==x[A]&&x[A]===void 0&&(y[A]=null),y},S)},f.transform=function(v,x,S){if(S===void 0&&(S=!1),typeof v!="object")return x;if(typeof x=="object"){if(!S)return x;var y=Object.keys(x).reduce(function(A,w){return v[w]===void 0&&(A[w]=x[w]),A},{});return Object.keys(y).length>0?y:void 0}}})(d||(d={})),a.default=d},895:function(o,a,c){var u=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}},d=u(c(529)),p=u(c(465)),g=u(c(307)),f=u(c(210)),v=u(c(430)),x=String.fromCharCode(0),S=function(){function y(A){Array.isArray(A)?this.ops=A:A!=null&&Array.isArray(A.ops)?this.ops=A.ops:this.ops=[]}return y.prototype.insert=function(A,w){var k={};return typeof A=="string"&&A.length===0?this:(k.insert=A,w!=null&&typeof w=="object"&&Object.keys(w).length>0&&(k.attributes=w),this.push(k))},y.prototype.delete=function(A){return A<=0?this:this.push({delete:A})},y.prototype.retain=function(A,w){if(A<=0)return this;var k={retain:A};return w!=null&&typeof w=="object"&&Object.keys(w).length>0&&(k.attributes=w),this.push(k)},y.prototype.push=function(A){var w=this.ops.length,k=this.ops[w-1];if(A=p.default(A),typeof k=="object"){if(typeof A.delete=="number"&&typeof k.delete=="number")return this.ops[w-1]={delete:k.delete+A.delete},this;if(typeof k.delete=="number"&&A.insert!=null&&(w-=1,typeof(k=this.ops[w-1])!="object"))return this.ops.unshift(A),this;if(g.default(A.attributes,k.attributes)){if(typeof A.insert=="string"&&typeof k.insert=="string")return this.ops[w-1]={insert:k.insert+A.insert},typeof A.attributes=="object"&&(this.ops[w-1].attributes=A.attributes),this;if(typeof A.retain=="number"&&typeof k.retain=="number")return this.ops[w-1]={retain:k.retain+A.retain},typeof A.attributes=="object"&&(this.ops[w-1].attributes=A.attributes),this}}return w===this.ops.length?this.ops.push(A):this.ops.splice(w,0,A),this},y.prototype.chop=function(){var A=this.ops[this.ops.length-1];return A&&A.retain&&!A.attributes&&this.ops.pop(),this},y.prototype.filter=function(A){return this.ops.filter(A)},y.prototype.forEach=function(A){this.ops.forEach(A)},y.prototype.map=function(A){return this.ops.map(A)},y.prototype.partition=function(A){var w=[],k=[];return this.forEach(function(T){(A(T)?w:k).push(T)}),[w,k]},y.prototype.reduce=function(A,w){return this.ops.reduce(A,w)},y.prototype.changeLength=function(){return this.reduce(function(A,w){return w.insert?A+v.default.length(w):w.delete?A-w.delete:A},0)},y.prototype.length=function(){return this.reduce(function(A,w){return A+v.default.length(w)},0)},y.prototype.slice=function(A,w){A===void 0&&(A=0),w===void 0&&(w=1/0);for(var k=[],T=v.default.iterator(this.ops),B=0;B<w&&T.hasNext();){var $=void 0;B<A?$=T.next(A-B):($=T.next(w-B),k.push($)),B+=v.default.length($)}return new y(k)},y.prototype.compose=function(A){var w=v.default.iterator(this.ops),k=v.default.iterator(A.ops),T=[],B=k.peek();if(B!=null&&typeof B.retain=="number"&&B.attributes==null){for(var $=B.retain;w.peekType()==="insert"&&w.peekLength()<=$;)$-=w.peekLength(),T.push(w.next());B.retain-$>0&&k.next(B.retain-$)}for(var V=new y(T);w.hasNext()||k.hasNext();)if(k.peekType()==="insert")V.push(k.next());else if(w.peekType()==="delete")V.push(w.next());else{var nt=Math.min(w.peekLength(),k.peekLength()),ct=w.next(nt),q=k.next(nt);if(typeof q.retain=="number"){var D={};typeof ct.retain=="number"?D.retain=nt:D.insert=ct.insert;var W=f.default.compose(ct.attributes,q.attributes,typeof ct.retain=="number");if(W&&(D.attributes=W),V.push(D),!k.hasNext()&&g.default(V.ops[V.ops.length-1],D)){var z=new y(w.rest());return V.concat(z).chop()}}else typeof q.delete=="number"&&typeof ct.retain=="number"&&V.push(q)}return V.chop()},y.prototype.concat=function(A){var w=new y(this.ops.slice());return A.ops.length>0&&(w.push(A.ops[0]),w.ops=w.ops.concat(A.ops.slice(1))),w},y.prototype.diff=function(A,w){if(this.ops===A.ops)return new y;var k=[this,A].map(function(nt){return nt.map(function(ct){if(ct.insert!=null)return typeof ct.insert=="string"?ct.insert:x;throw new Error("diff() called "+(nt===A?"on":"with")+" non-document")}).join("")}),T=new y,B=d.default(k[0],k[1],w),$=v.default.iterator(this.ops),V=v.default.iterator(A.ops);return B.forEach(function(nt){for(var ct=nt[1].length;ct>0;){var q=0;switch(nt[0]){case d.default.INSERT:q=Math.min(V.peekLength(),ct),T.push(V.next(q));break;case d.default.DELETE:q=Math.min(ct,$.peekLength()),$.next(q),T.delete(q);break;case d.default.EQUAL:q=Math.min($.peekLength(),V.peekLength(),ct);var D=$.next(q),W=V.next(q);g.default(D.insert,W.insert)?T.retain(q,f.default.diff(D.attributes,W.attributes)):T.push(W).delete(q)}ct-=q}}),T.chop()},y.prototype.eachLine=function(A,w){w===void 0&&(w=`
`);for(var k=v.default.iterator(this.ops),T=new y,B=0;k.hasNext();){if(k.peekType()!=="insert")return;var $=k.peek(),V=v.default.length($)-k.peekLength(),nt=typeof $.insert=="string"?$.insert.indexOf(w,V)-V:-1;if(nt<0)T.push(k.next());else if(nt>0)T.push(k.next(nt));else{if(A(T,k.next(1).attributes||{},B)===!1)return;B+=1,T=new y}}T.length()>0&&A(T,{},B)},y.prototype.invert=function(A){var w=new y;return this.reduce(function(k,T){if(T.insert)w.delete(v.default.length(T));else{if(T.retain&&T.attributes==null)return w.retain(T.retain),k+T.retain;if(T.delete||T.retain&&T.attributes){var B=T.delete||T.retain;return A.slice(k,k+B).forEach(function($){T.delete?w.push($):T.retain&&T.attributes&&w.retain(v.default.length($),f.default.invert(T.attributes,$.attributes))}),k+B}}return k},0),w.chop()},y.prototype.transform=function(A,w){if(w===void 0&&(w=!1),w=!!w,typeof A=="number")return this.transformPosition(A,w);for(var k=A,T=v.default.iterator(this.ops),B=v.default.iterator(k.ops),$=new y;T.hasNext()||B.hasNext();)if(T.peekType()!=="insert"||!w&&B.peekType()==="insert")if(B.peekType()==="insert")$.push(B.next());else{var V=Math.min(T.peekLength(),B.peekLength()),nt=T.next(V),ct=B.next(V);if(nt.delete)continue;ct.delete?$.push(ct):$.retain(V,f.default.transform(nt.attributes,ct.attributes,w))}else $.retain(v.default.length(T.next()));return $.chop()},y.prototype.transformPosition=function(A,w){w===void 0&&(w=!1),w=!!w;for(var k=v.default.iterator(this.ops),T=0;k.hasNext()&&T<=A;){var B=k.peekLength(),$=k.peekType();k.next(),$!=="delete"?($==="insert"&&(T<A||!w)&&(A+=B),T+=B):A-=Math.min(B,A-T)}return A},y.Op=v.default,y.AttributeMap=f.default,y}();o.exports=S},977:function(o,a,c){var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});var d=u(c(430)),p=function(){function g(f){this.ops=f,this.index=0,this.offset=0}return g.prototype.hasNext=function(){return this.peekLength()<1/0},g.prototype.next=function(f){f||(f=1/0);var v=this.ops[this.index];if(v){var x=this.offset,S=d.default.length(v);if(f>=S-x?(f=S-x,this.index+=1,this.offset=0):this.offset+=f,typeof v.delete=="number")return{delete:f};var y={};return v.attributes&&(y.attributes=v.attributes),typeof v.retain=="number"?y.retain=f:typeof v.insert=="string"?y.insert=v.insert.substr(x,f):y.insert=v.insert,y}return{retain:1/0}},g.prototype.peek=function(){return this.ops[this.index]},g.prototype.peekLength=function(){return this.ops[this.index]?d.default.length(this.ops[this.index])-this.offset:1/0},g.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},g.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var f=this.offset,v=this.index,x=this.next(),S=this.ops.slice(this.index);return this.offset=f,this.index=v,[x].concat(S)}return[]},g}();a.default=p},430:function(o,a,c){var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});var d,p=u(c(977));(function(g){g.iterator=function(f){return new p.default(f)},g.length=function(f){return typeof f.delete=="number"?f.delete:typeof f.retain=="number"?f.retain:typeof f.insert=="string"?f.insert.length:1}})(d||(d={})),a.default=d},165:function(o,a,c){var u,d;(d=typeof(u=function(){var p,g={};function f(S,y,A){var w=S.getClientRects();if(w.length===2){var k=S.getBoundingClientRect();return w[y][A]<k[A]}return!1}function v(S){if(!S||screen.deviceXDPI===screen.logicalXDPI)return S;if("length"in S)return Array.prototype.map.call(S,v);var y=screen.deviceXDPI/screen.logicalXDPI;return{top:S.top/y,bottom:S.bottom/y,left:S.left/y,right:S.right/y,width:S.width/y,height:S.height/y}}function x(S,y){var A,w=0,k=1024;if(k>=y.length)return Array.prototype.push.apply(S,y);for(;w<y.length;)A=Array.prototype.push.apply(S,Array.prototype.slice.call(y,w,w+k)),w+=k;return A}return g.isBroken=function(){if(p===void 0){var S=document.createElement("p"),y=document.createElement("span"),A=document.createTextNode("aa"),w=document.createTextNode("aa"),k=document.createElement("img");k.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=");var T=document.createRange();if(p={},S.appendChild(A),S.appendChild(y),y.appendChild(k),y.appendChild(w),document.body.appendChild(S),T.setStart(A,1),T.setEnd(y,0),p.getClientRects=p.getBoundingClientRect=T.getClientRects().length>1,p.getClientRects||(T.setEnd(w,1),p.getClientRects=p.getBoundingClientRect=T.getClientRects().length===2),!p.getBoundingClientRect){T.setEnd(T.startContainer,T.startOffset);var B=T.getBoundingClientRect();p.getBoundingClientRect=B.top===0&&B.left===0}if(document.body.removeChild(S),!p.getBoundingClientRect){var $=document.createElement("p");$.style.width="0px",$.style.fontSize="20px",$.style.whiteSpace="normal",$.style.wordBreak="normal";var V=document.createTextNode("m mm");$.appendChild(V),document.body.appendChild($),T.setStart(V,1),T.setEnd(V,2),f(T,1,"left")?p.getBoundingClientRect=!0:(T.setStart(V,1),T.setEnd(V,3),f(T,0,"top")&&(p.getBoundingClientRect=!0)),document.body.removeChild($)}var nt=window.ActiveXObject&&new Function("/*@cc_on return @_jscript_version; @*/")();p.ieZoom=!!nt&&nt<=10}return p},g.getClientRects=function(S){var y=this.isBroken();if(y.ieZoom)return v(S.getClientRects());if(!y.getClientRects)return S.getClientRects();var A=[],w=[],k=S.endContainer,T=S.endOffset,B=document.createRange();function $(V){for(var nt=0;V=V.previousSibling;)nt++;return nt}for(;k!==S.commonAncestorContainer;)B.setStart(k,0),B.setEnd(k,T),x(w,B.getClientRects()),T=$(k),k=k.parentNode;return(B=S.cloneRange()).setEnd(k,T),x(A,B.getClientRects()),x(A,w),A},g.getBoundingClientRect=function(S){var y=this.getClientRects(S);if(y.length===0)return null;var A,w=S.getBoundingClientRect(),k=this.isBroken();if(k.ieZoom)return v(w);if(!k.getBoundingClientRect)return w;if(w.width===0&&w.height===0)return y[0];for(var T=0,B=y.length;T<B;T++){var $=y[T];A?(A.left=Math.min(A.left,$.left),A.top=Math.min(A.top,$.top),A.right=Math.max(A.right,$.right),A.bottom=Math.max(A.bottom,$.bottom)):A={left:$.left,top:$.top,right:$.right,bottom:$.bottom}}return A&&(A.width=A.right-A.left,A.height=A.bottom-A.top),A},g})=="function"?u.call(a,c,a,o):u)===void 0||(o.exports=d)},33:(o,a,c)=>{c.r(a),c.d(a,{default:()=>W});var u=function(){if(typeof Map<"u")return Map;function z(Q,Z){var lt=-1;return Q.some(function(rt,mt){return rt[0]===Z&&(lt=mt,!0)}),lt}return function(){function Q(){this.__entries__=[]}return Object.defineProperty(Q.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),Q.prototype.get=function(Z){var lt=z(this.__entries__,Z),rt=this.__entries__[lt];return rt&&rt[1]},Q.prototype.set=function(Z,lt){var rt=z(this.__entries__,Z);~rt?this.__entries__[rt][1]=lt:this.__entries__.push([Z,lt])},Q.prototype.delete=function(Z){var lt=this.__entries__,rt=z(lt,Z);~rt&&lt.splice(rt,1)},Q.prototype.has=function(Z){return!!~z(this.__entries__,Z)},Q.prototype.clear=function(){this.__entries__.splice(0)},Q.prototype.forEach=function(Z,lt){lt===void 0&&(lt=null);for(var rt=0,mt=this.__entries__;rt<mt.length;rt++){var ht=mt[rt];Z.call(lt,ht[1],ht[0])}},Q}()}(),d=typeof window<"u"&&typeof document<"u"&&window.document===document,p=c.g!==void 0&&c.g.Math===Math?c.g:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")(),g=typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(p):function(z){return setTimeout(function(){return z(Date.now())},1e3/60)},f=["top","right","bottom","left","width","height","size","weight"],v=typeof MutationObserver<"u",x=function(){function z(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(Q,Z){var lt=!1,rt=!1,mt=0;function ht(){lt&&(lt=!1,Q()),rt&&I()}function Dt(){g(ht)}function I(){var j=Date.now();if(lt){if(j-mt<2)return;rt=!0}else lt=!0,rt=!1,setTimeout(Dt,20);mt=j}return I}(this.refresh.bind(this))}return z.prototype.addObserver=function(Q){~this.observers_.indexOf(Q)||this.observers_.push(Q),this.connected_||this.connect_()},z.prototype.removeObserver=function(Q){var Z=this.observers_,lt=Z.indexOf(Q);~lt&&Z.splice(lt,1),!Z.length&&this.connected_&&this.disconnect_()},z.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},z.prototype.updateObservers_=function(){var Q=this.observers_.filter(function(Z){return Z.gatherActive(),Z.hasActive()});return Q.forEach(function(Z){return Z.broadcastActive()}),Q.length>0},z.prototype.connect_=function(){d&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),v?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},z.prototype.disconnect_=function(){d&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},z.prototype.onTransitionEnd_=function(Q){var Z=Q.propertyName,lt=Z===void 0?"":Z;f.some(function(rt){return!!~lt.indexOf(rt)})&&this.refresh()},z.getInstance=function(){return this.instance_||(this.instance_=new z),this.instance_},z.instance_=null,z}(),S=function(z,Q){for(var Z=0,lt=Object.keys(Q);Z<lt.length;Z++){var rt=lt[Z];Object.defineProperty(z,rt,{value:Q[rt],enumerable:!1,writable:!1,configurable:!0})}return z},y=function(z){return z&&z.ownerDocument&&z.ownerDocument.defaultView||p},A=$(0,0,0,0);function w(z){return parseFloat(z)||0}function k(z){for(var Q=[],Z=1;Z<arguments.length;Z++)Q[Z-1]=arguments[Z];return Q.reduce(function(lt,rt){return lt+w(z["border-"+rt+"-width"])},0)}var T=typeof SVGGraphicsElement<"u"?function(z){return z instanceof y(z).SVGGraphicsElement}:function(z){return z instanceof y(z).SVGElement&&typeof z.getBBox=="function"};function B(z){return d?T(z)?function(Q){var Z=Q.getBBox();return $(0,0,Z.width,Z.height)}(z):function(Q){var Z=Q.clientWidth,lt=Q.clientHeight;if(!Z&&!lt)return A;var rt=y(Q).getComputedStyle(Q),mt=function(M){for(var H={},G=0,et=["top","right","bottom","left"];G<et.length;G++){var wt=et[G],bt=M["padding-"+wt];H[wt]=w(bt)}return H}(rt),ht=mt.left+mt.right,Dt=mt.top+mt.bottom,I=w(rt.width),j=w(rt.height);if(rt.boxSizing==="border-box"&&(Math.round(I+ht)!==Z&&(I-=k(rt,"left","right")+ht),Math.round(j+Dt)!==lt&&(j-=k(rt,"top","bottom")+Dt)),!function(M){return M===y(M).document.documentElement}(Q)){var Y=Math.round(I+ht)-Z,L=Math.round(j+Dt)-lt;Math.abs(Y)!==1&&(I-=Y),Math.abs(L)!==1&&(j-=L)}return $(mt.left,mt.top,I,j)}(z):A}function $(z,Q,Z,lt){return{x:z,y:Q,width:Z,height:lt}}var V=function(){function z(Q){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=$(0,0,0,0),this.target=Q}return z.prototype.isActive=function(){var Q=B(this.target);return this.contentRect_=Q,Q.width!==this.broadcastWidth||Q.height!==this.broadcastHeight},z.prototype.broadcastRect=function(){var Q=this.contentRect_;return this.broadcastWidth=Q.width,this.broadcastHeight=Q.height,Q},z}(),nt=function(z,Q){var Z,lt,rt,mt,ht,Dt,I,j=(lt=(Z=Q).x,rt=Z.y,mt=Z.width,ht=Z.height,Dt=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,I=Object.create(Dt.prototype),S(I,{x:lt,y:rt,width:mt,height:ht,top:rt,right:lt+mt,bottom:ht+rt,left:lt}),I);S(this,{target:z,contentRect:j})},ct=function(){function z(Q,Z,lt){if(this.activeObservations_=[],this.observations_=new u,typeof Q!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=Q,this.controller_=Z,this.callbackCtx_=lt}return z.prototype.observe=function(Q){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(Q instanceof y(Q).Element))throw new TypeError('parameter 1 is not of type "Element".');var Z=this.observations_;Z.has(Q)||(Z.set(Q,new V(Q)),this.controller_.addObserver(this),this.controller_.refresh())}},z.prototype.unobserve=function(Q){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(Q instanceof y(Q).Element))throw new TypeError('parameter 1 is not of type "Element".');var Z=this.observations_;Z.has(Q)&&(Z.delete(Q),Z.size||this.controller_.removeObserver(this))}},z.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},z.prototype.gatherActive=function(){var Q=this;this.clearActive(),this.observations_.forEach(function(Z){Z.isActive()&&Q.activeObservations_.push(Z)})},z.prototype.broadcastActive=function(){if(this.hasActive()){var Q=this.callbackCtx_,Z=this.activeObservations_.map(function(lt){return new nt(lt.target,lt.broadcastRect())});this.callback_.call(Q,Z,Q),this.clearActive()}},z.prototype.clearActive=function(){this.activeObservations_.splice(0)},z.prototype.hasActive=function(){return this.activeObservations_.length>0},z}(),q=typeof WeakMap<"u"?new WeakMap:new u,D=function z(Q){if(!(this instanceof z))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var Z=x.getInstance(),lt=new ct(Q,Z,this);q.set(this,lt)};["observe","unobserve","disconnect"].forEach(function(z){D.prototype[z]=function(){var Q;return(Q=q.get(this))[z].apply(Q,arguments)}});const W=p.ResizeObserver!==void 0?p.ResizeObserver:D},413:(o,a,c)=>{c.r(a),c.d(a,{default:()=>$});var u=c(379),d=c.n(u),p=c(795),g=c.n(p),f=c(569),v=c.n(f),x=c(565),S=c.n(x),y=c(216),A=c.n(y),w=c(589),k=c.n(w),T=c(582),B={};B.styleTagTransform=k(),B.setAttributes=S(),B.insert=v().bind(null,"head"),B.domAPI=g(),B.insertStyleElement=A(),d()(T.Z,B);const $=T.Z&&T.Z.locals?T.Z.locals:void 0},379:o=>{var a=[];function c(p){for(var g=-1,f=0;f<a.length;f++)if(a[f].identifier===p){g=f;break}return g}function u(p,g){for(var f={},v=[],x=0;x<p.length;x++){var S=p[x],y=g.base?S[0]+g.base:S[0],A=f[y]||0,w="".concat(y," ").concat(A);f[y]=A+1;var k=c(w),T={css:S[1],media:S[2],sourceMap:S[3],supports:S[4],layer:S[5]};if(k!==-1)a[k].references++,a[k].updater(T);else{var B=d(T,g);g.byIndex=x,a.splice(x,0,{identifier:w,updater:B,references:1})}v.push(w)}return v}function d(p,g){var f=g.domAPI(g);return f.update(p),function(v){if(v){if(v.css===p.css&&v.media===p.media&&v.sourceMap===p.sourceMap&&v.supports===p.supports&&v.layer===p.layer)return;f.update(p=v)}else f.remove()}}o.exports=function(p,g){var f=u(p=p||[],g=g||{});return function(v){v=v||[];for(var x=0;x<f.length;x++){var S=c(f[x]);a[S].references--}for(var y=u(v,g),A=0;A<f.length;A++){var w=c(f[A]);a[w].references===0&&(a[w].updater(),a.splice(w,1))}f=y}}},569:o=>{var a={};o.exports=function(c,u){var d=function(p){if(a[p]===void 0){var g=document.querySelector(p);if(window.HTMLIFrameElement&&g instanceof window.HTMLIFrameElement)try{g=g.contentDocument.head}catch{g=null}a[p]=g}return a[p]}(c);if(!d)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");d.appendChild(u)}},216:o=>{o.exports=function(a){var c=document.createElement("style");return a.setAttributes(c,a.attributes),a.insert(c,a.options),c}},565:(o,a,c)=>{o.exports=function(u){var d=c.nc;d&&u.setAttribute("nonce",d)}},795:o=>{o.exports=function(a){var c=a.insertStyleElement(a);return{update:function(u){(function(d,p,g){var f="";g.supports&&(f+="@supports (".concat(g.supports,") {")),g.media&&(f+="@media ".concat(g.media," {"));var v=g.layer!==void 0;v&&(f+="@layer".concat(g.layer.length>0?" ".concat(g.layer):""," {")),f+=g.css,v&&(f+="}"),g.media&&(f+="}"),g.supports&&(f+="}");var x=g.sourceMap;x&&typeof btoa<"u"&&(f+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(x))))," */")),p.styleTagTransform(f,d,p.options)})(c,a,u)},remove:function(){(function(u){if(u.parentNode===null)return!1;u.parentNode.removeChild(u)})(c)}}}},589:o=>{o.exports=function(a,c){if(c.styleSheet)c.styleSheet.cssText=a;else{for(;c.firstChild;)c.removeChild(c.firstChild);c.appendChild(document.createTextNode(a))}}},607:function(o,a,c){var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0}),a.Cursor=a.default=void 0;var d=u(c(678));a.default=d.default;var p=u(c(353));a.Cursor=p.default,c(413)},353:(o,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});var u=c(207),d=function(){function p(g,f,v){this.id=g,this.name=f,this.color=v,this.toggleNearCursor=this.toggleNearCursor.bind(this),this._toggleOpenedCursor=this._toggleOpenedCursor.bind(this),this._setHoverState=this._setHoverState.bind(this)}return p.prototype.build=function(g){var f=document.createElement(p.CONTAINER_ELEMENT_TAG);f.classList.add(p.CURSOR_CLASS),f.id="ql-cursor-".concat(this.id),f.innerHTML=g.template;var v=f.getElementsByClassName(p.SELECTION_CLASS)[0],x=f.getElementsByClassName(p.CARET_CONTAINER_CLASS)[0],S=x.getElementsByClassName(p.CARET_CLASS)[0],y=f.getElementsByClassName(p.FLAG_CLASS)[0];return y.style.backgroundColor=this.color,S.style.backgroundColor=this.color,f.getElementsByClassName(p.NAME_CLASS)[0].textContent=this.name,this._hideDelay="".concat(g.hideDelayMs,"ms"),this._hideSpeedMs=g.hideSpeedMs,this._positionFlag=g.positionFlag,y.style.transitionDelay=this._hideDelay,y.style.transitionDuration="".concat(this._hideSpeedMs,"ms"),this._el=f,this._selectionEl=v,this._caretEl=x,this._flagEl=y,x.addEventListener("mouseover",this._setHoverState),this._el},p.prototype.show=function(){this._el.classList.remove(p.HIDDEN_CLASS)},p.prototype.hide=function(){this._el.classList.add(p.HIDDEN_CLASS)},p.prototype.remove=function(){this._el.parentNode.removeChild(this._el)},p.prototype.toggleNearCursor=function(g,f){var v=this._getCoordinates(),x=v.left,S=v.right,y=v.top,A=v.bottom,w=g>=x&&g<=S&&f>=y&&f<=A;return this._caretEl.classList.toggle(p.CONTAINER_HOVER_CLASS,w),w},p.prototype.toggleFlag=function(g){var f=this;this._caretEl.classList.toggle(p.CONTAINER_HOVER_CLASS,g)||(this._flagEl.classList.add(p.NO_DELAY_CLASS),setTimeout(function(){return f._flagEl.classList.remove(p.NO_DELAY_CLASS)},this._hideSpeedMs))},p.prototype.updateCaret=function(g,f){this._caretEl.style.top="".concat(g.top,"px"),this._caretEl.style.left="".concat(g.left,"px"),this._caretEl.style.height="".concat(g.height,"px"),this._positionFlag?this._positionFlag(this._flagEl,g,f):this._updateCaretFlag(g,f)},p.prototype.updateSelection=function(g,f){var v=this;this._clearSelection(),g=g||[],g=Array.from(g),g=this._sanitize(g),(g=this._sortByDomPosition(g)).forEach(function(x){return v._addSelection(x,f)})},p.prototype._setHoverState=function(){document.addEventListener("mousemove",this._toggleOpenedCursor)},p.prototype._toggleOpenedCursor=function(g){var f=this.toggleNearCursor(g.clientX,g.clientY);this._caretEl.classList.toggle(p.CONTAINER_NO_POINTER_CLASS,f),f||document.removeEventListener("mousemove",this._toggleOpenedCursor)},p.prototype._getCoordinates=function(){return this._caretEl.getBoundingClientRect()},p.prototype._updateCaretFlag=function(g,f){this._flagEl.style.width="";var v=this._flagEl.getBoundingClientRect();this._flagEl.classList.remove(p.FLAG_FLIPPED_CLASS),g.left>f.width-v.width&&this._flagEl.classList.add(p.FLAG_FLIPPED_CLASS),this._flagEl.style.left="".concat(g.left,"px"),this._flagEl.style.top="".concat(g.top,"px"),this._flagEl.style.width="".concat(Math.ceil(v.width),"px")},p.prototype._clearSelection=function(){this._selectionEl.innerHTML=""},p.prototype._addSelection=function(g,f){var v=this._selectionBlock(g,f);this._selectionEl.appendChild(v)},p.prototype._selectionBlock=function(g,f){var v=document.createElement(p.SELECTION_ELEMENT_TAG);return v.classList.add(p.SELECTION_BLOCK_CLASS),v.style.top="".concat(g.top-f.top,"px"),v.style.left="".concat(g.left-f.left,"px"),v.style.width="".concat(g.width,"px"),v.style.height="".concat(g.height,"px"),v.style.backgroundColor=u(this.color).setAlpha(.3).toString(),v},p.prototype._sortByDomPosition=function(g){return g.sort(function(f,v){return f.top===v.top?f.left-v.left:f.top-v.top})},p.prototype._sanitize=function(g){var f=this,v=new Set;return g.filter(function(x){if(!x.width||!x.height)return!1;var S=f._serialize(x);return!v.has(S)&&(v.add(S),!0)})},p.prototype._serialize=function(g){return["top:".concat(g.top),"right:".concat(g.right),"bottom:".concat(g.bottom),"left:".concat(g.left)].join(";")},p.CONTAINER_ELEMENT_TAG="SPAN",p.SELECTION_ELEMENT_TAG="SPAN",p.CURSOR_CLASS="ql-cursor",p.SELECTION_CLASS="ql-cursor-selections",p.SELECTION_BLOCK_CLASS="ql-cursor-selection-block",p.CARET_CLASS="ql-cursor-caret",p.CARET_CONTAINER_CLASS="ql-cursor-caret-container",p.CONTAINER_HOVER_CLASS="hover",p.CONTAINER_NO_POINTER_CLASS="no-pointer",p.FLAG_CLASS="ql-cursor-flag",p.FLAG_FLIPPED_CLASS="flag-flipped",p.NAME_CLASS="ql-cursor-name",p.HIDDEN_CLASS="hidden",p.NO_DELAY_CLASS="no-delay",p}();a.default=d},678:function(o,a,c){var u=this&&this.__createBinding||(Object.create?function(w,k,T,B){B===void 0&&(B=T);var $=Object.getOwnPropertyDescriptor(k,T);$&&!("get"in $?!k.__esModule:$.writable||$.configurable)||($={enumerable:!0,get:function(){return k[T]}}),Object.defineProperty(w,B,$)}:function(w,k,T,B){B===void 0&&(B=T),w[B]=k[T]}),d=this&&this.__setModuleDefault||(Object.create?function(w,k){Object.defineProperty(w,"default",{enumerable:!0,value:k})}:function(w,k){w.default=k}),p=this&&this.__importStar||function(w){if(w&&w.__esModule)return w;var k={};if(w!=null)for(var T in w)T!=="default"&&Object.prototype.hasOwnProperty.call(w,T)&&u(k,w,T);return d(k,w),k},g=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(a,"__esModule",{value:!0});var f=g(c(353)),v=p(c(165)),x=g(c(338)),S=g(c(33)),y=c(895),A=function(){function w(k,T){T===void 0&&(T={}),this._cursors={},this._isObserving=!1,this._handleCursorTouch=this._handleCursorTouch.bind(this),this.quill=k,this.options=this._setDefaults(T),this._container=this.quill.addContainer(this.options.containerClass),this._boundsContainer=this.options.boundsContainer||this.quill.container,this._currentSelection=this.quill.getSelection(),this._registerSelectionChangeListeners(),this._registerTextChangeListener(),this._registerDomListeners()}return w.prototype.createCursor=function(k,T,B){var $=this._cursors[k];if(!$){$=new f.default(k,T,B),this._cursors[k]=$;var V=$.build(this.options);this._container.appendChild(V)}return $},w.prototype.moveCursor=function(k,T){var B=this._cursors[k];B&&(B.range=T,this._updateCursor(B))},w.prototype.removeCursor=function(k){var T=this._cursors[k];T&&(T.remove(),delete this._cursors[k])},w.prototype.update=function(){var k=this;this.cursors().forEach(function(T){return k._updateCursor(T)})},w.prototype.clearCursors=function(){var k=this;this.cursors().forEach(function(T){return k.removeCursor(T.id)})},w.prototype.toggleFlag=function(k,T){var B=this._cursors[k];B&&B.toggleFlag(T)},w.prototype.cursors=function(){var k=this;return Object.keys(this._cursors).map(function(T){return k._cursors[T]})},w.prototype._registerSelectionChangeListeners=function(){var k=this;this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(T){k._currentSelection=T})},w.prototype._registerTextChangeListener=function(){var k=this;this.quill.on(this.quill.constructor.events.TEXT_CHANGE,function(T){return k._handleTextChange(T)})},w.prototype._registerDomListeners=function(){var k=this,T=this.quill.container.getElementsByClassName("ql-editor")[0];T.addEventListener("scroll",function(){return k.update()}),T.addEventListener("touchstart",this._handleCursorTouch)},w.prototype._handleCursorTouch=function(k){var T=this;this.cursors().forEach(function(B){B.toggleNearCursor(k.pageX,k.pageY),setTimeout(function(){return B.toggleFlag(!1)},T.options.hideDelayMs)})},w.prototype._registerResizeObserver=function(){var k=this;if(!this._isObserving){var T=this.quill.container.getElementsByClassName("ql-editor")[0],B=new S.default(function($){if(!$[0].target.isConnected)return B.disconnect(),void(k._isObserving=!1);k.update()});B.observe(T),this._isObserving=!0}},w.prototype._updateCursor=function(k){if(this._registerResizeObserver(),!k.range)return k.hide();var T=this._indexWithinQuillBounds(k.range.index),B=this._indexWithinQuillBounds(k.range.index+k.range.length),$=this.quill.getLeaf(T),V=this.quill.getLeaf(B);if(!this._leafIsValid($)||!this._leafIsValid(V))return k.hide();k.show();var nt=this._boundsContainer.getBoundingClientRect(),ct=this.quill.getBounds(B);k.updateCaret(ct,nt);var q=this._lineRanges(k,$,V).reduce(function(D,W){return D.concat(Array.from(v.getClientRects(W)))},[]);k.updateSelection(q,nt)},w.prototype._indexWithinQuillBounds=function(k){var T=this.quill.getLength(),B=T?T-1:0;return k=Math.max(k,0),Math.min(k,B)},w.prototype._leafIsValid=function(k){return k&&k[0]&&k[0].domNode&&k[1]>=0},w.prototype._handleTextChange=function(k){var T=this;window.setTimeout(function(){T.options.transformOnTextChange&&T._transformCursors(k),T.options.selectionChangeSource&&(T._emitSelection(),T.update())})},w.prototype._emitSelection=function(){this.quill.emitter.emit(this.quill.constructor.events.SELECTION_CHANGE,this.quill.getSelection(),this._currentSelection,this.options.selectionChangeSource)},w.prototype._setDefaults=function(k){return(k=Object.assign({},k)).template||(k.template=w.DEFAULTS.template),k.containerClass||(k.containerClass=w.DEFAULTS.containerClass),k.selectionChangeSource!==null&&(k.selectionChangeSource||(k.selectionChangeSource=w.DEFAULTS.selectionChangeSource)),k.hideDelayMs=Number.isInteger(k.hideDelayMs)?k.hideDelayMs:w.DEFAULTS.hideDelayMs,k.hideSpeedMs=Number.isInteger(k.hideSpeedMs)?k.hideSpeedMs:w.DEFAULTS.hideSpeedMs,k.transformOnTextChange=!!k.transformOnTextChange,k},w.prototype._lineRanges=function(k,T,B){var $=this.quill.getLines(k.range);return $.reduce(function(V,nt,ct){if(!nt.children){var q=document.createRange();return q.selectNode(nt.domNode),V.concat(q)}var D=ct===0?T:nt.path(0).pop(),W=D[0],z=D[1],Q=ct===$.length-1?B:nt.path(nt.length()-1).pop(),Z=Q[0],lt=Q[1],rt=document.createRange();return W.domNode.nodeType===Node.TEXT_NODE?rt.setStart(W.domNode,z):rt.setStartBefore(W.domNode),Z.domNode.nodeType===Node.TEXT_NODE?rt.setEnd(Z.domNode,lt):rt.setEndAfter(Z.domNode),V.concat(rt)},[])},w.prototype._transformCursors=function(k){var T=this;k=new y(k),this.cursors().filter(function(B){return B.range}).forEach(function(B){B.range.index=k.transformPosition(B.range.index),T._updateCursor(B)})},w.DEFAULTS={template:x.default,containerClass:"ql-cursors",selectionChangeSource:"api",hideDelayMs:3e3,hideSpeedMs:400},w}();a.default=A},338:function(o,a,c){var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});var d=u(c(353)),p=`
  <span class="`.concat(d.default.SELECTION_CLASS,`"></span>
  <span class="`).concat(d.default.CARET_CONTAINER_CLASS,`">
    <span class="`).concat(d.default.CARET_CLASS,`"></span>
  </span>
  <div class="`).concat(d.default.FLAG_CLASS,`">
    <small class="`).concat(d.default.NAME_CLASS,`"></small>
  </div>
`);a.default=p},207:function(o){o.exports=function(){const a=/^\s+/,c=/\s+$/;function u(L,M){if(M=M||{},(L=L||"")instanceof u)return L;if(!(this instanceof u))return new u(L,M);var H=function(G){var et={r:0,g:0,b:0},wt=1,bt=null,Ct=null,Et=null,Ut=!1,_t=!1;return typeof G=="string"&&(G=function(Nt){Nt=Nt.replace(a,"").replace(c,"").toLowerCase();var pt,It=!1;if(ct[Nt])Nt=ct[Nt],It=!0;else if(Nt=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(pt=j.rgb.exec(Nt))?{r:pt[1],g:pt[2],b:pt[3]}:(pt=j.rgba.exec(Nt))?{r:pt[1],g:pt[2],b:pt[3],a:pt[4]}:(pt=j.hsl.exec(Nt))?{h:pt[1],s:pt[2],l:pt[3]}:(pt=j.hsla.exec(Nt))?{h:pt[1],s:pt[2],l:pt[3],a:pt[4]}:(pt=j.hsv.exec(Nt))?{h:pt[1],s:pt[2],v:pt[3]}:(pt=j.hsva.exec(Nt))?{h:pt[1],s:pt[2],v:pt[3],a:pt[4]}:(pt=j.hex8.exec(Nt))?{r:Q(pt[1]),g:Q(pt[2]),b:Q(pt[3]),a:mt(pt[4]),format:It?"name":"hex8"}:(pt=j.hex6.exec(Nt))?{r:Q(pt[1]),g:Q(pt[2]),b:Q(pt[3]),format:It?"name":"hex"}:(pt=j.hex4.exec(Nt))?{r:Q(pt[1]+""+pt[1]),g:Q(pt[2]+""+pt[2]),b:Q(pt[3]+""+pt[3]),a:mt(pt[4]+""+pt[4]),format:It?"name":"hex8"}:!!(pt=j.hex3.exec(Nt))&&{r:Q(pt[1]+""+pt[1]),g:Q(pt[2]+""+pt[2]),b:Q(pt[3]+""+pt[3]),format:It?"name":"hex"}}(G)),typeof G=="object"&&(Y(G.r)&&Y(G.g)&&Y(G.b)?(J=G.r,ae=G.g,Vt=G.b,et={r:255*W(J,255),g:255*W(ae,255),b:255*W(Vt,255)},Ut=!0,_t=String(G.r).substr(-1)==="%"?"prgb":"rgb"):Y(G.h)&&Y(G.s)&&Y(G.v)?(bt=lt(G.s),Ct=lt(G.v),et=function(Nt,pt,It){Nt=6*W(Nt,360),pt=W(pt,100),It=W(It,100);var Mt=Math.floor(Nt),Ht=Nt-Mt,zt=It*(1-pt),Zt=It*(1-Ht*pt),Jt=It*(1-(1-Ht)*pt),te=Mt%6;return{r:255*[It,Zt,zt,zt,Jt,It][te],g:255*[Jt,It,It,Zt,zt,zt][te],b:255*[zt,zt,Jt,It,It,Zt][te]}}(G.h,bt,Ct),Ut=!0,_t="hsv"):Y(G.h)&&Y(G.s)&&Y(G.l)&&(bt=lt(G.s),Et=lt(G.l),et=function(Nt,pt,It){var Mt,Ht,zt;function Zt(se,Xt,Kt){return Kt<0&&(Kt+=1),Kt>1&&(Kt-=1),Kt<1/6?se+6*(Xt-se)*Kt:Kt<.5?Xt:Kt<2/3?se+(Xt-se)*(2/3-Kt)*6:se}if(Nt=W(Nt,360),pt=W(pt,100),It=W(It,100),pt===0)Mt=Ht=zt=It;else{var Jt=It<.5?It*(1+pt):It+pt-It*pt,te=2*It-Jt;Mt=Zt(te,Jt,Nt+1/3),Ht=Zt(te,Jt,Nt),zt=Zt(te,Jt,Nt-1/3)}return{r:255*Mt,g:255*Ht,b:255*zt}}(G.h,bt,Et),Ut=!0,_t="hsl"),G.hasOwnProperty("a")&&(wt=G.a)),wt=D(wt),{ok:Ut,format:G.format||_t,r:Math.min(255,Math.max(et.r,0)),g:Math.min(255,Math.max(et.g,0)),b:Math.min(255,Math.max(et.b,0)),a:wt};var J,ae,Vt}(L);this._originalInput=L,this._r=H.r,this._g=H.g,this._b=H.b,this._a=H.a,this._roundA=Math.round(100*this._a)/100,this._format=M.format||H.format,this._gradientType=M.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=H.ok}function d(L,M,H){L=W(L,255),M=W(M,255),H=W(H,255);var G,et,wt=Math.max(L,M,H),bt=Math.min(L,M,H),Ct=(wt+bt)/2;if(wt==bt)G=et=0;else{var Et=wt-bt;switch(et=Ct>.5?Et/(2-wt-bt):Et/(wt+bt),wt){case L:G=(M-H)/Et+(M<H?6:0);break;case M:G=(H-L)/Et+2;break;case H:G=(L-M)/Et+4}G/=6}return{h:G,s:et,l:Ct}}function p(L,M,H){L=W(L,255),M=W(M,255),H=W(H,255);var G,et,wt=Math.max(L,M,H),bt=Math.min(L,M,H),Ct=wt,Et=wt-bt;if(et=wt===0?0:Et/wt,wt==bt)G=0;else{switch(wt){case L:G=(M-H)/Et+(M<H?6:0);break;case M:G=(H-L)/Et+2;break;case H:G=(L-M)/Et+4}G/=6}return{h:G,s:et,v:Ct}}function g(L,M,H,G){var et=[Z(Math.round(L).toString(16)),Z(Math.round(M).toString(16)),Z(Math.round(H).toString(16))];return G&&et[0].charAt(0)==et[0].charAt(1)&&et[1].charAt(0)==et[1].charAt(1)&&et[2].charAt(0)==et[2].charAt(1)?et[0].charAt(0)+et[1].charAt(0)+et[2].charAt(0):et.join("")}function f(L,M,H,G){return[Z(rt(G)),Z(Math.round(L).toString(16)),Z(Math.round(M).toString(16)),Z(Math.round(H).toString(16))].join("")}function v(L,M){M=M===0?0:M||10;var H=u(L).toHsl();return H.s-=M/100,H.s=z(H.s),u(H)}function x(L,M){M=M===0?0:M||10;var H=u(L).toHsl();return H.s+=M/100,H.s=z(H.s),u(H)}function S(L){return u(L).desaturate(100)}function y(L,M){M=M===0?0:M||10;var H=u(L).toHsl();return H.l+=M/100,H.l=z(H.l),u(H)}function A(L,M){M=M===0?0:M||10;var H=u(L).toRgb();return H.r=Math.max(0,Math.min(255,H.r-Math.round(-M/100*255))),H.g=Math.max(0,Math.min(255,H.g-Math.round(-M/100*255))),H.b=Math.max(0,Math.min(255,H.b-Math.round(-M/100*255))),u(H)}function w(L,M){M=M===0?0:M||10;var H=u(L).toHsl();return H.l-=M/100,H.l=z(H.l),u(H)}function k(L,M){var H=u(L).toHsl(),G=(H.h+M)%360;return H.h=G<0?360+G:G,u(H)}function T(L){var M=u(L).toHsl();return M.h=(M.h+180)%360,u(M)}function B(L,M){if(isNaN(M)||M<=0)throw new Error("Argument to polyad must be a positive number");for(var H=u(L).toHsl(),G=[u(L)],et=360/M,wt=1;wt<M;wt++)G.push(u({h:(H.h+wt*et)%360,s:H.s,l:H.l}));return G}function $(L){var M=u(L).toHsl(),H=M.h;return[u(L),u({h:(H+72)%360,s:M.s,l:M.l}),u({h:(H+216)%360,s:M.s,l:M.l})]}function V(L,M,H){M=M||6,H=H||30;var G=u(L).toHsl(),et=360/H,wt=[u(L)];for(G.h=(G.h-(et*M>>1)+720)%360;--M;)G.h=(G.h+et)%360,wt.push(u(G));return wt}function nt(L,M){M=M||6;for(var H=u(L).toHsv(),G=H.h,et=H.s,wt=H.v,bt=[],Ct=1/M;M--;)bt.push(u({h:G,s:et,v:wt})),wt=(wt+Ct)%1;return bt}u.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var L=this.toRgb();return(299*L.r+587*L.g+114*L.b)/1e3},getLuminance:function(){var L,M,H,G=this.toRgb();return L=G.r/255,M=G.g/255,H=G.b/255,.2126*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))+.7152*(M<=.03928?M/12.92:Math.pow((M+.055)/1.055,2.4))+.0722*(H<=.03928?H/12.92:Math.pow((H+.055)/1.055,2.4))},setAlpha:function(L){return this._a=D(L),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var L=p(this._r,this._g,this._b);return{h:360*L.h,s:L.s,v:L.v,a:this._a}},toHsvString:function(){var L=p(this._r,this._g,this._b),M=Math.round(360*L.h),H=Math.round(100*L.s),G=Math.round(100*L.v);return this._a==1?"hsv("+M+", "+H+"%, "+G+"%)":"hsva("+M+", "+H+"%, "+G+"%, "+this._roundA+")"},toHsl:function(){var L=d(this._r,this._g,this._b);return{h:360*L.h,s:L.s,l:L.l,a:this._a}},toHslString:function(){var L=d(this._r,this._g,this._b),M=Math.round(360*L.h),H=Math.round(100*L.s),G=Math.round(100*L.l);return this._a==1?"hsl("+M+", "+H+"%, "+G+"%)":"hsla("+M+", "+H+"%, "+G+"%, "+this._roundA+")"},toHex:function(L){return g(this._r,this._g,this._b,L)},toHexString:function(L){return"#"+this.toHex(L)},toHex8:function(L){return function(M,H,G,et,wt){var bt=[Z(Math.round(M).toString(16)),Z(Math.round(H).toString(16)),Z(Math.round(G).toString(16)),Z(rt(et))];return wt&&bt[0].charAt(0)==bt[0].charAt(1)&&bt[1].charAt(0)==bt[1].charAt(1)&&bt[2].charAt(0)==bt[2].charAt(1)&&bt[3].charAt(0)==bt[3].charAt(1)?bt[0].charAt(0)+bt[1].charAt(0)+bt[2].charAt(0)+bt[3].charAt(0):bt.join("")}(this._r,this._g,this._b,this._a,L)},toHex8String:function(L){return"#"+this.toHex8(L)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*W(this._r,255))+"%",g:Math.round(100*W(this._g,255))+"%",b:Math.round(100*W(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(100*W(this._r,255))+"%, "+Math.round(100*W(this._g,255))+"%, "+Math.round(100*W(this._b,255))+"%)":"rgba("+Math.round(100*W(this._r,255))+"%, "+Math.round(100*W(this._g,255))+"%, "+Math.round(100*W(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(q[g(this._r,this._g,this._b,!0)]||!1)},toFilter:function(L){var M="#"+f(this._r,this._g,this._b,this._a),H=M,G=this._gradientType?"GradientType = 1, ":"";if(L){var et=u(L);H="#"+f(et._r,et._g,et._b,et._a)}return"progid:DXImageTransform.Microsoft.gradient("+G+"startColorstr="+M+",endColorstr="+H+")"},toString:function(L){var M=!!L;L=L||this._format;var H=!1,G=this._a<1&&this._a>=0;return M||!G||L!=="hex"&&L!=="hex6"&&L!=="hex3"&&L!=="hex4"&&L!=="hex8"&&L!=="name"?(L==="rgb"&&(H=this.toRgbString()),L==="prgb"&&(H=this.toPercentageRgbString()),L!=="hex"&&L!=="hex6"||(H=this.toHexString()),L==="hex3"&&(H=this.toHexString(!0)),L==="hex4"&&(H=this.toHex8String(!0)),L==="hex8"&&(H=this.toHex8String()),L==="name"&&(H=this.toName()),L==="hsl"&&(H=this.toHslString()),L==="hsv"&&(H=this.toHsvString()),H||this.toHexString()):L==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return u(this.toString())},_applyModification:function(L,M){var H=L.apply(null,[this].concat([].slice.call(M)));return this._r=H._r,this._g=H._g,this._b=H._b,this.setAlpha(H._a),this},lighten:function(){return this._applyModification(y,arguments)},brighten:function(){return this._applyModification(A,arguments)},darken:function(){return this._applyModification(w,arguments)},desaturate:function(){return this._applyModification(v,arguments)},saturate:function(){return this._applyModification(x,arguments)},greyscale:function(){return this._applyModification(S,arguments)},spin:function(){return this._applyModification(k,arguments)},_applyCombination:function(L,M){return L.apply(null,[this].concat([].slice.call(M)))},analogous:function(){return this._applyCombination(V,arguments)},complement:function(){return this._applyCombination(T,arguments)},monochromatic:function(){return this._applyCombination(nt,arguments)},splitcomplement:function(){return this._applyCombination($,arguments)},triad:function(){return this._applyCombination(B,[3])},tetrad:function(){return this._applyCombination(B,[4])}},u.fromRatio=function(L,M){if(typeof L=="object"){var H={};for(var G in L)L.hasOwnProperty(G)&&(H[G]=G==="a"?L[G]:lt(L[G]));L=H}return u(L,M)},u.equals=function(L,M){return!(!L||!M)&&u(L).toRgbString()==u(M).toRgbString()},u.random=function(){return u.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},u.mix=function(L,M,H){H=H===0?0:H||50;var G=u(L).toRgb(),et=u(M).toRgb(),wt=H/100;return u({r:(et.r-G.r)*wt+G.r,g:(et.g-G.g)*wt+G.g,b:(et.b-G.b)*wt+G.b,a:(et.a-G.a)*wt+G.a})},u.readability=function(L,M){var H=u(L),G=u(M);return(Math.max(H.getLuminance(),G.getLuminance())+.05)/(Math.min(H.getLuminance(),G.getLuminance())+.05)},u.isReadable=function(L,M,H){var G,et,wt,bt,Ct,Et=u.readability(L,M);switch(et=!1,(wt=H,(bt=((wt=wt||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&bt!=="AAA"&&(bt="AA"),(Ct=(wt.size||"small").toLowerCase())!=="small"&&Ct!=="large"&&(Ct="small"),G={level:bt,size:Ct}).level+G.size){case"AAsmall":case"AAAlarge":et=Et>=4.5;break;case"AAlarge":et=Et>=3;break;case"AAAsmall":et=Et>=7}return et},u.mostReadable=function(L,M,H){var G,et,wt,bt,Ct=null,Et=0;et=(H=H||{}).includeFallbackColors,wt=H.level,bt=H.size;for(var Ut=0;Ut<M.length;Ut++)(G=u.readability(L,M[Ut]))>Et&&(Et=G,Ct=u(M[Ut]));return u.isReadable(L,Ct,{level:wt,size:bt})||!et?Ct:(H.includeFallbackColors=!1,u.mostReadable(L,["#fff","#000"],H))};var ct=u.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},q=u.hexNames=function(L){var M={};for(var H in L)L.hasOwnProperty(H)&&(M[L[H]]=H);return M}(ct);function D(L){return L=parseFloat(L),(isNaN(L)||L<0||L>1)&&(L=1),L}function W(L,M){(function(G){return typeof G=="string"&&G.indexOf(".")!=-1&&parseFloat(G)===1})(L)&&(L="100%");var H=function(G){return typeof G=="string"&&G.indexOf("%")!=-1}(L);return L=Math.min(M,Math.max(0,parseFloat(L))),H&&(L=parseInt(L*M,10)/100),Math.abs(L-M)<1e-6?1:L%M/parseFloat(M)}function z(L){return Math.min(1,Math.max(0,L))}function Q(L){return parseInt(L,16)}function Z(L){return L.length==1?"0"+L:""+L}function lt(L){return L<=1&&(L=100*L+"%"),L}function rt(L){return Math.round(255*parseFloat(L)).toString(16)}function mt(L){return Q(L)/255}var ht,Dt,I,j=(Dt="[\\s|\\(]+("+(ht="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+ht+")[,|\\s]+("+ht+")\\s*\\)?",I="[\\s|\\(]+("+ht+")[,|\\s]+("+ht+")[,|\\s]+("+ht+")[,|\\s]+("+ht+")\\s*\\)?",{CSS_UNIT:new RegExp(ht),rgb:new RegExp("rgb"+Dt),rgba:new RegExp("rgba"+I),hsl:new RegExp("hsl"+Dt),hsla:new RegExp("hsla"+I),hsv:new RegExp("hsv"+Dt),hsva:new RegExp("hsva"+I),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function Y(L){return!!j.CSS_UNIT.exec(L)}return u}()}},r={};function i(o){var a=r[o];if(a!==void 0)return a.exports;var c=r[o]={id:o,loaded:!1,exports:{}};return e[o].call(c.exports,c,c.exports,i),c.loaded=!0,c.exports}i.n=o=>{var a=o&&o.__esModule?()=>o.default:()=>o;return i.d(a,{a}),a},i.d=(o,a)=>{for(var c in a)i.o(a,c)&&!i.o(o,c)&&Object.defineProperty(o,c,{enumerable:!0,get:a[c]})},i.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),i.o=(o,a)=>Object.prototype.hasOwnProperty.call(o,a),i.r=o=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},i.nmd=o=>(o.paths=[],o.children||(o.children=[]),o),i.nc=void 0;var s=i(607);return s.default})())})(b0);var mv=b0.exports;const bv=Pf(mv);const vv=n=>{const t=/[\ud800-\udbff][\udc00-\udfff]/g;return n=n.replace(t,e=>{let r,i,s,o;return e.length===2?(r=e.charCodeAt(0),i=e.charCodeAt(1),s=(r-55296)*1024+65536+i-56320,o=`&#${s};`):o=e,o}),n},yv=n=>{const t=/&#\d+;/g,e=n.match(t)||[];let r,i,s;for(let o=0;o<e.length;o+=1){s=e[o],s=s.replace("&#","").replace(";",""),r=Math.floor((s-65536)/1024)+55296,i=(s-65536)%1024+56320,s=`&#${s};`;const a=String.fromCharCode(r,i);n=n.replace(s,a)}return n};function pn(n){"@babel/helpers - typeof";return pn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pn(n)}var Ur=Uint8Array,di=Uint16Array,Xf=Int32Array,Pu=new Ur([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),qu=new Ur([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),of=new Ur([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),v0=function(n,t){for(var e=new di(31),r=0;r<31;++r)e[r]=t+=1<<n[r-1];for(var i=new Xf(e[30]),r=1;r<30;++r)for(var s=e[r];s<e[r+1];++s)i[s]=s-e[r]<<5|r;return{b:e,r:i}},y0=v0(Pu,2),w0=y0.b,af=y0.r;w0[28]=258,af[258]=28;var _0=v0(qu,0),wv=_0.b,k1=_0.r,lf=new di(32768);for(var qn=0;qn<32768;++qn){var oo=(qn&43690)>>1|(qn&21845)<<1;oo=(oo&52428)>>2|(oo&13107)<<2,oo=(oo&61680)>>4|(oo&3855)<<4,lf[qn]=((oo&65280)>>8|(oo&255)<<8)>>1}var ms=function(n,t,e){for(var r=n.length,i=0,s=new di(t);i<r;++i)n[i]&&++s[n[i]-1];var o=new di(t);for(i=1;i<t;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(e){a=new di(1<<t);var c=15-t;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],d=t-n[i],p=o[n[i]-1]++<<d,g=p|(1<<d)-1;p<=g;++p)a[lf[p]>>c]=u}else for(a=new di(r),i=0;i<r;++i)n[i]&&(a[i]=lf[o[n[i]-1]++]>>15-n[i]);return a},wo=new Ur(288);for(var qn=0;qn<144;++qn)wo[qn]=8;for(var qn=144;qn<256;++qn)wo[qn]=9;for(var qn=256;qn<280;++qn)wo[qn]=7;for(var qn=280;qn<288;++qn)wo[qn]=8;var zl=new Ur(32);for(var qn=0;qn<32;++qn)zl[qn]=5;var _v=ms(wo,9,0),Av=ms(wo,9,1),xv=ms(zl,5,0),Nv=ms(zl,5,1),wh=function(n){for(var t=n[0],e=1;e<n.length;++e)n[e]>t&&(t=n[e]);return t},Bi=function(n,t,e){var r=t/8|0;return(n[r]|n[r+1]<<8)>>(t&7)&e},_h=function(n,t){var e=t/8|0;return(n[e]|n[e+1]<<8|n[e+2]<<16)>>(t&7)},Zf=function(n){return(n+7)/8|0},A0=function(n,t,e){return(t==null||t<0)&&(t=0),(e==null||e>n.length)&&(e=n.length),new Ur(n.subarray(t,e))},Sv=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Hi=function(n,t,e){var r=new Error(t||Sv[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,Hi),!e)throw r;return r},Lv=function(n,t,e,r){var i=n.length,s=r?r.length:0;if(!i||t.f&&!t.l)return e||new Ur(0);var o=!e,a=o||t.i!=2,c=t.i;o&&(e=new Ur(i*3));var u=function(bt){var Ct=e.length;if(bt>Ct){var Et=new Ur(Math.max(Ct*2,bt));Et.set(e),e=Et}},d=t.f||0,p=t.p||0,g=t.b||0,f=t.l,v=t.d,x=t.m,S=t.n,y=i*8;do{if(!f){d=Bi(n,p,1);var A=Bi(n,p+1,3);if(p+=3,A)if(A==1)f=Av,v=Nv,x=9,S=5;else if(A==2){var B=Bi(n,p,31)+257,$=Bi(n,p+10,15)+4,V=B+Bi(n,p+5,31)+1;p+=14;for(var nt=new Ur(V),ct=new Ur(19),q=0;q<$;++q)ct[of[q]]=Bi(n,p+q*3,7);p+=$*3;for(var D=wh(ct),W=(1<<D)-1,z=ms(ct,D,1),q=0;q<V;){var Q=z[Bi(n,p,W)];p+=Q&15;var w=Q>>4;if(w<16)nt[q++]=w;else{var Z=0,lt=0;for(w==16?(lt=3+Bi(n,p,3),p+=2,Z=nt[q-1]):w==17?(lt=3+Bi(n,p,7),p+=3):w==18&&(lt=11+Bi(n,p,127),p+=7);lt--;)nt[q++]=Z}}var rt=nt.subarray(0,B),mt=nt.subarray(B);x=wh(rt),S=wh(mt),f=ms(rt,x,1),v=ms(mt,S,1)}else Hi(1);else{var w=Zf(p)+4,k=n[w-4]|n[w-3]<<8,T=w+k;if(T>i){c&&Hi(0);break}a&&u(g+k),e.set(n.subarray(w,T),g),t.b=g+=k,t.p=p=T*8,t.f=d;continue}if(p>y){c&&Hi(0);break}}a&&u(g+131072);for(var ht=(1<<x)-1,Dt=(1<<S)-1,I=p;;I=p){var Z=f[_h(n,p)&ht],j=Z>>4;if(p+=Z&15,p>y){c&&Hi(0);break}if(Z||Hi(2),j<256)e[g++]=j;else if(j==256){I=p,f=null;break}else{var Y=j-254;if(j>264){var q=j-257,L=Pu[q];Y=Bi(n,p,(1<<L)-1)+w0[q],p+=L}var M=v[_h(n,p)&Dt],H=M>>4;M||Hi(3),p+=M&15;var mt=wv[H];if(H>3){var L=qu[H];mt+=_h(n,p)&(1<<L)-1,p+=L}if(p>y){c&&Hi(0);break}a&&u(g+131072);var G=g+Y;if(g<mt){var et=s-mt,wt=Math.min(mt,G);for(et+g<0&&Hi(3);g<wt;++g)e[g]=r[et+g]}for(;g<G;++g)e[g]=e[g-mt]}}t.l=f,t.p=I,t.b=g,t.f=d,f&&(d=1,t.m=x,t.d=v,t.n=S)}while(!d);return g!=e.length&&o?A0(e,0,g):e.subarray(0,g)},Ds=function(n,t,e){e<<=t&7;var r=t/8|0;n[r]|=e,n[r+1]|=e>>8},Sl=function(n,t,e){e<<=t&7;var r=t/8|0;n[r]|=e,n[r+1]|=e>>8,n[r+2]|=e>>16},Ah=function(n,t){for(var e=[],r=0;r<n.length;++r)n[r]&&e.push({s:r,f:n[r]});var i=e.length,s=e.slice();if(!i)return{t:N0,l:0};if(i==1){var o=new Ur(e[0].s+1);return o[e[0].s]=1,{t:o,l:1}}e.sort(function(T,B){return T.f-B.f}),e.push({s:-1,f:25001});var a=e[0],c=e[1],u=0,d=1,p=2;for(e[0]={s:-1,f:a.f+c.f,l:a,r:c};d!=i-1;)a=e[e[u].f<e[p].f?u++:p++],c=e[u!=d&&e[u].f<e[p].f?u++:p++],e[d++]={s:-1,f:a.f+c.f,l:a,r:c};for(var g=s[0].s,r=1;r<i;++r)s[r].s>g&&(g=s[r].s);var f=new di(g+1),v=cf(e[d-1],f,0);if(v>t){var r=0,x=0,S=v-t,y=1<<S;for(s.sort(function(B,$){return f[$.s]-f[B.s]||B.f-$.f});r<i;++r){var A=s[r].s;if(f[A]>t)x+=y-(1<<v-f[A]),f[A]=t;else break}for(x>>=S;x>0;){var w=s[r].s;f[w]<t?x-=1<<t-f[w]++-1:++r}for(;r>=0&&x;--r){var k=s[r].s;f[k]==t&&(--f[k],++x)}v=t}return{t:new Ur(f),l:v}},cf=function(n,t,e){return n.s==-1?Math.max(cf(n.l,t,e+1),cf(n.r,t,e+1)):t[n.s]=e},E1=function(n){for(var t=n.length;t&&!n[--t];);for(var e=new di(++t),r=0,i=n[0],s=1,o=function(c){e[r++]=c},a=1;a<=t;++a)if(n[a]==i&&a!=t)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=n[a]}return{c:e.subarray(0,r),n:t}},Ll=function(n,t){for(var e=0,r=0;r<t.length;++r)e+=n[r]*t[r];return e},x0=function(n,t,e){var r=e.length,i=Zf(t+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var s=0;s<r;++s)n[i+s+4]=e[s];return(i+4+r)*8},C1=function(n,t,e,r,i,s,o,a,c,u,d){Ds(t,d++,e),++i[256];for(var p=Ah(i,15),g=p.t,f=p.l,v=Ah(s,15),x=v.t,S=v.l,y=E1(g),A=y.c,w=y.n,k=E1(x),T=k.c,B=k.n,$=new di(19),V=0;V<A.length;++V)++$[A[V]&31];for(var V=0;V<T.length;++V)++$[T[V]&31];for(var nt=Ah($,7),ct=nt.t,q=nt.l,D=19;D>4&&!ct[of[D-1]];--D);var W=u+5<<3,z=Ll(i,wo)+Ll(s,zl)+o,Q=Ll(i,g)+Ll(s,x)+o+14+3*D+Ll($,ct)+2*$[16]+3*$[17]+7*$[18];if(c>=0&&W<=z&&W<=Q)return x0(t,d,n.subarray(c,c+u));var Z,lt,rt,mt;if(Ds(t,d,1+(Q<z)),d+=2,Q<z){Z=ms(g,f,0),lt=g,rt=ms(x,S,0),mt=x;var ht=ms(ct,q,0);Ds(t,d,w-257),Ds(t,d+5,B-1),Ds(t,d+10,D-4),d+=14;for(var V=0;V<D;++V)Ds(t,d+3*V,ct[of[V]]);d+=3*D;for(var Dt=[A,T],I=0;I<2;++I)for(var j=Dt[I],V=0;V<j.length;++V){var Y=j[V]&31;Ds(t,d,ht[Y]),d+=ct[Y],Y>15&&(Ds(t,d,j[V]>>5&127),d+=j[V]>>12)}}else Z=_v,lt=wo,rt=xv,mt=zl;for(var V=0;V<a;++V){var L=r[V];if(L>255){var Y=L>>18&31;Sl(t,d,Z[Y+257]),d+=lt[Y+257],Y>7&&(Ds(t,d,L>>23&31),d+=Pu[Y]);var M=L&31;Sl(t,d,rt[M]),d+=mt[M],M>3&&(Sl(t,d,L>>5&8191),d+=qu[M])}else Sl(t,d,Z[L]),d+=lt[L]}return Sl(t,d,Z[256]),d+lt[256]},kv=new Xf([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),N0=new Ur(0),Ev=function(n,t,e,r,i,s){var o=s.z||n.length,a=new Ur(r+o+5*(1+Math.ceil(o/7e3))+i),c=a.subarray(r,a.length-i),u=s.l,d=(s.r||0)&7;if(t){d&&(c[0]=s.r>>3);for(var p=kv[t-1],g=p>>13,f=p&8191,v=(1<<e)-1,x=s.p||new di(32768),S=s.h||new di(v+1),y=Math.ceil(e/3),A=2*y,w=function(Ut){return(n[Ut]^n[Ut+1]<<y^n[Ut+2]<<A)&v},k=new Xf(25e3),T=new di(288),B=new di(32),$=0,V=0,nt=s.i||0,ct=0,q=s.w||0,D=0;nt+2<o;++nt){var W=w(nt),z=nt&32767,Q=S[W];if(x[z]=Q,S[W]=z,q<=nt){var Z=o-nt;if(($>7e3||ct>24576)&&(Z>423||!u)){d=C1(n,c,0,k,T,B,V,ct,D,nt-D,d),ct=$=V=0,D=nt;for(var lt=0;lt<286;++lt)T[lt]=0;for(var lt=0;lt<30;++lt)B[lt]=0}var rt=2,mt=0,ht=f,Dt=z-Q&32767;if(Z>2&&W==w(nt-Dt))for(var I=Math.min(g,Z)-1,j=Math.min(32767,nt),Y=Math.min(258,Z);Dt<=j&&--ht&&z!=Q;){if(n[nt+rt]==n[nt+rt-Dt]){for(var L=0;L<Y&&n[nt+L]==n[nt+L-Dt];++L);if(L>rt){if(rt=L,mt=Dt,L>I)break;for(var M=Math.min(Dt,L-2),H=0,lt=0;lt<M;++lt){var G=nt-Dt+lt&32767,et=x[G],wt=G-et&32767;wt>H&&(H=wt,Q=G)}}}z=Q,Q=x[z],Dt+=z-Q&32767}if(mt){k[ct++]=268435456|af[rt]<<18|k1[mt];var bt=af[rt]&31,Ct=k1[mt]&31;V+=Pu[bt]+qu[Ct],++T[257+bt],++B[Ct],q=nt+rt,++$}else k[ct++]=n[nt],++T[n[nt]]}}for(nt=Math.max(nt,q);nt<o;++nt)k[ct++]=n[nt],++T[n[nt]];d=C1(n,c,u,k,T,B,V,ct,D,nt-D,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=S,s.p=x,s.i=nt,s.w=q)}else{for(var nt=s.w||0;nt<o+u;nt+=65535){var Et=nt+65535;Et>=o&&(c[d/8|0]=u,Et=o),d=x0(c,d+1,n.subarray(nt,Et))}s.i=o}return A0(a,0,r+Zf(d)+i)},S0=function(){var n=1,t=0;return{p:function(e){for(var r=n,i=t,s=e.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=e[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,t=i},d:function(){return n%=65521,t%=65521,(n&255)<<24|(n&65280)<<8|(t&255)<<8|t>>8}}},Cv=function(n,t,e,r,i){if(!i&&(i={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),o=new Ur(s.length+n.length);o.set(s),o.set(n,s.length),n=o,i.w=s.length}return Ev(n,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+t.mem,e,r,i)},L0=function(n,t,e){for(;e;++t)n[t]=e,e>>>=8},Iv=function(n,t){var e=t.level,r=e==0?0:e<6?1:e==9?3:2;if(n[0]=120,n[1]=r<<6|(t.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,t.dictionary){var i=S0();i.p(t.dictionary),L0(n,2,i.d())}},Ov=function(n,t){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Hi(6,"invalid zlib data"),(n[1]>>5&1)==+!t&&Hi(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function uf(n,t){t||(t={});var e=S0();e.p(n);var r=Cv(n,t,t.dictionary?6:2,4);return Iv(r,t),L0(r,r.length-4,e.d()),r}function Tv(n,t){return Lv(n.subarray(Ov(n,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var Pv=typeof TextDecoder<"u"&&new TextDecoder,qv=0;try{Pv.decode(N0,{stream:!0}),qv=1}catch{}var xe=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function xh(){xe.console&&typeof xe.console.log=="function"&&xe.console.log.apply(xe.console,arguments)}var Nn={log:xh,warn:function(n){xe.console&&(typeof xe.console.warn=="function"?xe.console.warn.apply(xe.console,arguments):xh.call(null,arguments))},error:function(n){xe.console&&(typeof xe.console.error=="function"?xe.console.error.apply(xe.console,arguments):xh(n))}};function Nh(n,t,e){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){Mo(r.response,t,e)},r.onerror=function(){Nn.error("could not download file")},r.send()}function I1(n){var t=new XMLHttpRequest;t.open("HEAD",n,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function zc(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(t)}}var Cl,hf,Mo=xe.saveAs||((typeof window>"u"?"undefined":pn(window))!=="object"||window!==xe?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,t,e){var r=xe.URL||xe.webkitURL,i=document.createElement("a");t=t||n.name||"download",i.download=t,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?I1(i.href)?Nh(n,t,e):zc(i,i.target="_blank"):zc(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){zc(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,t,e){if(t=t||n.name||"download",typeof n=="string")if(I1(n))Nh(n,t,e);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){zc(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:pn(s)!=="object"&&(Nn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob([String.fromCharCode(65279),i],{type:i.type}):i}(n,e),t)}:function(n,t,e,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return Nh(n,t,e);var i=n.type==="application/octet-stream",s=/constructor/i.test(xe.HTMLElement)||xe.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":pn(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var d=a.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},a.readAsDataURL(n)}else{var c=xe.URL||xe.webkitURL,u=c.createObjectURL(n);r?r.location=u:location.href=u,r=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function k0(n){var t;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<e.length;r++){var i=e[r].re,s=e[r].process,o=i.exec(n);o&&(t=s(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return a.length==1&&(a="0"+a),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+a+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Sh(n,t){var e=n[0],r=n[1],i=n[2],s=n[3];e=Rr(e,r,i,s,t[0],7,-680876936),s=Rr(s,e,r,i,t[1],12,-389564586),i=Rr(i,s,e,r,t[2],17,606105819),r=Rr(r,i,s,e,t[3],22,-1044525330),e=Rr(e,r,i,s,t[4],7,-176418897),s=Rr(s,e,r,i,t[5],12,1200080426),i=Rr(i,s,e,r,t[6],17,-1473231341),r=Rr(r,i,s,e,t[7],22,-45705983),e=Rr(e,r,i,s,t[8],7,1770035416),s=Rr(s,e,r,i,t[9],12,-1958414417),i=Rr(i,s,e,r,t[10],17,-42063),r=Rr(r,i,s,e,t[11],22,-1990404162),e=Rr(e,r,i,s,t[12],7,1804603682),s=Rr(s,e,r,i,t[13],12,-40341101),i=Rr(i,s,e,r,t[14],17,-1502002290),e=Dr(e,r=Rr(r,i,s,e,t[15],22,1236535329),i,s,t[1],5,-165796510),s=Dr(s,e,r,i,t[6],9,-1069501632),i=Dr(i,s,e,r,t[11],14,643717713),r=Dr(r,i,s,e,t[0],20,-373897302),e=Dr(e,r,i,s,t[5],5,-701558691),s=Dr(s,e,r,i,t[10],9,38016083),i=Dr(i,s,e,r,t[15],14,-660478335),r=Dr(r,i,s,e,t[4],20,-405537848),e=Dr(e,r,i,s,t[9],5,568446438),s=Dr(s,e,r,i,t[14],9,-1019803690),i=Dr(i,s,e,r,t[3],14,-187363961),r=Dr(r,i,s,e,t[8],20,1163531501),e=Dr(e,r,i,s,t[13],5,-1444681467),s=Dr(s,e,r,i,t[2],9,-51403784),i=Dr(i,s,e,r,t[7],14,1735328473),e=jr(e,r=Dr(r,i,s,e,t[12],20,-1926607734),i,s,t[5],4,-378558),s=jr(s,e,r,i,t[8],11,-2022574463),i=jr(i,s,e,r,t[11],16,1839030562),r=jr(r,i,s,e,t[14],23,-35309556),e=jr(e,r,i,s,t[1],4,-1530992060),s=jr(s,e,r,i,t[4],11,1272893353),i=jr(i,s,e,r,t[7],16,-155497632),r=jr(r,i,s,e,t[10],23,-1094730640),e=jr(e,r,i,s,t[13],4,681279174),s=jr(s,e,r,i,t[0],11,-358537222),i=jr(i,s,e,r,t[3],16,-722521979),r=jr(r,i,s,e,t[6],23,76029189),e=jr(e,r,i,s,t[9],4,-640364487),s=jr(s,e,r,i,t[12],11,-421815835),i=jr(i,s,e,r,t[15],16,530742520),e=Fr(e,r=jr(r,i,s,e,t[2],23,-995338651),i,s,t[0],6,-198630844),s=Fr(s,e,r,i,t[7],10,1126891415),i=Fr(i,s,e,r,t[14],15,-1416354905),r=Fr(r,i,s,e,t[5],21,-57434055),e=Fr(e,r,i,s,t[12],6,1700485571),s=Fr(s,e,r,i,t[3],10,-1894986606),i=Fr(i,s,e,r,t[10],15,-1051523),r=Fr(r,i,s,e,t[1],21,-2054922799),e=Fr(e,r,i,s,t[8],6,1873313359),s=Fr(s,e,r,i,t[15],10,-30611744),i=Fr(i,s,e,r,t[6],15,-1560198380),r=Fr(r,i,s,e,t[13],21,1309151649),e=Fr(e,r,i,s,t[4],6,-145523070),s=Fr(s,e,r,i,t[11],10,-1120210379),i=Fr(i,s,e,r,t[2],15,718787259),r=Fr(r,i,s,e,t[9],21,-343485551),n[0]=mo(e,n[0]),n[1]=mo(r,n[1]),n[2]=mo(i,n[2]),n[3]=mo(s,n[3])}function Mu(n,t,e,r,i,s){return t=mo(mo(t,n),mo(r,s)),mo(t<<i|t>>>32-i,e)}function Rr(n,t,e,r,i,s,o){return Mu(t&e|~t&r,n,t,i,s,o)}function Dr(n,t,e,r,i,s,o){return Mu(t&r|e&~r,n,t,i,s,o)}function jr(n,t,e,r,i,s,o){return Mu(t^e^r,n,t,i,s,o)}function Fr(n,t,e,r,i,s,o){return Mu(e^(t|~r),n,t,i,s,o)}function E0(n){var t,e=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=n.length;t+=64)Sh(r,Mv(n.substring(t-64,t)));n=n.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<n.length;t++)i[t>>2]|=n.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(Sh(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*e,Sh(r,i),r}function Mv(n){var t,e=[];for(t=0;t<64;t+=4)e[t>>2]=n.charCodeAt(t)+(n.charCodeAt(t+1)<<8)+(n.charCodeAt(t+2)<<16)+(n.charCodeAt(t+3)<<24);return e}Cl=xe.atob.bind(xe),hf=xe.btoa.bind(xe);var O1="0123456789abcdef".split("");function Rv(n){for(var t="",e=0;e<4;e++)t+=O1[n>>8*e+4&15]+O1[n>>8*e&15];return t}function Dv(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function ff(n){return E0(n).map(Dv).join("")}var jv=function(n){for(var t=0;t<n.length;t++)n[t]=Rv(n[t]);return n.join("")}(E0("hello"))!="5d41402abc4b2a76b9719d911017c592";function mo(n,t){if(jv){var e=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(e>>16)<<16|65535&e}return n+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function df(n,t){var e,r,i,s;if(n!==e){for(var o=(i=n,s=1+(256/n.length>>0),new Array(s+1).join(i)),a=[],c=0;c<256;c++)a[c]=c;var u=0;for(c=0;c<256;c++){var d=a[c];u=(u+d+o.charCodeAt(c))%256,a[c]=a[u],a[u]=d}e=n,r=a}else a=r;var p=t.length,g=0,f=0,v="";for(c=0;c<p;c++)f=(f+(d=a[g=(g+1)%256]))%256,a[g]=a[f],a[f]=d,o=a[(a[g]+a[f])%256],v+=String.fromCharCode(t.charCodeAt(c)^o);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var T1={print:4,modify:8,copy:16,"annot-forms":32};function Na(n,t,e,r){this.v=1,this.r=2;var i=192;n.forEach(function(a){if(T1.perm!==void 0)throw new Error("Invalid permission: "+a);i+=T1[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(t+this.padding).substr(0,32),o=(e+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=ff(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=df(this.encryptionKey,this.padding)}function Sa(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var t="",e=n.length,r=0;r<e;r++){var i=n.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?t+="#"+("0"+i.toString(16)).slice(-2):t+=n[r]}return t}function P1(n){if(pn(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,r,i){if(i=i||!1,typeof e!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var s=Math.random().toString(35);return t[e][s]=[r,!!i],s},this.unsubscribe=function(e){for(var r in t)if(t[r][e])return delete t[r][e],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(e){if(t.hasOwnProperty(e)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in t[e]){var o=t[e][s];try{o[0].apply(n,r)}catch(a){xe.console&&Nn.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function pu(n){if(!(this instanceof pu))return new pu(n);var t="opacity,stroke-opacity".split(",");for(var e in n)n.hasOwnProperty(e)&&t.indexOf(e)>=0&&(this[e]=n[e]);this.id="",this.objectNumber=-1}function C0(n,t){this.gState=n,this.matrix=t,this.id="",this.objectNumber=-1}function Ro(n,t,e,r,i){if(!(this instanceof Ro))return new Ro(n,t,e,r,i);this.type=n==="axial"?2:3,this.coords=t,this.colors=e,C0.call(this,r,i)}function Ea(n,t,e,r,i){if(!(this instanceof Ea))return new Ea(n,t,e,r,i);this.boundingBox=n,this.xStep=t,this.yStep=e,this.stream="",this.cloneIndex=0,C0.call(this,r,i)}function Ae(n){var t,e=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,c=16,u="S",d=null;pn(n=n||{})==="object"&&(e=n.orientation,r=n.unit||r,i=n.format||i,s=n.compress||n.compressPdf||s,(d=n.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(t=n.precision),n.floatPrecision!==void 0&&(c=n.floatPrecision),u=n.defaultPathOperation||"S"),o=n.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",e=(""+(e||"P")).toLowerCase();var p=n.putOnlyUsedFonts||!1,g={},f={internal:{},__private__:{}};f.__private__.PubSub=P1;var v="1.3",x=f.__private__.getPdfVersion=function(){return v};f.__private__.setPdfVersion=function(m){v=m};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return S};var y=f.__private__.getPageFormat=function(m){return S[m]};i=i||"a4";var A={COMPAT:"compat",ADVANCED:"advanced"},w=A.COMPAT;function k(){this.saveGraphicsState(),J(new ee($t,0,0,-$t,0,Ks()*$t).toString()+" cm"),this.setFontSize(this.getFontSize()/$t),u="n",w=A.ADVANCED}function T(){this.restoreGraphicsState(),u="S",w=A.COMPAT}var B=f.__private__.combineFontStyleAndFontWeight=function(m,C){if(m=="bold"&&C=="normal"||m=="bold"&&C==400||m=="normal"&&C=="italic"||m=="bold"&&C=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return C&&(m=C==400||C==="normal"?m==="italic"?"italic":"normal":C!=700&&C!=="bold"||m!=="normal"?(C==700?"bold":C)+""+m:"bold"),m};f.advancedAPI=function(m){var C=w===A.COMPAT;return C&&k.call(this),typeof m!="function"||(m(this),C&&T.call(this)),this},f.compatAPI=function(m){var C=w===A.ADVANCED;return C&&T.call(this),typeof m!="function"||(m(this),C&&k.call(this)),this},f.isAdvancedAPI=function(){return w===A.ADVANCED};var $,V=function(m){if(w!==A.ADVANCED)throw new Error(m+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},nt=f.roundToPrecision=f.__private__.roundToPrecision=function(m,C){var X=t||C;if(isNaN(m)||isNaN(X))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return m.toFixed(X).replace(/0+$/,"")};$=f.hpf=f.__private__.hpf=typeof c=="number"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return nt(m,c)}:c==="smart"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return nt(m,m>-1&&m<1?16:5)}:function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return nt(m,16)};var ct=f.f2=f.__private__.f2=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f2");return nt(m,2)},q=f.__private__.f3=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f3");return nt(m,3)},D=f.scale=f.__private__.scale=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.scale");return w===A.COMPAT?m*$t:w===A.ADVANCED?m:void 0},W=function(m){return w===A.COMPAT?Ks()-m:w===A.ADVANCED?m:void 0},z=function(m){return D(W(m))};f.__private__.setPrecision=f.setPrecision=function(m){typeof parseInt(m,10)=="number"&&(t=parseInt(m,10))};var Q,Z="00000000000000000000000000000000",lt=f.__private__.getFileId=function(){return Z},rt=f.__private__.setFileId=function(m){return Z=m!==void 0&&/^[a-fA-F0-9]{32}$/.test(m)?m.toUpperCase():Z.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(Ln=new Na(d.userPermissions,d.userPassword,d.ownerPassword,Z)),Z};f.setFileId=function(m){return rt(m),this},f.getFileId=function(){return lt()};var mt=f.__private__.convertDateToPDFDate=function(m){var C=m.getTimezoneOffset(),X=C<0?"+":"-",it=Math.floor(Math.abs(C/60)),gt=Math.abs(C%60),kt=[X,Y(it),"'",Y(gt),"'"].join("");return["D:",m.getFullYear(),Y(m.getMonth()+1),Y(m.getDate()),Y(m.getHours()),Y(m.getMinutes()),Y(m.getSeconds()),kt].join("")},ht=f.__private__.convertPDFDateToDate=function(m){var C=parseInt(m.substr(2,4),10),X=parseInt(m.substr(6,2),10)-1,it=parseInt(m.substr(8,2),10),gt=parseInt(m.substr(10,2),10),kt=parseInt(m.substr(12,2),10),jt=parseInt(m.substr(14,2),10);return new Date(C,X,it,gt,kt,jt,0)},Dt=f.__private__.setCreationDate=function(m){var C;if(m===void 0&&(m=new Date),m instanceof Date)C=mt(m);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(m))throw new Error("Invalid argument passed to jsPDF.setCreationDate");C=m}return Q=C},I=f.__private__.getCreationDate=function(m){var C=Q;return m==="jsDate"&&(C=ht(Q)),C};f.setCreationDate=function(m){return Dt(m),this},f.getCreationDate=function(m){return I(m)};var j,Y=f.__private__.padd2=function(m){return("0"+parseInt(m)).slice(-2)},L=f.__private__.padd2Hex=function(m){return("00"+(m=m.toString())).substr(m.length)},M=0,H=[],G=[],et=0,wt=[],bt=[],Ct=!1,Et=G,Ut=function(){M=0,et=0,G=[],H=[],wt=[],wr=en(),Tn=en()};f.__private__.setCustomOutputDestination=function(m){Ct=!0,Et=m};var _t=function(m){Ct||(Et=m)};f.__private__.resetCustomOutputDestination=function(){Ct=!1,Et=G};var J=f.__private__.out=function(m){return m=m.toString(),et+=m.length+1,Et.push(m),Et},ae=f.__private__.write=function(m){return J(arguments.length===1?m.toString():Array.prototype.join.call(arguments," "))},Vt=f.__private__.getArrayBuffer=function(m){for(var C=m.length,X=new ArrayBuffer(C),it=new Uint8Array(X);C--;)it[C]=m.charCodeAt(C);return X},Nt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return Nt};var pt=n.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(m){return pt=w===A.ADVANCED?m/$t:m,this};var It,Mt=f.__private__.getFontSize=f.getFontSize=function(){return w===A.COMPAT?pt:pt*$t},Ht=n.R2L||!1;f.__private__.setR2L=f.setR2L=function(m){return Ht=m,this},f.__private__.getR2L=f.getR2L=function(){return Ht};var zt,Zt=f.__private__.setZoomMode=function(m){var C=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(m))It=m;else if(isNaN(m)){if(C.indexOf(m)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+m+'" is not recognized.');It=m}else It=parseInt(m,10)};f.__private__.getZoomMode=function(){return It};var Jt,te=f.__private__.setPageMode=function(m){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(m)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+m+'" is not recognized.');zt=m};f.__private__.getPageMode=function(){return zt};var se=f.__private__.setLayoutMode=function(m){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(m)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+m+'" is not recognized.');Jt=m};f.__private__.getLayoutMode=function(){return Jt},f.__private__.setDisplayMode=f.setDisplayMode=function(m,C,X){return Zt(m),se(C),te(X),this};var Xt={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(m){if(Object.keys(Xt).indexOf(m)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Xt[m]},f.__private__.getDocumentProperties=function(){return Xt},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(m){for(var C in Xt)Xt.hasOwnProperty(C)&&m[C]&&(Xt[C]=m[C]);return this},f.__private__.setDocumentProperty=function(m,C){if(Object.keys(Xt).indexOf(m)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Xt[m]=C};var Kt,$t,cn,Fe,Hn,He={},tn={},Rn=[],Le={},_n={},De={},rn={},sn=null,Xe=0,ce=[],Oe=new P1(f),Yn=n.hotfixes||[],gn={},On={},Jn=[],ee=function m(C,X,it,gt,kt,jt){if(!(this instanceof m))return new m(C,X,it,gt,kt,jt);isNaN(C)&&(C=1),isNaN(X)&&(X=0),isNaN(it)&&(it=0),isNaN(gt)&&(gt=1),isNaN(kt)&&(kt=0),isNaN(jt)&&(jt=0),this._matrix=[C,X,it,gt,kt,jt]};Object.defineProperty(ee.prototype,"sx",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(ee.prototype,"shy",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(ee.prototype,"shx",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(ee.prototype,"sy",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(ee.prototype,"tx",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(ee.prototype,"ty",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(ee.prototype,"a",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(ee.prototype,"b",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(ee.prototype,"c",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(ee.prototype,"d",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(ee.prototype,"e",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(ee.prototype,"f",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(ee.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ee.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ee.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ee.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ee.prototype.join=function(m){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map($).join(m)},ee.prototype.multiply=function(m){var C=m.sx*this.sx+m.shy*this.shx,X=m.sx*this.shy+m.shy*this.sy,it=m.shx*this.sx+m.sy*this.shx,gt=m.shx*this.shy+m.sy*this.sy,kt=m.tx*this.sx+m.ty*this.shx+this.tx,jt=m.tx*this.shy+m.ty*this.sy+this.ty;return new ee(C,X,it,gt,kt,jt)},ee.prototype.decompose=function(){var m=this.sx,C=this.shy,X=this.shx,it=this.sy,gt=this.tx,kt=this.ty,jt=Math.sqrt(m*m+C*C),ne=(m/=jt)*X+(C/=jt)*it;X-=m*ne,it-=C*ne;var ge=Math.sqrt(X*X+it*it);return ne/=ge,m*(it/=ge)<C*(X/=ge)&&(m=-m,C=-C,ne=-ne,jt=-jt),{scale:new ee(jt,0,0,ge,0,0),translate:new ee(1,0,0,1,gt,kt),rotate:new ee(m,C,-C,m,0,0),skew:new ee(1,0,ne,1,0,0)}},ee.prototype.toString=function(m){return this.join(" ")},ee.prototype.inversed=function(){var m=this.sx,C=this.shy,X=this.shx,it=this.sy,gt=this.tx,kt=this.ty,jt=1/(m*it-C*X),ne=it*jt,ge=-C*jt,Pe=-X*jt,Ce=m*jt;return new ee(ne,ge,Pe,Ce,-ne*gt-Pe*kt,-ge*gt-Ce*kt)},ee.prototype.applyToPoint=function(m){var C=m.x*this.sx+m.y*this.shx+this.tx,X=m.x*this.shy+m.y*this.sy+this.ty;return new ta(C,X)},ee.prototype.applyToRectangle=function(m){var C=this.applyToPoint(m),X=this.applyToPoint(new ta(m.x+m.w,m.y+m.h));return new il(C.x,C.y,X.x-C.x,X.y-C.y)},ee.prototype.clone=function(){var m=this.sx,C=this.shy,X=this.shx,it=this.sy,gt=this.tx,kt=this.ty;return new ee(m,C,X,it,gt,kt)},f.Matrix=ee;var ln=f.matrixMult=function(m,C){return C.multiply(m)},mn=new ee(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=mn;var An=function(m,C){if(!_n[m]){var X=(C instanceof Ro?"Sh":"P")+(Object.keys(Le).length+1).toString(10);C.id=X,_n[m]=X,Le[X]=C,Oe.publish("addPattern",C)}};f.ShadingPattern=Ro,f.TilingPattern=Ea,f.addShadingPattern=function(m,C){return V("addShadingPattern()"),An(m,C),this},f.beginTilingPattern=function(m){V("beginTilingPattern()"),hc(m.boundingBox[0],m.boundingBox[1],m.boundingBox[2]-m.boundingBox[0],m.boundingBox[3]-m.boundingBox[1],m.matrix)},f.endTilingPattern=function(m,C){V("endTilingPattern()"),C.stream=bt[j].join(`
`),An(m,C),Oe.publish("endTilingPattern",C),Jn.pop().restore()};var Ke=f.__private__.newObject=function(){var m=en();return Te(m,!0),m},en=f.__private__.newObjectDeferred=function(){return M++,H[M]=function(){return et},M},Te=function(m,C){return C=typeof C=="boolean"&&C,H[m]=et,C&&J(m+" 0 obj"),m},kr=f.__private__.newAdditionalObject=function(){var m={objId:en(),content:""};return wt.push(m),m},wr=en(),Tn=en(),Sn=f.__private__.decodeColorString=function(m){var C=m.split(" ");if(C.length!==2||C[1]!=="g"&&C[1]!=="G")C.length===5&&(C[4]==="k"||C[4]==="K")&&(C=[(1-C[0])*(1-C[3]),(1-C[1])*(1-C[3]),(1-C[2])*(1-C[3]),"r"]);else{var X=parseFloat(C[0]);C=[X,X,X,"r"]}for(var it="#",gt=0;gt<3;gt++)it+=("0"+Math.floor(255*parseFloat(C[gt])).toString(16)).slice(-2);return it},Xn=f.__private__.encodeColorString=function(m){var C;typeof m=="string"&&(m={ch1:m});var X=m.ch1,it=m.ch2,gt=m.ch3,kt=m.ch4,jt=m.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof X=="string"&&X.charAt(0)!=="#"){var ne=new k0(X);if(ne.ok)X=ne.toHex();else if(!/^\d*\.?\d*$/.test(X))throw new Error('Invalid color "'+X+'" passed to jsPDF.encodeColorString.')}if(typeof X=="string"&&/^#[0-9A-Fa-f]{3}$/.test(X)&&(X="#"+X[1]+X[1]+X[2]+X[2]+X[3]+X[3]),typeof X=="string"&&/^#[0-9A-Fa-f]{6}$/.test(X)){var ge=parseInt(X.substr(1),16);X=ge>>16&255,it=ge>>8&255,gt=255&ge}if(it===void 0||kt===void 0&&X===it&&it===gt)if(typeof X=="string")C=X+" "+jt[0];else switch(m.precision){case 2:C=ct(X/255)+" "+jt[0];break;case 3:default:C=q(X/255)+" "+jt[0]}else if(kt===void 0||pn(kt)==="object"){if(kt&&!isNaN(kt.a)&&kt.a===0)return C=["1.","1.","1.",jt[1]].join(" ");if(typeof X=="string")C=[X,it,gt,jt[1]].join(" ");else switch(m.precision){case 2:C=[ct(X/255),ct(it/255),ct(gt/255),jt[1]].join(" ");break;default:case 3:C=[q(X/255),q(it/255),q(gt/255),jt[1]].join(" ")}}else if(typeof X=="string")C=[X,it,gt,kt,jt[2]].join(" ");else switch(m.precision){case 2:C=[ct(X),ct(it),ct(gt),ct(kt),jt[2]].join(" ");break;case 3:default:C=[q(X),q(it),q(gt),q(kt),jt[2]].join(" ")}return C},Ve=f.__private__.getFilters=function(){return o},Zn=f.__private__.putStream=function(m){var C=(m=m||{}).data||"",X=m.filters||Ve(),it=m.alreadyAppliedFilters||[],gt=m.addLength1||!1,kt=C.length,jt=m.objectId,ne=function(Mr){return Mr};if(d!==null&&jt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(ne=Ln.encryptor(jt,0));var ge={};X===!0&&(X=["FlateEncode"]);var Pe=m.additionalKeyValues||[],Ce=(ge=Ae.API.processDataByFilters!==void 0?Ae.API.processDataByFilters(C,X):{data:C,reverseChain:[]}).reverseChain+(Array.isArray(it)?it.join(" "):it.toString());if(ge.data.length!==0&&(Pe.push({key:"Length",value:ge.data.length}),gt===!0&&Pe.push({key:"Length1",value:kt})),Ce.length!=0)if(Ce.split("/").length-1==1)Pe.push({key:"Filter",value:Ce});else{Pe.push({key:"Filter",value:"["+Ce+"]"});for(var Qe=0;Qe<Pe.length;Qe+=1)if(Pe[Qe].key==="DecodeParms"){for(var Un=[],$n=0;$n<ge.reverseChain.split("/").length-1;$n+=1)Un.push("null");Un.push(Pe[Qe].value),Pe[Qe].value="["+Un.join(" ")+"]"}}J("<<");for(var cr=0;cr<Pe.length;cr++)J("/"+Pe[cr].key+" "+Pe[cr].value);J(">>"),ge.data.length!==0&&(J("stream"),J(ne(ge.data)),J("endstream"))},Dn=f.__private__.putPage=function(m){var C=m.number,X=m.data,it=m.objId,gt=m.contentsObjId;Te(it,!0),J("<</Type /Page"),J("/Parent "+m.rootDictionaryObjId+" 0 R"),J("/Resources "+m.resourceDictionaryObjId+" 0 R"),J("/MediaBox ["+parseFloat($(m.mediaBox.bottomLeftX))+" "+parseFloat($(m.mediaBox.bottomLeftY))+" "+$(m.mediaBox.topRightX)+" "+$(m.mediaBox.topRightY)+"]"),m.cropBox!==null&&J("/CropBox ["+$(m.cropBox.bottomLeftX)+" "+$(m.cropBox.bottomLeftY)+" "+$(m.cropBox.topRightX)+" "+$(m.cropBox.topRightY)+"]"),m.bleedBox!==null&&J("/BleedBox ["+$(m.bleedBox.bottomLeftX)+" "+$(m.bleedBox.bottomLeftY)+" "+$(m.bleedBox.topRightX)+" "+$(m.bleedBox.topRightY)+"]"),m.trimBox!==null&&J("/TrimBox ["+$(m.trimBox.bottomLeftX)+" "+$(m.trimBox.bottomLeftY)+" "+$(m.trimBox.topRightX)+" "+$(m.trimBox.topRightY)+"]"),m.artBox!==null&&J("/ArtBox ["+$(m.artBox.bottomLeftX)+" "+$(m.artBox.bottomLeftY)+" "+$(m.artBox.topRightX)+" "+$(m.artBox.topRightY)+"]"),typeof m.userUnit=="number"&&m.userUnit!==1&&J("/UserUnit "+m.userUnit),Oe.publish("putPage",{objId:it,pageContext:ce[C],pageNumber:C,page:X}),J("/Contents "+gt+" 0 R"),J(">>"),J("endobj");var kt=X.join(`
`);return w===A.ADVANCED&&(kt+=`
Q`),Te(gt,!0),Zn({data:kt,filters:Ve(),objectId:gt}),J("endobj"),it},Vn=f.__private__.putPages=function(){var m,C,X=[];for(m=1;m<=Xe;m++)ce[m].objId=en(),ce[m].contentsObjId=en();for(m=1;m<=Xe;m++)X.push(Dn({number:m,data:bt[m],objId:ce[m].objId,contentsObjId:ce[m].contentsObjId,mediaBox:ce[m].mediaBox,cropBox:ce[m].cropBox,bleedBox:ce[m].bleedBox,trimBox:ce[m].trimBox,artBox:ce[m].artBox,userUnit:ce[m].userUnit,rootDictionaryObjId:wr,resourceDictionaryObjId:Tn}));Te(wr,!0),J("<</Type /Pages");var it="/Kids [";for(C=0;C<Xe;C++)it+=X[C]+" 0 R ";J(it+"]"),J("/Count "+Xe),J(">>"),J("endobj"),Oe.publish("postPutPages")},Hr=function(m){Oe.publish("putFont",{font:m,out:J,newObject:Ke,putStream:Zn}),m.isAlreadyPutted!==!0&&(m.objectNumber=Ke(),J("<<"),J("/Type /Font"),J("/BaseFont /"+Sa(m.postScriptName)),J("/Subtype /Type1"),typeof m.encoding=="string"&&J("/Encoding /"+m.encoding),J("/FirstChar 32"),J("/LastChar 255"),J(">>"),J("endobj"))},dt=function(){for(var m in He)He.hasOwnProperty(m)&&(p===!1||p===!0&&g.hasOwnProperty(m))&&Hr(He[m])},At=function(m){m.objectNumber=Ke();var C=[];C.push({key:"Type",value:"/XObject"}),C.push({key:"Subtype",value:"/Form"}),C.push({key:"BBox",value:"["+[$(m.x),$(m.y),$(m.x+m.width),$(m.y+m.height)].join(" ")+"]"}),C.push({key:"Matrix",value:"["+m.matrix.toString()+"]"});var X=m.pages[1].join(`
`);Zn({data:X,additionalKeyValues:C,objectId:m.objectNumber}),J("endobj")},Ft=function(){for(var m in gn)gn.hasOwnProperty(m)&&At(gn[m])},Qt=function(m,C){var X,it=[],gt=1/(C-1);for(X=0;X<1;X+=gt)it.push(X);if(it.push(1),m[0].offset!=0){var kt={offset:0,color:m[0].color};m.unshift(kt)}if(m[m.length-1].offset!=1){var jt={offset:1,color:m[m.length-1].color};m.push(jt)}for(var ne="",ge=0,Pe=0;Pe<it.length;Pe++){for(X=it[Pe];X>m[ge+1].offset;)ge++;var Ce=m[ge].offset,Qe=(X-Ce)/(m[ge+1].offset-Ce),Un=m[ge].color,$n=m[ge+1].color;ne+=L(Math.round((1-Qe)*Un[0]+Qe*$n[0]).toString(16))+L(Math.round((1-Qe)*Un[1]+Qe*$n[1]).toString(16))+L(Math.round((1-Qe)*Un[2]+Qe*$n[2]).toString(16))}return ne.trim()},qe=function(m,C){C||(C=21);var X=Ke(),it=Qt(m.colors,C),gt=[];gt.push({key:"FunctionType",value:"0"}),gt.push({key:"Domain",value:"[0.0 1.0]"}),gt.push({key:"Size",value:"["+C+"]"}),gt.push({key:"BitsPerSample",value:"8"}),gt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),gt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Zn({data:it,additionalKeyValues:gt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:X}),J("endobj"),m.objectNumber=Ke(),J("<< /ShadingType "+m.type),J("/ColorSpace /DeviceRGB");var kt="/Coords ["+$(parseFloat(m.coords[0]))+" "+$(parseFloat(m.coords[1]))+" ";m.type===2?kt+=$(parseFloat(m.coords[2]))+" "+$(parseFloat(m.coords[3])):kt+=$(parseFloat(m.coords[2]))+" "+$(parseFloat(m.coords[3]))+" "+$(parseFloat(m.coords[4]))+" "+$(parseFloat(m.coords[5])),J(kt+="]"),m.matrix&&J("/Matrix ["+m.matrix.toString()+"]"),J("/Function "+X+" 0 R"),J("/Extend [true true]"),J(">>"),J("endobj")},Ne=function(m,C){var X=en(),it=Ke();C.push({resourcesOid:X,objectOid:it}),m.objectNumber=it;var gt=[];gt.push({key:"Type",value:"/Pattern"}),gt.push({key:"PatternType",value:"1"}),gt.push({key:"PaintType",value:"1"}),gt.push({key:"TilingType",value:"1"}),gt.push({key:"BBox",value:"["+m.boundingBox.map($).join(" ")+"]"}),gt.push({key:"XStep",value:$(m.xStep)}),gt.push({key:"YStep",value:$(m.yStep)}),gt.push({key:"Resources",value:X+" 0 R"}),m.matrix&&gt.push({key:"Matrix",value:"["+m.matrix.toString()+"]"}),Zn({data:m.stream,additionalKeyValues:gt,objectId:m.objectNumber}),J("endobj")},ot=function(m){var C;for(C in Le)Le.hasOwnProperty(C)&&(Le[C]instanceof Ro?qe(Le[C]):Le[C]instanceof Ea&&Ne(Le[C],m))},xt=function(m){for(var C in m.objectNumber=Ke(),J("<<"),m)switch(C){case"opacity":J("/ca "+ct(m[C]));break;case"stroke-opacity":J("/CA "+ct(m[C]))}J(">>"),J("endobj")},Bt=function(){var m;for(m in De)De.hasOwnProperty(m)&&xt(De[m])},Wt=function(){for(var m in J("/XObject <<"),gn)gn.hasOwnProperty(m)&&gn[m].objectNumber>=0&&J("/"+m+" "+gn[m].objectNumber+" 0 R");Oe.publish("putXobjectDict"),J(">>")},pe=function(){Ln.oid=Ke(),J("<<"),J("/Filter /Standard"),J("/V "+Ln.v),J("/R "+Ln.r),J("/U <"+Ln.toHexString(Ln.U)+">"),J("/O <"+Ln.toHexString(Ln.O)+">"),J("/P "+Ln.P),J(">>"),J("endobj")},Me=function(){for(var m in J("/Font <<"),He)He.hasOwnProperty(m)&&(p===!1||p===!0&&g.hasOwnProperty(m))&&J("/"+m+" "+He[m].objectNumber+" 0 R");J(">>")},Ze=function(){if(Object.keys(Le).length>0){for(var m in J("/Shading <<"),Le)Le.hasOwnProperty(m)&&Le[m]instanceof Ro&&Le[m].objectNumber>=0&&J("/"+m+" "+Le[m].objectNumber+" 0 R");Oe.publish("putShadingPatternDict"),J(">>")}},Se=function(m){if(Object.keys(Le).length>0){for(var C in J("/Pattern <<"),Le)Le.hasOwnProperty(C)&&Le[C]instanceof f.TilingPattern&&Le[C].objectNumber>=0&&Le[C].objectNumber<m&&J("/"+C+" "+Le[C].objectNumber+" 0 R");Oe.publish("putTilingPatternDict"),J(">>")}},un=function(){if(Object.keys(De).length>0){var m;for(m in J("/ExtGState <<"),De)De.hasOwnProperty(m)&&De[m].objectNumber>=0&&J("/"+m+" "+De[m].objectNumber+" 0 R");Oe.publish("putGStateDict"),J(">>")}},_e=function(m){Te(m.resourcesOid,!0),J("<<"),J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Me(),Ze(),Se(m.objectOid),un(),Wt(),J(">>"),J("endobj")},dr=function(){var m=[];dt(),Bt(),Ft(),ot(m),Oe.publish("putResources"),m.forEach(_e),_e({resourcesOid:Tn,objectOid:Number.MAX_SAFE_INTEGER}),Oe.publish("postPutResources")},Qn=function(){Oe.publish("putAdditionalObjects");for(var m=0;m<wt.length;m++){var C=wt[m];Te(C.objId,!0),J(C.content),J("endobj")}Oe.publish("postPutAdditionalObjects")},pr=function(m){tn[m.fontName]=tn[m.fontName]||{},tn[m.fontName][m.fontStyle]=m.id},ue=function(m,C,X,it,gt){var kt={id:"F"+(Object.keys(He).length+1).toString(10),postScriptName:m,fontName:C,fontStyle:X,encoding:it,isStandardFont:gt||!1,metadata:{}};return Oe.publish("addFont",{font:kt,instance:this}),He[kt.id]=kt,pr(kt),kt.id},Be=function(m){for(var C=0,X=Nt.length;C<X;C++){var it=ue.call(this,m[C][0],m[C][1],m[C][2],Nt[C][3],!0);p===!1&&(g[it]=!0);var gt=m[C][0].split("-");pr({id:it,fontName:gt[0],fontStyle:gt[1]||""})}Oe.publish("addFonts",{fonts:He,dictionary:tn})},$e=function(m){return m.foo=function(){try{return m.apply(this,arguments)}catch(it){var C=it.stack||"";~C.indexOf(" at ")&&(C=C.split(" at ")[1]);var X="Error in function "+C.split(`
`)[0].split("<")[0]+": "+it.message;if(!xe.console)throw new Error(X);xe.console.error(X,it),xe.alert&&alert(X)}},m.foo.bar=m,m.foo},ye=function(m,C){var X,it,gt,kt,jt,ne,ge,Pe,Ce;if(gt=(C=C||{}).sourceEncoding||"Unicode",jt=C.outputEncoding,(C.autoencode||jt)&&He[Kt].metadata&&He[Kt].metadata[gt]&&He[Kt].metadata[gt].encoding&&(kt=He[Kt].metadata[gt].encoding,!jt&&He[Kt].encoding&&(jt=He[Kt].encoding),!jt&&kt.codePages&&(jt=kt.codePages[0]),typeof jt=="string"&&(jt=kt[jt]),jt)){for(ge=!1,ne=[],X=0,it=m.length;X<it;X++)(Pe=jt[m.charCodeAt(X)])?ne.push(String.fromCharCode(Pe)):ne.push(m[X]),ne[X].charCodeAt(0)>>8&&(ge=!0);m=ne.join("")}for(X=m.length;ge===void 0&&X!==0;)m.charCodeAt(X-1)>>8&&(ge=!0),X--;if(!ge)return m;for(ne=C.noBOM?[]:[254,255],X=0,it=m.length;X<it;X++){if((Ce=(Pe=m.charCodeAt(X))>>8)>>8)throw new Error("Character at position "+X+" of string '"+m+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ne.push(Ce),ne.push(Pe-(Ce<<8))}return String.fromCharCode.apply(void 0,ne)},me=f.__private__.pdfEscape=f.pdfEscape=function(m,C){return ye(m,C).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},tr=f.__private__.beginPage=function(m){bt[++Xe]=[],ce[Xe]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(m[0]),topRightY:Number(m[1])}},on(Xe),_t(bt[j])},Ee=function(m,C){var X,it,gt;switch(e=C||e,typeof m=="string"&&(X=y(m.toLowerCase()),Array.isArray(X)&&(it=X[0],gt=X[1])),Array.isArray(m)&&(it=m[0]*$t,gt=m[1]*$t),isNaN(it)&&(it=i[0],gt=i[1]),(it>14400||gt>14400)&&(Nn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),it=Math.min(14400,it),gt=Math.min(14400,gt)),i=[it,gt],e.substr(0,1)){case"l":gt>it&&(i=[gt,it]);break;case"p":it>gt&&(i=[gt,it])}tr(i),he(Lt),J(yn),ss!==0&&J(ss+" J"),os!==0&&J(os+" j"),Oe.publish("addPage",{pageNumber:Xe})},bn=function(m){m>0&&m<=Xe&&(bt.splice(m,1),ce.splice(m,1),Xe--,j>Xe&&(j=Xe),this.setPage(j))},on=function(m){m>0&&m<=Xe&&(j=m)},gr=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return bt.length-1},er=function(m,C,X){var it,gt=void 0;return X=X||{},m=m!==void 0?m:He[Kt].fontName,C=C!==void 0?C:He[Kt].fontStyle,it=m.toLowerCase(),tn[it]!==void 0&&tn[it][C]!==void 0?gt=tn[it][C]:tn[m]!==void 0&&tn[m][C]!==void 0?gt=tn[m][C]:X.disableWarning===!1&&Nn.warn("Unable to look up font label for font '"+m+"', '"+C+"'. Refer to getFontList() for available fonts."),gt||X.noFallback||(gt=tn.times[C])==null&&(gt=tn.times.normal),gt},nr=f.__private__.putInfo=function(){var m=Ke(),C=function(it){return it};for(var X in d!==null&&(C=Ln.encryptor(m,0)),J("<<"),J("/Producer ("+me(C("jsPDF "+Ae.version))+")"),Xt)Xt.hasOwnProperty(X)&&Xt[X]&&J("/"+X.substr(0,1).toUpperCase()+X.substr(1)+" ("+me(C(Xt[X]))+")");J("/CreationDate ("+me(C(Q))+")"),J(">>"),J("endobj")},jn=f.__private__.putCatalog=function(m){var C=(m=m||{}).rootDictionaryObjId||wr;switch(Ke(),J("<<"),J("/Type /Catalog"),J("/Pages "+C+" 0 R"),It||(It="fullwidth"),It){case"fullwidth":J("/OpenAction [3 0 R /FitH null]");break;case"fullheight":J("/OpenAction [3 0 R /FitV null]");break;case"fullpage":J("/OpenAction [3 0 R /Fit]");break;case"original":J("/OpenAction [3 0 R /XYZ null null 1]");break;default:var X=""+It;X.substr(X.length-1)==="%"&&(It=parseInt(It)/100),typeof It=="number"&&J("/OpenAction [3 0 R /XYZ null null "+ct(It)+"]")}switch(Jt||(Jt="continuous"),Jt){case"continuous":J("/PageLayout /OneColumn");break;case"single":J("/PageLayout /SinglePage");break;case"two":case"twoleft":J("/PageLayout /TwoColumnLeft");break;case"tworight":J("/PageLayout /TwoColumnRight")}zt&&J("/PageMode /"+zt),Oe.publish("putCatalog"),J(">>"),J("endobj")},Fn=f.__private__.putTrailer=function(){J("trailer"),J("<<"),J("/Size "+(M+1)),J("/Root "+M+" 0 R"),J("/Info "+(M-1)+" 0 R"),d!==null&&J("/Encrypt "+Ln.oid+" 0 R"),J("/ID [ <"+Z+"> <"+Z+"> ]"),J(">>")},ns=f.__private__.putHeader=function(){J("%PDF-"+v),J("%ºß¬à")},mr=f.__private__.putXRef=function(){var m="0000000000";J("xref"),J("0 "+(M+1)),J("0000000000 65535 f ");for(var C=1;C<=M;C++)typeof H[C]=="function"?J((m+H[C]()).slice(-10)+" 00000 n "):H[C]!==void 0?J((m+H[C]).slice(-10)+" 00000 n "):J("0000000000 00000 n ")},Er=f.__private__.buildDocument=function(){Ut(),_t(G),Oe.publish("buildDocument"),ns(),Vn(),Qn(),dr(),d!==null&&pe(),nr(),jn();var m=et;return mr(),Fn(),J("startxref"),J(""+m),J("%%EOF"),_t(bt[j]),G.join(`
`)},Vr=f.__private__.getBlob=function(m){return new Blob([Vt(m)],{type:"application/pdf"})},$r=f.output=f.__private__.output=$e(function(m,C){switch(typeof(C=C||{})=="string"?C={filename:C}:C.filename=C.filename||"generated.pdf",m){case void 0:return Er();case"save":f.save(C.filename);break;case"arraybuffer":return Vt(Er());case"blob":return Vr(Er());case"bloburi":case"bloburl":if(xe.URL!==void 0&&typeof xe.URL.createObjectURL=="function")return xe.URL&&xe.URL.createObjectURL(Vr(Er()))||void 0;Nn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var X="",it=Er();try{X=hf(it)}catch{X=hf(unescape(encodeURIComponent(it)))}return"data:application/pdf;filename="+C.filename+";base64,"+X;case"pdfobjectnewwindow":if(Object.prototype.toString.call(xe)==="[object Window]"){var gt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",kt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';C.pdfObjectUrl&&(gt=C.pdfObjectUrl,kt="");var jt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+gt+'"'+kt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(C)+");<\/script></body></html>",ne=xe.open();return ne!==null&&ne.document.write(jt),ne}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(xe)==="[object Window]"){var ge='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(C.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+C.filename+'" width="500px" height="400px" /></body></html>',Pe=xe.open();if(Pe!==null){Pe.document.write(ge);var Ce=this;Pe.document.documentElement.querySelector("#pdfViewer").onload=function(){Pe.document.title=C.filename,Pe.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ce.output("bloburl"))}}return Pe}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(xe)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Qe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",C)+'"></iframe></body></html>',Un=xe.open();if(Un!==null&&(Un.document.write(Qe),Un.document.title=C.filename),Un||typeof safari>"u")return Un;break;case"datauri":case"dataurl":return xe.document.location.href=this.output("datauristring",C);default:return null}}),qi=function(m){return Array.isArray(Yn)===!0&&Yn.indexOf(m)>-1};switch(r){case"pt":$t=1;break;case"mm":$t=72/25.4;break;case"cm":$t=72/2.54;break;case"in":$t=72;break;case"px":$t=qi("px_scaling")==1?.75:96/72;break;case"pc":case"em":$t=12;break;case"ex":$t=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);$t=r}var Ln=null;Dt(),rt();var Mn=function(m){return d!==null?Ln.encryptor(m,0):function(C){return C}},Ns=f.__private__.getPageInfo=f.getPageInfo=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ce[m].objId,pageNumber:m,pageContext:ce[m]}},we=f.__private__.getPageInfoByObjId=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var C in ce)if(ce[C].objId===m)break;return Ns(C)},rs=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:ce[j].objId,pageNumber:j,pageContext:ce[j]}};f.addPage=function(){return Ee.apply(this,arguments),this},f.setPage=function(){return on.apply(this,arguments),_t.call(this,bt[j]),this},f.insertPage=function(m){return this.addPage(),this.movePage(j,m),this},f.movePage=function(m,C){var X,it;if(m>C){X=bt[m],it=ce[m];for(var gt=m;gt>C;gt--)bt[gt]=bt[gt-1],ce[gt]=ce[gt-1];bt[C]=X,ce[C]=it,this.setPage(C)}else if(m<C){X=bt[m],it=ce[m];for(var kt=m;kt<C;kt++)bt[kt]=bt[kt+1],ce[kt]=ce[kt+1];bt[C]=X,ce[C]=it,this.setPage(C)}return this},f.deletePage=function(){return bn.apply(this,arguments),this},f.__private__.text=f.text=function(m,C,X,it,gt){var kt,jt,ne,ge,Pe,Ce,Qe,Un,$n,cr=(it=it||{}).scope||this;if(typeof m=="number"&&typeof C=="number"&&(typeof X=="string"||Array.isArray(X))){var Mr=X;X=C,C=m,m=Mr}if(arguments[3]instanceof ee?(V("The transform parameter of text() with a Matrix value"),$n=gt):(ne=arguments[4],ge=arguments[5],pn(Qe=arguments[3])==="object"&&Qe!==null||(typeof ne=="string"&&(ge=ne,ne=null),typeof Qe=="string"&&(ge=Qe,Qe=null),typeof Qe=="number"&&(ne=Qe,Qe=null),it={flags:Qe,angle:ne,align:ge})),isNaN(C)||isNaN(X)||m==null)throw new Error("Invalid arguments passed to jsPDF.text");if(m.length===0)return cr;var Ar="",Ri=!1,si=typeof it.lineHeightFactor=="number"?it.lineHeightFactor:tt,as=cr.internal.scaleFactor;function fc(En){return En=En.split("	").join(Array(it.TabLen||9).join(" ")),me(En,Qe)}function ll(En){for(var Cn,ir=En.concat(),br=[],Ts=ir.length;Ts--;)typeof(Cn=ir.shift())=="string"?br.push(Cn):Array.isArray(En)&&(Cn.length===1||Cn[1]===void 0&&Cn[2]===void 0)?br.push(Cn[0]):br.push([Cn[0],Cn[1],Cn[2]]);return br}function cl(En,Cn){var ir;if(typeof En=="string")ir=Cn(En)[0];else if(Array.isArray(En)){for(var br,Ts,bl=En.concat(),ha=[],bc=bl.length;bc--;)typeof(br=bl.shift())=="string"?ha.push(Cn(br)[0]):Array.isArray(br)&&typeof br[0]=="string"&&(Ts=Cn(br[0],br[1],br[2]),ha.push([Ts[0],Ts[1],Ts[2]]));ir=ha}return ir}var na=!1,ul=!0;if(typeof m=="string")na=!0;else if(Array.isArray(m)){var hl=m.concat();jt=[];for(var ra,Ir=hl.length;Ir--;)(typeof(ra=hl.shift())!="string"||Array.isArray(ra)&&typeof ra[0]!="string")&&(ul=!1);na=ul}if(na===!1)throw new Error('Type of text must be string or Array. "'+m+'" is not recognized.');typeof m=="string"&&(m=m.match(/[\r?\n]/)?m.split(/\r\n|\r|\n/g):[m]);var ia=pt/cr.internal.scaleFactor,sa=ia*(si-1);switch(it.baseline){case"bottom":X-=sa;break;case"top":X+=ia-sa;break;case"hanging":X+=ia-2*sa;break;case"middle":X+=ia/2-sa}if((Ce=it.maxWidth||0)>0&&(typeof m=="string"?m=cr.splitTextToSize(m,Ce):Object.prototype.toString.call(m)==="[object Array]"&&(m=m.reduce(function(En,Cn){return En.concat(cr.splitTextToSize(Cn,Ce))},[]))),kt={text:m,x:C,y:X,options:it,mutex:{pdfEscape:me,activeFontKey:Kt,fonts:He,activeFontSize:pt}},Oe.publish("preProcessText",kt),m=kt.text,ne=(it=kt.options).angle,!($n instanceof ee)&&ne&&typeof ne=="number"){ne*=Math.PI/180,it.rotationDirection===0&&(ne=-ne),w===A.ADVANCED&&(ne=-ne);var oa=Math.cos(ne),fl=Math.sin(ne);$n=new ee(oa,fl,-fl,oa,0,0)}else ne&&ne instanceof ee&&($n=ne);w!==A.ADVANCED||$n||($n=mn),(Pe=it.charSpace||Zr)!==void 0&&(Ar+=$(D(Pe))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Un=it.horizontalScale)!==void 0&&(Ar+=$(100*Un)+` Tz
`),it.lang;var Qr=-1,Wu=it.renderingMode!==void 0?it.renderingMode:it.stroke,dl=cr.internal.getCurrentPageInfo().pageContext;switch(Wu){case 0:case!1:case"fill":Qr=0;break;case 1:case!0:case"stroke":Qr=1;break;case 2:case"fillThenStroke":Qr=2;break;case 3:case"invisible":Qr=3;break;case 4:case"fillAndAddForClipping":Qr=4;break;case 5:case"strokeAndAddPathForClipping":Qr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Qr=6;break;case 7:case"addToPathForClipping":Qr=7}var dc=dl.usedRenderingMode!==void 0?dl.usedRenderingMode:-1;Qr!==-1?Ar+=Qr+` Tr
`:dc!==-1&&(Ar+=`0 Tr
`),Qr!==-1&&(dl.usedRenderingMode=Qr),ge=it.align||"left";var bi,aa=pt*si,pc=cr.internal.pageSize.getWidth(),gc=He[Kt];Pe=it.charSpace||Zr,Ce=it.maxWidth||0,Qe=Object.assign({autoencode:!0,noBOM:!0},it.flags);var Ys=[],Co=function(En){return cr.getStringUnitWidth(En,{font:gc,charSpace:Pe,fontSize:pt,doKerning:!1})*pt/as};if(Object.prototype.toString.call(m)==="[object Array]"){var ti;jt=ll(m),ge!=="left"&&(bi=jt.map(Co));var Wr,Js=0;if(ge==="right"){C-=bi[0],m=[],Ir=jt.length;for(var Cs=0;Cs<Ir;Cs++)Cs===0?(Wr=je(C),ti=kn(X)):(Wr=D(Js-bi[Cs]),ti=-aa),m.push([jt[Cs],Wr,ti]),Js=bi[Cs]}else if(ge==="center"){C-=bi[0]/2,m=[],Ir=jt.length;for(var Is=0;Is<Ir;Is++)Is===0?(Wr=je(C),ti=kn(X)):(Wr=D((Js-bi[Is])/2),ti=-aa),m.push([jt[Is],Wr,ti]),Js=bi[Is]}else if(ge==="left"){m=[],Ir=jt.length;for(var la=0;la<Ir;la++)m.push(jt[la])}else if(ge==="justify"&&gc.encoding==="Identity-H"){m=[],Ir=jt.length,Ce=Ce!==0?Ce:pc;for(var Os=0,rr=0;rr<Ir;rr++)if(ti=rr===0?kn(X):-aa,Wr=rr===0?je(C):Os,rr<Ir-1){var pl=D((Ce-bi[rr])/(jt[rr].split(" ").length-1)),Gr=jt[rr].split(" ");m.push([Gr[0]+" ",Wr,ti]),Os=0;for(var vi=1;vi<Gr.length;vi++){var ca=(Co(Gr[vi-1]+" "+Gr[vi])-Co(Gr[vi]))*as+pl;vi==Gr.length-1?m.push([Gr[vi],ca,0]):m.push([Gr[vi]+" ",ca,0]),Os-=ca}}else m.push([jt[rr],Wr,ti]);m.push(["",Os,0])}else{if(ge!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(m=[],Ir=jt.length,Ce=Ce!==0?Ce:pc,rr=0;rr<Ir;rr++)ti=rr===0?kn(X):-aa,Wr=rr===0?je(C):0,rr<Ir-1?Ys.push($(D((Ce-bi[rr])/(jt[rr].split(" ").length-1)))):Ys.push(0),m.push([jt[rr],Wr,ti])}}var mc=typeof it.R2L=="boolean"?it.R2L:Ht;mc===!0&&(m=cl(m,function(En,Cn,ir){return[En.split("").reverse().join(""),Cn,ir]})),kt={text:m,x:C,y:X,options:it,mutex:{pdfEscape:me,activeFontKey:Kt,fonts:He,activeFontSize:pt}},Oe.publish("postProcessText",kt),m=kt.text,Ri=kt.mutex.isHex||!1;var gl=He[Kt].encoding;gl!=="WinAnsiEncoding"&&gl!=="StandardEncoding"||(m=cl(m,function(En,Cn,ir){return[fc(En),Cn,ir]})),jt=ll(m),m=[];for(var Io,Oo,Xs,To=0,ua=1,Po=Array.isArray(jt[0])?ua:To,Zs="",ml=function(En,Cn,ir){var br="";return ir instanceof ee?(ir=typeof it.angle=="number"?ln(ir,new ee(1,0,0,1,En,Cn)):ln(new ee(1,0,0,1,En,Cn),ir),w===A.ADVANCED&&(ir=ln(new ee(1,0,0,-1,0,0),ir)),br=ir.join(" ")+` Tm
`):br=$(En)+" "+$(Cn)+` Td
`,br},yi=0;yi<jt.length;yi++){switch(Zs="",Po){case ua:Xs=(Ri?"<":"(")+jt[yi][0]+(Ri?">":")"),Io=parseFloat(jt[yi][1]),Oo=parseFloat(jt[yi][2]);break;case To:Xs=(Ri?"<":"(")+jt[yi]+(Ri?">":")"),Io=je(C),Oo=kn(X)}Ys!==void 0&&Ys[yi]!==void 0&&(Zs=Ys[yi]+` Tw
`),yi===0?m.push(Zs+ml(Io,Oo,$n)+Xs):Po===To?m.push(Zs+Xs):Po===ua&&m.push(Zs+ml(Io,Oo,$n)+Xs)}m=Po===To?m.join(` Tj
T* `):m.join(` Tj
`),m+=` Tj
`;var wi=`BT
/`;return wi+=Kt+" "+pt+` Tf
`,wi+=$(pt*si)+` TL
`,wi+=qr+`
`,wi+=Ar,wi+=m,J(wi+="ET"),g[Kt]=!0,cr};var Ss=f.__private__.clip=f.clip=function(m){return J(m==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return Ss("evenodd")},f.__private__.discardPath=f.discardPath=function(){return J("n"),this};var Cr=f.__private__.isValidStyle=function(m){var C=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(m)!==-1&&(C=!0),C};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(m){return Cr(m)&&(u=m),this};var Ws=f.__private__.getStyle=f.getStyle=function(m){var C=u;switch(m){case"D":case"S":C="S";break;case"F":C="f";break;case"FD":case"DF":C="B";break;case"f":case"f*":case"B":case"B*":C=m}return C},Ls=f.close=function(){return J("h"),this};f.stroke=function(){return J("S"),this},f.fill=function(m){return mi("f",m),this},f.fillEvenOdd=function(m){return mi("f*",m),this},f.fillStroke=function(m){return mi("B",m),this},f.fillStrokeEvenOdd=function(m){return mi("B*",m),this};var mi=function(m,C){pn(C)==="object"?Gs(C,m):J(m)},is=function(m){m===null||w===A.ADVANCED&&m===void 0||(m=Ws(m),J(m))};function Xr(m,C,X,it,gt){var kt=new Ea(C||this.boundingBox,X||this.xStep,it||this.yStep,this.gState,gt||this.matrix);kt.stream=this.stream;var jt=m+"$$"+this.cloneIndex+++"$$";return An(jt,kt),kt}var Gs=function(m,C){var X=_n[m.key],it=Le[X];if(it instanceof Ro)J("q"),J(ks(C)),it.gState&&f.setGState(it.gState),J(m.matrix.toString()+" cm"),J("/"+X+" sh"),J("Q");else if(it instanceof Ea){var gt=new ee(1,0,0,-1,0,Ks());m.matrix&&(gt=gt.multiply(m.matrix||mn),X=Xr.call(it,m.key,m.boundingBox,m.xStep,m.yStep,gt).id),J("q"),J("/Pattern cs"),J("/"+X+" scn"),it.gState&&f.setGState(it.gState),J(C),J("Q")}},ks=function(m){switch(m){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Es=f.moveTo=function(m,C){return J($(D(m))+" "+$(z(C))+" m"),this},Mi=f.lineTo=function(m,C){return J($(D(m))+" "+$(z(C))+" l"),this},_=f.curveTo=function(m,C,X,it,gt,kt){return J([$(D(m)),$(z(C)),$(D(X)),$(z(it)),$(D(gt)),$(z(kt)),"c"].join(" ")),this};f.__private__.line=f.line=function(m,C,X,it,gt){if(isNaN(m)||isNaN(C)||isNaN(X)||isNaN(it)||!Cr(gt))throw new Error("Invalid arguments passed to jsPDF.line");return w===A.COMPAT?this.lines([[X-m,it-C]],m,C,[1,1],gt||"S"):this.lines([[X-m,it-C]],m,C,[1,1]).stroke()},f.__private__.lines=f.lines=function(m,C,X,it,gt,kt){var jt,ne,ge,Pe,Ce,Qe,Un,$n,cr,Mr,Ar,Ri;if(typeof m=="number"&&(Ri=X,X=C,C=m,m=Ri),it=it||[1,1],kt=kt||!1,isNaN(C)||isNaN(X)||!Array.isArray(m)||!Array.isArray(it)||!Cr(gt)||typeof kt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Es(C,X),jt=it[0],ne=it[1],Pe=m.length,Mr=C,Ar=X,ge=0;ge<Pe;ge++)(Ce=m[ge]).length===2?(Mr=Ce[0]*jt+Mr,Ar=Ce[1]*ne+Ar,Mi(Mr,Ar)):(Qe=Ce[0]*jt+Mr,Un=Ce[1]*ne+Ar,$n=Ce[2]*jt+Mr,cr=Ce[3]*ne+Ar,Mr=Ce[4]*jt+Mr,Ar=Ce[5]*ne+Ar,_(Qe,Un,$n,cr,Mr,Ar));return kt&&Ls(),is(gt),this},f.path=function(m){for(var C=0;C<m.length;C++){var X=m[C],it=X.c;switch(X.op){case"m":Es(it[0],it[1]);break;case"l":Mi(it[0],it[1]);break;case"c":_.apply(this,it);break;case"h":Ls()}}return this},f.__private__.rect=f.rect=function(m,C,X,it,gt){if(isNaN(m)||isNaN(C)||isNaN(X)||isNaN(it)||!Cr(gt))throw new Error("Invalid arguments passed to jsPDF.rect");return w===A.COMPAT&&(it=-it),J([$(D(m)),$(z(C)),$(D(X)),$(D(it)),"re"].join(" ")),is(gt),this},f.__private__.triangle=f.triangle=function(m,C,X,it,gt,kt,jt){if(isNaN(m)||isNaN(C)||isNaN(X)||isNaN(it)||isNaN(gt)||isNaN(kt)||!Cr(jt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[X-m,it-C],[gt-X,kt-it],[m-gt,C-kt]],m,C,[1,1],jt,!0),this},f.__private__.roundedRect=f.roundedRect=function(m,C,X,it,gt,kt,jt){if(isNaN(m)||isNaN(C)||isNaN(X)||isNaN(it)||isNaN(gt)||isNaN(kt)||!Cr(jt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ne=4/3*(Math.SQRT2-1);return gt=Math.min(gt,.5*X),kt=Math.min(kt,.5*it),this.lines([[X-2*gt,0],[gt*ne,0,gt,kt-kt*ne,gt,kt],[0,it-2*kt],[0,kt*ne,-gt*ne,kt,-gt,kt],[2*gt-X,0],[-gt*ne,0,-gt,-kt*ne,-gt,-kt],[0,2*kt-it],[0,-kt*ne,gt*ne,-kt,gt,-kt]],m+gt,C,[1,1],jt,!0),this},f.__private__.ellipse=f.ellipse=function(m,C,X,it,gt){if(isNaN(m)||isNaN(C)||isNaN(X)||isNaN(it)||!Cr(gt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var kt=4/3*(Math.SQRT2-1)*X,jt=4/3*(Math.SQRT2-1)*it;return Es(m+X,C),_(m+X,C-jt,m+kt,C-it,m,C-it),_(m-kt,C-it,m-X,C-jt,m-X,C),_(m-X,C+jt,m-kt,C+it,m,C+it),_(m+kt,C+it,m+X,C+jt,m+X,C),is(gt),this},f.__private__.circle=f.circle=function(m,C,X,it){if(isNaN(m)||isNaN(C)||isNaN(X)||!Cr(it))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(m,C,X,X,it)},f.setFont=function(m,C,X){return X&&(C=B(C,X)),Kt=er(m,C,{disableWarning:!1}),this};var F=f.__private__.getFont=f.getFont=function(){return He[er.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var m,C,X={};for(m in tn)if(tn.hasOwnProperty(m))for(C in X[m]=[],tn[m])tn[m].hasOwnProperty(C)&&X[m].push(C);return X},f.addFont=function(m,C,X,it,gt){var kt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&kt.indexOf(arguments[3])!==-1?gt=arguments[3]:arguments[3]&&kt.indexOf(arguments[3])==-1&&(X=B(X,it)),gt=gt||"Identity-H",ue.call(this,m,C,X,gt)};var tt,Lt=n.lineWidth||.200025,ve=f.__private__.getLineWidth=f.getLineWidth=function(){return Lt},he=f.__private__.setLineWidth=f.setLineWidth=function(m){return Lt=m,J($(D(m))+" w"),this};f.__private__.setLineDash=Ae.API.setLineDash=Ae.API.setLineDashPattern=function(m,C){if(m=m||[],C=C||0,isNaN(C)||!Array.isArray(m))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return m=m.map(function(X){return $(D(X))}).join(" "),C=$(D(C)),J("["+m+"] "+C+" d"),this};var Ue=f.__private__.getLineHeight=f.getLineHeight=function(){return pt*tt};f.__private__.getLineHeight=f.getLineHeight=function(){return pt*tt};var We=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(m){return typeof(m=m||1.15)=="number"&&(tt=m),this},Pn=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return tt};We(n.lineHeight);var je=f.__private__.getHorizontalCoordinate=function(m){return D(m)},kn=f.__private__.getVerticalCoordinate=function(m){return w===A.ADVANCED?m:ce[j].mediaBox.topRightY-ce[j].mediaBox.bottomLeftY-D(m)},_r=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(m){return $(je(m))},vn=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(m){return $(kn(m))},yn=n.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Sn(yn)},f.__private__.setStrokeColor=f.setDrawColor=function(m,C,X,it){return yn=Xn({ch1:m,ch2:C,ch3:X,ch4:it,pdfColorType:"draw",precision:2}),J(yn),this};var Bn=n.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Sn(Bn)},f.__private__.setFillColor=f.setFillColor=function(m,C,X,it){return Bn=Xn({ch1:m,ch2:C,ch3:X,ch4:it,pdfColorType:"fill",precision:2}),J(Bn),this};var qr=n.textColor||"0 g",ii=f.__private__.getTextColor=f.getTextColor=function(){return Sn(qr)};f.__private__.setTextColor=f.setTextColor=function(m,C,X,it){return qr=Xn({ch1:m,ch2:C,ch3:X,ch4:it,pdfColorType:"text",precision:3}),this};var Zr=n.charSpace,Qo=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Zr||0)};f.__private__.setCharSpace=f.setCharSpace=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Zr=m,this};var ss=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(m){var C=f.CapJoinStyles[m];if(C===void 0)throw new Error("Line cap style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ss=C,J(C+" J"),this};var os=0;f.__private__.setLineJoin=f.setLineJoin=function(m){var C=f.CapJoinStyles[m];if(C===void 0)throw new Error("Line join style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return os=C,J(C+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(m){if(m=m||0,isNaN(m))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return J($(D(m))+" M"),this},f.GState=pu,f.setGState=function(m){(m=typeof m=="string"?De[rn[m]]:uc(null,m)).equals(sn)||(J("/"+m.id+" gs"),sn=m)};var uc=function(m,C){if(!m||!rn[m]){var X=!1;for(var it in De)if(De.hasOwnProperty(it)&&De[it].equals(C)){X=!0;break}if(X)C=De[it];else{var gt="GS"+(Object.keys(De).length+1).toString(10);De[gt]=C,C.id=gt}return m&&(rn[m]=C.id),Oe.publish("addGState",C),C}};f.addGState=function(m,C){return uc(m,C),this},f.saveGraphicsState=function(){return J("q"),Rn.push({key:Kt,size:pt,color:qr}),this},f.restoreGraphicsState=function(){J("Q");var m=Rn.pop();return Kt=m.key,pt=m.size,qr=m.color,sn=null,this},f.setCurrentTransformationMatrix=function(m){return J(m.toString()+" cm"),this},f.comment=function(m){return J("#"+m),this};var ta=function(m,C){var X=m||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return X},set:function(kt){isNaN(kt)||(X=parseFloat(kt))}});var it=C||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return it},set:function(kt){isNaN(kt)||(it=parseFloat(kt))}});var gt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return gt},set:function(kt){gt=kt.toString()}}),this},il=function(m,C,X,it){ta.call(this,m,C),this.type="rect";var gt=X||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return gt},set:function(jt){isNaN(jt)||(gt=parseFloat(jt))}});var kt=it||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return kt},set:function(jt){isNaN(jt)||(kt=parseFloat(jt))}}),this},sl=function(){this.page=Xe,this.currentPage=j,this.pages=bt.slice(0),this.pagesContext=ce.slice(0),this.x=cn,this.y=Fe,this.matrix=Hn,this.width=Eo(j),this.height=Ks(j),this.outputDestination=Et,this.id="",this.objectNumber=-1};sl.prototype.restore=function(){Xe=this.page,j=this.currentPage,ce=this.pagesContext,bt=this.pages,cn=this.x,Fe=this.y,Hn=this.matrix,ol(j,this.width),al(j,this.height),Et=this.outputDestination};var hc=function(m,C,X,it,gt){Jn.push(new sl),Xe=j=0,bt=[],cn=m,Fe=C,Hn=gt,tr([X,it])},$u=function(m){if(On[m])Jn.pop().restore();else{var C=new sl,X="Xo"+(Object.keys(gn).length+1).toString(10);C.id=X,On[m]=X,gn[X]=C,Oe.publish("addFormObject",C),Jn.pop().restore()}};for(var ea in f.beginFormObject=function(m,C,X,it,gt){return hc(m,C,X,it,gt),this},f.endFormObject=function(m){return $u(m),this},f.doFormObject=function(m,C){var X=gn[On[m]];return J("q"),J(C.toString()+" cm"),J("/"+X.id+" Do"),J("Q"),this},f.getFormObject=function(m){var C=gn[On[m]];return{x:C.x,y:C.y,width:C.width,height:C.height,matrix:C.matrix}},f.save=function(m,C){return m=m||"generated.pdf",(C=C||{}).returnPromise=C.returnPromise||!1,C.returnPromise===!1?(Mo(Vr(Er()),m),typeof Mo.unload=="function"&&xe.setTimeout&&setTimeout(Mo.unload,911),this):new Promise(function(X,it){try{var gt=Mo(Vr(Er()),m);typeof Mo.unload=="function"&&xe.setTimeout&&setTimeout(Mo.unload,911),X(gt)}catch(kt){it(kt.message)}})},Ae.API)Ae.API.hasOwnProperty(ea)&&(ea==="events"&&Ae.API.events.length?function(m,C){var X,it,gt;for(gt=C.length-1;gt!==-1;gt--)X=C[gt][0],it=C[gt][1],m.subscribe.apply(m,[X].concat(typeof it=="function"?[it]:it))}(Oe,Ae.API.events):f[ea]=Ae.API[ea]);var Eo=f.getPageWidth=function(m){return(ce[m=m||j].mediaBox.topRightX-ce[m].mediaBox.bottomLeftX)/$t},ol=f.setPageWidth=function(m,C){ce[m].mediaBox.topRightX=C*$t+ce[m].mediaBox.bottomLeftX},Ks=f.getPageHeight=function(m){return(ce[m=m||j].mediaBox.topRightY-ce[m].mediaBox.bottomLeftY)/$t},al=f.setPageHeight=function(m,C){ce[m].mediaBox.topRightY=C*$t+ce[m].mediaBox.bottomLeftY};return f.internal={pdfEscape:me,getStyle:Ws,getFont:F,getFontSize:Mt,getCharSpace:Qo,getTextColor:ii,getLineHeight:Ue,getLineHeightFactor:Pn,getLineWidth:ve,write:ae,getHorizontalCoordinate:je,getVerticalCoordinate:kn,getCoordinateString:_r,getVerticalCoordinateString:vn,collections:{},newObject:Ke,newAdditionalObject:kr,newObjectDeferred:en,newObjectDeferredBegin:Te,getFilters:Ve,putStream:Zn,events:Oe,scaleFactor:$t,pageSize:{getWidth:function(){return Eo(j)},setWidth:function(m){ol(j,m)},getHeight:function(){return Ks(j)},setHeight:function(m){al(j,m)}},encryptionOptions:d,encryption:Ln,getEncryptor:Mn,output:$r,getNumberOfPages:gr,pages:bt,out:J,f2:ct,f3:q,getPageInfo:Ns,getPageInfoByObjId:we,getCurrentPageInfo:rs,getPDFVersion:x,Point:ta,Rectangle:il,Matrix:ee,hasHotfix:qi},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return Eo(j)},set:function(m){ol(j,m)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return Ks(j)},set:function(m){al(j,m)},enumerable:!0,configurable:!0}),Be.call(f,Nt),Kt="F1",Ee(i,e),Oe.publish("initialized"),f}Na.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},Na.prototype.toHexString=function(n){return n.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Na.prototype.hexToBytes=function(n){for(var t=[],e=0;e<n.length;e+=2)t.push(String.fromCharCode(parseInt(n.substr(e,2),16)));return t.join("")},Na.prototype.processOwnerPassword=function(n,t){return df(ff(t).substr(0,5),n)},Na.prototype.encryptor=function(n,t){var e=ff(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return df(e,r)}},pu.prototype.equals=function(n){var t,e="id,objectNumber,equals";if(!n||pn(n)!==pn(this))return!1;var r=0;for(t in this)if(!(e.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!n.hasOwnProperty(t)||this[t]!==n[t])return!1;r++}for(t in n)n.hasOwnProperty(t)&&e.indexOf(t)<0&&r--;return r===0},Ae.API={events:[]},Ae.version="2.5.2";var Gn=Ae.API,Qf=1,Jo=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ma=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ie=function(n){return n.toFixed(2)},ao=function(n){return n.toFixed(5)};Gn.__acroform__={};var ri=function(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n},q1=function(n){return n*Qf},hs=function(n){var t=new O0,e=le.internal.getHeight(n)||0,r=le.internal.getWidth(n)||0;return t.BBox=[0,0,Number(Ie(r)),Number(Ie(e))],t},Fv=Gn.__acroform__.setBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<t},Bv=Gn.__acroform__.clearBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<t)},Uv=Gn.__acroform__.getBit=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<t?1:0},or=Gn.__acroform__.getBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Uv(n,t-1)},ar=Gn.__acroform__.setBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Fv(n,t-1)},lr=Gn.__acroform__.clearBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Bv(n,t-1)},zv=Gn.__acroform__.calculateCoordinates=function(n,t){var e=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,i=n[0],s=n[1],o=n[2],a=n[3],c={};return c.lowerLeft_X=e(i)||0,c.lowerLeft_Y=r(s+a)||0,c.upperRight_X=e(i+o)||0,c.upperRight_Y=r(s)||0,[Number(Ie(c.lowerLeft_X)),Number(Ie(c.lowerLeft_Y)),Number(Ie(c.upperRight_X)),Number(Ie(c.upperRight_Y))]},Hv=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var t=[],e=n._V||n.DV,r=pf(n,e),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(n.scope.__private__.encodeColorString(n.color)),t.push("/"+i+" "+Ie(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=hs(n);return s.scope=n.scope,s.stream=t.join(`
`),s}},pf=function(n,t){var e=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=n.multiline?i.map(function(q){return q.split(`
`)}):i.map(function(q){return[q]});var s=e,o=le.internal.getHeight(n)||0;o=o<0?-o:o;var a=le.internal.getWidth(n)||0;a=a<0?-a:a;var c=function(q,D,W){if(q+1<i.length){var z=D+" "+i[q+1][0];return Hc(z,n,W).width<=a-4}return!1};s++;t:for(;s>0;){t="",s--;var u,d,p=Hc("3",n,s).height,g=n.multiline?o-s:(o-p)/2,f=g+=2,v=0,x=0,S=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+Hc(t,n,s=12).width+", FieldWidth:"+a+`
`;break}for(var y="",A=0,w=0;w<i.length;w++)if(i.hasOwnProperty(w)){var k=!1;if(i[w].length!==1&&S!==i[w].length-1){if((p+2)*(A+2)+2>o)continue t;y+=i[w][S],k=!0,x=w,w--}else{y=(y+=i[w][S]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var T=parseInt(w),B=c(T,y,s),$=w>=i.length-1;if(B&&!$){y+=" ",S=0;continue}if(B||$){if($)x=T;else if(n.multiline&&(p+2)*(A+2)+2>o)continue t}else{if(!n.multiline||(p+2)*(A+2)+2>o)continue t;x=T}}for(var V="",nt=v;nt<=x;nt++){var ct=i[nt];if(n.multiline){if(nt===x){V+=ct[S]+" ",S=(S+1)%ct.length;continue}if(nt===v){V+=ct[ct.length-1]+" ";continue}}V+=ct[0]+" "}switch(V=V.substr(V.length-1)==" "?V.substr(0,V.length-1):V,d=Hc(V,n,s).width,n.textAlign){case"right":u=a-d-2;break;case"center":u=(a-d)/2;break;case"left":default:u=2}t+=Ie(u)+" "+Ie(f)+` Td
`,t+="("+Jo(V)+`) Tj
`,t+=-Ie(u)+` 0 Td
`,f=-(s+2),d=0,v=k?x:x+1,A++,y=""}break}return r.text=t,r.fontSize=s,r},Hc=function(n,t,e){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(e),charSpace:0})*parseFloat(e);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(e),charSpace:0})*parseFloat(e)*1.5,width:i}},Vv={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},$v=function(n,t){var e={type:"reference",object:n};t.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===e.type&&r.object===e.object})===void 0&&t.internal.getPageInfo(n.page).pageContext.annotations.push(e)},Wv=function(n,t){for(var e in n)if(n.hasOwnProperty(e)){var r=e,i=n[e];t.internal.newObjectDeferredBegin(i.objId,!0),pn(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete n[r]}},Gv=function(n,t){if(t.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(ts.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(Vv)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Qf=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new T0,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&$v(s,e)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(e){if(e.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(e){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],c=[],u=a.Rect;if(a.Rect&&(a.Rect=zv(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=le.createDefaultAppearanceStream(a),pn(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(c=a.getKeyValueListForStream()),a.Rect=u,a.hasAppearanceStream&&!a.appearanceStreamContent){var d=Hv(a);c.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(a.appearanceStreamContent){var p="";for(var g in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(g)){var f=a.appearanceStreamContent[g];if(p+="/"+g+" ",p+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var o in f)if(f.hasOwnProperty(o)){var v=f[o];typeof v=="function"&&(v=v.call(i,a)),p+="/"+o+" "+v+" ",i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v)}}else typeof(v=f)=="function"&&(v=v.call(i,a)),p+="/"+o+" "+v,i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v);p+=">>"}c.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:a.objId}),i.internal.out("endobj")}s&&Wv(i.internal.acroformPlugin.xForms,i)})(e,n)}),n.internal.acroformPlugin.isInitialized=!0}},I0=Gn.__acroform__.arrayToPdfArray=function(n,t,e){var r=function(o){return o};if(Array.isArray(n)){for(var i="[",s=0;s<n.length;s++)switch(s!==0&&(i+=" "),pn(n[s])){case"boolean":case"number":case"object":i+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(t!==void 0&&e&&(r=e.internal.getEncryptor(t)),i+="("+Jo(r(n[s].toString()))+")"):i+=n[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Lh=function(n,t,e){var r=function(i){return i};return t!==void 0&&e&&(r=e.internal.getEncryptor(t)),(n=n||"").toString(),n="("+Jo(r(n))+")"},ds=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ds.prototype.toString=function(){return this.objId+" 0 R"},ds.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},ds.prototype.getKeyValueListForStream=function(){var n=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var e in t)if(Object.getOwnPropertyDescriptor(this,t[e]).configurable===!1){var r=t[e],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:I0(i,this.objId,this.scope)}):i instanceof ds?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var O0=function(){ds.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){n=e.trim()},get:function(){return n||null}})};ri(O0,ds);var T0=function(){ds.call(this);var n,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var e=function(r){return r};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+Jo(e(n))+")"}},set:function(e){n=e}})};ri(T0,ds);var ts=function n(){ds.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!or(t,3)},set:function(y){y?this.F=ar(t,3):this.F=lr(t,3)}});var e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return e},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');e=y}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(y){r=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(y){r[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(y){r[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(y){r[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(y){r[3]=y}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof gu)return;s="FieldObject"+n.FieldNum++}var y=function(A){return A};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+Jo(y(s))+")"},set:function(y){s=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(y){s=y}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(y){a=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/Qf:u},set:function(y){u=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof gu||this instanceof Fo))return Lh(p,this.objId,this.scope)},set:function(y){y=y.toString(),p=y}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Lr?g:Lh(g,this.objId,this.scope)},set:function(y){y=y.toString(),g=this instanceof Lr?y:y.substr(0,1)==="("?ma(y.substr(1,y.length-2)):ma(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Lr?ma(g.substr(1,g.length-1)):g},set:function(y){y=y.toString(),g=this instanceof Lr?"/"+y:y}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Lr?f:Lh(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=this instanceof Lr?y:y.substr(0,1)==="("?ma(y.substr(1,y.length-2)):ma(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Lr?ma(f.substr(1,f.length-1)):f},set:function(y){y=y.toString(),f=this instanceof Lr?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(y){y=!!y,x=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(y){v=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,1)},set:function(y){y?this.Ff=ar(this.Ff,1):this.Ff=lr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,2)},set:function(y){y?this.Ff=ar(this.Ff,2):this.Ff=lr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,3)},set:function(y){y?this.Ff=ar(this.Ff,3):this.Ff=lr(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(S!==null)return S},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');S=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(S){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:S=2;break;case"center":case 1:S=1;break;case"left":case 0:default:S=0}}})};ri(ts,ds);var Pa=function(){ts.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){n=e}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return I0(t,this.objId,this.scope)},set:function(e){var r,i;i=[],typeof(r=e)=="string"&&(i=function(s,o,a){a||(a=1);for(var c,u=[];c=o.exec(s);)u.push(c[a]);return u}(r,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,r){for(r=r||!1,e=(e=e||"").toString();t.indexOf(e)!==-1&&(t.splice(t.indexOf(e),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,18)},set:function(e){e?this.Ff=ar(this.Ff,18):this.Ff=lr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,19)},set:function(e){this.combo===!0&&(e?this.Ff=ar(this.Ff,19):this.Ff=lr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,20)},set:function(e){e?(this.Ff=ar(this.Ff,20),t.sort()):this.Ff=lr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,22)},set:function(e){e?this.Ff=ar(this.Ff,22):this.Ff=lr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,23)},set:function(e){e?this.Ff=ar(this.Ff,23):this.Ff=lr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,27)},set:function(e){e?this.Ff=ar(this.Ff,27):this.Ff=lr(this.Ff,27)}}),this.hasAppearanceStream=!1};ri(Pa,ts);var qa=function(){Pa.call(this),this.fontName="helvetica",this.combo=!1};ri(qa,Pa);var Ma=function(){qa.call(this),this.combo=!0};ri(Ma,qa);var eu=function(){Ma.call(this),this.edit=!0};ri(eu,Ma);var Lr=function(){ts.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,15)},set:function(e){e?this.Ff=ar(this.Ff,15):this.Ff=lr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,16)},set:function(e){e?this.Ff=ar(this.Ff,16):this.Ff=lr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,17)},set:function(e){e?this.Ff=ar(this.Ff,17):this.Ff=lr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,26)},set:function(e){e?this.Ff=ar(this.Ff,26):this.Ff=lr(this.Ff,26)}});var n,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(s){return s};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,i=[];for(r in i.push("<<"),t)i.push("/"+r+" ("+Jo(e(t[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(e){pn(e)==="object"&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){typeof e=="string"&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}})};ri(Lr,ts);var nu=function(){Lr.call(this),this.pushButton=!0};ri(nu,Lr);var Ra=function(){Lr.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t!==void 0?t:[]}})};ri(Ra,Lr);var gu=function(){var n,t;ts.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var e,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+Jo(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){pn(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(i){e="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=le.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ri(gu,ts),Ra.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var e=this.Kids[t];e.appearanceStreamContent=n.createAppearanceStream(e.optionName),e.caption=n.getCA()}},Ra.prototype.createOption=function(n){var t=new gu;return t.Parent=this,t.optionName=n,this.Kids.push(t),Kv.call(this.scope,t),t};var ru=function(){Lr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=le.CheckBox.createAppearanceStream()};ri(ru,Lr);var Fo=function(){ts.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,13)},set:function(t){t?this.Ff=ar(this.Ff,13):this.Ff=lr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,21)},set:function(t){t?this.Ff=ar(this.Ff,21):this.Ff=lr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,23)},set:function(t){t?this.Ff=ar(this.Ff,23):this.Ff=lr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,24)},set:function(t){t?this.Ff=ar(this.Ff,24):this.Ff=lr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,25)},set:function(t){t?this.Ff=ar(this.Ff,25):this.Ff=lr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,26)},set:function(t){t?this.Ff=ar(this.Ff,26):this.Ff=lr(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){Number.isInteger(t)&&(n=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ri(Fo,ts);var iu=function(){Fo.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,14)},set:function(n){n?this.Ff=ar(this.Ff,14):this.Ff=lr(this.Ff,14)}}),this.password=!0};ri(iu,Fo);var le={CheckBox:{createAppearanceStream:function(){return{N:{On:le.CheckBox.YesNormal},D:{On:le.CheckBox.YesPushDown,Off:le.CheckBox.OffPushDown}}},YesPushDown:function(n){var t=hs(n);t.scope=n.scope;var e=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),s=pf(n,n.caption);return e.push("0.749023 g"),e.push("0 0 "+Ie(le.internal.getWidth(n))+" "+Ie(le.internal.getHeight(n))+" re"),e.push("f"),e.push("BMC"),e.push("q"),e.push("0 0 1 rg"),e.push("/"+r+" "+Ie(s.fontSize)+" Tf "+i),e.push("BT"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC"),t.stream=e.join(`
`),t},YesNormal:function(n){var t=hs(n);t.scope=n.scope;var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],s=le.internal.getHeight(n),o=le.internal.getWidth(n),a=pf(n,n.caption);return i.push("1 g"),i.push("0 0 "+Ie(o)+" "+Ie(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Ie(o-1)+" "+Ie(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+e+" "+Ie(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(n){var t=hs(n);t.scope=n.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+Ie(le.internal.getWidth(n))+" "+Ie(le.internal.getHeight(n))+" re"),e.push("f"),t.stream=e.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(n){var t={D:{Off:le.RadioButton.Circle.OffPushDown},N:{}};return t.N[n]=le.RadioButton.Circle.YesNormal,t.D[n]=le.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(n){var t=hs(n);t.scope=n.scope;var e=[],r=le.internal.getWidth(n)<=le.internal.getHeight(n)?le.internal.getWidth(n)/4:le.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=le.internal.Bezier_C,s=Number((r*i).toFixed(5));return e.push("q"),e.push("1 0 0 1 "+ao(le.internal.getWidth(n)/2)+" "+ao(le.internal.getHeight(n)/2)+" cm"),e.push(r+" 0 m"),e.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),e.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),e.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),e.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(n){var t=hs(n);t.scope=n.scope;var e=[],r=le.internal.getWidth(n)<=le.internal.getHeight(n)?le.internal.getWidth(n)/4:le.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*le.internal.Bezier_C).toFixed(5)),o=Number((r*le.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+ao(le.internal.getWidth(n)/2)+" "+ao(le.internal.getHeight(n)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),e.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),e.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),e.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),e.push("f"),e.push("Q"),e.push("0 g"),e.push("q"),e.push("1 0 0 1 "+ao(le.internal.getWidth(n)/2)+" "+ao(le.internal.getHeight(n)/2)+" cm"),e.push(r+" 0 m"),e.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),e.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),e.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),e.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},OffPushDown:function(n){var t=hs(n);t.scope=n.scope;var e=[],r=le.internal.getWidth(n)<=le.internal.getHeight(n)?le.internal.getWidth(n)/4:le.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*le.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+ao(le.internal.getWidth(n)/2)+" "+ao(le.internal.getHeight(n)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),e.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),e.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),e.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t}},Cross:{createAppearanceStream:function(n){var t={D:{Off:le.RadioButton.Cross.OffPushDown},N:{}};return t.N[n]=le.RadioButton.Cross.YesNormal,t.D[n]=le.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(n){var t=hs(n);t.scope=n.scope;var e=[],r=le.internal.calculateCross(n);return e.push("q"),e.push("1 1 "+Ie(le.internal.getWidth(n)-2)+" "+Ie(le.internal.getHeight(n)-2)+" re"),e.push("W"),e.push("n"),e.push(Ie(r.x1.x)+" "+Ie(r.x1.y)+" m"),e.push(Ie(r.x2.x)+" "+Ie(r.x2.y)+" l"),e.push(Ie(r.x4.x)+" "+Ie(r.x4.y)+" m"),e.push(Ie(r.x3.x)+" "+Ie(r.x3.y)+" l"),e.push("s"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(n){var t=hs(n);t.scope=n.scope;var e=le.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+Ie(le.internal.getWidth(n))+" "+Ie(le.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Ie(le.internal.getWidth(n)-2)+" "+Ie(le.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(Ie(e.x1.x)+" "+Ie(e.x1.y)+" m"),r.push(Ie(e.x2.x)+" "+Ie(e.x2.y)+" l"),r.push(Ie(e.x4.x)+" "+Ie(e.x4.y)+" m"),r.push(Ie(e.x3.x)+" "+Ie(e.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(n){var t=hs(n);t.scope=n.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+Ie(le.internal.getWidth(n))+" "+Ie(le.internal.getHeight(n))+" re"),e.push("f"),t.stream=e.join(`
`),t}}},createDefaultAppearanceStream:function(n){var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,e=n.scope.__private__.encodeColorString(n.color);return"/"+t+" "+n.fontSize+" Tf "+e}};le.internal={Bezier_C:.551915024494,calculateCross:function(n){var t=le.internal.getWidth(n),e=le.internal.getHeight(n),r=Math.min(t,e);return{x1:{x:(t-r)/2,y:(e-r)/2+r},x2:{x:(t-r)/2+r,y:(e-r)/2},x3:{x:(t-r)/2,y:(e-r)/2},x4:{x:(t-r)/2+r,y:(e-r)/2+r}}}},le.internal.getWidth=function(n){var t=0;return pn(n)==="object"&&(t=q1(n.Rect[2])),t},le.internal.getHeight=function(n){var t=0;return pn(n)==="object"&&(t=q1(n.Rect[3])),t};var Kv=Gn.addField=function(n){if(Gv(this,n),!(n instanceof ts))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=n).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Gn.AcroFormChoiceField=Pa,Gn.AcroFormListBox=qa,Gn.AcroFormComboBox=Ma,Gn.AcroFormEditBox=eu,Gn.AcroFormButton=Lr,Gn.AcroFormPushButton=nu,Gn.AcroFormRadioButton=Ra,Gn.AcroFormCheckBox=ru,Gn.AcroFormTextField=Fo,Gn.AcroFormPasswordField=iu,Gn.AcroFormAppearance=le,Gn.AcroForm={ChoiceField:Pa,ListBox:qa,ComboBox:Ma,EditBox:eu,Button:Lr,PushButton:nu,RadioButton:Ra,CheckBox:ru,TextField:Fo,PasswordField:iu,Appearance:le},Ae.AcroForm={ChoiceField:Pa,ListBox:qa,ComboBox:Ma,EditBox:eu,Button:Lr,PushButton:nu,RadioButton:Ra,CheckBox:ru,TextField:Fo,PasswordField:iu,Appearance:le};function P0(n){return n.reduce(function(t,e,r){return t[e]=r,t},{})}(function(n){n.__addimage__={};var t="UNKNOWN",e={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(q,D){var W,z,Q,Z,lt,rt=t;if((D=D||t)==="RGBA"||q.data!==void 0&&q.data instanceof Uint8ClampedArray&&"height"in q&&"width"in q)return"RGBA";if(B(q))for(lt in e)for(Q=e[lt],W=0;W<Q.length;W+=1){for(Z=!0,z=0;z<Q[W].length;z+=1)if(Q[W][z]!==void 0&&Q[W][z]!==q[z]){Z=!1;break}if(Z===!0){rt=lt;break}}else for(lt in e)for(Q=e[lt],W=0;W<Q.length;W+=1){for(Z=!0,z=0;z<Q[W].length;z+=1)if(Q[W][z]!==void 0&&Q[W][z]!==q.charCodeAt(z)){Z=!1;break}if(Z===!0){rt=lt;break}}return rt===t&&D!==t&&(rt=D),rt},i=function q(D){for(var W=this.internal.write,z=this.internal.putStream,Q=(0,this.internal.getFilters)();Q.indexOf("FlateEncode")!==-1;)Q.splice(Q.indexOf("FlateEncode"),1);D.objectId=this.internal.newObject();var Z=[];if(Z.push({key:"Type",value:"/XObject"}),Z.push({key:"Subtype",value:"/Image"}),Z.push({key:"Width",value:D.width}),Z.push({key:"Height",value:D.height}),D.colorSpace===S.INDEXED?Z.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(D.palette.length/3-1)+" "+("sMask"in D&&D.sMask!==void 0?D.objectId+2:D.objectId+1)+" 0 R]"}):(Z.push({key:"ColorSpace",value:"/"+D.colorSpace}),D.colorSpace===S.DEVICE_CMYK&&Z.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Z.push({key:"BitsPerComponent",value:D.bitsPerComponent}),"decodeParameters"in D&&D.decodeParameters!==void 0&&Z.push({key:"DecodeParms",value:"<<"+D.decodeParameters+">>"}),"transparency"in D&&Array.isArray(D.transparency)){for(var lt="",rt=0,mt=D.transparency.length;rt<mt;rt++)lt+=D.transparency[rt]+" "+D.transparency[rt]+" ";Z.push({key:"Mask",value:"["+lt+"]"})}D.sMask!==void 0&&Z.push({key:"SMask",value:D.objectId+1+" 0 R"});var ht=D.filter!==void 0?["/"+D.filter]:void 0;if(z({data:D.data,additionalKeyValues:Z,alreadyAppliedFilters:ht,objectId:D.objectId}),W("endobj"),"sMask"in D&&D.sMask!==void 0){var Dt="/Predictor "+D.predictor+" /Colors 1 /BitsPerComponent "+D.bitsPerComponent+" /Columns "+D.width,I={width:D.width,height:D.height,colorSpace:"DeviceGray",bitsPerComponent:D.bitsPerComponent,decodeParameters:Dt,data:D.sMask};"filter"in D&&(I.filter=D.filter),q.call(this,I)}if(D.colorSpace===S.INDEXED){var j=this.internal.newObject();z({data:V(new Uint8Array(D.palette)),objectId:j}),W("endobj")}},s=function(){var q=this.internal.collections.addImage_images;for(var D in q)i.call(this,q[D])},o=function(){var q,D=this.internal.collections.addImage_images,W=this.internal.write;for(var z in D)W("/I"+(q=D[z]).index,q.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var q=this.internal.collections.addImage_images;return a.call(this),q},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(q){return typeof n["process"+q.toUpperCase()]=="function"},p=function(q){return pn(q)==="object"&&q.nodeType===1},g=function(q,D){if(q.nodeName==="IMG"&&q.hasAttribute("src")){var W=""+q.getAttribute("src");if(W.indexOf("data:image/")===0)return Cl(unescape(W).split("base64,").pop());var z=n.loadFile(W,!0);if(z!==void 0)return z}if(q.nodeName==="CANVAS"){if(q.width===0||q.height===0)throw new Error("Given canvas must have data. Canvas width: "+q.width+", height: "+q.height);var Q;switch(D){case"PNG":Q="image/png";break;case"WEBP":Q="image/webp";break;case"JPEG":case"JPG":default:Q="image/jpeg"}return Cl(q.toDataURL(Q,1).split("base64,").pop())}},f=function(q){var D=this.internal.collections.addImage_images;if(D){for(var W in D)if(q===D[W].alias)return D[W]}},v=function(q,D,W){return q||D||(q=-96,D=-96),q<0&&(q=-1*W.width*72/q/this.internal.scaleFactor),D<0&&(D=-1*W.height*72/D/this.internal.scaleFactor),q===0&&(q=D*W.width/W.height),D===0&&(D=q*W.height/W.width),[q,D]},x=function(q,D,W,z,Q,Z){var lt=v.call(this,W,z,Q),rt=this.internal.getCoordinateString,mt=this.internal.getVerticalCoordinateString,ht=c.call(this);if(W=lt[0],z=lt[1],ht[Q.index]=Q,Z){Z*=Math.PI/180;var Dt=Math.cos(Z),I=Math.sin(Z),j=function(L){return L.toFixed(4)},Y=[j(Dt),j(I),j(-1*I),j(Dt),0,0,"cm"]}this.internal.write("q"),Z?(this.internal.write([1,"0","0",1,rt(q),mt(D+z),"cm"].join(" ")),this.internal.write(Y.join(" ")),this.internal.write([rt(W),"0","0",rt(z),"0","0","cm"].join(" "))):this.internal.write([rt(W),"0","0",rt(z),rt(q),mt(D+z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Q.index+" Do"),this.internal.write("Q")},S=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},A=n.__addimage__.sHashCode=function(q){var D,W,z=0;if(typeof q=="string")for(W=q.length,D=0;D<W;D++)z=(z<<5)-z+q.charCodeAt(D),z|=0;else if(B(q))for(W=q.byteLength/2,D=0;D<W;D++)z=(z<<5)-z+q[D],z|=0;return z},w=n.__addimage__.validateStringAsBase64=function(q){(q=q||"").toString().trim();var D=!0;return q.length===0&&(D=!1),q.length%4!=0&&(D=!1),/^[A-Za-z0-9+/]+$/.test(q.substr(0,q.length-2))===!1&&(D=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(q.substr(-2))===!1&&(D=!1),D},k=n.__addimage__.extractImageFromDataUrl=function(q){var D=(q=q||"").split("base64,"),W=null;if(D.length===2){var z=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(D[0]);Array.isArray(z)&&(W={mimeType:z[1],charset:z[2],data:D[1]})}return W},T=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(q){return T()&&q instanceof ArrayBuffer};var B=n.__addimage__.isArrayBufferView=function(q){return T()&&typeof Uint32Array<"u"&&(q instanceof Int8Array||q instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&q instanceof Uint8ClampedArray||q instanceof Int16Array||q instanceof Uint16Array||q instanceof Int32Array||q instanceof Uint32Array||q instanceof Float32Array||q instanceof Float64Array)},$=n.__addimage__.binaryStringToUint8Array=function(q){for(var D=q.length,W=new Uint8Array(D),z=0;z<D;z++)W[z]=q.charCodeAt(z);return W},V=n.__addimage__.arrayBufferToBinaryString=function(q){for(var D="",W=B(q)?q:new Uint8Array(q),z=0;z<W.length;z+=8192)D+=String.fromCharCode.apply(null,W.subarray(z,z+8192));return D};n.addImage=function(){var q,D,W,z,Q,Z,lt,rt,mt;if(typeof arguments[1]=="number"?(D=t,W=arguments[1],z=arguments[2],Q=arguments[3],Z=arguments[4],lt=arguments[5],rt=arguments[6],mt=arguments[7]):(D=arguments[1],W=arguments[2],z=arguments[3],Q=arguments[4],Z=arguments[5],lt=arguments[6],rt=arguments[7],mt=arguments[8]),pn(q=arguments[0])==="object"&&!p(q)&&"imageData"in q){var ht=q;q=ht.imageData,D=ht.format||D||t,W=ht.x||W||0,z=ht.y||z||0,Q=ht.w||ht.width||Q,Z=ht.h||ht.height||Z,lt=ht.alias||lt,rt=ht.compression||rt,mt=ht.rotation||ht.angle||mt}var Dt=this.internal.getFilters();if(rt===void 0&&Dt.indexOf("FlateEncode")!==-1&&(rt="SLOW"),isNaN(W)||isNaN(z))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var I=nt.call(this,q,D,lt,rt);return x.call(this,W,z,Q,Z,I,mt),this};var nt=function(q,D,W,z){var Q,Z,lt;if(typeof q=="string"&&r(q)===t){q=unescape(q);var rt=ct(q,!1);(rt!==""||(rt=n.loadFile(q,!0))!==void 0)&&(q=rt)}if(p(q)&&(q=g(q,D)),D=r(q,D),!d(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(((lt=W)==null||lt.length===0)&&(W=function(mt){return typeof mt=="string"||B(mt)?A(mt):B(mt.data)?A(mt.data):null}(q)),(Q=f.call(this,W))||(T()&&(q instanceof Uint8Array||D==="RGBA"||(Z=q,q=$(q))),Q=this["process"+D.toUpperCase()](q,u.call(this),W,function(mt){return mt&&typeof mt=="string"&&(mt=mt.toUpperCase()),mt in n.image_compression?mt:y.NONE}(z),Z)),!Q)throw new Error("An unknown error occurred whilst processing the image.");return Q},ct=n.__addimage__.convertBase64ToBinaryString=function(q,D){var W;D=typeof D!="boolean"||D;var z,Q="";if(typeof q=="string"){z=(W=k(q))!==null?W.data:q;try{Q=Cl(z)}catch(Z){if(D)throw w(z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Z.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Q};n.getImageProperties=function(q){var D,W,z="";if(p(q)&&(q=g(q)),typeof q=="string"&&r(q)===t&&((z=ct(q,!1))===""&&(z=n.loadFile(q)||""),q=z),W=r(q),!d(W))throw new Error("addImage does not support files of type '"+W+"', please ensure that a plugin for '"+W+"' support is added.");if(!T()||q instanceof Uint8Array||(q=$(q)),!(D=this["process"+W.toUpperCase()](q)))throw new Error("An unknown error occurred whilst processing the image");return D.fileType=W,D}})(Ae.API),function(n){var t=function(e){if(e!==void 0&&e!="")return!0};Ae.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(e){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(e.objId),u=e.pageContext.annotations,d=!1,p=0;p<u.length&&!d;p++)switch((r=u[p]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var g=0;g<u.length;g++){r=u[g];var f=this.internal.pdfEscape,v=this.internal.getEncryptor(e.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(x.objId),A=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+f(y(r.contents))+")",s+=" /Popup "+S.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+f(y(A))+") >>",x.content=s;var w=x.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+w,r.open&&(s+=" /Open true"),s+=" >>",S.content=s,this.internal.write(x.objId,"0 R",S.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var k=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+f(v(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+k+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var T=this.annotations._nameMap[r.options.name];r.options.pageNumber=T.page,r.options.top=T.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+f(v(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var B=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+B+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(e){var r=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":r.pageContext.annotations.push(e)}},n.link=function(e,r,i,s,o){var a=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:c(e),y:u(r),w:c(e+i),h:u(r+s)},options:o,type:"link"})},n.textWithLink=function(e,r,i,s){var o,a,c=this.getTextWidth(e),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var d=this.splitTextToSize(e,a).length;o=Math.ceil(u*d)}else a=c,o=u;return this.text(e,r,i,s),i+=.2*u,s.align==="center"&&(r-=c/2),s.align==="right"&&(r-=c),this.link(r,i-u,a,o,s),c},n.getTextWidth=function(e){var r=this.internal.getFontSize();return this.getStringUnitWidth(e)*r/this.internal.scaleFactor}}(Ae.API),function(n){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(x){return t[x.charCodeAt(0)]!==void 0},o=n.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},a=n.__arabicParser__.isArabicEndLetter=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length<=2},c=n.__arabicParser__.isArabicAlfLetter=function(x){return o(x)&&i.indexOf(x.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length>=1};var u=n.__arabicParser__.arabicLetterHasFinalForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length>=3};var d=n.__arabicParser__.arabicLetterHasMedialForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length==4},p=n.__arabicParser__.resolveLigatures=function(x){var S=0,y=e,A="",w=0;for(S=0;S<x.length;S+=1)y[x.charCodeAt(S)]!==void 0?(w++,typeof(y=y[x.charCodeAt(S)])=="number"&&(A+=String.fromCharCode(y),y=e,w=0),S===x.length-1&&(y=e,A+=x.charAt(S-(w-1)),S-=w-1,w=0)):(y=e,A+=x.charAt(S-w),S-=w,w=0);return A};n.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&r[x.charCodeAt(0)]!==void 0};var g=n.__arabicParser__.getCorrectForm=function(x,S,y){return o(x)?s(x)===!1?-1:!u(x)||!o(S)&&!o(y)||!o(y)&&a(S)||a(x)&&!o(S)||a(x)&&c(S)||a(x)&&a(S)?0:d(x)&&o(S)&&!a(S)&&o(y)&&u(y)?3:a(x)||!o(y)?1:2:-1},f=function(x){var S=0,y=0,A=0,w="",k="",T="",B=(x=x||"").split("\\s+"),$=[];for(S=0;S<B.length;S+=1){for($.push(""),y=0;y<B[S].length;y+=1)w=B[S][y],k=B[S][y-1],T=B[S][y+1],o(w)?(A=g(w,k,T),$[S]+=A!==-1?String.fromCharCode(t[w.charCodeAt(0)][A]):w):$[S]+=w;$[S]=p($[S])}return $.join(" ")},v=n.__arabicParser__.processArabic=n.processArabic=function(){var x,S=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(S)){var A=0;for(y=[],A=0;A<S.length;A+=1)Array.isArray(S[A])?y.push([f(S[A][0]),S[A][1],S[A][2]]):y.push([f(S[A])]);x=y}else x=f(S);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};n.events.push(["preProcessText",v])}(Ae.API),Ae.API.autoPrint=function(n){var t;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(n){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(a){e=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,r){var i;if((e=e||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Ae.API),function(n){var t={left:0,top:0,bottom:0,right:0},e=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(x){p=x}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(x){g=x}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(x){v=x}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},n.getTextDimensions=function(c,u){r.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),p=u.font||this.getFont(),g=u.scaleFactor||this.internal.scaleFactor,f=0,v=0,x=0,S=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=u.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(w,k){return w.concat(S.splitTextToSize(k,y))},[])):c=Array.isArray(c)?c:[c];for(var A=0;A<c.length;A++)f<(x=this.getStringUnitWidth(c[A],{font:p})*d)&&(f=x);return f!==0&&(v=c.length),{w:f/=g,h:Math.max((v*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/g,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=n.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,p=this.internal.__cell__.margins||t,g=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=p.top,f&&g&&(this.printHeaderRow(c.lineNumber,!0),c.y+=g[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,e===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};n.table=function(c,u,d,p,g){if(r.call(this),!d)throw new Error("No data for PDF table.");var f,v,x,S,y=[],A=[],w=[],k={},T={},B=[],$=[],V=(g=g||{}).autoSize||!1,nt=g.printHeaders!==!1,ct=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,q=g.margins||Object.assign({width:this.getPageWidth()},t),D=typeof g.padding=="number"?g.padding:3,W=g.headerBackgroundColor||"#c8c8c8",z=g.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=nt,this.internal.__cell__.margins=q,this.internal.__cell__.table_font_size=ct,this.internal.__cell__.padding=D,this.internal.__cell__.headerBackgroundColor=W,this.internal.__cell__.headerTextColor=z,this.setFontSize(ct),p==null)A=y=Object.keys(d[0]),w=y.map(function(){return"left"});else if(Array.isArray(p)&&pn(p[0])==="object")for(y=p.map(function(ht){return ht.name}),A=p.map(function(ht){return ht.prompt||ht.name||""}),w=p.map(function(ht){return ht.align||"left"}),f=0;f<p.length;f+=1)T[p[f].name]=p[f].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(A=y=p,w=y.map(function(){return"left"}));if(V||Array.isArray(p)&&typeof p[0]=="string")for(f=0;f<y.length;f+=1){for(k[S=y[f]]=d.map(function(ht){return ht[S]}),this.setFont(void 0,"bold"),B.push(this.getTextDimensions(A[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=k[S],this.setFont(void 0,"normal"),x=0;x<v.length;x+=1)B.push(this.getTextDimensions(v[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);T[S]=Math.max.apply(null,B)+D+D,B=[]}if(nt){var Q={};for(f=0;f<y.length;f+=1)Q[y[f]]={},Q[y[f]].text=A[f],Q[y[f]].align=w[f];var Z=a.call(this,Q,T);$=y.map(function(ht){return new s(c,u,T[ht],Z,Q[ht].text,void 0,Q[ht].align)}),this.setTableHeaderRow($),this.printHeaderRow(1,!1)}var lt=p.reduce(function(ht,Dt){return ht[Dt.name]=Dt.align,ht},{});for(f=0;f<d.length;f+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:f,data:d[f]},this);var rt=a.call(this,d[f],T);for(x=0;x<y.length;x+=1){var mt=d[f][y[x]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:f,col:x,data:mt},this),o.call(this,new s(c,u,T[y[x]],rt,mt,f+2,lt[y[x]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var a=function(c,u){var d=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(c).map(function(f){var v=c[f];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,u[f]-d-d)},this).map(function(f){return this.getLineHeightFactor()*f.length*p/g+d+d},this).reduce(function(f,v){return Math.max(f,v)},0)};n.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},n.printHeaderRow=function(c,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(e=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){d=this.internal.__cell__.tableHeaderRow[f].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,g.push(d)),d.lineNumber=c;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(v)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),e=!1}}(Ae.API);var q0={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},M0=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],gf=P0(M0),R0=[100,200,300,400,500,600,700,800,900],Yv=P0(R0);function mf(n){var t=n.family.replace(/"|'/g,"").toLowerCase(),e=function(s){return q0[s=s||"normal"]?s:"normal"}(n.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(n.weight),i=function(s){return typeof gf[s=s||"normal"]=="number"?s:"normal"}(n.stretch);return{family:t,style:e,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:t,style:[i,e,r].join(" ")}}}function M1(n,t,e,r){var i;for(i=e;i>=0&&i<t.length;i+=r)if(n[t[i]])return n[t[i]];for(i=e;i>=0&&i<t.length;i-=r)if(n[t[i]])return n[t[i]]}var Jv={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},R1={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function D1(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function Xv(n,t,e){for(var r=(e=e||{}).defaultFontFamily||"times",i=Object.assign({},Jv,e.genericFontFamilies||{}),s=null,o=null,a=0;a<t.length;++a)if(i[(s=mf(t[a])).family]&&(s.family=i[s.family]),n.hasOwnProperty(s.family)){o=n[s.family];break}if(!(o=o||n[r]))throw new Error("Could not find a font-family for the rule '"+D1(s)+"' and default family '"+r+"'.");if(o=function(c,u){if(u[c])return u[c];var d=gf[c],p=d<=gf.normal?-1:1,g=M1(u,M0,d,p);if(!g)throw new Error("Could not find a matching font-stretch value for "+c);return g}(s.stretch,o),o=function(c,u){if(u[c])return u[c];for(var d=q0[c],p=0;p<d.length;++p)if(u[d[p]])return u[d[p]];throw new Error("Could not find a matching font-style for "+c)}(s.style,o),!(o=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var d=Yv[c],p=M1(u,R0,d,c<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+c);return p}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+D1(s)+"'.");return o}function j1(n){return n.trimLeft()}function Zv(n,t){for(var e=0;e<n.length;){if(n.charAt(e)===t)return[n.substring(0,e),n.substring(e+1)];e+=1}return null}function Qv(n){var t=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],n.substring(t[0].length)]}var Vc,F1,B1,kh=["times"];(function(n){var t,e,r,i,s,o,a,c,u,d=function(I){return I=I||{},this.isStrokeTransparent=I.isStrokeTransparent||!1,this.strokeOpacity=I.strokeOpacity||1,this.strokeStyle=I.strokeStyle||"#000000",this.fillStyle=I.fillStyle||"#000000",this.isFillTransparent=I.isFillTransparent||!1,this.fillOpacity=I.fillOpacity||1,this.font=I.font||"10px sans-serif",this.textBaseline=I.textBaseline||"alphabetic",this.textAlign=I.textAlign||"left",this.lineWidth=I.lineWidth||1,this.lineJoin=I.lineJoin||"miter",this.lineCap=I.lineCap||"butt",this.path=I.path||[],this.transform=I.transform!==void 0?I.transform.clone():new c,this.globalCompositeOperation=I.globalCompositeOperation||"normal",this.globalAlpha=I.globalAlpha||1,this.clip_path=I.clip_path||[],this.currentPoint=I.currentPoint||new o,this.miterLimit=I.miterLimit||10,this.lastPoint=I.lastPoint||new o,this.lineDashOffset=I.lineDashOffset||0,this.lineDash=I.lineDash||[],this.margin=I.margin||[0,0,0,0],this.prevPageLastElemOffset=I.prevPageLastElemOffset||0,this.ignoreClearRect=typeof I.ignoreClearRect!="boolean"||I.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new p(this),t=this.internal.f2,e=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var p=function(I){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var j=I;Object.defineProperty(this,"pdf",{get:function(){return j}});var Y=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Y},set:function(_t){Y=!!_t}});var L=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return L},set:function(_t){L=!!_t}});var M=0;Object.defineProperty(this,"posX",{get:function(){return M},set:function(_t){isNaN(_t)||(M=_t)}});var H=0;Object.defineProperty(this,"posY",{get:function(){return H},set:function(_t){isNaN(_t)||(H=_t)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(_t){var J;typeof _t=="number"?J=[_t,_t,_t,_t]:((J=new Array(4))[0]=_t[0],J[1]=_t.length>=2?_t[1]:J[0],J[2]=_t.length>=3?_t[2]:J[0],J[3]=_t.length>=4?_t[3]:J[1]),u.margin=J}});var G=!1;Object.defineProperty(this,"autoPaging",{get:function(){return G},set:function(_t){G=_t}});var et=0;Object.defineProperty(this,"lastBreak",{get:function(){return et},set:function(_t){et=_t}});var wt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return wt},set:function(_t){wt=_t}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(_t){_t instanceof d&&(u=_t)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(_t){u.path=_t}});var bt=[];Object.defineProperty(this,"ctxStack",{get:function(){return bt},set:function(_t){bt=_t}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(_t){var J;J=g(_t),this.ctx.fillStyle=J.style,this.ctx.isFillTransparent=J.a===0,this.ctx.fillOpacity=J.a,this.pdf.setFillColor(J.r,J.g,J.b,{a:J.a}),this.pdf.setTextColor(J.r,J.g,J.b,{a:J.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(_t){var J=g(_t);this.ctx.strokeStyle=J.style,this.ctx.isStrokeTransparent=J.a===0,this.ctx.strokeOpacity=J.a,J.a===0?this.pdf.setDrawColor(255,255,255):(J.a,this.pdf.setDrawColor(J.r,J.g,J.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(_t){["butt","round","square"].indexOf(_t)!==-1&&(this.ctx.lineCap=_t,this.pdf.setLineCap(_t))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(_t){isNaN(_t)||(this.ctx.lineWidth=_t,this.pdf.setLineWidth(_t))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(_t){["bevel","round","miter"].indexOf(_t)!==-1&&(this.ctx.lineJoin=_t,this.pdf.setLineJoin(_t))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(_t){isNaN(_t)||(this.ctx.miterLimit=_t,this.pdf.setMiterLimit(_t))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(_t){this.ctx.textBaseline=_t}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(_t){["right","end","center","left","start"].indexOf(_t)!==-1&&(this.ctx.textAlign=_t)}});var Ct=null;function Et(_t,J){if(Ct===null){var ae=function(Vt){var Nt=[];return Object.keys(Vt).forEach(function(pt){Vt[pt].forEach(function(It){var Mt=null;switch(It){case"bold":Mt={family:pt,weight:"bold"};break;case"italic":Mt={family:pt,style:"italic"};break;case"bolditalic":Mt={family:pt,weight:"bold",style:"italic"};break;case"":case"normal":Mt={family:pt}}Mt!==null&&(Mt.ref={name:pt,style:It},Nt.push(Mt))})}),Nt}(_t.getFontList());Ct=function(Vt){for(var Nt={},pt=0;pt<Vt.length;++pt){var It=mf(Vt[pt]),Mt=It.family,Ht=It.stretch,zt=It.style,Zt=It.weight;Nt[Mt]=Nt[Mt]||{},Nt[Mt][Ht]=Nt[Mt][Ht]||{},Nt[Mt][Ht][zt]=Nt[Mt][Ht][zt]||{},Nt[Mt][Ht][zt][Zt]=It}return Nt}(ae.concat(J))}return Ct}var Ut=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ut},set:function(_t){Ct=null,Ut=_t}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(_t){var J;if(this.ctx.font=_t,(J=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(_t))!==null){var ae=J[1],Vt=(J[2],J[3]),Nt=J[4],pt=(J[5],J[6]),It=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Nt)[2];Nt=Math.floor(It==="px"?parseFloat(Nt)*this.pdf.internal.scaleFactor:It==="em"?parseFloat(Nt)*this.pdf.getFontSize():parseFloat(Nt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Nt);var Mt=function(Xt){var Kt,$t,cn=[],Fe=Xt.trim();if(Fe==="")return kh;if(Fe in R1)return[R1[Fe]];for(;Fe!=="";){switch($t=null,Kt=(Fe=j1(Fe)).charAt(0)){case'"':case"'":$t=Zv(Fe.substring(1),Kt);break;default:$t=Qv(Fe)}if($t===null||(cn.push($t[0]),(Fe=j1($t[1]))!==""&&Fe.charAt(0)!==","))return kh;Fe=Fe.replace(/^,/,"")}return cn}(pt);if(this.fontFaces){var Ht=Xv(Et(this.pdf,this.fontFaces),Mt.map(function(Xt){return{family:Xt,stretch:"normal",weight:Vt,style:ae}}));this.pdf.setFont(Ht.ref.name,Ht.ref.style)}else{var zt="";(Vt==="bold"||parseInt(Vt,10)>=700||ae==="bold")&&(zt="bold"),ae==="italic"&&(zt+="italic"),zt.length===0&&(zt="normal");for(var Zt="",Jt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},te=0;te<Mt.length;te++){if(this.pdf.internal.getFont(Mt[te],zt,{noFallback:!0,disableWarning:!0})!==void 0){Zt=Mt[te];break}if(zt==="bolditalic"&&this.pdf.internal.getFont(Mt[te],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Zt=Mt[te],zt="bold";else if(this.pdf.internal.getFont(Mt[te],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Zt=Mt[te],zt="normal";break}}if(Zt===""){for(var se=0;se<Mt.length;se++)if(Jt[Mt[se]]){Zt=Jt[Mt[se]];break}}Zt=Zt===""?"Times":Zt,this.pdf.setFont(Zt,zt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(_t){this.ctx.globalCompositeOperation=_t}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(_t){this.ctx.globalAlpha=_t}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(_t){this.ctx.lineDashOffset=_t,Dt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(_t){this.ctx.lineDash=_t,Dt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(_t){this.ctx.ignoreClearRect=!!_t}})};p.prototype.setLineDash=function(I){this.lineDash=I},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){k.call(this,"fill",!1)},p.prototype.stroke=function(){k.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(I,j){if(isNaN(I)||isNaN(j))throw Nn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Y=this.ctx.transform.applyToPoint(new o(I,j));this.path.push({type:"mt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new o(I,j)},p.prototype.closePath=function(){var I=new o(0,0),j=0;for(j=this.path.length-1;j!==-1;j--)if(this.path[j].type==="begin"&&pn(this.path[j+1])==="object"&&typeof this.path[j+1].x=="number"){I=new o(this.path[j+1].x,this.path[j+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(I.x,I.y)},p.prototype.lineTo=function(I,j){if(isNaN(I)||isNaN(j))throw Nn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Y=this.ctx.transform.applyToPoint(new o(I,j));this.path.push({type:"lt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new o(Y.x,Y.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),k.call(this,null,!0)},p.prototype.quadraticCurveTo=function(I,j,Y,L){if(isNaN(Y)||isNaN(L)||isNaN(I)||isNaN(j))throw Nn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var M=this.ctx.transform.applyToPoint(new o(Y,L)),H=this.ctx.transform.applyToPoint(new o(I,j));this.path.push({type:"qct",x1:H.x,y1:H.y,x:M.x,y:M.y}),this.ctx.lastPoint=new o(M.x,M.y)},p.prototype.bezierCurveTo=function(I,j,Y,L,M,H){if(isNaN(M)||isNaN(H)||isNaN(I)||isNaN(j)||isNaN(Y)||isNaN(L))throw Nn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var G=this.ctx.transform.applyToPoint(new o(M,H)),et=this.ctx.transform.applyToPoint(new o(I,j)),wt=this.ctx.transform.applyToPoint(new o(Y,L));this.path.push({type:"bct",x1:et.x,y1:et.y,x2:wt.x,y2:wt.y,x:G.x,y:G.y}),this.ctx.lastPoint=new o(G.x,G.y)},p.prototype.arc=function(I,j,Y,L,M,H){if(isNaN(I)||isNaN(j)||isNaN(Y)||isNaN(L)||isNaN(M))throw Nn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(H=!!H,!this.ctx.transform.isIdentity){var G=this.ctx.transform.applyToPoint(new o(I,j));I=G.x,j=G.y;var et=this.ctx.transform.applyToPoint(new o(0,Y)),wt=this.ctx.transform.applyToPoint(new o(0,0));Y=Math.sqrt(Math.pow(et.x-wt.x,2)+Math.pow(et.y-wt.y,2))}Math.abs(M-L)>=2*Math.PI&&(L=0,M=2*Math.PI),this.path.push({type:"arc",x:I,y:j,radius:Y,startAngle:L,endAngle:M,counterclockwise:H})},p.prototype.arcTo=function(I,j,Y,L,M){throw new Error("arcTo not implemented.")},p.prototype.rect=function(I,j,Y,L){if(isNaN(I)||isNaN(j)||isNaN(Y)||isNaN(L))throw Nn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(I,j),this.lineTo(I+Y,j),this.lineTo(I+Y,j+L),this.lineTo(I,j+L),this.lineTo(I,j),this.lineTo(I+Y,j),this.lineTo(I,j)},p.prototype.fillRect=function(I,j,Y,L){if(isNaN(I)||isNaN(j)||isNaN(Y)||isNaN(L))throw Nn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var M={};this.lineCap!=="butt"&&(M.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(M.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(I,j,Y,L),this.fill(),M.hasOwnProperty("lineCap")&&(this.lineCap=M.lineCap),M.hasOwnProperty("lineJoin")&&(this.lineJoin=M.lineJoin)}},p.prototype.strokeRect=function(I,j,Y,L){if(isNaN(I)||isNaN(j)||isNaN(Y)||isNaN(L))throw Nn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(I,j,Y,L),this.stroke())},p.prototype.clearRect=function(I,j,Y,L){if(isNaN(I)||isNaN(j)||isNaN(Y)||isNaN(L))throw Nn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(I,j,Y,L))},p.prototype.save=function(I){I=typeof I!="boolean"||I;for(var j=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("q");if(this.pdf.setPage(j),I){this.ctx.fontSize=this.pdf.internal.getFontSize();var L=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=L}},p.prototype.restore=function(I){I=typeof I!="boolean"||I;for(var j=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("Q");this.pdf.setPage(j),I&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(I){var j,Y,L,M;if(I.isCanvasGradient===!0&&(I=I.getColor()),!I)return{r:0,g:0,b:0,a:0,style:I};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(I))j=0,Y=0,L=0,M=0;else{var H=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(I);if(H!==null)j=parseInt(H[1]),Y=parseInt(H[2]),L=parseInt(H[3]),M=1;else if((H=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(I))!==null)j=parseInt(H[1]),Y=parseInt(H[2]),L=parseInt(H[3]),M=parseFloat(H[4]);else{if(M=1,typeof I=="string"&&I.charAt(0)!=="#"){var G=new k0(I);I=G.ok?G.toHex():"#000000"}I.length===4?(j=I.substring(1,2),j+=j,Y=I.substring(2,3),Y+=Y,L=I.substring(3,4),L+=L):(j=I.substring(1,3),Y=I.substring(3,5),L=I.substring(5,7)),j=parseInt(j,16),Y=parseInt(Y,16),L=parseInt(L,16)}}return{r:j,g:Y,b:L,a:M,style:I}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(I,j,Y,L){if(isNaN(j)||isNaN(Y)||typeof I!="string")throw Nn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(L=isNaN(L)?void 0:L,!f.call(this)){var M=rt(this.ctx.transform.rotation),H=this.ctx.transform.scaleX;D.call(this,{text:I,x:j,y:Y,scale:H,angle:M,align:this.textAlign,maxWidth:L})}},p.prototype.strokeText=function(I,j,Y,L){if(isNaN(j)||isNaN(Y)||typeof I!="string")throw Nn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){L=isNaN(L)?void 0:L;var M=rt(this.ctx.transform.rotation),H=this.ctx.transform.scaleX;D.call(this,{text:I,x:j,y:Y,scale:H,renderingMode:"stroke",angle:M,align:this.textAlign,maxWidth:L})}},p.prototype.measureText=function(I){if(typeof I!="string")throw Nn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var j=this.pdf,Y=this.pdf.internal.scaleFactor,L=j.internal.getFontSize(),M=j.getStringUnitWidth(I)*L/j.internal.scaleFactor,H=function(G){var et=(G=G||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return et}}),this};return new H({width:M*=Math.round(96*Y/72*1e4)/1e4})},p.prototype.scale=function(I,j){if(isNaN(I)||isNaN(j))throw Nn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Y=new c(I,0,0,j,0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},p.prototype.rotate=function(I){if(isNaN(I))throw Nn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var j=new c(Math.cos(I),Math.sin(I),-Math.sin(I),Math.cos(I),0,0);this.ctx.transform=this.ctx.transform.multiply(j)},p.prototype.translate=function(I,j){if(isNaN(I)||isNaN(j))throw Nn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Y=new c(1,0,0,1,I,j);this.ctx.transform=this.ctx.transform.multiply(Y)},p.prototype.transform=function(I,j,Y,L,M,H){if(isNaN(I)||isNaN(j)||isNaN(Y)||isNaN(L)||isNaN(M)||isNaN(H))throw Nn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var G=new c(I,j,Y,L,M,H);this.ctx.transform=this.ctx.transform.multiply(G)},p.prototype.setTransform=function(I,j,Y,L,M,H){I=isNaN(I)?1:I,j=isNaN(j)?0:j,Y=isNaN(Y)?0:Y,L=isNaN(L)?1:L,M=isNaN(M)?0:M,H=isNaN(H)?0:H,this.ctx.transform=new c(I,j,Y,L,M,H)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(I,j,Y,L,M,H,G,et,wt){var bt=this.pdf.getImageProperties(I),Ct=1,Et=1,Ut=1,_t=1;L!==void 0&&et!==void 0&&(Ut=et/L,_t=wt/M,Ct=bt.width/L*et/L,Et=bt.height/M*wt/M),H===void 0&&(H=j,G=Y,j=0,Y=0),L!==void 0&&et===void 0&&(et=L,wt=M),L===void 0&&et===void 0&&(et=bt.width,wt=bt.height);for(var J,ae=this.ctx.transform.decompose(),Vt=rt(ae.rotate.shx),Nt=new c,pt=(Nt=(Nt=(Nt=Nt.multiply(ae.translate)).multiply(ae.skew)).multiply(ae.scale)).applyToRectangle(new a(H-j*Ut,G-Y*_t,L*Ct,M*Et)),It=S.call(this,pt),Mt=[],Ht=0;Ht<It.length;Ht+=1)Mt.indexOf(It[Ht])===-1&&Mt.push(It[Ht]);if(w(Mt),this.autoPaging)for(var zt=Mt[0],Zt=Mt[Mt.length-1],Jt=zt;Jt<Zt+1;Jt++){this.pdf.setPage(Jt);var te=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],se=Jt===1?this.posY+this.margin[0]:this.margin[0],Xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Kt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],$t=Jt===1?0:Xt+(Jt-2)*Kt;if(this.ctx.clip_path.length!==0){var cn=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(J,this.posX+this.margin[3],-$t+se+this.ctx.prevPageLastElemOffset),T.call(this,"fill",!0),this.path=cn}var Fe=JSON.parse(JSON.stringify(pt));Fe=A([Fe],this.posX+this.margin[3],-$t+se+this.ctx.prevPageLastElemOffset)[0];var Hn=(Jt>zt||Jt<Zt)&&x.call(this);Hn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],te,Kt,null).clip().discardPath()),this.pdf.addImage(I,"JPEG",Fe.x,Fe.y,Fe.w,Fe.h,null,null,Vt),Hn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(I,"JPEG",pt.x,pt.y,pt.w,pt.h,null,null,Vt)};var S=function(I,j,Y){var L=[];j=j||this.pdf.internal.pageSize.width,Y=Y||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var M=this.posY+this.ctx.prevPageLastElemOffset;switch(I.type){default:case"mt":case"lt":L.push(Math.floor((I.y+M)/Y)+1);break;case"arc":L.push(Math.floor((I.y+M-I.radius)/Y)+1),L.push(Math.floor((I.y+M+I.radius)/Y)+1);break;case"qct":var H=mt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x,I.y);L.push(Math.floor((H.y+M)/Y)+1),L.push(Math.floor((H.y+H.h+M)/Y)+1);break;case"bct":var G=ht(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x2,I.y2,I.x,I.y);L.push(Math.floor((G.y+M)/Y)+1),L.push(Math.floor((G.y+G.h+M)/Y)+1);break;case"rect":L.push(Math.floor((I.y+M)/Y)+1),L.push(Math.floor((I.y+I.h+M)/Y)+1)}for(var et=0;et<L.length;et+=1)for(;this.pdf.internal.getNumberOfPages()<L[et];)y.call(this);return L},y=function(){var I=this.fillStyle,j=this.strokeStyle,Y=this.font,L=this.lineCap,M=this.lineWidth,H=this.lineJoin;this.pdf.addPage(),this.fillStyle=I,this.strokeStyle=j,this.font=Y,this.lineCap=L,this.lineWidth=M,this.lineJoin=H},A=function(I,j,Y){for(var L=0;L<I.length;L++)switch(I[L].type){case"bct":I[L].x2+=j,I[L].y2+=Y;case"qct":I[L].x1+=j,I[L].y1+=Y;case"mt":case"lt":case"arc":default:I[L].x+=j,I[L].y+=Y}return I},w=function(I){return I.sort(function(j,Y){return j-Y})},k=function(I,j){for(var Y,L,M=this.fillStyle,H=this.strokeStyle,G=this.lineCap,et=this.lineWidth,wt=Math.abs(et*this.ctx.transform.scaleX),bt=this.lineJoin,Ct=JSON.parse(JSON.stringify(this.path)),Et=JSON.parse(JSON.stringify(this.path)),Ut=[],_t=0;_t<Et.length;_t++)if(Et[_t].x!==void 0)for(var J=S.call(this,Et[_t]),ae=0;ae<J.length;ae+=1)Ut.indexOf(J[ae])===-1&&Ut.push(J[ae]);for(var Vt=0;Vt<Ut.length;Vt++)for(;this.pdf.internal.getNumberOfPages()<Ut[Vt];)y.call(this);if(w(Ut),this.autoPaging)for(var Nt=Ut[0],pt=Ut[Ut.length-1],It=Nt;It<pt+1;It++){this.pdf.setPage(It),this.fillStyle=M,this.strokeStyle=H,this.lineCap=G,this.lineWidth=wt,this.lineJoin=bt;var Mt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ht=It===1?this.posY+this.margin[0]:this.margin[0],zt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Zt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Jt=It===1?0:zt+(It-2)*Zt;if(this.ctx.clip_path.length!==0){var te=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(Y,this.posX+this.margin[3],-Jt+Ht+this.ctx.prevPageLastElemOffset),T.call(this,I,!0),this.path=te}if(L=JSON.parse(JSON.stringify(Ct)),this.path=A(L,this.posX+this.margin[3],-Jt+Ht+this.ctx.prevPageLastElemOffset),j===!1||It===0){var se=(It>Nt||It<pt)&&x.call(this);se&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Mt,Zt,null).clip().discardPath()),T.call(this,I,j),se&&this.pdf.restoreGraphicsState()}this.lineWidth=et}else this.lineWidth=wt,T.call(this,I,j),this.lineWidth=et;this.path=Ct},T=function(I,j){if((I!=="stroke"||j||!v.call(this))&&(I==="stroke"||j||!f.call(this))){for(var Y,L,M=[],H=this.path,G=0;G<H.length;G++){var et=H[G];switch(et.type){case"begin":M.push({begin:!0});break;case"close":M.push({close:!0});break;case"mt":M.push({start:et,deltas:[],abs:[]});break;case"lt":var wt=M.length;if(H[G-1]&&!isNaN(H[G-1].x)&&(Y=[et.x-H[G-1].x,et.y-H[G-1].y],wt>0)){for(;wt>=0;wt--)if(M[wt-1].close!==!0&&M[wt-1].begin!==!0){M[wt-1].deltas.push(Y),M[wt-1].abs.push(et);break}}break;case"bct":Y=[et.x1-H[G-1].x,et.y1-H[G-1].y,et.x2-H[G-1].x,et.y2-H[G-1].y,et.x-H[G-1].x,et.y-H[G-1].y],M[M.length-1].deltas.push(Y);break;case"qct":var bt=H[G-1].x+2/3*(et.x1-H[G-1].x),Ct=H[G-1].y+2/3*(et.y1-H[G-1].y),Et=et.x+2/3*(et.x1-et.x),Ut=et.y+2/3*(et.y1-et.y),_t=et.x,J=et.y;Y=[bt-H[G-1].x,Ct-H[G-1].y,Et-H[G-1].x,Ut-H[G-1].y,_t-H[G-1].x,J-H[G-1].y],M[M.length-1].deltas.push(Y);break;case"arc":M.push({deltas:[],abs:[],arc:!0}),Array.isArray(M[M.length-1].abs)&&M[M.length-1].abs.push(et)}}L=j?null:I==="stroke"?"stroke":"fill";for(var ae=!1,Vt=0;Vt<M.length;Vt++)if(M[Vt].arc)for(var Nt=M[Vt].abs,pt=0;pt<Nt.length;pt++){var It=Nt[pt];It.type==="arc"?V.call(this,It.x,It.y,It.radius,It.startAngle,It.endAngle,It.counterclockwise,void 0,j,!ae):W.call(this,It.x,It.y),ae=!0}else if(M[Vt].close===!0)this.pdf.internal.out("h"),ae=!1;else if(M[Vt].begin!==!0){var Mt=M[Vt].start.x,Ht=M[Vt].start.y;z.call(this,M[Vt].deltas,Mt,Ht),ae=!0}L&&nt.call(this,L),j&&ct.call(this)}},B=function(I){var j=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Y=j*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return I-Y;case"top":return I+j-Y;case"hanging":return I+j-2*Y;case"middle":return I+j/2-Y;case"ideographic":return I;case"alphabetic":default:return I}},$=function(I){return I+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var I=function(){};return I.colorStops=[],I.addColorStop=function(j,Y){this.colorStops.push([j,Y])},I.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},I.isCanvasGradient=!0,I},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var V=function(I,j,Y,L,M,H,G,et,wt){for(var bt=Z.call(this,Y,L,M,H),Ct=0;Ct<bt.length;Ct++){var Et=bt[Ct];Ct===0&&(wt?q.call(this,Et.x1+I,Et.y1+j):W.call(this,Et.x1+I,Et.y1+j)),Q.call(this,I,j,Et.x2,Et.y2,Et.x3,Et.y3,Et.x4,Et.y4)}et?ct.call(this):nt.call(this,G)},nt=function(I){switch(I){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ct=function(){this.pdf.clip(),this.pdf.discardPath()},q=function(I,j){this.pdf.internal.out(e(I)+" "+r(j)+" m")},D=function(I){var j;switch(I.align){case"right":case"end":j="right";break;case"center":j="center";break;case"left":case"start":default:j="left"}var Y=this.pdf.getTextDimensions(I.text),L=B.call(this,I.y),M=$.call(this,L)-Y.h,H=this.ctx.transform.applyToPoint(new o(I.x,L)),G=this.ctx.transform.decompose(),et=new c;et=(et=(et=et.multiply(G.translate)).multiply(G.skew)).multiply(G.scale);for(var wt,bt,Ct,Et=this.ctx.transform.applyToRectangle(new a(I.x,L,Y.w,Y.h)),Ut=et.applyToRectangle(new a(I.x,M,Y.w,Y.h)),_t=S.call(this,Ut),J=[],ae=0;ae<_t.length;ae+=1)J.indexOf(_t[ae])===-1&&J.push(_t[ae]);if(w(J),this.autoPaging)for(var Vt=J[0],Nt=J[J.length-1],pt=Vt;pt<Nt+1;pt++){this.pdf.setPage(pt);var It=pt===1?this.posY+this.margin[0]:this.margin[0],Mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ht=this.pdf.internal.pageSize.height-this.margin[2],zt=Ht-this.margin[0],Zt=this.pdf.internal.pageSize.width-this.margin[1],Jt=Zt-this.margin[3],te=pt===1?0:Mt+(pt-2)*zt;if(this.ctx.clip_path.length!==0){var se=this.path;wt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(wt,this.posX+this.margin[3],-1*te+It),T.call(this,"fill",!0),this.path=se}var Xt=A([JSON.parse(JSON.stringify(Ut))],this.posX+this.margin[3],-te+It+this.ctx.prevPageLastElemOffset)[0];I.scale>=.01&&(bt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(bt*I.scale),Ct=this.lineWidth,this.lineWidth=Ct*I.scale);var Kt=this.autoPaging!=="text";if(Kt||Xt.y+Xt.h<=Ht){if(Kt||Xt.y>=It&&Xt.x<=Zt){var $t=Kt?I.text:this.pdf.splitTextToSize(I.text,I.maxWidth||Zt-Xt.x)[0],cn=A([JSON.parse(JSON.stringify(Et))],this.posX+this.margin[3],-te+It+this.ctx.prevPageLastElemOffset)[0],Fe=Kt&&(pt>Vt||pt<Nt)&&x.call(this);Fe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Jt,zt,null).clip().discardPath()),this.pdf.text($t,cn.x,cn.y,{angle:I.angle,align:j,renderingMode:I.renderingMode}),Fe&&this.pdf.restoreGraphicsState()}}else Xt.y<Ht&&(this.ctx.prevPageLastElemOffset+=Ht-Xt.y);I.scale>=.01&&(this.pdf.setFontSize(bt),this.lineWidth=Ct)}else I.scale>=.01&&(bt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(bt*I.scale),Ct=this.lineWidth,this.lineWidth=Ct*I.scale),this.pdf.text(I.text,H.x+this.posX,H.y+this.posY,{angle:I.angle,align:j,renderingMode:I.renderingMode,maxWidth:I.maxWidth}),I.scale>=.01&&(this.pdf.setFontSize(bt),this.lineWidth=Ct)},W=function(I,j,Y,L){Y=Y||0,L=L||0,this.pdf.internal.out(e(I+Y)+" "+r(j+L)+" l")},z=function(I,j,Y){return this.pdf.lines(I,j,Y,null,null)},Q=function(I,j,Y,L,M,H,G,et){this.pdf.internal.out([t(i(Y+I)),t(s(L+j)),t(i(M+I)),t(s(H+j)),t(i(G+I)),t(s(et+j)),"c"].join(" "))},Z=function(I,j,Y,L){for(var M=2*Math.PI,H=Math.PI/2;j>Y;)j-=M;var G=Math.abs(Y-j);G<M&&L&&(G=M-G);for(var et=[],wt=L?-1:1,bt=j;G>1e-5;){var Ct=bt+wt*Math.min(G,H);et.push(lt.call(this,I,bt,Ct)),G-=Math.abs(Ct-bt),bt=Ct}return et},lt=function(I,j,Y){var L=(Y-j)/2,M=I*Math.cos(L),H=I*Math.sin(L),G=M,et=-H,wt=G*G+et*et,bt=wt+G*M+et*H,Ct=4/3*(Math.sqrt(2*wt*bt)-bt)/(G*H-et*M),Et=G-Ct*et,Ut=et+Ct*G,_t=Et,J=-Ut,ae=L+j,Vt=Math.cos(ae),Nt=Math.sin(ae);return{x1:I*Math.cos(j),y1:I*Math.sin(j),x2:Et*Vt-Ut*Nt,y2:Et*Nt+Ut*Vt,x3:_t*Vt-J*Nt,y3:_t*Nt+J*Vt,x4:I*Math.cos(Y),y4:I*Math.sin(Y)}},rt=function(I){return 180*I/Math.PI},mt=function(I,j,Y,L,M,H){var G=I+.5*(Y-I),et=j+.5*(L-j),wt=M+.5*(Y-M),bt=H+.5*(L-H),Ct=Math.min(I,M,G,wt),Et=Math.max(I,M,G,wt),Ut=Math.min(j,H,et,bt),_t=Math.max(j,H,et,bt);return new a(Ct,Ut,Et-Ct,_t-Ut)},ht=function(I,j,Y,L,M,H,G,et){var wt,bt,Ct,Et,Ut,_t,J,ae,Vt,Nt,pt,It,Mt,Ht,zt=Y-I,Zt=L-j,Jt=M-Y,te=H-L,se=G-M,Xt=et-H;for(bt=0;bt<41;bt++)Vt=(J=(Ct=I+(wt=bt/40)*zt)+wt*((Ut=Y+wt*Jt)-Ct))+wt*(Ut+wt*(M+wt*se-Ut)-J),Nt=(ae=(Et=j+wt*Zt)+wt*((_t=L+wt*te)-Et))+wt*(_t+wt*(H+wt*Xt-_t)-ae),bt==0?(pt=Vt,It=Nt,Mt=Vt,Ht=Nt):(pt=Math.min(pt,Vt),It=Math.min(It,Nt),Mt=Math.max(Mt,Vt),Ht=Math.max(Ht,Nt));return new a(Math.round(pt),Math.round(It),Math.round(Mt-pt),Math.round(Ht-It))},Dt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var I,j,Y=(I=this.ctx.lineDash,j=this.ctx.lineDashOffset,JSON.stringify({lineDash:I,lineDashOffset:j}));this.prevLineDash!==Y&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Y)}}})(Ae.API),function(n){var t=function(s){var o,a,c,u,d,p,g,f,v,x;for(a=[],c=0,u=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;u>c;c+=4)(d=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(p=(d=((d=((d=((d=(d-(x=d%85))/85)-(v=d%85))/85)-(f=d%85))/85)-(g=d%85))/85)%85,a.push(p+33,g+33,f+33,v+33,x+33)):a.push(122);return function(S,y){for(var A=y;A>0;A--)S.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},e=function(s){var o,a,c,u,d,p=String,g="length",f=255,v="charCodeAt",x="slice",S="replace";for(s[x](-2),s=s[x](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),c=[],u=0,d=(s+=o="uuuuu"[x](s[g]%5||5))[g];d>u;u+=5)a=52200625*(s[v](u)-33)+614125*(s[v](u+1)-33)+7225*(s[v](u+2)-33)+85*(s[v](u+3)-33)+(s[v](u+4)-33),c.push(f&a>>24,f&a>>16,f&a>>8,f&a);return function(y,A){for(var w=A;w>0;w--)y.pop()}(c,o[g]),p.fromCharCode.apply(p,c)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",c=0;c<s.length;c+=2)a+=String.fromCharCode("0x"+(s[c]+s[c+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=uf(o)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};n.processDataByFilters=function(s,o){var a=0,c=s||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":c=e(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=r(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(Ae.API),function(n){n.loadFile=function(t,e,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(c,u,d){var p=new XMLHttpRequest,g=0,f=function(v){var x=v.length,S=[],y=String.fromCharCode;for(g=0;g<x;g+=1)S.push(y(255&v.charCodeAt(g)));return S.join("")};if(p.open("GET",c,!u),p.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(p.onload=function(){p.status===200?d(f(this.responseText)):d(void 0)}),p.send(null),u&&p.status===200)return f(p.responseText)}(i,s,o)}catch{}return a}(t,e,r)},n.loadImageFile=n.loadFile}(Ae.API),function(n){function t(){return(xe.html2canvas?Promise.resolve(xe.html2canvas):Uh(()=>import("./html2canvas.esm-e0a7d97b.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function e(){return(xe.DOMPurify?Promise.resolve(xe.DOMPurify):Uh(()=>import("./purify.es-dceb4668.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=pn(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var c=document.createElement(o);for(var u in a.className&&(c.className=a.className),a.innerHTML&&a.dompurify&&(c.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)c.style[u]=a.style[u];return c},s=function o(a){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(e).then(function(c){return this.set({src:i("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function c(u,d){for(var p=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),g=u.firstChild;g;g=g.nextSibling)d!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||p.appendChild(c(g,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(p.width=u.width,p.height=u.height,p.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(p.value=u.value),p.addEventListener("load",function(){p.scrollTop=u.scrollTop,p.scrollLeft=u.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(a){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,a(this.prop.container,c)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(a){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var g=0;g<u.length;++g){var f=u[g],v=f.src.find(function(x){return x.format==="truetype"});v&&c.addFont(v.url,f.ref.name,f.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,c.context2d.save(!0),a(this.prop.container,p)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var c=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(c):c})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(o=o||Ae.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,c,u){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,c,u){return this.setProgress(o?this.progress.val+o:null,a||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(o,a){var c=this;return this.thenCore(o,a,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(p){return c.updateProgress(null,u),p}).then(u,d).then(function(p){return c.updateProgress(1),p})})},s.prototype.thenCore=function(o,a,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=c.call(u,o,a);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(c){a=a.thenCore(c)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Ae.getPageSize=function(o,a,c){if(pn(o)==="object"){var u=o;o=u.orientation,a=u.unit||a,c=u.format||c}a=a||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var d,p=(""+c).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+a}var f,v=0,x=0;if(g.hasOwnProperty(p))v=g[p][1]/d,x=g[p][0]/d;else try{v=c[1],x=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",x>v&&(f=x,x=v,v=f);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",v>x&&(f=x,x=v,v=f)}return{width:x,height:v,unit:a,k:d,orientation:o}},n.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(mf):null;var c=new s(a);return a.worker?c:c.from(o).doCallback()}}(Ae.API),Ae.API.addJS=function(n){return B1=n,this.internal.events.subscribe("postPutResources",function(){Vc=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Vc+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),F1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+B1+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Vc!==void 0&&F1!==void 0&&this.internal.out("/Names <</JavaScript "+Vc+" 0 R>>")}),this},function(n){var t;n.events.push(["postPutResources",function(){var e=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=e.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var c=a[1];e.internal.newObjectDeferredBegin(c,!1)}e.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var p=e.internal.newObject();d.push(p);var g=e.internal.getPageInfo(s+1);e.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var f=e.internal.newObject();for(e.internal.write("<< /Names [ "),s=0;s<d.length;s++)e.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+f+" 0 R"),e.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),n.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(r){r.id=e.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},e.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},e.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var c=e.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},e.outline.line=function(r){this.ctx.val+=r+`\r
`},e.outline.makeRef=function(r){return r.id+" 0 R"},e.outline.makeString=function(r){return"("+e.internal.pdfEscape(r)+")"},e.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},e.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},e.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(Ae.API),function(n){var t=[192,193,194,195,196,197,198,199];n.processJPEG=function(e,r,i,s,o,a){var c,u=this.decode.DCT_DECODE,d=null;if(typeof e=="string"||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=o||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(c=function(p){for(var g,f=256*p.charCodeAt(4)+p.charCodeAt(5),v=p.length,x={width:0,height:0,numcomponents:1},S=4;S<v;S+=2){if(S+=f,t.indexOf(p.charCodeAt(S+1))!==-1){g=256*p.charCodeAt(S+5)+p.charCodeAt(S+6),x={width:256*p.charCodeAt(S+7)+p.charCodeAt(S+8),height:g,numcomponents:p.charCodeAt(S+9)};break}f=256*p.charCodeAt(S+2)+p.charCodeAt(S+3)}return x}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}d={data:e,width:c.width,height:c.height,colorSpace:a,bitsPerComponent:8,filter:u,index:r,alias:i}}return d}}(Ae.API);var ba,$c,U1,z1,H1,ty=function(){var n,t,e;function r(s){var o,a,c,u,d,p,g,f,v,x,S,y,A,w;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),v=(function(){var k,T;for(T=[],k=0;k<4;++k)T.push(String.fromCharCode(this.data[this.pos++]));return T}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,p.delay=1e3*d/u,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(v==="fdAT"&&(this.pos+=4,o-=4),s=(p!=null?p.data:void 0)||this.imgData,y=0;0<=o?y<o:y>o;0<=o?++y:--y)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((x=c-this.transparency.indexed.length)>0)for(A=0;0<=x?A<x:A>x;0<=x?++A:--A)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":g=(S=this.read(o)).indexOf(0),f=String.fromCharCode.apply(String,S.slice(0,g)),this.text[f]=String.fromCharCode.apply(String,S.slice(g+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(w=this.colorType)===4||w===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),c=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(p,g,f,v){var x,S,y,A,w,k,T,B,$,V,nt,ct,q,D,W,z,Q,Z,lt,rt,mt,ht=Math.ceil((u.width-p)/f),Dt=Math.ceil((u.height-g)/v),I=u.width==ht&&u.height==Dt;for(D=o*ht,ct=I?a:new Uint8Array(D*Dt),k=s.length,q=0,S=0;q<Dt&&c<k;){switch(s[c++]){case 0:for(A=Q=0;Q<D;A=Q+=1)ct[S++]=s[c++];break;case 1:for(A=Z=0;Z<D;A=Z+=1)x=s[c++],w=A<o?0:ct[S-o],ct[S++]=(x+w)%256;break;case 2:for(A=lt=0;lt<D;A=lt+=1)x=s[c++],y=(A-A%o)/o,W=q&&ct[(q-1)*D+y*o+A%o],ct[S++]=(W+x)%256;break;case 3:for(A=rt=0;rt<D;A=rt+=1)x=s[c++],y=(A-A%o)/o,w=A<o?0:ct[S-o],W=q&&ct[(q-1)*D+y*o+A%o],ct[S++]=(x+Math.floor((w+W)/2))%256;break;case 4:for(A=mt=0;mt<D;A=mt+=1)x=s[c++],y=(A-A%o)/o,w=A<o?0:ct[S-o],q===0?W=z=0:(W=ct[(q-1)*D+y*o+A%o],z=y&&ct[(q-1)*D+(y-1)*o+A%o]),T=w+W-z,B=Math.abs(T-w),V=Math.abs(T-W),nt=Math.abs(T-z),$=B<=V&&B<=nt?w:V<=nt?W:z,ct[S++]=(x+$)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!I){var j=((g+q*v)*u.width+p)*o,Y=q*D;for(A=0;A<ht;A+=1){for(var L=0;L<o;L+=1)a[j++]=ct[Y++];j+=(f-1)*o}}q++}}return s=Tv(s),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,c,u,d,p,g,f;for(a=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+a.length),c=0,s=0,o=p=0,g=a.length;p<g;o=p+=3)u[c++]=a[o],u[c++]=a[o+1],u[c++]=a[o+2],u[c++]=(f=d[s++])!=null?f:255;return u},r.prototype.copyToImageData=function(s,o){var a,c,u,d,p,g,f,v,x,S,y;if(c=this.colors,x=null,a=this.hasAlphaChannel,this.palette.length&&(x=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),c=4,a=!0),v=(u=s.data||s).length,p=x||o,d=g=0,c===1)for(;d<v;)f=x?4*o[d/4]:g,S=p[f++],u[d++]=S,u[d++]=S,u[d++]=S,u[d++]=a?p[f++]:255,g=f;else for(;d<v;)f=x?4*o[d/4]:g,u[d++]=p[f++],u[d++]=p[f++],u[d++]=p[f++],u[d++]=a?p[f++]:255,g=f},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(xe)==="[object Window]"){try{t=xe.document.createElement("canvas"),e=t.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(s){var o;if(i()===!0)return e.width=s.width,e.height=s.height,e.clearRect(0,0,s.width,s.height),e.putImageData(s,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,c,u,d,p,g,f;if(this.animation){for(f=[],a=d=0,p=(g=this.animation.frames).length;d<p;a=++d)o=g[a],c=s.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,u),o.imageData=c,f.push(o.image=n(c));return f}},r.prototype.renderFrame=function(s,o){var a,c,u;return a=(c=this.animation.frames)[o],u=c[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,c,u,d,p,g=this;return a=0,p=this.animation,u=p.numFrames,c=p.frames,d=p.numPlays,(o=function(){var f,v;if(f=a++%u,v=c[f],g.renderFrame(s,f),u>1&&a/u<d)return g.animation._timeout=setTimeout(o,v.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function ey(n){var t=0;if(n[t++]!==71||n[t++]!==73||n[t++]!==70||n[t++]!==56||(n[t++]+1&253)!=56||n[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var e=n[t++]|n[t++]<<8,r=n[t++]|n[t++]<<8,i=n[t++],s=i>>7,o=1<<(7&i)+1;n[t++],n[t++];var a=null,c=null;s&&(a=t,c=o,t+=3*o);var u=!0,d=[],p=0,g=null,f=0,v=null;for(this.width=e,this.height=r;u&&t<n.length;)switch(n[t++]){case 33:switch(n[t++]){case 255:if(n[t]!==11||n[t+1]==78&&n[t+2]==69&&n[t+3]==84&&n[t+4]==83&&n[t+5]==67&&n[t+6]==65&&n[t+7]==80&&n[t+8]==69&&n[t+9]==50&&n[t+10]==46&&n[t+11]==48&&n[t+12]==3&&n[t+13]==1&&n[t+16]==0)t+=14,v=n[t++]|n[t++]<<8,t++;else for(t+=12;;){if(!((q=n[t++])>=0))throw Error("Invalid block size");if(q===0)break;t+=q}break;case 249:if(n[t++]!==4||n[t+4]!==0)throw new Error("Invalid graphics extension block.");var x=n[t++];p=n[t++]|n[t++]<<8,g=n[t++],!(1&x)&&(g=null),f=x>>2&7,t++;break;case 254:for(;;){if(!((q=n[t++])>=0))throw Error("Invalid block size");if(q===0)break;t+=q}break;default:throw new Error("Unknown graphic control label: 0x"+n[t-1].toString(16))}break;case 44:var S=n[t++]|n[t++]<<8,y=n[t++]|n[t++]<<8,A=n[t++]|n[t++]<<8,w=n[t++]|n[t++]<<8,k=n[t++],T=k>>6&1,B=1<<(7&k)+1,$=a,V=c,nt=!1;k>>7&&(nt=!0,$=t,V=B,t+=3*B);var ct=t;for(t++;;){var q;if(!((q=n[t++])>=0))throw Error("Invalid block size");if(q===0)break;t+=q}d.push({x:S,y,width:A,height:w,has_local_palette:nt,palette_offset:$,palette_size:V,data_offset:ct,data_length:t-ct,transparent_index:g,interlaced:!!T,delay:p,disposal:f});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+n[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return v},this.frameInfo=function(D){if(D<0||D>=d.length)throw new Error("Frame index out of range.");return d[D]},this.decodeAndBlitFrameBGRA=function(D,W){var z=this.frameInfo(D),Q=z.width*z.height,Z=new Uint8Array(Q);V1(n,z.data_offset,Z,Q);var lt=z.palette_offset,rt=z.transparent_index;rt===null&&(rt=256);var mt=z.width,ht=e-mt,Dt=mt,I=4*(z.y*e+z.x),j=4*((z.y+z.height)*e+z.x),Y=I,L=4*ht;z.interlaced===!0&&(L+=4*e*7);for(var M=8,H=0,G=Z.length;H<G;++H){var et=Z[H];if(Dt===0&&(Dt=mt,(Y+=L)>=j&&(L=4*ht+4*e*(M-1),Y=I+(mt+ht)*(M<<1),M>>=1)),et===rt)Y+=4;else{var wt=n[lt+3*et],bt=n[lt+3*et+1],Ct=n[lt+3*et+2];W[Y++]=Ct,W[Y++]=bt,W[Y++]=wt,W[Y++]=255}--Dt}},this.decodeAndBlitFrameRGBA=function(D,W){var z=this.frameInfo(D),Q=z.width*z.height,Z=new Uint8Array(Q);V1(n,z.data_offset,Z,Q);var lt=z.palette_offset,rt=z.transparent_index;rt===null&&(rt=256);var mt=z.width,ht=e-mt,Dt=mt,I=4*(z.y*e+z.x),j=4*((z.y+z.height)*e+z.x),Y=I,L=4*ht;z.interlaced===!0&&(L+=4*e*7);for(var M=8,H=0,G=Z.length;H<G;++H){var et=Z[H];if(Dt===0&&(Dt=mt,(Y+=L)>=j&&(L=4*ht+4*e*(M-1),Y=I+(mt+ht)*(M<<1),M>>=1)),et===rt)Y+=4;else{var wt=n[lt+3*et],bt=n[lt+3*et+1],Ct=n[lt+3*et+2];W[Y++]=wt,W[Y++]=bt,W[Y++]=Ct,W[Y++]=255}--Dt}}}function V1(n,t,e,r){for(var i=n[t++],s=1<<i,o=s+1,a=o+1,c=i+1,u=(1<<c)-1,d=0,p=0,g=0,f=n[t++],v=new Int32Array(4096),x=null;;){for(;d<16&&f!==0;)p|=n[t++]<<d,d+=8,f===1?f=n[t++]:--f;if(d<c)break;var S=p&u;if(p>>=c,d-=c,S!==s){if(S===o)break;for(var y=S<a?S:x,A=0,w=y;w>s;)w=v[w]>>8,++A;var k=w;if(g+A+(y!==S?1:0)>r)return void Nn.log("Warning, gif stream longer than expected.");e[g++]=k;var T=g+=A;for(y!==S&&(e[g++]=k),w=y;A--;)w=v[w],e[--T]=255&w,w>>=8;x!==null&&a<4096&&(v[a++]=x<<8|k,a>=u+1&&c<12&&(++c,u=u<<1|1)),x=S}else a=o+1,u=(1<<(c=i+1))-1,x=null}return g!==r&&Nn.log("Warning, gif stream shorter than expected."),e}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Eh(n){var t,e,r,i,s,o=Math.floor,a=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),p=new Array(65535),g=new Array(65535),f=new Array(64),v=new Array(64),x=[],S=0,y=7,A=new Array(64),w=new Array(64),k=new Array(64),T=new Array(256),B=new Array(2048),$=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],V=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],nt=[0,1,2,3,4,5,6,7,8,9,10,11],ct=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],q=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],D=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],W=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Q=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Z(I,j){for(var Y=0,L=0,M=new Array,H=1;H<=16;H++){for(var G=1;G<=I[H];G++)M[j[L]]=[],M[j[L]][0]=Y,M[j[L]][1]=H,L++,Y++;Y*=2}return M}function lt(I){for(var j=I[0],Y=I[1]-1;Y>=0;)j&1<<Y&&(S|=1<<y),Y--,--y<0&&(S==255?(rt(255),rt(0)):rt(S),y=7,S=0)}function rt(I){x.push(I)}function mt(I){rt(I>>8&255),rt(255&I)}function ht(I,j,Y,L,M){for(var H,G=M[0],et=M[240],wt=function(Nt,pt){var It,Mt,Ht,zt,Zt,Jt,te,se,Xt,Kt,$t=0;for(Xt=0;Xt<8;++Xt){It=Nt[$t],Mt=Nt[$t+1],Ht=Nt[$t+2],zt=Nt[$t+3],Zt=Nt[$t+4],Jt=Nt[$t+5],te=Nt[$t+6];var cn=It+(se=Nt[$t+7]),Fe=It-se,Hn=Mt+te,He=Mt-te,tn=Ht+Jt,Rn=Ht-Jt,Le=zt+Zt,_n=zt-Zt,De=cn+Le,rn=cn-Le,sn=Hn+tn,Xe=Hn-tn;Nt[$t]=De+sn,Nt[$t+4]=De-sn;var ce=.707106781*(Xe+rn);Nt[$t+2]=rn+ce,Nt[$t+6]=rn-ce;var Oe=.382683433*((De=_n+Rn)-(Xe=He+Fe)),Yn=.5411961*De+Oe,gn=1.306562965*Xe+Oe,On=.707106781*(sn=Rn+He),Jn=Fe+On,ee=Fe-On;Nt[$t+5]=ee+Yn,Nt[$t+3]=ee-Yn,Nt[$t+1]=Jn+gn,Nt[$t+7]=Jn-gn,$t+=8}for($t=0,Xt=0;Xt<8;++Xt){It=Nt[$t],Mt=Nt[$t+8],Ht=Nt[$t+16],zt=Nt[$t+24],Zt=Nt[$t+32],Jt=Nt[$t+40],te=Nt[$t+48];var ln=It+(se=Nt[$t+56]),mn=It-se,An=Mt+te,Ke=Mt-te,en=Ht+Jt,Te=Ht-Jt,kr=zt+Zt,wr=zt-Zt,Tn=ln+kr,Sn=ln-kr,Xn=An+en,Ve=An-en;Nt[$t]=Tn+Xn,Nt[$t+32]=Tn-Xn;var Zn=.707106781*(Ve+Sn);Nt[$t+16]=Sn+Zn,Nt[$t+48]=Sn-Zn;var Dn=.382683433*((Tn=wr+Te)-(Ve=Ke+mn)),Vn=.5411961*Tn+Dn,Hr=1.306562965*Ve+Dn,dt=.707106781*(Xn=Te+Ke),At=mn+dt,Ft=mn-dt;Nt[$t+40]=Ft+Vn,Nt[$t+24]=Ft-Vn,Nt[$t+8]=At+Hr,Nt[$t+56]=At-Hr,$t++}for(Xt=0;Xt<64;++Xt)Kt=Nt[Xt]*pt[Xt],f[Xt]=Kt>0?Kt+.5|0:Kt-.5|0;return f}(I,j),bt=0;bt<64;++bt)v[$[bt]]=wt[bt];var Ct=v[0]-Y;Y=v[0],Ct==0?lt(L[0]):(lt(L[g[H=32767+Ct]]),lt(p[H]));for(var Et=63;Et>0&&v[Et]==0;)Et--;if(Et==0)return lt(G),Y;for(var Ut,_t=1;_t<=Et;){for(var J=_t;v[_t]==0&&_t<=Et;)++_t;var ae=_t-J;if(ae>=16){Ut=ae>>4;for(var Vt=1;Vt<=Ut;++Vt)lt(et);ae&=15}H=32767+v[_t],lt(M[(ae<<4)+g[H]]),lt(p[H]),_t++}return Et!=63&&lt(G),Y}function Dt(I){I=Math.min(Math.max(I,1),100),s!=I&&(function(j){for(var Y=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],L=0;L<64;L++){var M=o((Y[L]*j+50)/100);M=Math.min(Math.max(M,1),255),a[$[L]]=M}for(var H=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],G=0;G<64;G++){var et=o((H[G]*j+50)/100);et=Math.min(Math.max(et,1),255),c[$[G]]=et}for(var wt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],bt=0,Ct=0;Ct<8;Ct++)for(var Et=0;Et<8;Et++)u[bt]=1/(a[$[bt]]*wt[Ct]*wt[Et]*8),d[bt]=1/(c[$[bt]]*wt[Ct]*wt[Et]*8),bt++}(I<50?Math.floor(5e3/I):Math.floor(200-2*I)),s=I)}this.encode=function(I,j){j&&Dt(j),x=new Array,S=0,y=7,mt(65496),mt(65504),mt(16),rt(74),rt(70),rt(73),rt(70),rt(0),rt(1),rt(1),rt(0),mt(1),mt(1),rt(0),rt(0),function(){mt(65499),mt(132),rt(0);for(var Mt=0;Mt<64;Mt++)rt(a[Mt]);rt(1);for(var Ht=0;Ht<64;Ht++)rt(c[Ht])}(),function(Mt,Ht){mt(65472),mt(17),rt(8),mt(Ht),mt(Mt),rt(3),rt(1),rt(17),rt(0),rt(2),rt(17),rt(1),rt(3),rt(17),rt(1)}(I.width,I.height),function(){mt(65476),mt(418),rt(0);for(var Mt=0;Mt<16;Mt++)rt(V[Mt+1]);for(var Ht=0;Ht<=11;Ht++)rt(nt[Ht]);rt(16);for(var zt=0;zt<16;zt++)rt(ct[zt+1]);for(var Zt=0;Zt<=161;Zt++)rt(q[Zt]);rt(1);for(var Jt=0;Jt<16;Jt++)rt(D[Jt+1]);for(var te=0;te<=11;te++)rt(W[te]);rt(17);for(var se=0;se<16;se++)rt(z[se+1]);for(var Xt=0;Xt<=161;Xt++)rt(Q[Xt])}(),mt(65498),mt(12),rt(3),rt(1),rt(0),rt(2),rt(17),rt(3),rt(17),rt(0),rt(63),rt(0);var Y=0,L=0,M=0;S=0,y=7,this.encode.displayName="_encode_";for(var H,G,et,wt,bt,Ct,Et,Ut,_t,J=I.data,ae=I.width,Vt=I.height,Nt=4*ae,pt=0;pt<Vt;){for(H=0;H<Nt;){for(bt=Nt*pt+H,Et=-1,Ut=0,_t=0;_t<64;_t++)Ct=bt+(Ut=_t>>3)*Nt+(Et=4*(7&_t)),pt+Ut>=Vt&&(Ct-=Nt*(pt+1+Ut-Vt)),H+Et>=Nt&&(Ct-=H+Et-Nt+4),G=J[Ct++],et=J[Ct++],wt=J[Ct++],A[_t]=(B[G]+B[et+256>>0]+B[wt+512>>0]>>16)-128,w[_t]=(B[G+768>>0]+B[et+1024>>0]+B[wt+1280>>0]>>16)-128,k[_t]=(B[G+1280>>0]+B[et+1536>>0]+B[wt+1792>>0]>>16)-128;Y=ht(A,u,Y,t,r),L=ht(w,d,L,e,i),M=ht(k,d,M,e,i),H+=32}pt+=8}if(y>=0){var It=[];It[1]=y+1,It[0]=(1<<y+1)-1,lt(It)}return mt(65497),new Uint8Array(x)},n=n||50,function(){for(var I=String.fromCharCode,j=0;j<256;j++)T[j]=I(j)}(),t=Z(V,nt),e=Z(D,W),r=Z(ct,q),i=Z(z,Q),function(){for(var I=1,j=2,Y=1;Y<=15;Y++){for(var L=I;L<j;L++)g[32767+L]=Y,p[32767+L]=[],p[32767+L][1]=Y,p[32767+L][0]=L;for(var M=-(j-1);M<=-I;M++)g[32767+M]=Y,p[32767+M]=[],p[32767+M][1]=Y,p[32767+M][0]=j-1+M;I<<=1,j<<=1}}(),function(){for(var I=0;I<256;I++)B[I]=19595*I,B[I+256>>0]=38470*I,B[I+512>>0]=7471*I+32768,B[I+768>>0]=-11059*I,B[I+1024>>0]=-21709*I,B[I+1280>>0]=32768*I+8421375,B[I+1536>>0]=-27439*I,B[I+1792>>0]=-5329*I}(),Dt(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ui(n,t){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function $1(n){function t(V){if(!V)throw Error("assert :P")}function e(V,nt,ct){for(var q=0;4>q;q++)if(V[nt+q]!=ct.charCodeAt(q))return!0;return!1}function r(V,nt,ct,q,D){for(var W=0;W<D;W++)V[nt+W]=ct[q+W]}function i(V,nt,ct,q){for(var D=0;D<q;D++)V[nt+D]=ct}function s(V){return new Int32Array(V)}function o(V,nt){for(var ct=[],q=0;q<V;q++)ct.push(new nt);return ct}function a(V,nt){var ct=[];return function q(D,W,z){for(var Q=z[W],Z=0;Z<Q&&(D.push(z.length>W+1?[]:new nt),!(z.length<W+1));Z++)q(D[Z],W+1,z)}(ct,0,V),ct}var c=function(){var V=this;function nt(l,h){for(var b=1<<h-1>>>0;l&b;)b>>>=1;return b?(l&b-1)+b:l}function ct(l,h,b,N,E){t(!(N%b));do l[h+(N-=b)]=E;while(0<N)}function q(l,h,b,N,E){if(t(2328>=E),512>=E)var O=s(512);else if((O=s(E))==null)return 0;return function(P,R,U,K,st,vt){var yt,ft,qt=R,St=1<<U,at=s(16),ut=s(16);for(t(st!=0),t(K!=null),t(P!=null),t(0<U),ft=0;ft<st;++ft){if(15<K[ft])return 0;++at[K[ft]]}if(at[0]==st)return 0;for(ut[1]=0,yt=1;15>yt;++yt){if(at[yt]>1<<yt)return 0;ut[yt+1]=ut[yt]+at[yt]}for(ft=0;ft<st;++ft)yt=K[ft],0<K[ft]&&(vt[ut[yt]++]=ft);if(ut[15]==1)return(K=new D).g=0,K.value=vt[0],ct(P,qt,1,St,K),St;var Ot,Rt=-1,Pt=St-1,ie=0,Gt=1,be=1,Yt=1<<U;for(ft=0,yt=1,st=2;yt<=U;++yt,st<<=1){if(Gt+=be<<=1,0>(be-=at[yt]))return 0;for(;0<at[yt];--at[yt])(K=new D).g=yt,K.value=vt[ft++],ct(P,qt+ie,st,Yt,K),ie=nt(ie,yt)}for(yt=U+1,st=2;15>=yt;++yt,st<<=1){if(Gt+=be<<=1,0>(be-=at[yt]))return 0;for(;0<at[yt];--at[yt]){if(K=new D,(ie&Pt)!=Rt){for(qt+=Yt,Ot=1<<(Rt=yt)-U;15>Rt&&!(0>=(Ot-=at[Rt]));)++Rt,Ot<<=1;St+=Yt=1<<(Ot=Rt-U),P[R+(Rt=ie&Pt)].g=Ot+U,P[R+Rt].value=qt-R-Rt}K.g=yt-U,K.value=vt[ft++],ct(P,qt+(ie>>U),st,Yt,K),ie=nt(ie,yt)}}return Gt!=2*ut[15]-1?0:St}(l,h,b,N,E,O)}function D(){this.value=this.g=0}function W(){this.value=this.g=0}function z(){this.G=o(5,D),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Ir,W)}function Q(l,h,b,N){t(l!=null),t(h!=null),t(2147483648>N),l.Ca=254,l.I=0,l.b=-8,l.Ka=0,l.oa=h,l.pa=b,l.Jd=h,l.Yc=b+N,l.Zc=4<=N?b+N-4+1:b,H(l)}function Z(l,h){for(var b=0;0<h--;)b|=et(l,128)<<h;return b}function lt(l,h){var b=Z(l,h);return G(l)?-b:b}function rt(l,h,b,N){var E,O=0;for(t(l!=null),t(h!=null),t(4294967288>N),l.Sb=N,l.Ra=0,l.u=0,l.h=0,4<N&&(N=4),E=0;E<N;++E)O+=h[b+E]<<8*E;l.Ra=O,l.bb=N,l.oa=h,l.pa=b}function mt(l){for(;8<=l.u&&l.bb<l.Sb;)l.Ra>>>=8,l.Ra+=l.oa[l.pa+l.bb]<<oa-8>>>0,++l.bb,l.u-=8;Y(l)&&(l.h=1,l.u=0)}function ht(l,h){if(t(0<=h),!l.h&&h<=sa){var b=j(l)&ia[h];return l.u+=h,mt(l),b}return l.h=1,l.u=0}function Dt(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function I(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function j(l){return l.Ra>>>(l.u&oa-1)>>>0}function Y(l){return t(l.bb<=l.Sb),l.h||l.bb==l.Sb&&l.u>oa}function L(l,h){l.u=h,l.h=Y(l)}function M(l){l.u>=fl&&(t(l.u>=fl),mt(l))}function H(l){t(l!=null&&l.oa!=null),l.pa<l.Zc?(l.I=(l.oa[l.pa++]|l.I<<8)>>>0,l.b+=8):(t(l!=null&&l.oa!=null),l.pa<l.Yc?(l.b+=8,l.I=l.oa[l.pa++]|l.I<<8):l.Ka?l.b=0:(l.I<<=8,l.b+=8,l.Ka=1))}function G(l){return Z(l,1)}function et(l,h){var b=l.Ca;0>l.b&&H(l);var N=l.b,E=b*h>>>8,O=(l.I>>>N>E)+0;for(O?(b-=E,l.I-=E+1<<N>>>0):b=E+1,N=b,E=0;256<=N;)E+=8,N>>=8;return N=7^E+Qr[N],l.b-=N,l.Ca=(b<<N)-1,O}function wt(l,h,b){l[h+0]=b>>24&255,l[h+1]=b>>16&255,l[h+2]=b>>8&255,l[h+3]=b>>0&255}function bt(l,h){return l[h+0]<<0|l[h+1]<<8}function Ct(l,h){return bt(l,h)|l[h+2]<<16}function Et(l,h){return bt(l,h)|bt(l,h+2)<<16}function Ut(l,h){var b=1<<h;return t(l!=null),t(0<h),l.X=s(b),l.X==null?0:(l.Mb=32-h,l.Xa=h,1)}function _t(l,h){t(l!=null),t(h!=null),t(l.Xa==h.Xa),r(h.X,0,l.X,0,1<<h.Xa)}function J(){this.X=[],this.Xa=this.Mb=0}function ae(l,h,b,N){t(b!=null),t(N!=null);var E=b[0],O=N[0];return E==0&&(E=(l*O+h/2)/h),O==0&&(O=(h*E+l/2)/l),0>=E||0>=O?0:(b[0]=E,N[0]=O,1)}function Vt(l,h){return l+(1<<h)-1>>>h}function Nt(l,h){return((4278255360&l)+(4278255360&h)>>>0&4278255360)+((16711935&l)+(16711935&h)>>>0&16711935)>>>0}function pt(l,h){V[h]=function(b,N,E,O,P,R,U){var K;for(K=0;K<P;++K){var st=V[l](R[U+K-1],E,O+K);R[U+K]=Nt(b[N+K],st)}}}function It(){this.ud=this.hd=this.jd=0}function Mt(l,h){return((4278124286&(l^h))>>>1)+(l&h)>>>0}function Ht(l){return 0<=l&&256>l?l:0>l?0:255<l?255:void 0}function zt(l,h){return Ht(l+(l-h+.5>>1))}function Zt(l,h,b){return Math.abs(h-b)-Math.abs(l-b)}function Jt(l,h,b,N,E,O,P){for(N=O[P-1],b=0;b<E;++b)O[P+b]=N=Nt(l[h+b],N)}function te(l,h,b,N,E){var O;for(O=0;O<b;++O){var P=l[h+O],R=P>>8&255,U=16711935&(U=(U=16711935&P)+((R<<16)+R));N[E+O]=(4278255360&P)+U>>>0}}function se(l,h){h.jd=l>>0&255,h.hd=l>>8&255,h.ud=l>>16&255}function Xt(l,h,b,N,E,O){var P;for(P=0;P<N;++P){var R=h[b+P],U=R>>>8,K=R,st=255&(st=(st=R>>>16)+((l.jd<<24>>24)*(U<<24>>24)>>>5));K=255&(K=(K=K+((l.hd<<24>>24)*(U<<24>>24)>>>5))+((l.ud<<24>>24)*(st<<24>>24)>>>5)),E[O+P]=(4278255360&R)+(st<<16)+K}}function Kt(l,h,b,N,E){V[h]=function(O,P,R,U,K,st,vt,yt,ft){for(U=vt;U<yt;++U)for(vt=0;vt<ft;++vt)K[st++]=E(R[N(O[P++])])},V[l]=function(O,P,R,U,K,st,vt){var yt=8>>O.b,ft=O.Ea,qt=O.K[0],St=O.w;if(8>yt)for(O=(1<<O.b)-1,St=(1<<yt)-1;P<R;++P){var at,ut=0;for(at=0;at<ft;++at)at&O||(ut=N(U[K++])),st[vt++]=E(qt[ut&St]),ut>>=yt}else V["VP8LMapColor"+b](U,K,qt,St,st,vt,P,R,ft)}}function $t(l,h,b,N,E){for(b=h+b;h<b;){var O=l[h++];N[E++]=O>>16&255,N[E++]=O>>8&255,N[E++]=O>>0&255}}function cn(l,h,b,N,E){for(b=h+b;h<b;){var O=l[h++];N[E++]=O>>16&255,N[E++]=O>>8&255,N[E++]=O>>0&255,N[E++]=O>>24&255}}function Fe(l,h,b,N,E){for(b=h+b;h<b;){var O=(P=l[h++])>>16&240|P>>12&15,P=P>>0&240|P>>28&15;N[E++]=O,N[E++]=P}}function Hn(l,h,b,N,E){for(b=h+b;h<b;){var O=(P=l[h++])>>16&248|P>>13&7,P=P>>5&224|P>>3&31;N[E++]=O,N[E++]=P}}function He(l,h,b,N,E){for(b=h+b;h<b;){var O=l[h++];N[E++]=O>>0&255,N[E++]=O>>8&255,N[E++]=O>>16&255}}function tn(l,h,b,N,E,O){if(O==0)for(b=h+b;h<b;)wt(N,((O=l[h++])[0]>>24|O[1]>>8&65280|O[2]<<8&16711680|O[3]<<24)>>>0),E+=32;else r(N,E,l,h,b)}function Rn(l,h){V[h][0]=V[l+"0"],V[h][1]=V[l+"1"],V[h][2]=V[l+"2"],V[h][3]=V[l+"3"],V[h][4]=V[l+"4"],V[h][5]=V[l+"5"],V[h][6]=V[l+"6"],V[h][7]=V[l+"7"],V[h][8]=V[l+"8"],V[h][9]=V[l+"9"],V[h][10]=V[l+"10"],V[h][11]=V[l+"11"],V[h][12]=V[l+"12"],V[h][13]=V[l+"13"],V[h][14]=V[l+"0"],V[h][15]=V[l+"0"]}function Le(l){return l==Yu||l==Ju||l==xc||l==Xu}function _n(){this.eb=[],this.size=this.A=this.fb=0}function De(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function rn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new _n,this.f.kb=new De,this.sd=null}function sn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Xe(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ce(l){return alert("todo:WebPSamplerProcessPlane"),l.T}function Oe(l,h){var b=l.T,N=h.ba.f.RGBA,E=N.eb,O=N.fb+l.ka*N.A,P=Ai[h.ba.S],R=l.y,U=l.O,K=l.f,st=l.N,vt=l.ea,yt=l.W,ft=h.cc,qt=h.dc,St=h.Mc,at=h.Nc,ut=l.ka,Ot=l.ka+l.T,Rt=l.U,Pt=Rt+1>>1;for(ut==0?P(R,U,null,null,K,st,vt,yt,K,st,vt,yt,E,O,null,null,Rt):(P(h.ec,h.fc,R,U,ft,qt,St,at,K,st,vt,yt,E,O-N.A,E,O,Rt),++b);ut+2<Ot;ut+=2)ft=K,qt=st,St=vt,at=yt,st+=l.Rc,yt+=l.Rc,O+=2*N.A,P(R,(U+=2*l.fa)-l.fa,R,U,ft,qt,St,at,K,st,vt,yt,E,O-N.A,E,O,Rt);return U+=l.fa,l.j+Ot<l.o?(r(h.ec,h.fc,R,U,Rt),r(h.cc,h.dc,K,st,Pt),r(h.Mc,h.Nc,vt,yt,Pt),b--):1&Ot||P(R,U,null,null,K,st,vt,yt,K,st,vt,yt,E,O+N.A,null,null,Rt),b}function Yn(l,h,b){var N=l.F,E=[l.J];if(N!=null){var O=l.U,P=h.ba.S,R=P==Ac||P==xc;h=h.ba.f.RGBA;var U=[0],K=l.ka;U[0]=l.T,l.Kb&&(K==0?--U[0]:(--K,E[0]-=l.width),l.j+l.ka+l.T==l.o&&(U[0]=l.o-l.j-K));var st=h.eb;K=h.fb+K*h.A,l=Cn(N,E[0],l.width,O,U,st,K+(R?0:3),h.A),t(b==U),l&&Le(P)&&wi(st,K,R,O,U,h.A)}return 0}function gn(l){var h=l.ma,b=h.ba.S,N=11>b,E=b==wc||b==_c||b==Ac||b==Ku||b==12||Le(b);if(h.memory=null,h.Ib=null,h.Jb=null,h.Nd=null,!ul(h.Oa,l,E?11:12))return 0;if(E&&Le(b)&&jt(),l.da)alert("todo:use_scaling");else{if(N){if(h.Ib=ce,l.Kb){if(b=l.U+1>>1,h.memory=s(l.U+2*b),h.memory==null)return 0;h.ec=h.memory,h.fc=0,h.cc=h.ec,h.dc=h.fc+l.U,h.Mc=h.cc,h.Nc=h.dc+b,h.Ib=Oe,jt()}}else alert("todo:EmitYUV");E&&(h.Jb=Yn,N&&gt())}if(N&&!Od){for(l=0;256>l;++l)y2[l]=89858*(l-128)+Sc>>Nc,A2[l]=-22014*(l-128)+Sc,_2[l]=-45773*(l-128),w2[l]=113618*(l-128)+Sc>>Nc;for(l=yl;l<th;++l)h=76283*(l-16)+Sc>>Nc,x2[l-yl]=si(h,255),N2[l-yl]=si(h+8>>4,15);Od=1}return 1}function On(l){var h=l.ma,b=l.U,N=l.T;return t(!(1&l.ka)),0>=b||0>=N?0:(b=h.Ib(l,h),h.Jb!=null&&h.Jb(l,h,b),h.Dc+=b,1)}function Jn(l){l.ma.memory=null}function ee(l,h,b,N){return ht(l,8)!=47?0:(h[0]=ht(l,14)+1,b[0]=ht(l,14)+1,N[0]=ht(l,1),ht(l,3)!=0?0:!l.h)}function ln(l,h){if(4>l)return l+1;var b=l-2>>1;return(2+(1&l)<<b)+ht(h,b)+1}function mn(l,h){return 120<h?h-120:1<=(b=((b=s2[h-1])>>4)*l+(8-(15&b)))?b:1;var b}function An(l,h,b){var N=j(b),E=l[h+=255&N].g-8;return 0<E&&(L(b,b.u+8),N=j(b),h+=l[h].value,h+=N&(1<<E)-1),L(b,b.u+l[h].g),l[h].value}function Ke(l,h,b){return b.g+=l.g,b.value+=l.value<<h>>>0,t(8>=b.g),l.g}function en(l,h,b){var N=l.xc;return t((h=N==0?0:l.vc[l.md*(b>>N)+(h>>N)])<l.Wb),l.Ya[h]}function Te(l,h,b,N){var E=l.ab,O=l.c*h,P=l.C;h=P+h;var R=b,U=N;for(N=l.Ta,b=l.Ua;0<E--;){var K=l.gc[E],st=P,vt=h,yt=R,ft=U,qt=(U=N,R=b,K.Ea);switch(t(st<vt),t(vt<=K.nc),K.hc){case 2:dc(yt,ft,(vt-st)*qt,U,R);break;case 0:var St=st,at=vt,ut=U,Ot=R,Rt=(Yt=K).Ea;St==0&&(Wu(yt,ft,null,null,1,ut,Ot),Jt(yt,ft+1,0,0,Rt-1,ut,Ot+1),ft+=Rt,Ot+=Rt,++St);for(var Pt=1<<Yt.b,ie=Pt-1,Gt=Vt(Rt,Yt.b),be=Yt.K,Yt=Yt.w+(St>>Yt.b)*Gt;St<at;){var an=be,hn=Yt,nn=1;for(dl(yt,ft,ut,Ot-Rt,1,ut,Ot);nn<Rt;){var Ye=(nn&~ie)+Pt;Ye>Rt&&(Ye=Rt),(0,Ys[an[hn++]>>8&15])(yt,ft+ +nn,ut,Ot+nn-Rt,Ye-nn,ut,Ot+nn),nn=Ye}ft+=Rt,Ot+=Rt,++St&ie||(Yt+=Gt)}vt!=K.nc&&r(U,R-qt,U,R+(vt-st-1)*qt,qt);break;case 1:for(qt=yt,at=ft,Rt=(yt=K.Ea)-(Ot=yt&~(ut=(ft=1<<K.b)-1)),St=Vt(yt,K.b),Pt=K.K,K=K.w+(st>>K.b)*St;st<vt;){for(ie=Pt,Gt=K,be=new It,Yt=at+Ot,an=at+yt;at<Yt;)se(ie[Gt++],be),Co(be,qt,at,ft,U,R),at+=ft,R+=ft;at<an&&(se(ie[Gt++],be),Co(be,qt,at,Rt,U,R),at+=Rt,R+=Rt),++st&ut||(K+=St)}break;case 3:if(yt==U&&ft==R&&0<K.b){for(at=U,yt=qt=R+(vt-st)*qt-(Ot=(vt-st)*Vt(K.Ea,K.b)),ft=U,ut=R,St=[],Ot=(Rt=Ot)-1;0<=Ot;--Ot)St[Ot]=ft[ut+Ot];for(Ot=Rt-1;0<=Ot;--Ot)at[yt+Ot]=St[Ot];bi(K,st,vt,U,qt,U,R)}else bi(K,st,vt,yt,ft,U,R)}R=N,U=b}U!=b&&r(N,b,R,U,O)}function kr(l,h){var b=l.V,N=l.Ba+l.c*l.C,E=h-l.C;if(t(h<=l.l.o),t(16>=E),0<E){var O=l.l,P=l.Ta,R=l.Ua,U=O.width;if(Te(l,E,b,N),E=R=[R],t((b=l.C)<(N=h)),t(O.v<O.va),N>O.o&&(N=O.o),b<O.j){var K=O.j-b;b=O.j,E[0]+=K*U}if(b>=N?b=0:(E[0]+=4*O.v,O.ka=b-O.j,O.U=O.va-O.v,O.T=N-b,b=1),b){if(R=R[0],11>(b=l.ca).S){var st=b.f.RGBA,vt=(N=b.S,E=O.U,O=O.T,K=st.eb,st.A),yt=O;for(st=st.fb+l.Ma*st.A;0<yt--;){var ft=P,qt=R,St=E,at=K,ut=st;switch(N){case yc:ti(ft,qt,St,at,ut);break;case wc:Wr(ft,qt,St,at,ut);break;case Yu:Wr(ft,qt,St,at,ut),wi(at,ut,0,St,1,0);break;case _d:Is(ft,qt,St,at,ut);break;case _c:tn(ft,qt,St,at,ut,1);break;case Ju:tn(ft,qt,St,at,ut,1),wi(at,ut,0,St,1,0);break;case Ac:tn(ft,qt,St,at,ut,0);break;case xc:tn(ft,qt,St,at,ut,0),wi(at,ut,1,St,1,0);break;case Ku:Js(ft,qt,St,at,ut);break;case Xu:Js(ft,qt,St,at,ut),En(at,ut,St,1,0);break;case Ad:Cs(ft,qt,St,at,ut);break;default:t(0)}R+=U,st+=vt}l.Ma+=O}else alert("todo:EmitRescaledRowsYUVA");t(l.Ma<=b.height)}}l.C=h,t(l.C<=l.i)}function wr(l){var h;if(0<l.ua)return 0;for(h=0;h<l.Wb;++h){var b=l.Ya[h].G,N=l.Ya[h].H;if(0<b[1][N[1]+0].g||0<b[2][N[2]+0].g||0<b[3][N[3]+0].g)return 0}return 1}function Tn(l,h,b,N,E,O){if(l.Z!=0){var P=l.qd,R=l.rd;for(t(to[l.Z]!=null);h<b;++h)to[l.Z](P,R,N,E,N,E,O),P=N,R=E,E+=O;l.qd=P,l.rd=R}}function Sn(l,h){var b=l.l.ma,N=b.Z==0||b.Z==1?l.l.j:l.C;if(N=l.C<N?N:l.C,t(h<=l.l.o),h>N){var E=l.l.width,O=b.ca,P=b.tb+E*N,R=l.V,U=l.Ba+l.c*N,K=l.gc;t(l.ab==1),t(K[0].hc==3),pc(K[0],N,h,R,U,O,P),Tn(b,N,h,O,P,E)}l.C=l.Ma=h}function Xn(l,h,b,N,E,O,P){var R=l.$/N,U=l.$%N,K=l.m,st=l.s,vt=b+l.$,yt=vt;E=b+N*E;var ft=b+N*O,qt=280+st.ua,St=l.Pb?R:16777216,at=0<st.ua?st.Wa:null,ut=st.wc,Ot=vt<ft?en(st,U,R):null;t(l.C<O),t(ft<=E);var Rt=!1;t:for(;;){for(;Rt||vt<ft;){var Pt=0;if(R>=St){var ie=vt-b;t((St=l).Pb),St.wd=St.m,St.xd=ie,0<St.s.ua&&_t(St.s.Wa,St.s.vb),St=R+a2}if(U&ut||(Ot=en(st,U,R)),t(Ot!=null),Ot.Qb&&(h[vt]=Ot.qb,Rt=!0),!Rt)if(M(K),Ot.jc){Pt=K,ie=h;var Gt=vt,be=Ot.pd[j(Pt)&Ir-1];t(Ot.jc),256>be.g?(L(Pt,Pt.u+be.g),ie[Gt]=be.value,Pt=0):(L(Pt,Pt.u+be.g-256),t(256<=be.value),Pt=be.value),Pt==0&&(Rt=!0)}else Pt=An(Ot.G[0],Ot.H[0],K);if(K.h)break;if(Rt||256>Pt){if(!Rt)if(Ot.nd)h[vt]=(Ot.qb|Pt<<8)>>>0;else{if(M(K),Rt=An(Ot.G[1],Ot.H[1],K),M(K),ie=An(Ot.G[2],Ot.H[2],K),Gt=An(Ot.G[3],Ot.H[3],K),K.h)break;h[vt]=(Gt<<24|Rt<<16|Pt<<8|ie)>>>0}if(Rt=!1,++vt,++U>=N&&(U=0,++R,P!=null&&R<=O&&!(R%16)&&P(l,R),at!=null))for(;yt<vt;)Pt=h[yt++],at.X[(506832829*Pt&4294967295)>>>at.Mb]=Pt}else if(280>Pt){if(Pt=ln(Pt-256,K),ie=An(Ot.G[4],Ot.H[4],K),M(K),ie=mn(N,ie=ln(ie,K)),K.h)break;if(vt-b<ie||E-vt<Pt)break t;for(Gt=0;Gt<Pt;++Gt)h[vt+Gt]=h[vt+Gt-ie];for(vt+=Pt,U+=Pt;U>=N;)U-=N,++R,P!=null&&R<=O&&!(R%16)&&P(l,R);if(t(vt<=E),U&ut&&(Ot=en(st,U,R)),at!=null)for(;yt<vt;)Pt=h[yt++],at.X[(506832829*Pt&4294967295)>>>at.Mb]=Pt}else{if(!(Pt<qt))break t;for(Rt=Pt-280,t(at!=null);yt<vt;)Pt=h[yt++],at.X[(506832829*Pt&4294967295)>>>at.Mb]=Pt;Pt=vt,t(!(Rt>>>(ie=at).Xa)),h[Pt]=ie.X[Rt],Rt=!0}Rt||t(K.h==Y(K))}if(l.Pb&&K.h&&vt<E)t(l.m.h),l.a=5,l.m=l.wd,l.$=l.xd,0<l.s.ua&&_t(l.s.vb,l.s.Wa);else{if(K.h)break t;P!=null&&P(l,R>O?O:R),l.a=0,l.$=vt-b}return 1}return l.a=3,0}function Ve(l){t(l!=null),l.vc=null,l.yc=null,l.Ya=null;var h=l.Wa;h!=null&&(h.X=null),l.vb=null,t(l!=null)}function Zn(){var l=new $u;return l==null?null:(l.a=0,l.xb=Sd,Rn("Predictor","VP8LPredictors"),Rn("Predictor","VP8LPredictors_C"),Rn("PredictorAdd","VP8LPredictorsAdd"),Rn("PredictorAdd","VP8LPredictorsAdd_C"),dc=te,Co=Xt,ti=$t,Wr=cn,Js=Fe,Cs=Hn,Is=He,V.VP8LMapColor32b=aa,V.VP8LMapColor8b=gc,l)}function Dn(l,h,b,N,E){var O=1,P=[l],R=[h],U=N.m,K=N.s,st=null,vt=0;t:for(;;){if(b)for(;O&&ht(U,1);){var yt=P,ft=R,qt=N,St=1,at=qt.m,ut=qt.gc[qt.ab],Ot=ht(at,2);if(qt.Oc&1<<Ot)O=0;else{switch(qt.Oc|=1<<Ot,ut.hc=Ot,ut.Ea=yt[0],ut.nc=ft[0],ut.K=[null],++qt.ab,t(4>=qt.ab),Ot){case 0:case 1:ut.b=ht(at,3)+2,St=Dn(Vt(ut.Ea,ut.b),Vt(ut.nc,ut.b),0,qt,ut.K),ut.K=ut.K[0];break;case 3:var Rt,Pt=ht(at,8)+1,ie=16<Pt?0:4<Pt?1:2<Pt?2:3;if(yt[0]=Vt(ut.Ea,ie),ut.b=ie,Rt=St=Dn(Pt,1,0,qt,ut.K)){var Gt,be=Pt,Yt=ut,an=1<<(8>>Yt.b),hn=s(an);if(hn==null)Rt=0;else{var nn=Yt.K[0],Ye=Yt.w;for(hn[0]=Yt.K[0][0],Gt=1;Gt<1*be;++Gt)hn[Gt]=Nt(nn[Ye+Gt],hn[Gt-1]);for(;Gt<4*an;++Gt)hn[Gt]=0;Yt.K[0]=null,Yt.K[0]=hn,Rt=1}}St=Rt;break;case 2:break;default:t(0)}O=St}}if(P=P[0],R=R[0],O&&ht(U,1)&&!(O=1<=(vt=ht(U,4))&&11>=vt)){N.a=3;break t}var xn;if(xn=O)e:{var wn,Re,ur,ei=N,hr=P,ni=R,fn=vt,ai=b,li=ei.m,xr=ei.s,Or=[null],Kr=1,xi=0,ls=o2[fn];n:for(;;){if(ai&&ht(li,1)){var Nr=ht(li,3)+2,qs=Vt(hr,Nr),qo=Vt(ni,Nr),fa=qs*qo;if(!Dn(qs,qo,0,ei,Or))break n;for(Or=Or[0],xr.xc=Nr,wn=0;wn<fa;++wn){var eo=Or[wn]>>8&65535;Or[wn]=eo,eo>=Kr&&(Kr=eo+1)}}if(li.h)break n;for(Re=0;5>Re;++Re){var Wn=xd[Re];!Re&&0<fn&&(Wn+=1<<fn),xi<Wn&&(xi=Wn)}var eh=o(Kr*ls,D),qd=Kr,Md=o(qd,z);if(Md==null)var kc=null;else t(65536>=qd),kc=Md;var wl=s(xi);if(kc==null||wl==null||eh==null){ei.a=1;break n}var Ec=eh;for(wn=ur=0;wn<Kr;++wn){var ji=kc[wn],da=ji.G,pa=ji.H,Rd=0,Cc=1,Dd=0;for(Re=0;5>Re;++Re){Wn=xd[Re],da[Re]=Ec,pa[Re]=ur,!Re&&0<fn&&(Wn+=1<<fn);i:{var Ic,nh=Wn,Oc=ei,_l=wl,k2=Ec,E2=ur,rh=0,no=Oc.m,C2=ht(no,1);if(i(_l,0,0,nh),C2){var I2=ht(no,1)+1,O2=ht(no,1),jd=ht(no,O2==0?1:8);_l[jd]=1,I2==2&&(_l[jd=ht(no,8)]=1);var Tc=1}else{var Fd=s(19),Bd=ht(no,4)+4;if(19<Bd){Oc.a=3;var Pc=0;break i}for(Ic=0;Ic<Bd;++Ic)Fd[i2[Ic]]=ht(no,3);var ih=void 0,Al=void 0,Ud=Oc,T2=Fd,qc=nh,zd=_l,sh=0,ro=Ud.m,Hd=8,Vd=o(128,D);r:for(;q(Vd,0,7,T2,19);){if(ht(ro,1)){var P2=2+2*ht(ro,3);if((ih=2+ht(ro,P2))>qc)break r}else ih=qc;for(Al=0;Al<qc&&ih--;){M(ro);var $d=Vd[0+(127&j(ro))];L(ro,ro.u+$d.g);var ga=$d.value;if(16>ga)zd[Al++]=ga,ga!=0&&(Hd=ga);else{var q2=ga==16,Wd=ga-16,M2=n2[Wd],Gd=ht(ro,e2[Wd])+M2;if(Al+Gd>qc)break r;for(var R2=q2?Hd:0;0<Gd--;)zd[Al++]=R2}}sh=1;break r}sh||(Ud.a=3),Tc=sh}(Tc=Tc&&!no.h)&&(rh=q(k2,E2,8,_l,nh)),Tc&&rh!=0?Pc=rh:(Oc.a=3,Pc=0)}if(Pc==0)break n;if(Cc&&r2[Re]==1&&(Cc=Ec[ur].g==0),Rd+=Ec[ur].g,ur+=Pc,3>=Re){var xl,oh=wl[0];for(xl=1;xl<Wn;++xl)wl[xl]>oh&&(oh=wl[xl]);Dd+=oh}}if(ji.nd=Cc,ji.Qb=0,Cc&&(ji.qb=(da[3][pa[3]+0].value<<24|da[1][pa[1]+0].value<<16|da[2][pa[2]+0].value)>>>0,Rd==0&&256>da[0][pa[0]+0].value&&(ji.Qb=1,ji.qb+=da[0][pa[0]+0].value<<8)),ji.jc=!ji.Qb&&6>Dd,ji.jc){var Mc,Ms=ji;for(Mc=0;Mc<Ir;++Mc){var io=Mc,so=Ms.pd[io],Rc=Ms.G[0][Ms.H[0]+io];256<=Rc.value?(so.g=Rc.g+256,so.value=Rc.value):(so.g=0,so.value=0,io>>=Ke(Rc,8,so),io>>=Ke(Ms.G[1][Ms.H[1]+io],16,so),io>>=Ke(Ms.G[2][Ms.H[2]+io],0,so),Ke(Ms.G[3][Ms.H[3]+io],24,so))}}}xr.vc=Or,xr.Wb=Kr,xr.Ya=kc,xr.yc=eh,xn=1;break e}xn=0}if(!(O=xn)){N.a=3;break t}if(0<vt){if(K.ua=1<<vt,!Ut(K.Wa,vt)){N.a=1,O=0;break t}}else K.ua=0;var ah=N,Kd=P,D2=R,lh=ah.s,ch=lh.xc;if(ah.c=Kd,ah.i=D2,lh.md=Vt(Kd,ch),lh.wc=ch==0?-1:(1<<ch)-1,b){N.xb=p2;break t}if((st=s(P*R))==null){N.a=1,O=0;break t}O=(O=Xn(N,st,0,P,R,R,null))&&!U.h;break t}return O?(E!=null?E[0]=st:(t(st==null),t(b)),N.$=0,b||Ve(K)):Ve(K),O}function Vn(l,h){var b=l.c*l.i,N=b+h+16*h;return t(l.c<=h),l.V=s(N),l.V==null?(l.Ta=null,l.Ua=0,l.a=1,0):(l.Ta=l.V,l.Ua=l.Ba+b+h,1)}function Hr(l,h){var b=l.C,N=h-b,E=l.V,O=l.Ba+l.c*b;for(t(h<=l.l.o);0<N;){var P=16<N?16:N,R=l.l.ma,U=l.l.width,K=U*P,st=R.ca,vt=R.tb+U*b,yt=l.Ta,ft=l.Ua;Te(l,P,E,O),ir(yt,ft,st,vt,K),Tn(R,b,b+P,st,vt,U),N-=P,E+=P*l.c,b+=P}t(b==h),l.C=l.Ma=h}function dt(){this.ub=this.yd=this.td=this.Rb=0}function At(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ft(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Qt(){this.Yb=function(){var l=[];return function h(b,N,E){for(var O=E[N],P=0;P<O&&(b.push(E.length>N+1?[]:0),!(E.length<N+1));P++)h(b[P],N+1,E)}(l,0,[3,11]),l}()}function qe(){this.jb=s(3),this.Wc=a([4,8],Qt),this.Xc=a([4,17],Qt)}function Ne(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function ot(){this.ld=this.La=this.dd=this.tc=0}function xt(){this.Na=this.la=0}function Bt(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Wt(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function pe(){this.uc=this.M=this.Nb=0,this.wa=Array(new ot),this.Y=0,this.ya=Array(new Wt),this.aa=0,this.l=new Se}function Me(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Ze(){this.cb=this.a=0,this.sc="",this.m=new Dt,this.Od=new dt,this.Kc=new At,this.ed=new Ne,this.Qa=new Ft,this.Ic=this.$c=this.Aa=0,this.D=new pe,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Dt),this.ia=0,this.pb=o(4,Bt),this.Pa=new qe,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Me),this.Hd=0,this.rb=Array(new xt),this.sb=0,this.wa=Array(new ot),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Wt),this.L=this.aa=0,this.gd=a([4,2],ot),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Se(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function un(){var l=new Ze;return l!=null&&(l.a=0,l.sc="OK",l.cb=0,l.Xb=0,vl||(vl=pr)),l}function _e(l,h,b){return l.a==0&&(l.a=h,l.sc=b,l.cb=0),0}function dr(l,h,b){return 3<=b&&l[h+0]==157&&l[h+1]==1&&l[h+2]==42}function Qn(l,h){if(l==null)return 0;if(l.a=0,l.sc="OK",h==null)return _e(l,2,"null VP8Io passed to VP8GetHeaders()");var b=h.data,N=h.w,E=h.ha;if(4>E)return _e(l,7,"Truncated header.");var O=b[N+0]|b[N+1]<<8|b[N+2]<<16,P=l.Od;if(P.Rb=!(1&O),P.td=O>>1&7,P.yd=O>>4&1,P.ub=O>>5,3<P.td)return _e(l,3,"Incorrect keyframe parameters.");if(!P.yd)return _e(l,4,"Frame not displayable.");N+=3,E-=3;var R=l.Kc;if(P.Rb){if(7>E)return _e(l,7,"cannot parse picture header");if(!dr(b,N,E))return _e(l,3,"Bad code word");R.c=16383&(b[N+4]<<8|b[N+3]),R.Td=b[N+4]>>6,R.i=16383&(b[N+6]<<8|b[N+5]),R.Ud=b[N+6]>>6,N+=7,E-=7,l.za=R.c+15>>4,l.Ub=R.i+15>>4,h.width=R.c,h.height=R.i,h.Da=0,h.j=0,h.v=0,h.va=h.width,h.o=h.height,h.da=0,h.ib=h.width,h.hb=h.height,h.U=h.width,h.T=h.height,i((O=l.Pa).jb,0,255,O.jb.length),t((O=l.Qa)!=null),O.Cb=0,O.Bb=0,O.Fb=1,i(O.Zb,0,0,O.Zb.length),i(O.Lb,0,0,O.Lb)}if(P.ub>E)return _e(l,7,"bad partition length");Q(O=l.m,b,N,P.ub),N+=P.ub,E-=P.ub,P.Rb&&(R.Ld=G(O),R.Kd=G(O)),R=l.Qa;var U,K=l.Pa;if(t(O!=null),t(R!=null),R.Cb=G(O),R.Cb){if(R.Bb=G(O),G(O)){for(R.Fb=G(O),U=0;4>U;++U)R.Zb[U]=G(O)?lt(O,7):0;for(U=0;4>U;++U)R.Lb[U]=G(O)?lt(O,6):0}if(R.Bb)for(U=0;3>U;++U)K.jb[U]=G(O)?Z(O,8):255}else R.Bb=0;if(O.Ka)return _e(l,3,"cannot parse segment header");if((R=l.ed).zd=G(O),R.Tb=Z(O,6),R.wb=Z(O,3),R.Pc=G(O),R.Pc&&G(O)){for(K=0;4>K;++K)G(O)&&(R.vd[K]=lt(O,6));for(K=0;4>K;++K)G(O)&&(R.od[K]=lt(O,6))}if(l.L=R.Tb==0?0:R.zd?1:2,O.Ka)return _e(l,3,"cannot parse filter header");var st=E;if(E=U=N,N=U+st,R=st,l.Xb=(1<<Z(l.m,2))-1,st<3*(K=l.Xb))b=7;else{for(U+=3*K,R-=3*K,st=0;st<K;++st){var vt=b[E+0]|b[E+1]<<8|b[E+2]<<16;vt>R&&(vt=R),Q(l.Jc[+st],b,U,vt),U+=vt,R-=vt,E+=3}Q(l.Jc[+K],b,U,R),b=U<N?0:5}if(b!=0)return _e(l,b,"cannot parse partitions");for(b=Z(U=l.m,7),E=G(U)?lt(U,4):0,N=G(U)?lt(U,4):0,R=G(U)?lt(U,4):0,K=G(U)?lt(U,4):0,U=G(U)?lt(U,4):0,st=l.Qa,vt=0;4>vt;++vt){if(st.Cb){var yt=st.Zb[vt];st.Fb||(yt+=b)}else{if(0<vt){l.pb[vt]=l.pb[0];continue}yt=b}var ft=l.pb[vt];ft.Sc[0]=Zu[si(yt+E,127)],ft.Sc[1]=Qu[si(yt+0,127)],ft.Eb[0]=2*Zu[si(yt+N,127)],ft.Eb[1]=101581*Qu[si(yt+R,127)]>>16,8>ft.Eb[1]&&(ft.Eb[1]=8),ft.Qc[0]=Zu[si(yt+K,117)],ft.Qc[1]=Qu[si(yt+U,127)],ft.lc=yt+U}if(!P.Rb)return _e(l,4,"Not a key frame.");for(G(O),P=l.Pa,b=0;4>b;++b){for(E=0;8>E;++E)for(N=0;3>N;++N)for(R=0;11>R;++R)K=et(O,f2[b][E][N][R])?Z(O,8):u2[b][E][N][R],P.Wc[b][E].Yb[N][R]=K;for(E=0;17>E;++E)P.Xc[b][E]=P.Wc[b][d2[E]]}return l.kc=G(O),l.kc&&(l.Bd=Z(O,8)),l.cb=1}function pr(l,h,b,N,E,O,P){var R=h[E].Yb[b];for(b=0;16>E;++E){if(!et(l,R[b+0]))return E;for(;!et(l,R[b+1]);)if(R=h[++E].Yb[0],b=0,E==16)return 16;var U=h[E+1].Yb;if(et(l,R[b+2])){var K=l,st=0;if(et(K,(yt=R)[(vt=b)+3]))if(et(K,yt[vt+6])){for(R=0,vt=2*(st=et(K,yt[vt+8]))+(yt=et(K,yt[vt+9+st])),st=0,yt=l2[vt];yt[R];++R)st+=st+et(K,yt[R]);st+=3+(8<<vt)}else et(K,yt[vt+7])?(st=7+2*et(K,165),st+=et(K,145)):st=5+et(K,159);else st=et(K,yt[vt+4])?3+et(K,yt[vt+5]):2;R=U[2]}else st=1,R=U[1];U=P+c2[E],0>(K=l).b&&H(K);var vt,yt=K.b,ft=(vt=K.Ca>>1)-(K.I>>yt)>>31;--K.b,K.Ca+=ft,K.Ca|=1,K.I-=(vt+1&ft)<<yt,O[U]=((st^ft)-ft)*N[(0<E)+0]}return 16}function ue(l){var h=l.rb[l.sb-1];h.la=0,h.Na=0,i(l.zc,0,0,l.zc.length),l.ja=0}function Be(l,h){if(l==null)return 0;if(h==null)return _e(l,2,"NULL VP8Io parameter in VP8Decode().");if(!l.cb&&!Qn(l,h))return 0;if(t(l.cb),h.ac==null||h.ac(h)){h.ob&&(l.L=0);var b=Lc[l.L];if(l.L==2?(l.yb=0,l.zb=0):(l.yb=h.v-b>>4,l.zb=h.j-b>>4,0>l.yb&&(l.yb=0),0>l.zb&&(l.zb=0)),l.Va=h.o+15+b>>4,l.Hb=h.va+15+b>>4,l.Hb>l.za&&(l.Hb=l.za),l.Va>l.Ub&&(l.Va=l.Ub),0<l.L){var N=l.ed;for(b=0;4>b;++b){var E;if(l.Qa.Cb){var O=l.Qa.Lb[b];l.Qa.Fb||(O+=N.Tb)}else O=N.Tb;for(E=0;1>=E;++E){var P=l.gd[b][E],R=O;if(N.Pc&&(R+=N.vd[0],E&&(R+=N.od[0])),0<(R=0>R?0:63<R?63:R)){var U=R;0<N.wb&&(U=4<N.wb?U>>2:U>>1)>9-N.wb&&(U=9-N.wb),1>U&&(U=1),P.dd=U,P.tc=2*R+U,P.ld=40<=R?2:15<=R?1:0}else P.tc=0;P.La=E}}}b=0}else _e(l,6,"Frame setup failed"),b=l.a;if(b=b==0){if(b){l.$c=0,0<l.Aa||(l.Ic=L2);t:{b=l.Ic,N=4*(U=l.za);var K=32*U,st=U+1,vt=0<l.L?U*(0<l.Aa?2:1):0,yt=(l.Aa==2?2:1)*U;if((P=N+832+(E=3*(16*b+Lc[l.L])/2*K)+(O=l.Fa!=null&&0<l.Fa.length?l.Kc.c*l.Kc.i:0))!=P)b=0;else{if(P>l.Vb){if(l.Vb=0,l.Ec=s(P),l.Fc=0,l.Ec==null){b=_e(l,1,"no memory during frame initialization.");break t}l.Vb=P}P=l.Ec,R=l.Fc,l.Ac=P,l.Bc=R,R+=N,l.Gd=o(K,Me),l.Hd=0,l.rb=o(st+1,xt),l.sb=1,l.wa=vt?o(vt,ot):null,l.Y=0,l.D.Nb=0,l.D.wa=l.wa,l.D.Y=l.Y,0<l.Aa&&(l.D.Y+=U),t(!0),l.oc=P,l.pc=R,R+=832,l.ya=o(yt,Wt),l.aa=0,l.D.ya=l.ya,l.D.aa=l.aa,l.Aa==2&&(l.D.aa+=U),l.R=16*U,l.B=8*U,U=(K=Lc[l.L])*l.R,K=K/2*l.B,l.sa=P,l.ta=R+U,l.qa=l.sa,l.ra=l.ta+16*b*l.R+K,l.Ha=l.qa,l.Ia=l.ra+8*b*l.B+K,l.$c=0,R+=E,l.mb=O?P:null,l.nb=O?R:null,t(R+O<=l.Fc+l.Vb),ue(l),i(l.Ac,l.Bc,0,N),b=1}}if(b){if(h.ka=0,h.y=l.sa,h.O=l.ta,h.f=l.qa,h.N=l.ra,h.ea=l.Ha,h.Vd=l.Ia,h.fa=l.R,h.Rc=l.B,h.F=null,h.J=0,!bc){for(b=-255;255>=b;++b)br[255+b]=0>b?-b:b;for(b=-1020;1020>=b;++b)Ts[1020+b]=-128>b?-128:127<b?127:b;for(b=-112;112>=b;++b)bl[112+b]=-16>b?-16:15<b?15:b;for(b=-255;510>=b;++b)ha[255+b]=0>b?0:255<b?255:b;bc=1}la=nr,Os=bn,pl=on,Gr=gr,vi=er,rr=Ee,ca=Bn,mc=qr,gl=Qo,Io=ss,Oo=ii,Xs=Zr,To=os,ua=uc,Po=Pn,Zs=je,ml=kn,yi=_r,Di[0]=Cr,Di[1]=Fn,Di[2]=rs,Di[3]=Ss,Di[4]=Ws,Di[5]=mi,Di[6]=Ls,Di[7]=is,Di[8]=Gs,Di[9]=Xr,Qs[0]=qi,Qs[1]=mr,Qs[2]=Er,Qs[3]=Vr,Qs[4]=Ln,Qs[5]=Mn,Qs[6]=Ns,Ps[0]=_,Ps[1]=ns,Ps[2]=ks,Ps[3]=Es,Ps[4]=tt,Ps[5]=F,Ps[6]=Lt,b=1}else b=0}b&&(b=function(ft,qt){for(ft.M=0;ft.M<ft.Va;++ft.M){var St,at=ft.Jc[ft.M&ft.Xb],ut=ft.m,Ot=ft;for(St=0;St<Ot.za;++St){var Rt=ut,Pt=Ot,ie=Pt.Ac,Gt=Pt.Bc+4*St,be=Pt.zc,Yt=Pt.ya[Pt.aa+St];if(Pt.Qa.Bb?Yt.$b=et(Rt,Pt.Pa.jb[0])?2+et(Rt,Pt.Pa.jb[2]):et(Rt,Pt.Pa.jb[1]):Yt.$b=0,Pt.kc&&(Yt.Ad=et(Rt,Pt.Bd)),Yt.Za=!et(Rt,145)+0,Yt.Za){var an=Yt.Ob,hn=0;for(Pt=0;4>Pt;++Pt){var nn,Ye=be[0+Pt];for(nn=0;4>nn;++nn){Ye=h2[ie[Gt+nn]][Ye];for(var xn=Nd[et(Rt,Ye[0])];0<xn;)xn=Nd[2*xn+et(Rt,Ye[xn])];Ye=-xn,ie[Gt+nn]=Ye}r(an,hn,ie,Gt,4),hn+=4,be[0+Pt]=Ye}}else Ye=et(Rt,156)?et(Rt,128)?1:3:et(Rt,163)?2:0,Yt.Ob[0]=Ye,i(ie,Gt,Ye,4),i(be,0,Ye,4);Yt.Dd=et(Rt,142)?et(Rt,114)?et(Rt,183)?1:3:2:0}if(Ot.m.Ka)return _e(ft,7,"Premature end-of-partition0 encountered.");for(;ft.ja<ft.za;++ft.ja){if(Ot=at,Rt=(ut=ft).rb[ut.sb-1],ie=ut.rb[ut.sb+ut.ja],St=ut.ya[ut.aa+ut.ja],Gt=ut.kc?St.Ad:0)Rt.la=ie.la=0,St.Za||(Rt.Na=ie.Na=0),St.Hc=0,St.Gc=0,St.ia=0;else{var wn,Re;if(Rt=ie,ie=Ot,Gt=ut.Pa.Xc,be=ut.ya[ut.aa+ut.ja],Yt=ut.pb[be.$b],Pt=be.ad,an=0,hn=ut.rb[ut.sb-1],Ye=nn=0,i(Pt,an,0,384),be.Za)var ur=0,ei=Gt[3];else{xn=s(16);var hr=Rt.Na+hn.Na;if(hr=vl(ie,Gt[1],hr,Yt.Eb,0,xn,0),Rt.Na=hn.Na=(0<hr)+0,1<hr)la(xn,0,Pt,an);else{var ni=xn[0]+3>>3;for(xn=0;256>xn;xn+=16)Pt[an+xn]=ni}ur=1,ei=Gt[0]}var fn=15&Rt.la,ai=15&hn.la;for(xn=0;4>xn;++xn){var li=1&ai;for(ni=Re=0;4>ni;++ni)fn=fn>>1|(li=(hr=vl(ie,ei,hr=li+(1&fn),Yt.Sc,ur,Pt,an))>ur)<<7,Re=Re<<2|(3<hr?3:1<hr?2:Pt[an+0]!=0),an+=16;fn>>=4,ai=ai>>1|li<<7,nn=(nn<<8|Re)>>>0}for(ei=fn,ur=ai>>4,wn=0;4>wn;wn+=2){for(Re=0,fn=Rt.la>>4+wn,ai=hn.la>>4+wn,xn=0;2>xn;++xn){for(li=1&ai,ni=0;2>ni;++ni)hr=li+(1&fn),fn=fn>>1|(li=0<(hr=vl(ie,Gt[2],hr,Yt.Qc,0,Pt,an)))<<3,Re=Re<<2|(3<hr?3:1<hr?2:Pt[an+0]!=0),an+=16;fn>>=2,ai=ai>>1|li<<5}Ye|=Re<<4*wn,ei|=fn<<4<<wn,ur|=(240&ai)<<wn}Rt.la=ei,hn.la=ur,be.Hc=nn,be.Gc=Ye,be.ia=43690&Ye?0:Yt.ia,Gt=!(nn|Ye)}if(0<ut.L&&(ut.wa[ut.Y+ut.ja]=ut.gd[St.$b][St.Za],ut.wa[ut.Y+ut.ja].La|=!Gt),Ot.Ka)return _e(ft,7,"Premature end-of-file encountered.")}if(ue(ft),ut=qt,Ot=1,St=(at=ft).D,Rt=0<at.L&&at.M>=at.zb&&at.M<=at.Va,at.Aa==0)t:{if(St.M=at.M,St.uc=Rt,cl(at,St),Ot=1,St=(Re=at.D).Nb,Rt=(Ye=Lc[at.L])*at.R,ie=Ye/2*at.B,xn=16*St*at.R,ni=8*St*at.B,Gt=at.sa,be=at.ta-Rt+xn,Yt=at.qa,Pt=at.ra-ie+ni,an=at.Ha,hn=at.Ia-ie+ni,ai=(fn=Re.M)==0,nn=fn>=at.Va-1,at.Aa==2&&cl(at,Re),Re.uc)for(li=(hr=at).D.M,t(hr.D.uc),Re=hr.yb;Re<hr.Hb;++Re){ur=Re,ei=li;var xr=(Or=(Wn=hr).D).Nb;wn=Wn.R;var Or=Or.wa[Or.Y+ur],Kr=Wn.sa,xi=Wn.ta+16*xr*wn+16*ur,ls=Or.dd,Nr=Or.tc;if(Nr!=0)if(t(3<=Nr),Wn.L==1)0<ur&&Zs(Kr,xi,wn,Nr+4),Or.La&&yi(Kr,xi,wn,Nr),0<ei&&Po(Kr,xi,wn,Nr+4),Or.La&&ml(Kr,xi,wn,Nr);else{var qs=Wn.B,qo=Wn.qa,fa=Wn.ra+8*xr*qs+8*ur,eo=Wn.Ha,Wn=Wn.Ia+8*xr*qs+8*ur;xr=Or.ld,0<ur&&(mc(Kr,xi,wn,Nr+4,ls,xr),Io(qo,fa,eo,Wn,qs,Nr+4,ls,xr)),Or.La&&(Xs(Kr,xi,wn,Nr,ls,xr),ua(qo,fa,eo,Wn,qs,Nr,ls,xr)),0<ei&&(ca(Kr,xi,wn,Nr+4,ls,xr),gl(qo,fa,eo,Wn,qs,Nr+4,ls,xr)),Or.La&&(Oo(Kr,xi,wn,Nr,ls,xr),To(qo,fa,eo,Wn,qs,Nr,ls,xr))}}if(at.ia&&alert("todo:DitherRow"),ut.put!=null){if(Re=16*fn,fn=16*(fn+1),ai?(ut.y=at.sa,ut.O=at.ta+xn,ut.f=at.qa,ut.N=at.ra+ni,ut.ea=at.Ha,ut.W=at.Ia+ni):(Re-=Ye,ut.y=Gt,ut.O=be,ut.f=Yt,ut.N=Pt,ut.ea=an,ut.W=hn),nn||(fn-=Ye),fn>ut.o&&(fn=ut.o),ut.F=null,ut.J=null,at.Fa!=null&&0<at.Fa.length&&Re<fn&&(ut.J=al(at,ut,Re,fn-Re),ut.F=at.mb,ut.F==null&&ut.F.length==0)){Ot=_e(at,3,"Could not decode alpha data.");break t}Re<ut.j&&(Ye=ut.j-Re,Re=ut.j,t(!(1&Ye)),ut.O+=at.R*Ye,ut.N+=at.B*(Ye>>1),ut.W+=at.B*(Ye>>1),ut.F!=null&&(ut.J+=ut.width*Ye)),Re<fn&&(ut.O+=ut.v,ut.N+=ut.v>>1,ut.W+=ut.v>>1,ut.F!=null&&(ut.J+=ut.v),ut.ka=Re-ut.j,ut.U=ut.va-ut.v,ut.T=fn-Re,Ot=ut.put(ut))}St+1!=at.Ic||nn||(r(at.sa,at.ta-Rt,Gt,be+16*at.R,Rt),r(at.qa,at.ra-ie,Yt,Pt+8*at.B,ie),r(at.Ha,at.Ia-ie,an,hn+8*at.B,ie))}if(!Ot)return _e(ft,6,"Output aborted.")}return 1}(l,h)),h.bc!=null&&h.bc(h),b&=1}return b?(l.cb=0,b):0}function $e(l,h,b,N,E){E=l[h+b+32*N]+(E>>3),l[h+b+32*N]=-256&E?0>E?0:255:E}function ye(l,h,b,N,E,O){$e(l,h,0,b,N+E),$e(l,h,1,b,N+O),$e(l,h,2,b,N-O),$e(l,h,3,b,N-E)}function me(l){return(20091*l>>16)+l}function tr(l,h,b,N){var E,O=0,P=s(16);for(E=0;4>E;++E){var R=l[h+0]+l[h+8],U=l[h+0]-l[h+8],K=(35468*l[h+4]>>16)-me(l[h+12]),st=me(l[h+4])+(35468*l[h+12]>>16);P[O+0]=R+st,P[O+1]=U+K,P[O+2]=U-K,P[O+3]=R-st,O+=4,h++}for(E=O=0;4>E;++E)R=(l=P[O+0]+4)+P[O+8],U=l-P[O+8],K=(35468*P[O+4]>>16)-me(P[O+12]),$e(b,N,0,0,R+(st=me(P[O+4])+(35468*P[O+12]>>16))),$e(b,N,1,0,U+K),$e(b,N,2,0,U-K),$e(b,N,3,0,R-st),O++,N+=32}function Ee(l,h,b,N){var E=l[h+0]+4,O=35468*l[h+4]>>16,P=me(l[h+4]),R=35468*l[h+1]>>16;ye(b,N,0,E+P,l=me(l[h+1]),R),ye(b,N,1,E+O,l,R),ye(b,N,2,E-O,l,R),ye(b,N,3,E-P,l,R)}function bn(l,h,b,N,E){tr(l,h,b,N),E&&tr(l,h+16,b,N+4)}function on(l,h,b,N){Os(l,h+0,b,N,1),Os(l,h+32,b,N+128,1)}function gr(l,h,b,N){var E;for(l=l[h+0]+4,E=0;4>E;++E)for(h=0;4>h;++h)$e(b,N,h,E,l)}function er(l,h,b,N){l[h+0]&&Gr(l,h+0,b,N),l[h+16]&&Gr(l,h+16,b,N+4),l[h+32]&&Gr(l,h+32,b,N+128),l[h+48]&&Gr(l,h+48,b,N+128+4)}function nr(l,h,b,N){var E,O=s(16);for(E=0;4>E;++E){var P=l[h+0+E]+l[h+12+E],R=l[h+4+E]+l[h+8+E],U=l[h+4+E]-l[h+8+E],K=l[h+0+E]-l[h+12+E];O[0+E]=P+R,O[8+E]=P-R,O[4+E]=K+U,O[12+E]=K-U}for(E=0;4>E;++E)P=(l=O[0+4*E]+3)+O[3+4*E],R=O[1+4*E]+O[2+4*E],U=O[1+4*E]-O[2+4*E],K=l-O[3+4*E],b[N+0]=P+R>>3,b[N+16]=K+U>>3,b[N+32]=P-R>>3,b[N+48]=K-U>>3,N+=64}function jn(l,h,b){var N,E=h-32,O=oi,P=255-l[E-1];for(N=0;N<b;++N){var R,U=O,K=P+l[h-1];for(R=0;R<b;++R)l[h+R]=U[K+l[E+R]];h+=32}}function Fn(l,h){jn(l,h,4)}function ns(l,h){jn(l,h,8)}function mr(l,h){jn(l,h,16)}function Er(l,h){var b;for(b=0;16>b;++b)r(l,h+32*b,l,h-32,16)}function Vr(l,h){var b;for(b=16;0<b;--b)i(l,h,l[h-1],16),h+=32}function $r(l,h,b){var N;for(N=0;16>N;++N)i(h,b+32*N,l,16)}function qi(l,h){var b,N=16;for(b=0;16>b;++b)N+=l[h-1+32*b]+l[h+b-32];$r(N>>5,l,h)}function Ln(l,h){var b,N=8;for(b=0;16>b;++b)N+=l[h-1+32*b];$r(N>>4,l,h)}function Mn(l,h){var b,N=8;for(b=0;16>b;++b)N+=l[h+b-32];$r(N>>4,l,h)}function Ns(l,h){$r(128,l,h)}function we(l,h,b){return l+2*h+b+2>>2}function rs(l,h){var b,N=h-32;for(N=new Uint8Array([we(l[N-1],l[N+0],l[N+1]),we(l[N+0],l[N+1],l[N+2]),we(l[N+1],l[N+2],l[N+3]),we(l[N+2],l[N+3],l[N+4])]),b=0;4>b;++b)r(l,h+32*b,N,0,N.length)}function Ss(l,h){var b=l[h-1],N=l[h-1+32],E=l[h-1+64],O=l[h-1+96];wt(l,h+0,16843009*we(l[h-1-32],b,N)),wt(l,h+32,16843009*we(b,N,E)),wt(l,h+64,16843009*we(N,E,O)),wt(l,h+96,16843009*we(E,O,O))}function Cr(l,h){var b,N=4;for(b=0;4>b;++b)N+=l[h+b-32]+l[h-1+32*b];for(N>>=3,b=0;4>b;++b)i(l,h+32*b,N,4)}function Ws(l,h){var b=l[h-1+0],N=l[h-1+32],E=l[h-1+64],O=l[h-1-32],P=l[h+0-32],R=l[h+1-32],U=l[h+2-32],K=l[h+3-32];l[h+0+96]=we(N,E,l[h-1+96]),l[h+1+96]=l[h+0+64]=we(b,N,E),l[h+2+96]=l[h+1+64]=l[h+0+32]=we(O,b,N),l[h+3+96]=l[h+2+64]=l[h+1+32]=l[h+0+0]=we(P,O,b),l[h+3+64]=l[h+2+32]=l[h+1+0]=we(R,P,O),l[h+3+32]=l[h+2+0]=we(U,R,P),l[h+3+0]=we(K,U,R)}function Ls(l,h){var b=l[h+1-32],N=l[h+2-32],E=l[h+3-32],O=l[h+4-32],P=l[h+5-32],R=l[h+6-32],U=l[h+7-32];l[h+0+0]=we(l[h+0-32],b,N),l[h+1+0]=l[h+0+32]=we(b,N,E),l[h+2+0]=l[h+1+32]=l[h+0+64]=we(N,E,O),l[h+3+0]=l[h+2+32]=l[h+1+64]=l[h+0+96]=we(E,O,P),l[h+3+32]=l[h+2+64]=l[h+1+96]=we(O,P,R),l[h+3+64]=l[h+2+96]=we(P,R,U),l[h+3+96]=we(R,U,U)}function mi(l,h){var b=l[h-1+0],N=l[h-1+32],E=l[h-1+64],O=l[h-1-32],P=l[h+0-32],R=l[h+1-32],U=l[h+2-32],K=l[h+3-32];l[h+0+0]=l[h+1+64]=O+P+1>>1,l[h+1+0]=l[h+2+64]=P+R+1>>1,l[h+2+0]=l[h+3+64]=R+U+1>>1,l[h+3+0]=U+K+1>>1,l[h+0+96]=we(E,N,b),l[h+0+64]=we(N,b,O),l[h+0+32]=l[h+1+96]=we(b,O,P),l[h+1+32]=l[h+2+96]=we(O,P,R),l[h+2+32]=l[h+3+96]=we(P,R,U),l[h+3+32]=we(R,U,K)}function is(l,h){var b=l[h+0-32],N=l[h+1-32],E=l[h+2-32],O=l[h+3-32],P=l[h+4-32],R=l[h+5-32],U=l[h+6-32],K=l[h+7-32];l[h+0+0]=b+N+1>>1,l[h+1+0]=l[h+0+64]=N+E+1>>1,l[h+2+0]=l[h+1+64]=E+O+1>>1,l[h+3+0]=l[h+2+64]=O+P+1>>1,l[h+0+32]=we(b,N,E),l[h+1+32]=l[h+0+96]=we(N,E,O),l[h+2+32]=l[h+1+96]=we(E,O,P),l[h+3+32]=l[h+2+96]=we(O,P,R),l[h+3+64]=we(P,R,U),l[h+3+96]=we(R,U,K)}function Xr(l,h){var b=l[h-1+0],N=l[h-1+32],E=l[h-1+64],O=l[h-1+96];l[h+0+0]=b+N+1>>1,l[h+2+0]=l[h+0+32]=N+E+1>>1,l[h+2+32]=l[h+0+64]=E+O+1>>1,l[h+1+0]=we(b,N,E),l[h+3+0]=l[h+1+32]=we(N,E,O),l[h+3+32]=l[h+1+64]=we(E,O,O),l[h+3+64]=l[h+2+64]=l[h+0+96]=l[h+1+96]=l[h+2+96]=l[h+3+96]=O}function Gs(l,h){var b=l[h-1+0],N=l[h-1+32],E=l[h-1+64],O=l[h-1+96],P=l[h-1-32],R=l[h+0-32],U=l[h+1-32],K=l[h+2-32];l[h+0+0]=l[h+2+32]=b+P+1>>1,l[h+0+32]=l[h+2+64]=N+b+1>>1,l[h+0+64]=l[h+2+96]=E+N+1>>1,l[h+0+96]=O+E+1>>1,l[h+3+0]=we(R,U,K),l[h+2+0]=we(P,R,U),l[h+1+0]=l[h+3+32]=we(b,P,R),l[h+1+32]=l[h+3+64]=we(N,b,P),l[h+1+64]=l[h+3+96]=we(E,N,b),l[h+1+96]=we(O,E,N)}function ks(l,h){var b;for(b=0;8>b;++b)r(l,h+32*b,l,h-32,8)}function Es(l,h){var b;for(b=0;8>b;++b)i(l,h,l[h-1],8),h+=32}function Mi(l,h,b){var N;for(N=0;8>N;++N)i(h,b+32*N,l,8)}function _(l,h){var b,N=8;for(b=0;8>b;++b)N+=l[h+b-32]+l[h-1+32*b];Mi(N>>4,l,h)}function F(l,h){var b,N=4;for(b=0;8>b;++b)N+=l[h+b-32];Mi(N>>3,l,h)}function tt(l,h){var b,N=4;for(b=0;8>b;++b)N+=l[h-1+32*b];Mi(N>>3,l,h)}function Lt(l,h){Mi(128,l,h)}function ve(l,h,b){var N=l[h-b],E=l[h+0],O=3*(E-N)+Gu[1020+l[h-2*b]-l[h+b]],P=vc[112+(O+4>>3)];l[h-b]=oi[255+N+vc[112+(O+3>>3)]],l[h+0]=oi[255+E-P]}function he(l,h,b,N){var E=l[h+0],O=l[h+b];return _i[255+l[h-2*b]-l[h-b]]>N||_i[255+O-E]>N}function Ue(l,h,b,N){return 4*_i[255+l[h-b]-l[h+0]]+_i[255+l[h-2*b]-l[h+b]]<=N}function We(l,h,b,N,E){var O=l[h-3*b],P=l[h-2*b],R=l[h-b],U=l[h+0],K=l[h+b],st=l[h+2*b],vt=l[h+3*b];return 4*_i[255+R-U]+_i[255+P-K]>N?0:_i[255+l[h-4*b]-O]<=E&&_i[255+O-P]<=E&&_i[255+P-R]<=E&&_i[255+vt-st]<=E&&_i[255+st-K]<=E&&_i[255+K-U]<=E}function Pn(l,h,b,N){var E=2*N+1;for(N=0;16>N;++N)Ue(l,h+N,b,E)&&ve(l,h+N,b)}function je(l,h,b,N){var E=2*N+1;for(N=0;16>N;++N)Ue(l,h+N*b,1,E)&&ve(l,h+N*b,1)}function kn(l,h,b,N){var E;for(E=3;0<E;--E)Pn(l,h+=4*b,b,N)}function _r(l,h,b,N){var E;for(E=3;0<E;--E)je(l,h+=4,b,N)}function vn(l,h,b,N,E,O,P,R){for(O=2*O+1;0<E--;){if(We(l,h,b,O,P))if(he(l,h,b,R))ve(l,h,b);else{var U=l,K=h,st=b,vt=U[K-2*st],yt=U[K-st],ft=U[K+0],qt=U[K+st],St=U[K+2*st],at=27*(Ot=Gu[1020+3*(ft-yt)+Gu[1020+vt-qt]])+63>>7,ut=18*Ot+63>>7,Ot=9*Ot+63>>7;U[K-3*st]=oi[255+U[K-3*st]+Ot],U[K-2*st]=oi[255+vt+ut],U[K-st]=oi[255+yt+at],U[K+0]=oi[255+ft-at],U[K+st]=oi[255+qt-ut],U[K+2*st]=oi[255+St-Ot]}h+=N}}function yn(l,h,b,N,E,O,P,R){for(O=2*O+1;0<E--;){if(We(l,h,b,O,P))if(he(l,h,b,R))ve(l,h,b);else{var U=l,K=h,st=b,vt=U[K-st],yt=U[K+0],ft=U[K+st],qt=vc[112+((St=3*(yt-vt))+4>>3)],St=vc[112+(St+3>>3)],at=qt+1>>1;U[K-2*st]=oi[255+U[K-2*st]+at],U[K-st]=oi[255+vt+St],U[K+0]=oi[255+yt-qt],U[K+st]=oi[255+ft-at]}h+=N}}function Bn(l,h,b,N,E,O){vn(l,h,b,1,16,N,E,O)}function qr(l,h,b,N,E,O){vn(l,h,1,b,16,N,E,O)}function ii(l,h,b,N,E,O){var P;for(P=3;0<P;--P)yn(l,h+=4*b,b,1,16,N,E,O)}function Zr(l,h,b,N,E,O){var P;for(P=3;0<P;--P)yn(l,h+=4,1,b,16,N,E,O)}function Qo(l,h,b,N,E,O,P,R){vn(l,h,E,1,8,O,P,R),vn(b,N,E,1,8,O,P,R)}function ss(l,h,b,N,E,O,P,R){vn(l,h,1,E,8,O,P,R),vn(b,N,1,E,8,O,P,R)}function os(l,h,b,N,E,O,P,R){yn(l,h+4*E,E,1,8,O,P,R),yn(b,N+4*E,E,1,8,O,P,R)}function uc(l,h,b,N,E,O,P,R){yn(l,h+4,1,E,8,O,P,R),yn(b,N+4,1,E,8,O,P,R)}function ta(){this.ba=new rn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Xe,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function il(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function sl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function hc(){this.ua=0,this.Wa=new J,this.vb=new J,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new z,this.yc=new D}function $u(){this.xb=this.a=0,this.l=new Se,this.ca=new rn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new I,this.Pb=0,this.wd=new I,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new hc,this.ab=0,this.gc=o(4,sl),this.Oc=0}function ea(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Se,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Eo(l,h,b,N,E,O,P){for(l=l==null?0:l[h+0],h=0;h<P;++h)E[O+h]=l+b[N+h]&255,l=E[O+h]}function ol(l,h,b,N,E,O,P){var R;if(l==null)Eo(null,null,b,N,E,O,P);else for(R=0;R<P;++R)E[O+R]=l[h+R]+b[N+R]&255}function Ks(l,h,b,N,E,O,P){if(l==null)Eo(null,null,b,N,E,O,P);else{var R,U=l[h+0],K=U,st=U;for(R=0;R<P;++R)K=st+(U=l[h+R])-K,st=b[N+R]+(-256&K?0>K?0:255:K)&255,K=U,E[O+R]=st}}function al(l,h,b,N){var E=h.width,O=h.o;if(t(l!=null&&h!=null),0>b||0>=N||b+N>O)return null;if(!l.Cc){if(l.ga==null){var P;if(l.ga=new ea,(P=l.ga==null)||(P=h.width*h.o,t(l.Gb.length==0),l.Gb=s(P),l.Uc=0,l.Gb==null?P=0:(l.mb=l.Gb,l.nb=l.Uc,l.rc=null,P=1),P=!P),!P){P=l.ga;var R=l.Fa,U=l.P,K=l.qc,st=l.mb,vt=l.nb,yt=U+1,ft=K-1,qt=P.l;if(t(R!=null&&st!=null&&h!=null),to[0]=null,to[1]=Eo,to[2]=ol,to[3]=Ks,P.ca=st,P.tb=vt,P.c=h.width,P.i=h.height,t(0<P.c&&0<P.i),1>=K)h=0;else if(P.$a=R[U+0]>>0&3,P.Z=R[U+0]>>2&3,P.Lc=R[U+0]>>4&3,U=R[U+0]>>6&3,0>P.$a||1<P.$a||4<=P.Z||1<P.Lc||U)h=0;else if(qt.put=On,qt.ac=gn,qt.bc=Jn,qt.ma=P,qt.width=h.width,qt.height=h.height,qt.Da=h.Da,qt.v=h.v,qt.va=h.va,qt.j=h.j,qt.o=h.o,P.$a)t:{t(P.$a==1),h=Zn();e:for(;;){if(h==null){h=0;break t}if(t(P!=null),P.mc=h,h.c=P.c,h.i=P.i,h.l=P.l,h.l.ma=P,h.l.width=P.c,h.l.height=P.i,h.a=0,rt(h.m,R,yt,ft),!Dn(P.c,P.i,1,h,null)||(h.ab==1&&h.gc[0].hc==3&&wr(h.s)?(P.ic=1,R=h.c*h.i,h.Ta=null,h.Ua=0,h.V=s(R),h.Ba=0,h.V==null?(h.a=1,h=0):h=1):(P.ic=0,h=Vn(h,P.c)),!h))break e;h=1;break t}P.mc=null,h=0}else h=ft>=P.c*P.i;P=!h}if(P)return null;l.ga.Lc!=1?l.Ga=0:N=O-b}t(l.ga!=null),t(b+N<=O);t:{if(h=(R=l.ga).c,O=R.l.o,R.$a==0){if(yt=l.rc,ft=l.Vc,qt=l.Fa,U=l.P+1+b*h,K=l.mb,st=l.nb+b*h,t(U<=l.P+l.qc),R.Z!=0)for(t(to[R.Z]!=null),P=0;P<N;++P)to[R.Z](yt,ft,qt,U,K,st,h),yt=K,ft=st,st+=h,U+=h;else for(P=0;P<N;++P)r(K,st,qt,U,h),yt=K,ft=st,st+=h,U+=h;l.rc=yt,l.Vc=ft}else{if(t(R.mc!=null),h=b+N,t((P=R.mc)!=null),t(h<=P.i),P.C>=h)h=1;else if(R.ic||gt(),R.ic){R=P.V,yt=P.Ba,ft=P.c;var St=P.i,at=(qt=1,U=P.$/ft,K=P.$%ft,st=P.m,vt=P.s,P.$),ut=ft*St,Ot=ft*h,Rt=vt.wc,Pt=at<Ot?en(vt,K,U):null;t(at<=ut),t(h<=St),t(wr(vt));e:for(;;){for(;!st.h&&at<Ot;){if(K&Rt||(Pt=en(vt,K,U)),t(Pt!=null),M(st),256>(St=An(Pt.G[0],Pt.H[0],st)))R[yt+at]=St,++at,++K>=ft&&(K=0,++U<=h&&!(U%16)&&Sn(P,U));else{if(!(280>St)){qt=0;break e}St=ln(St-256,st);var ie,Gt=An(Pt.G[4],Pt.H[4],st);if(M(st),!(at>=(Gt=mn(ft,Gt=ln(Gt,st)))&&ut-at>=St)){qt=0;break e}for(ie=0;ie<St;++ie)R[yt+at+ie]=R[yt+at+ie-Gt];for(at+=St,K+=St;K>=ft;)K-=ft,++U<=h&&!(U%16)&&Sn(P,U);at<Ot&&K&Rt&&(Pt=en(vt,K,U))}t(st.h==Y(st))}Sn(P,U>h?h:U);break e}!qt||st.h&&at<ut?(qt=0,P.a=st.h?5:3):P.$=at,h=qt}else h=Xn(P,P.V,P.Ba,P.c,P.i,h,Hr);if(!h){N=0;break t}}b+N>=O&&(l.Cc=1),N=1}if(!N)return null;if(l.Cc&&((N=l.ga)!=null&&(N.mc=null),l.ga=null,0<l.Ga))return alert("todo:WebPDequantizeLevels"),null}return l.nb+b*E}function m(l,h,b,N,E,O){for(;0<E--;){var P,R=l,U=h+(b?1:0),K=l,st=h+(b?0:3);for(P=0;P<N;++P){var vt=K[st+4*P];vt!=255&&(vt*=32897,R[U+4*P+0]=R[U+4*P+0]*vt>>23,R[U+4*P+1]=R[U+4*P+1]*vt>>23,R[U+4*P+2]=R[U+4*P+2]*vt>>23)}h+=O}}function C(l,h,b,N,E){for(;0<N--;){var O;for(O=0;O<b;++O){var P=l[h+2*O+0],R=15&(K=l[h+2*O+1]),U=4369*R,K=(240&K|K>>4)*U>>16;l[h+2*O+0]=(240&P|P>>4)*U>>16&240|(15&P|P<<4)*U>>16>>4&15,l[h+2*O+1]=240&K|R}h+=E}}function X(l,h,b,N,E,O,P,R){var U,K,st=255;for(K=0;K<E;++K){for(U=0;U<N;++U){var vt=l[h+U];O[P+4*U]=vt,st&=vt}h+=b,P+=R}return st!=255}function it(l,h,b,N,E){var O;for(O=0;O<E;++O)b[N+O]=l[h+O]>>8}function gt(){wi=m,En=C,Cn=X,ir=it}function kt(l,h,b){V[l]=function(N,E,O,P,R,U,K,st,vt,yt,ft,qt,St,at,ut,Ot,Rt){var Pt,ie=Rt-1>>1,Gt=R[U+0]|K[st+0]<<16,be=vt[yt+0]|ft[qt+0]<<16;t(N!=null);var Yt=3*Gt+be+131074>>2;for(h(N[E+0],255&Yt,Yt>>16,St,at),O!=null&&(Yt=3*be+Gt+131074>>2,h(O[P+0],255&Yt,Yt>>16,ut,Ot)),Pt=1;Pt<=ie;++Pt){var an=R[U+Pt]|K[st+Pt]<<16,hn=vt[yt+Pt]|ft[qt+Pt]<<16,nn=Gt+an+be+hn+524296,Ye=nn+2*(an+be)>>3;Yt=Ye+Gt>>1,Gt=(nn=nn+2*(Gt+hn)>>3)+an>>1,h(N[E+2*Pt-1],255&Yt,Yt>>16,St,at+(2*Pt-1)*b),h(N[E+2*Pt-0],255&Gt,Gt>>16,St,at+(2*Pt-0)*b),O!=null&&(Yt=nn+be>>1,Gt=Ye+hn>>1,h(O[P+2*Pt-1],255&Yt,Yt>>16,ut,Ot+(2*Pt-1)*b),h(O[P+2*Pt+0],255&Gt,Gt>>16,ut,Ot+(2*Pt+0)*b)),Gt=an,be=hn}1&Rt||(Yt=3*Gt+be+131074>>2,h(N[E+Rt-1],255&Yt,Yt>>16,St,at+(Rt-1)*b),O!=null&&(Yt=3*be+Gt+131074>>2,h(O[P+Rt-1],255&Yt,Yt>>16,ut,Ot+(Rt-1)*b)))}}function jt(){Ai[yc]=g2,Ai[wc]=Ld,Ai[_d]=m2,Ai[_c]=kd,Ai[Ac]=Ed,Ai[Ku]=Cd,Ai[Ad]=b2,Ai[Yu]=Ld,Ai[Ju]=kd,Ai[xc]=Ed,Ai[Xu]=Cd}function ne(l){return l&~v2?0>l?0:255:l>>Id}function ge(l,h){return ne((19077*l>>8)+(26149*h>>8)-14234)}function Pe(l,h,b){return ne((19077*l>>8)-(6419*h>>8)-(13320*b>>8)+8708)}function Ce(l,h){return ne((19077*l>>8)+(33050*h>>8)-17685)}function Qe(l,h,b,N,E){N[E+0]=ge(l,b),N[E+1]=Pe(l,h,b),N[E+2]=Ce(l,h)}function Un(l,h,b,N,E){N[E+0]=Ce(l,h),N[E+1]=Pe(l,h,b),N[E+2]=ge(l,b)}function $n(l,h,b,N,E){var O=Pe(l,h,b);h=O<<3&224|Ce(l,h)>>3,N[E+0]=248&ge(l,b)|O>>5,N[E+1]=h}function cr(l,h,b,N,E){var O=240&Ce(l,h)|15;N[E+0]=240&ge(l,b)|Pe(l,h,b)>>4,N[E+1]=O}function Mr(l,h,b,N,E){N[E+0]=255,Qe(l,h,b,N,E+1)}function Ar(l,h,b,N,E){Un(l,h,b,N,E),N[E+3]=255}function Ri(l,h,b,N,E){Qe(l,h,b,N,E),N[E+3]=255}function si(l,h){return 0>l?0:l>h?h:l}function as(l,h,b){V[l]=function(N,E,O,P,R,U,K,st,vt){for(var yt=st+(-2&vt)*b;st!=yt;)h(N[E+0],O[P+0],R[U+0],K,st),h(N[E+1],O[P+0],R[U+0],K,st+b),E+=2,++P,++U,st+=2*b;1&vt&&h(N[E+0],O[P+0],R[U+0],K,st)}}function fc(l,h,b){return b==0?l==0?h==0?6:5:h==0?4:0:b}function ll(l,h,b,N,E){switch(l>>>30){case 3:Os(h,b,N,E,0);break;case 2:rr(h,b,N,E);break;case 1:Gr(h,b,N,E)}}function cl(l,h){var b,N,E=h.M,O=h.Nb,P=l.oc,R=l.pc+40,U=l.oc,K=l.pc+584,st=l.oc,vt=l.pc+600;for(b=0;16>b;++b)P[R+32*b-1]=129;for(b=0;8>b;++b)U[K+32*b-1]=129,st[vt+32*b-1]=129;for(0<E?P[R-1-32]=U[K-1-32]=st[vt-1-32]=129:(i(P,R-32-1,127,21),i(U,K-32-1,127,9),i(st,vt-32-1,127,9)),N=0;N<l.za;++N){var yt=h.ya[h.aa+N];if(0<N){for(b=-1;16>b;++b)r(P,R+32*b-4,P,R+32*b+12,4);for(b=-1;8>b;++b)r(U,K+32*b-4,U,K+32*b+4,4),r(st,vt+32*b-4,st,vt+32*b+4,4)}var ft=l.Gd,qt=l.Hd+N,St=yt.ad,at=yt.Hc;if(0<E&&(r(P,R-32,ft[qt].y,0,16),r(U,K-32,ft[qt].f,0,8),r(st,vt-32,ft[qt].ea,0,8)),yt.Za){var ut=P,Ot=R-32+16;for(0<E&&(N>=l.za-1?i(ut,Ot,ft[qt].y[15],4):r(ut,Ot,ft[qt+1].y,0,4)),b=0;4>b;b++)ut[Ot+128+b]=ut[Ot+256+b]=ut[Ot+384+b]=ut[Ot+0+b];for(b=0;16>b;++b,at<<=2)ut=P,Ot=R+Td[b],Di[yt.Ob[b]](ut,Ot),ll(at,St,16*+b,ut,Ot)}else if(ut=fc(N,E,yt.Ob[0]),Qs[ut](P,R),at!=0)for(b=0;16>b;++b,at<<=2)ll(at,St,16*+b,P,R+Td[b]);for(b=yt.Gc,ut=fc(N,E,yt.Dd),Ps[ut](U,K),Ps[ut](st,vt),at=St,ut=U,Ot=K,255&(yt=b>>0)&&(170&yt?pl(at,256,ut,Ot):vi(at,256,ut,Ot)),yt=st,at=vt,255&(b>>=8)&&(170&b?pl(St,320,yt,at):vi(St,320,yt,at)),E<l.Ub-1&&(r(ft[qt].y,0,P,R+480,16),r(ft[qt].f,0,U,K+224,8),r(ft[qt].ea,0,st,vt+224,8)),b=8*O*l.B,ft=l.sa,qt=l.ta+16*N+16*O*l.R,St=l.qa,yt=l.ra+8*N+b,at=l.Ha,ut=l.Ia+8*N+b,b=0;16>b;++b)r(ft,qt+b*l.R,P,R+32*b,16);for(b=0;8>b;++b)r(St,yt+b*l.B,U,K+32*b,8),r(at,ut+b*l.B,st,vt+32*b,8)}}function na(l,h,b,N,E,O,P,R,U){var K=[0],st=[0],vt=0,yt=U!=null?U.kd:0,ft=U??new il;if(l==null||12>b)return 7;ft.data=l,ft.w=h,ft.ha=b,h=[h],b=[b],ft.gb=[ft.gb];t:{var qt=h,St=b,at=ft.gb;if(t(l!=null),t(St!=null),t(at!=null),at[0]=0,12<=St[0]&&!e(l,qt[0],"RIFF")){if(e(l,qt[0]+8,"WEBP")){at=3;break t}var ut=Et(l,qt[0]+4);if(12>ut||4294967286<ut){at=3;break t}if(yt&&ut>St[0]-8){at=7;break t}at[0]=ut,qt[0]+=12,St[0]-=12}at=0}if(at!=0)return at;for(ut=0<ft.gb[0],b=b[0];;){t:{var Ot=l;St=h,at=b;var Rt=K,Pt=st,ie=qt=[0];if((Yt=vt=[vt])[0]=0,8>at[0])at=7;else{if(!e(Ot,St[0],"VP8X")){if(Et(Ot,St[0]+4)!=10){at=3;break t}if(18>at[0]){at=7;break t}var Gt=Et(Ot,St[0]+8),be=1+Ct(Ot,St[0]+12);if(2147483648<=be*(Ot=1+Ct(Ot,St[0]+15))){at=3;break t}ie!=null&&(ie[0]=Gt),Rt!=null&&(Rt[0]=be),Pt!=null&&(Pt[0]=Ot),St[0]+=18,at[0]-=18,Yt[0]=1}at=0}}if(vt=vt[0],qt=qt[0],at!=0)return at;if(St=!!(2&qt),!ut&&vt)return 3;if(O!=null&&(O[0]=!!(16&qt)),P!=null&&(P[0]=St),R!=null&&(R[0]=0),P=K[0],qt=st[0],vt&&St&&U==null){at=0;break}if(4>b){at=7;break}if(ut&&vt||!ut&&!vt&&!e(l,h[0],"ALPH")){b=[b],ft.na=[ft.na],ft.P=[ft.P],ft.Sa=[ft.Sa];t:{Gt=l,at=h,ut=b;var Yt=ft.gb;Rt=ft.na,Pt=ft.P,ie=ft.Sa,be=22,t(Gt!=null),t(ut!=null),Ot=at[0];var an=ut[0];for(t(Rt!=null),t(ie!=null),Rt[0]=null,Pt[0]=null,ie[0]=0;;){if(at[0]=Ot,ut[0]=an,8>an){at=7;break t}var hn=Et(Gt,Ot+4);if(4294967286<hn){at=3;break t}var nn=8+hn+1&-2;if(be+=nn,0<Yt&&be>Yt){at=3;break t}if(!e(Gt,Ot,"VP8 ")||!e(Gt,Ot,"VP8L")){at=0;break t}if(an[0]<nn){at=7;break t}e(Gt,Ot,"ALPH")||(Rt[0]=Gt,Pt[0]=Ot+8,ie[0]=hn),Ot+=nn,an-=nn}}if(b=b[0],ft.na=ft.na[0],ft.P=ft.P[0],ft.Sa=ft.Sa[0],at!=0)break}b=[b],ft.Ja=[ft.Ja],ft.xa=[ft.xa];t:if(Yt=l,at=h,ut=b,Rt=ft.gb[0],Pt=ft.Ja,ie=ft.xa,Gt=at[0],Ot=!e(Yt,Gt,"VP8 "),be=!e(Yt,Gt,"VP8L"),t(Yt!=null),t(ut!=null),t(Pt!=null),t(ie!=null),8>ut[0])at=7;else{if(Ot||be){if(Yt=Et(Yt,Gt+4),12<=Rt&&Yt>Rt-12){at=3;break t}if(yt&&Yt>ut[0]-8){at=7;break t}Pt[0]=Yt,at[0]+=8,ut[0]-=8,ie[0]=be}else ie[0]=5<=ut[0]&&Yt[Gt+0]==47&&!(Yt[Gt+4]>>5),Pt[0]=ut[0];at=0}if(b=b[0],ft.Ja=ft.Ja[0],ft.xa=ft.xa[0],h=h[0],at!=0)break;if(4294967286<ft.Ja)return 3;if(R==null||St||(R[0]=ft.xa?2:1),P=[P],qt=[qt],ft.xa){if(5>b){at=7;break}R=P,yt=qt,St=O,l==null||5>b?l=0:5<=b&&l[h+0]==47&&!(l[h+4]>>5)?(ut=[0],Yt=[0],Rt=[0],rt(Pt=new I,l,h,b),ee(Pt,ut,Yt,Rt)?(R!=null&&(R[0]=ut[0]),yt!=null&&(yt[0]=Yt[0]),St!=null&&(St[0]=Rt[0]),l=1):l=0):l=0}else{if(10>b){at=7;break}R=qt,l==null||10>b||!dr(l,h+3,b-3)?l=0:(yt=l[h+0]|l[h+1]<<8|l[h+2]<<16,St=16383&(l[h+7]<<8|l[h+6]),l=16383&(l[h+9]<<8|l[h+8]),1&yt||3<(yt>>1&7)||!(yt>>4&1)||yt>>5>=ft.Ja||!St||!l?l=0:(P&&(P[0]=St),R&&(R[0]=l),l=1))}if(!l||(P=P[0],qt=qt[0],vt&&(K[0]!=P||st[0]!=qt)))return 3;U!=null&&(U[0]=ft,U.offset=h-U.w,t(4294967286>h-U.w),t(U.offset==U.ha-b));break}return at==0||at==7&&vt&&U==null?(O!=null&&(O[0]|=ft.na!=null&&0<ft.na.length),N!=null&&(N[0]=P),E!=null&&(E[0]=qt),0):at}function ul(l,h,b){var N=h.width,E=h.height,O=0,P=0,R=N,U=E;if(h.Da=l!=null&&0<l.Da,h.Da&&(R=l.cd,U=l.bd,O=l.v,P=l.j,11>b||(O&=-2,P&=-2),0>O||0>P||0>=R||0>=U||O+R>N||P+U>E))return 0;if(h.v=O,h.j=P,h.va=O+R,h.o=P+U,h.U=R,h.T=U,h.da=l!=null&&0<l.da,h.da){if(!ae(R,U,b=[l.ib],O=[l.hb]))return 0;h.ib=b[0],h.hb=O[0]}return h.ob=l!=null&&l.ob,h.Kb=l==null||!l.Sd,h.da&&(h.ob=h.ib<3*N/4&&h.hb<3*E/4,h.Kb=0),1}function hl(l){if(l==null)return 2;if(11>l.S){var h=l.f.RGBA;h.fb+=(l.height-1)*h.A,h.A=-h.A}else h=l.f.kb,l=l.height,h.O+=(l-1)*h.fa,h.fa=-h.fa,h.N+=(l-1>>1)*h.Ab,h.Ab=-h.Ab,h.W+=(l-1>>1)*h.Db,h.Db=-h.Db,h.F!=null&&(h.J+=(l-1)*h.lb,h.lb=-h.lb);return 0}function ra(l,h,b,N){if(N==null||0>=l||0>=h)return 2;if(b!=null){if(b.Da){var E=b.cd,O=b.bd,P=-2&b.v,R=-2&b.j;if(0>P||0>R||0>=E||0>=O||P+E>l||R+O>h)return 2;l=E,h=O}if(b.da){if(!ae(l,h,E=[b.ib],O=[b.hb]))return 2;l=E[0],h=O[0]}}N.width=l,N.height=h;t:{var U=N.width,K=N.height;if(l=N.S,0>=U||0>=K||!(l>=yc&&13>l))l=2;else{if(0>=N.Rd&&N.sd==null){P=O=E=h=0;var st=(R=U*Pd[l])*K;if(11>l||(O=(K+1)/2*(h=(U+1)/2),l==12&&(P=(E=U)*K)),(K=s(st+2*O+P))==null){l=1;break t}N.sd=K,11>l?((U=N.f.RGBA).eb=K,U.fb=0,U.A=R,U.size=st):((U=N.f.kb).y=K,U.O=0,U.fa=R,U.Fd=st,U.f=K,U.N=0+st,U.Ab=h,U.Cd=O,U.ea=K,U.W=0+st+O,U.Db=h,U.Ed=O,l==12&&(U.F=K,U.J=0+st+2*O),U.Tc=P,U.lb=E)}if(h=1,E=N.S,O=N.width,P=N.height,E>=yc&&13>E)if(11>E)l=N.f.RGBA,h&=(R=Math.abs(l.A))*(P-1)+O<=l.size,h&=R>=O*Pd[E],h&=l.eb!=null;else{l=N.f.kb,R=(O+1)/2,st=(P+1)/2,U=Math.abs(l.fa),K=Math.abs(l.Ab);var vt=Math.abs(l.Db),yt=Math.abs(l.lb),ft=yt*(P-1)+O;h&=U*(P-1)+O<=l.Fd,h&=K*(st-1)+R<=l.Cd,h=(h&=vt*(st-1)+R<=l.Ed)&U>=O&K>=R&vt>=R,h&=l.y!=null,h&=l.f!=null,h&=l.ea!=null,E==12&&(h&=yt>=O,h&=ft<=l.Tc,h&=l.F!=null)}else h=0;l=h?0:2}}return l!=0||b!=null&&b.fd&&(l=hl(N)),l}var Ir=64,ia=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],sa=24,oa=32,fl=8,Qr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];pt("Predictor0","PredictorAdd0"),V.Predictor0=function(){return 4278190080},V.Predictor1=function(l){return l},V.Predictor2=function(l,h,b){return h[b+0]},V.Predictor3=function(l,h,b){return h[b+1]},V.Predictor4=function(l,h,b){return h[b-1]},V.Predictor5=function(l,h,b){return Mt(Mt(l,h[b+1]),h[b+0])},V.Predictor6=function(l,h,b){return Mt(l,h[b-1])},V.Predictor7=function(l,h,b){return Mt(l,h[b+0])},V.Predictor8=function(l,h,b){return Mt(h[b-1],h[b+0])},V.Predictor9=function(l,h,b){return Mt(h[b+0],h[b+1])},V.Predictor10=function(l,h,b){return Mt(Mt(l,h[b-1]),Mt(h[b+0],h[b+1]))},V.Predictor11=function(l,h,b){var N=h[b+0];return 0>=Zt(N>>24&255,l>>24&255,(h=h[b-1])>>24&255)+Zt(N>>16&255,l>>16&255,h>>16&255)+Zt(N>>8&255,l>>8&255,h>>8&255)+Zt(255&N,255&l,255&h)?N:l},V.Predictor12=function(l,h,b){var N=h[b+0];return(Ht((l>>24&255)+(N>>24&255)-((h=h[b-1])>>24&255))<<24|Ht((l>>16&255)+(N>>16&255)-(h>>16&255))<<16|Ht((l>>8&255)+(N>>8&255)-(h>>8&255))<<8|Ht((255&l)+(255&N)-(255&h)))>>>0},V.Predictor13=function(l,h,b){var N=h[b-1];return(zt((l=Mt(l,h[b+0]))>>24&255,N>>24&255)<<24|zt(l>>16&255,N>>16&255)<<16|zt(l>>8&255,N>>8&255)<<8|zt(l>>0&255,N>>0&255))>>>0};var Wu=V.PredictorAdd0;V.PredictorAdd1=Jt,pt("Predictor2","PredictorAdd2"),pt("Predictor3","PredictorAdd3"),pt("Predictor4","PredictorAdd4"),pt("Predictor5","PredictorAdd5"),pt("Predictor6","PredictorAdd6"),pt("Predictor7","PredictorAdd7"),pt("Predictor8","PredictorAdd8"),pt("Predictor9","PredictorAdd9"),pt("Predictor10","PredictorAdd10"),pt("Predictor11","PredictorAdd11"),pt("Predictor12","PredictorAdd12"),pt("Predictor13","PredictorAdd13");var dl=V.PredictorAdd2;Kt("ColorIndexInverseTransform","MapARGB","32b",function(l){return l>>8&255},function(l){return l}),Kt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(l){return l},function(l){return l>>8&255});var dc,bi=V.ColorIndexInverseTransform,aa=V.MapARGB,pc=V.VP8LColorIndexInverseTransformAlpha,gc=V.MapAlpha,Ys=V.VP8LPredictorsAdd=[];Ys.length=16,(V.VP8LPredictors=[]).length=16,(V.VP8LPredictorsAdd_C=[]).length=16,(V.VP8LPredictors_C=[]).length=16;var Co,ti,Wr,Js,Cs,Is,la,Os,rr,pl,Gr,vi,ca,mc,gl,Io,Oo,Xs,To,ua,Po,Zs,ml,yi,wi,En,Cn,ir,br=s(511),Ts=s(2041),bl=s(225),ha=s(767),bc=0,Gu=Ts,vc=bl,oi=ha,_i=br,yc=0,wc=1,_d=2,_c=3,Ac=4,Ku=5,Ad=6,Yu=7,Ju=8,xc=9,Xu=10,e2=[2,3,7],n2=[3,3,11],xd=[280,256,256,256,40],r2=[0,1,1,1,0],i2=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],s2=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],o2=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],a2=8,Zu=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Qu=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],vl=null,l2=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],c2=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Nd=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],u2=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],h2=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],f2=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],d2=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Qs=[],Di=[],Ps=[],p2=1,Sd=2,to=[],Ai=[];kt("UpsampleRgbLinePair",Qe,3),kt("UpsampleBgrLinePair",Un,3),kt("UpsampleRgbaLinePair",Ri,4),kt("UpsampleBgraLinePair",Ar,4),kt("UpsampleArgbLinePair",Mr,4),kt("UpsampleRgba4444LinePair",cr,2),kt("UpsampleRgb565LinePair",$n,2);var g2=V.UpsampleRgbLinePair,m2=V.UpsampleBgrLinePair,Ld=V.UpsampleRgbaLinePair,kd=V.UpsampleBgraLinePair,Ed=V.UpsampleArgbLinePair,Cd=V.UpsampleRgba4444LinePair,b2=V.UpsampleRgb565LinePair,Nc=16,Sc=1<<Nc-1,yl=-227,th=482,Id=6,v2=(256<<Id)-1,Od=0,y2=s(256),w2=s(256),_2=s(256),A2=s(256),x2=s(th-yl),N2=s(th-yl);as("YuvToRgbRow",Qe,3),as("YuvToBgrRow",Un,3),as("YuvToRgbaRow",Ri,4),as("YuvToBgraRow",Ar,4),as("YuvToArgbRow",Mr,4),as("YuvToRgba4444Row",cr,2),as("YuvToRgb565Row",$n,2);var Td=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Lc=[0,2,8],S2=[8,7,6,4,4,2,2,2,1,1,1,1],L2=1;this.WebPDecodeRGBA=function(l,h,b,N,E){var O=wc,P=new ta,R=new rn;P.ba=R,R.S=O,R.width=[R.width],R.height=[R.height];var U=R.width,K=R.height,st=new sn;if(st==null||l==null)var vt=2;else t(st!=null),vt=na(l,h,b,st.width,st.height,st.Pd,st.Qd,st.format,null);if(vt!=0?U=0:(U!=null&&(U[0]=st.width[0]),K!=null&&(K[0]=st.height[0]),U=1),U){R.width=R.width[0],R.height=R.height[0],N!=null&&(N[0]=R.width),E!=null&&(E[0]=R.height);t:{if(N=new Se,(E=new il).data=l,E.w=h,E.ha=b,E.kd=1,h=[0],t(E!=null),((l=na(E.data,E.w,E.ha,null,null,null,h,null,E))==0||l==7)&&h[0]&&(l=4),(h=l)==0){if(t(P!=null),N.data=E.data,N.w=E.w+E.offset,N.ha=E.ha-E.offset,N.put=On,N.ac=gn,N.bc=Jn,N.ma=P,E.xa){if((l=Zn())==null){P=1;break t}if(function(yt,ft){var qt=[0],St=[0],at=[0];e:for(;;){if(yt==null)return 0;if(ft==null)return yt.a=2,0;if(yt.l=ft,yt.a=0,rt(yt.m,ft.data,ft.w,ft.ha),!ee(yt.m,qt,St,at)){yt.a=3;break e}if(yt.xb=Sd,ft.width=qt[0],ft.height=St[0],!Dn(qt[0],St[0],1,yt,null))break e;return 1}return t(yt.a!=0),0}(l,N)){if(N=(h=ra(N.width,N.height,P.Oa,P.ba))==0){e:{N=l;n:for(;;){if(N==null){N=0;break e}if(t(N.s.yc!=null),t(N.s.Ya!=null),t(0<N.s.Wb),t((b=N.l)!=null),t((E=b.ma)!=null),N.xb!=0){if(N.ca=E.ba,N.tb=E.tb,t(N.ca!=null),!ul(E.Oa,b,_c)){N.a=2;break n}if(!Vn(N,b.width)||b.da)break n;if((b.da||Le(N.ca.S))&&gt(),11>N.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),N.ca.f.kb.F!=null&&gt()),N.Pb&&0<N.s.ua&&N.s.vb.X==null&&!Ut(N.s.vb,N.s.Wa.Xa)){N.a=1;break n}N.xb=0}if(!Xn(N,N.V,N.Ba,N.c,N.i,b.o,kr))break n;E.Dc=N.Ma,N=1;break e}t(N.a!=0),N=0}N=!N}N&&(h=l.a)}else h=l.a}else{if((l=new un)==null){P=1;break t}if(l.Fa=E.na,l.P=E.P,l.qc=E.Sa,Qn(l,N)){if((h=ra(N.width,N.height,P.Oa,P.ba))==0){if(l.Aa=0,b=P.Oa,t((E=l)!=null),b!=null){if(0<(U=0>(U=b.Md)?0:100<U?255:255*U/100)){for(K=st=0;4>K;++K)12>(vt=E.pb[K]).lc&&(vt.ia=U*S2[0>vt.lc?0:vt.lc]>>3),st|=vt.ia;st&&(alert("todo:VP8InitRandom"),E.ia=1)}E.Ga=b.Id,100<E.Ga?E.Ga=100:0>E.Ga&&(E.Ga=0)}Be(l,N)||(h=l.a)}}else h=l.a}h==0&&P.Oa!=null&&P.Oa.fd&&(h=hl(P.ba))}P=h}O=P!=0?null:11>O?R.f.RGBA.eb:R.f.kb.y}else O=null;return O};var Pd=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(V,nt){for(var ct="",q=0;q<4;q++)ct+=String.fromCharCode(V[nt++]);return ct}function d(V,nt){return(V[nt+0]<<0|V[nt+1]<<8|V[nt+2]<<16)>>>0}function p(V,nt){return(V[nt+0]<<0|V[nt+1]<<8|V[nt+2]<<16|V[nt+3]<<24)>>>0}new c;var g=[0],f=[0],v=[],x=new c,S=n,y=function(V,nt){var ct={},q=0,D=!1,W=0,z=0;if(ct.frames=[],!function(j,Y,L,M){for(var H=0;H<M;H++)if(j[Y+H]!=L.charCodeAt(H))return!0;return!1}(V,nt,"RIFF",4)){var Q,Z;for(p(V,nt+=4),nt+=8;nt<V.length;){var lt=u(V,nt),rt=p(V,nt+=4);nt+=4;var mt=rt+(1&rt);switch(lt){case"VP8 ":case"VP8L":ct.frames[q]===void 0&&(ct.frames[q]={}),(I=ct.frames[q]).src_off=D?z:nt-8,I.src_size=W+rt+8,q++,D&&(D=!1,W=0,z=0);break;case"VP8X":(I=ct.header={}).feature_flags=V[nt];var ht=nt+4;I.canvas_width=1+d(V,ht),ht+=3,I.canvas_height=1+d(V,ht),ht+=3;break;case"ALPH":D=!0,W=mt+8,z=nt-8;break;case"ANIM":(I=ct.header).bgcolor=p(V,nt),ht=nt+4,I.loop_count=(Q=V)[(Z=ht)+0]<<0|Q[Z+1]<<8,ht+=2;break;case"ANMF":var Dt,I;(I=ct.frames[q]={}).offset_x=2*d(V,nt),nt+=3,I.offset_y=2*d(V,nt),nt+=3,I.width=1+d(V,nt),nt+=3,I.height=1+d(V,nt),nt+=3,I.duration=d(V,nt),nt+=3,Dt=V[nt++],I.dispose=1&Dt,I.blend=Dt>>1&1}lt!="ANMF"&&(nt+=mt)}return ct}}(S,0);y.response=S,y.rgbaoutput=!0,y.dataurl=!1;var A=y.header?y.header:null,w=y.frames?y.frames:null;if(A){A.loop_counter=A.loop_count,g=[A.canvas_height],f=[A.canvas_width];for(var k=0;k<w.length&&w[k].blend!=0;k++);}var T=w[0],B=x.WebPDecodeRGBA(S,T.src_off,T.src_size,f,g);T.rgba=B,T.imgwidth=f[0],T.imgheight=g[0];for(var $=0;$<f[0]*g[0]*4;$++)v[$]=B[$];return this.width=f,this.height=g,this.data=v,this}(function(n){var t=function(){return typeof uf=="function"},e=function(g,f,v,x){var S=4,y=o;switch(x){case n.image_compression.FAST:S=1,y=s;break;case n.image_compression.MEDIUM:S=6,y=a;break;case n.image_compression.SLOW:S=9,y=c}g=r(g,f,v,y);var A=uf(g,{level:S});return n.__addimage__.arrayBufferToBinaryString(A)},r=function(g,f,v,x){for(var S,y,A,w=g.length/f,k=new Uint8Array(g.length+w),T=d(),B=0;B<w;B+=1){if(A=B*f,S=g.subarray(A,A+f),x)k.set(x(S,v,y),A+B);else{for(var $,V=T.length,nt=[];$<V;$+=1)nt[$]=T[$](S,v,y);var ct=p(nt.concat());k.set(nt[ct],A+B)}y=S}return k},i=function(g){var f=Array.apply([],g);return f.unshift(0),f},s=function(g,f){var v,x=[],S=g.length;x[0]=1;for(var y=0;y<S;y+=1)v=g[y-f]||0,x[y+1]=g[y]-v+256&255;return x},o=function(g,f,v){var x,S=[],y=g.length;S[0]=2;for(var A=0;A<y;A+=1)x=v&&v[A]||0,S[A+1]=g[A]-x+256&255;return S},a=function(g,f,v){var x,S,y=[],A=g.length;y[0]=3;for(var w=0;w<A;w+=1)x=g[w-f]||0,S=v&&v[w]||0,y[w+1]=g[w]+256-(x+S>>>1)&255;return y},c=function(g,f,v){var x,S,y,A,w=[],k=g.length;w[0]=4;for(var T=0;T<k;T+=1)x=g[T-f]||0,S=v&&v[T]||0,y=v&&v[T-f]||0,A=u(x,S,y),w[T+1]=g[T]-A+256&255;return w},u=function(g,f,v){if(g===f&&f===v)return g;var x=Math.abs(f-v),S=Math.abs(g-v),y=Math.abs(g+f-v-v);return x<=S&&x<=y?g:S<=y?f:v},d=function(){return[i,s,o,a,c]},p=function(g){var f=g.map(function(v){return v.reduce(function(x,S){return x+Math.abs(S)},0)});return f.indexOf(Math.min.apply(null,f))};n.processPNG=function(g,f,v,x){var S,y,A,w,k,T,B,$,V,nt,ct,q,D,W,z,Q=this.decode.FLATE_DECODE,Z="";if(this.__addimage__.isArrayBuffer(g)&&(g=new Uint8Array(g)),this.__addimage__.isArrayBufferView(g)){if(g=(A=new ty(g)).imgData,y=A.bits,S=A.colorSpace,k=A.colors,[4,6].indexOf(A.colorType)!==-1){if(A.bits===8){V=($=A.pixelBitlength==32?new Uint32Array(A.decodePixels().buffer):A.pixelBitlength==16?new Uint16Array(A.decodePixels().buffer):new Uint8Array(A.decodePixels().buffer)).length,ct=new Uint8Array(V*A.colors),nt=new Uint8Array(V);var lt,rt=A.pixelBitlength-A.bits;for(W=0,z=0;W<V;W++){for(D=$[W],lt=0;lt<rt;)ct[z++]=D>>>lt&255,lt+=A.bits;nt[W]=D>>>lt&255}}if(A.bits===16){V=($=new Uint32Array(A.decodePixels().buffer)).length,ct=new Uint8Array(V*(32/A.pixelBitlength)*A.colors),nt=new Uint8Array(V*(32/A.pixelBitlength)),q=A.colors>1,W=0,z=0;for(var mt=0;W<V;)D=$[W++],ct[z++]=D>>>0&255,q&&(ct[z++]=D>>>16&255,D=$[W++],ct[z++]=D>>>0&255),nt[mt++]=D>>>16&255;y=8}x!==n.image_compression.NONE&&t()?(g=e(ct,A.width*A.colors,A.colors,x),B=e(nt,A.width,1,x)):(g=ct,B=nt,Q=void 0)}if(A.colorType===3&&(S=this.color_spaces.INDEXED,T=A.palette,A.transparency.indexed)){var ht=A.transparency.indexed,Dt=0;for(W=0,V=ht.length;W<V;++W)Dt+=ht[W];if((Dt/=255)===V-1&&ht.indexOf(0)!==-1)w=[ht.indexOf(0)];else if(Dt!==V){for($=A.decodePixels(),nt=new Uint8Array($.length),W=0,V=$.length;W<V;W++)nt[W]=ht[$[W]];B=e(nt,A.width,1)}}var I=function(j){var Y;switch(j){case n.image_compression.FAST:Y=11;break;case n.image_compression.MEDIUM:Y=13;break;case n.image_compression.SLOW:Y=14;break;default:Y=12}return Y}(x);return Q===this.decode.FLATE_DECODE&&(Z="/Predictor "+I+" "),Z+="/Colors "+k+" /BitsPerComponent "+y+" /Columns "+A.width,(this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),(B&&this.__addimage__.isArrayBuffer(B)||this.__addimage__.isArrayBufferView(B))&&(B=this.__addimage__.arrayBufferToBinaryString(B)),{alias:v,data:g,index:f,filter:Q,decodeParameters:Z,transparency:w,palette:T,sMask:B,predictor:I,width:A.width,height:A.height,bitsPerComponent:y,colorSpace:S}}}})(Ae.API),function(n){n.processGIF89A=function(t,e,r,i){var s=new ey(t),o=s.width,a=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:a},d=new Eh(100).encode(u,100);return n.processJPEG.call(this,d,e,r,i)},n.processGIF87A=n.processGIF89A}(Ae.API),Ui.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var t=0;t<n;t++){var e=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:r,blue:e,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ui.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[n]()}catch(e){Nn.log("bit decode error:"+e)}},Ui.prototype.bit1=function(){var n,t=Math.ceil(this.width/8),e=t%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var c=this.palette[s>>7-a&1];this.data[o+4*a]=c.blue,this.data[o+4*a+1]=c.green,this.data[o+4*a+2]=c.red,this.data[o+4*a+3]=255}e!==0&&(this.pos+=4-e)}},Ui.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),t=n%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<n;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,c=15&s,u=this.palette[a];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Ui.prototype.bit8=function(){for(var n=this.width%4,t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},Ui.prototype.bit15=function(){for(var n=this.width%3,t=parseInt("11111",2),e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,a=(s>>5&t)/t*255|0,c=(s>>10&t)/t*255|0,u=s>>15?255:0,d=r*this.width*4+4*i;this.data[d]=c,this.data[d+1]=a,this.data[d+2]=o,this.data[d+3]=u}this.pos+=n}},Ui.prototype.bit16=function(){for(var n=this.width%3,t=parseInt("11111",2),e=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&t)/t*255|0,c=(o>>5&e)/e*255|0,u=(o>>11)/t*255|0,d=i*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=a,this.data[d+3]=255}this.pos+=n}},Ui.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var t=this.bottom_up?n:this.height-1-n,e=0;e<this.width;e++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*e;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Ui.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var t=this.bottom_up?n:this.height-1-n,e=0;e<this.width;e++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*e;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},Ui.prototype.getData=function(){return this.data},function(n){n.processBMP=function(t,e,r,i){var s=new Ui(t,!1),o=s.width,a=s.height,c={data:s.getData(),width:o,height:a},u=new Eh(100).encode(c,100);return n.processJPEG.call(this,u,e,r,i)}}(Ae.API),$1.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(t,e,r,i){var s=new $1(t),o=s.width,a=s.height,c={data:s.getData(),width:o,height:a},u=new Eh(100).encode(c,100);return n.processJPEG.call(this,u,e,r,i)}}(Ae.API),Ae.API.processRGBA=function(n,t,e){for(var r=n.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,c=0,u=0;u<i;u+=4){var d=r[u],p=r[u+1],g=r[u+2],f=r[u+3];s[a++]=d,s[a++]=p,s[a++]=g,o[c++]=f}var v=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:v,index:t,alias:e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Ae.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ba=Ae.API,$c=ba.getCharWidthsArray=function(n,t){var e,r,i=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),a=t.widths?t.widths:i.metadata.Unicode.widths,c=a.fof?a.fof:1,u=t.kerning?t.kerning:i.metadata.Unicode.kerning,d=u.fof?u.fof:1,p=t.doKerning!==!1,g=0,f=n.length,v=0,x=a[0]||c,S=[];for(e=0;e<f;e++)r=n.charCodeAt(e),typeof i.metadata.widthOfString=="function"?S.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(g=p&&pn(u[r])==="object"&&!isNaN(parseInt(u[r][v],10))?u[r][v]/d:0,S.push((a[r]||x)/c+g)),v=r;return S},U1=ba.getStringUnitWidth=function(n,t){var e=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return ba.processArabic&&(n=ba.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,e,i)/e:$c.apply(this,arguments).reduce(function(s,o){return s+o},0)},z1=function(n,t,e,r){for(var i=[],s=0,o=n.length,a=0;s!==o&&a+t[s]<e;)a+=t[s],s++;i.push(n.slice(0,s));var c=s;for(a=0;s!==o;)a+t[s]>r&&(i.push(n.slice(c,s)),a=0,c=s),a+=t[s],s++;return c!==s&&i.push(n.slice(c,s)),i},H1=function(n,t,e){e||(e={});var r,i,s,o,a,c,u,d=[],p=[d],g=e.textIndent||0,f=0,v=0,x=n.split(" "),S=$c.apply(this,[" ",e])[0];if(c=e.lineIndent===-1?x[0].length+2:e.lineIndent||0){var y=Array(c).join(" "),A=[];x.map(function(k){(k=k.split(/\s*\n/)).length>1?A=A.concat(k.map(function(T,B){return(B&&T.length?`
`:"")+T})):A.push(k[0])}),x=A,c=U1.apply(this,[y,e])}for(s=0,o=x.length;s<o;s++){var w=0;if(r=x[s],c&&r[0]==`
`&&(r=r.substr(1),w=1),g+f+(v=(i=$c.apply(this,[r,e])).reduce(function(k,T){return k+T},0))>t||w){if(v>t){for(a=z1.apply(this,[r,i,t-(g+f),t]),d.push(a.shift()),d=[a.pop()];a.length;)p.push([a.shift()]);v=i.slice(r.length-(d[0]?d[0].length:0)).reduce(function(k,T){return k+T},0)}else d=[r];p.push(d),g=v+c,f=S}else d.push(r),g+=f+v,f=S}return u=c?function(k,T){return(T?y:"")+k.join(" ")}:function(k){return k.join(" ")},p.map(u)},ba.splitTextToSize=function(n,t,e){var r,i=(e=e||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var p=this.internal.getFont(d.fontName,d.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,e);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/i;s.textIndent=e.textIndent?1*e.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=e.lineIndent;var a,c,u=[];for(a=0,c=r.length;a<c;a++)u=u.concat(H1.apply(this,[r[a],o,s]));return u},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",e={},r={},i=0;i<t.length;i++)e[t[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=t[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=n.__fontmetrics__.compress=function(p){var g,f,v,x,S=["{"];for(var y in p){if(g=p[y],isNaN(parseInt(y,10))?f="'"+y+"'":(y=parseInt(y,10),f=(f=s(y).slice(2)).slice(0,-1)+r[f.slice(-1)]),typeof g=="number")g<0?(v=s(g).slice(3),x="-"):(v=s(g).slice(2),x=""),v=x+v.slice(0,-1)+r[v.slice(-1)];else{if(pn(g)!=="object")throw new Error("Don't know what to do with value type "+pn(g)+".");v=o(g)}S.push(f+v)}return S.push("}"),S.join("")},a=n.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,f,v,x,S={},y=1,A=S,w=[],k="",T="",B=p.length-1,$=1;$<B;$+=1)(x=p[$])=="'"?g?(v=g.join(""),g=void 0):g=[]:g?g.push(x):x=="{"?(w.push([A,v]),A={},v=void 0):x=="}"?((f=w.pop())[0][f[1]]=A,v=void 0,A=f[0]):x=="-"?y=-1:v===void 0?e.hasOwnProperty(x)?(k+=e[x],v=parseInt(k,16)*y,y=1,k=""):k+=x:e.hasOwnProperty(x)?(T+=e[x],A[v]=parseInt(T,16)*y,y=1,v=void 0,T=""):T+=x;return S},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(p){var g=p.font,f=d.Unicode[g.postScriptName];f&&(g.metadata.Unicode={},g.metadata.Unicode.widths=f.widths,g.metadata.Unicode.kerning=f.kerning);var v=u.Unicode[g.postScriptName];v&&(g.metadata.Unicode.encoding=v,g.encoding=v.codePages[0])}])}(Ae.API),function(n){var t=function(e){for(var r=e.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=e.charCodeAt(s);return i};n.API.events.push(["addFont",function(e){var r=void 0,i=e.font,s=e.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?t(a):t(Cl(a)),o.metadata=n.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(Ae),function(n){function t(){return(xe.canvg?Promise.resolve(xe.canvg):Uh(()=>import("./index.es-2b1ae654.js"),["assets/index.es-2b1ae654.js","assets/index-54f00b74.js","assets/index-a83636ab.css","assets/execcontent-932843e6.js","assets/index-d2199a5c.js","assets/index-364804fb.js"])).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e})}Ae.API.addSvgAsImage=function(e,r,i,s,o,a,c,u){if(isNaN(r)||isNaN(i))throw Nn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Nn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=o;var p=d.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,d.width,d.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return t().then(function(v){return v.fromString(p,e,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(g)}).then(function(){f.addImage(d.toDataURL("image/jpeg",1),r,i,s,o,c,u)})}}(),Ae.API.putTotalPages=function(n){var t,e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(n,"g"),e=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(t,e);return this},Ae.API.viewerPreferences=function(n,t){var e;n=n||{},t=t||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),c=[],u=0,d=0,p=0;function g(v,x){var S,y=!1;for(S=0;S<v.length;S+=1)v[S]===x&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),e=this.internal.viewerpreferences.configuration,n==="reset"||t===!0){var f=a.length;for(p=0;p<f;p+=1)e[a[p]].value=e[a[p]].defaultValue,e[a[p]].explicitSet=!1}if(pn(n)==="object"){for(i in n)if(s=n[i],g(a,i)&&s!==void 0){if(e[i].type==="boolean"&&typeof s=="boolean")e[i].value=s;else if(e[i].type==="name"&&g(e[i].valueSet,s))e[i].value=s;else if(e[i].type==="integer"&&Number.isInteger(s))e[i].value=s;else if(e[i].type==="array"){for(u=0;u<s.length;u+=1)if(r=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(r=!1);r===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}e[i].value="["+c.join(" ")+"]"}else e[i].value=e[i].defaultValue;e[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,x=[];for(v in e)e[v].explicitSet===!0&&(e[v].type==="name"?x.push("/"+v+" /"+e[v].value):x.push("/"+v+" "+e[v].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=e,this},function(n){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+a.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+c),this.internal.write("endstream"),this.internal.write("endobj")},e=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",e),this.internal.events.subscribe("postPutResources",t)),this}}(Ae.API),function(n){var t=n.API,e=t.pdfEscape16=function(s,o){for(var a,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],p=0,g=s.length;p<g;++p){if(a=o.metadata.characterToGlyph(s.charCodeAt(p)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(p),c.indexOf(a)==-1&&(c.push(a),c.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return d.join("");a=a.toString(16),d.push(u[4-a.length],a)}return d.join("")},r=function(s){var o,a,c,u,d,p,g;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],p=0,g=(a=Object.keys(s).sort(function(f,v){return f-v})).length;p<g;p++)o=a[p],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(o){var a=o.font,c=o.out,u=o.newObject,d=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,g=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),f="",v=0;v<g.length;v++)f+=String.fromCharCode(g[v]);var x=u();d({data:f,addLength1:!0,objectId:x}),c("endobj");var S=u();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:S}),c("endobj");var y=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Sa(a.fontName)),c("/FontFile2 "+x+" 0 R"),c("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),c("/Flags "+a.metadata.flags),c("/StemV "+a.metadata.stemV),c("/ItalicAngle "+a.metadata.italicAngle),c("/Ascent "+a.metadata.ascender),c("/Descent "+a.metadata.decender),c("/CapHeight "+a.metadata.capHeight),c(">>"),c("endobj");var A=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Sa(a.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+n.API.PDFObject.convert(p)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+a.encoding+")"),c(">>"),c(">>"),c("endobj"),a.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+S+" 0 R"),c("/BaseFont /"+Sa(a.fontName)),c("/Encoding /"+a.encoding),c("/DescendantFonts ["+A+" 0 R]"),c(">>"),c("endobj"),a.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(o){var a=o.font,c=o.out,u=o.newObject,d=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,g="",f=0;f<p.length;f++)g+=String.fromCharCode(p[f]);var v=u();d({data:g,addLength1:!0,objectId:v}),c("endobj");var x=u();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var S=u();c("<<"),c("/Descent "+a.metadata.decender),c("/CapHeight "+a.metadata.capHeight),c("/StemV "+a.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+v+" 0 R"),c("/Flags 96"),c("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),c("/FontName /"+Sa(a.fontName)),c("/ItalicAngle "+a.metadata.italicAngle),c("/Ascent "+a.metadata.ascender),c(">>"),c("endobj"),a.objectNumber=u();for(var y=0;y<a.metadata.hmtx.widths.length;y++)a.metadata.hmtx.widths[y]=parseInt(a.metadata.hmtx.widths[y]*(1e3/a.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+Sa(a.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),c("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",c=s.x,u=s.y,d=s.options||{},p=s.mutex||{},g=p.pdfEscape,f=p.activeFontKey,v=p.fonts,x=f,S="",y=0,A="",w=v[x].encoding;if(v[x].encoding!=="Identity-H")return{text:a,x:c,y:u,options:d,mutex:p};for(A=a,x=f,Array.isArray(a)&&(A=a[0]),y=0;y<A.length;y+=1)v[x].metadata.hasOwnProperty("cmap")&&(o=v[x].metadata.cmap.unicode.codeMap[A[y].charCodeAt(0)]),o||A[y].charCodeAt(0)<256&&v[x].metadata.hasOwnProperty("Unicode")?S+=A[y]:S+="";var k="";return parseInt(x.slice(1))<14||w==="WinAnsiEncoding"?k=g(S,x).split("").map(function(T){return T.charCodeAt(0).toString(16)}).join(""):w==="Identity-H"&&(k=e(S,v[x])),p.isHex=!0,{text:k,x:c,y:u,options:d,mutex:p}};t.events.push(["postProcessText",function(s){var o=s.text||"",a=[],c={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?a.push([i(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):a.push(i(Object.assign({},c,{text:o[u]})).text);s.text=a}else s.text=i(Object.assign({},c,{text:o})).text}])}(Ae),function(n){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0},n.addFileToVFS=function(e,r){return t.call(this),this.internal.vFS[e]=r,this},n.getFileFromVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0?this.internal.vFS[e]:null}}(Ae.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,s,o,a,c,u,d,p=t,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),A=!1,w=0;this.__bidiEngine__={};var k=function(q){var D=q.charCodeAt(),W=D>>8,z=x[W];return z!==void 0?p[256*z+(255&D)]:W===252||W===253?"AL":y.test(W)?"L":W===8?"R":"N"},T=function(q){for(var D,W=0;W<q.length;W++){if((D=k(q.charAt(W)))==="L")return!1;if(D==="R")return!0}return!1},B=function(q,D,W,z){var Q,Z,lt,rt,mt=D[z];switch(mt){case"L":case"R":A=!1;break;case"N":case"AN":break;case"EN":A&&(mt="AN");break;case"AL":A=!0,mt="R";break;case"WS":mt="N";break;case"CS":z<1||z+1>=D.length||(Q=W[z-1])!=="EN"&&Q!=="AN"||(Z=D[z+1])!=="EN"&&Z!=="AN"?mt="N":A&&(Z="AN"),mt=Z===Q?Z:"N";break;case"ES":mt=(Q=z>0?W[z-1]:"B")==="EN"&&z+1<D.length&&D[z+1]==="EN"?"EN":"N";break;case"ET":if(z>0&&W[z-1]==="EN"){mt="EN";break}if(A){mt="N";break}for(lt=z+1,rt=D.length;lt<rt&&D[lt]==="ET";)lt++;mt=lt<rt&&D[lt]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(rt=D.length,lt=z+1;lt<rt&&D[lt]==="NSM";)lt++;if(lt<rt){var ht=q[z],Dt=ht>=1425&&ht<=2303||ht===64286;if(Q=D[lt],Dt&&(Q==="R"||Q==="AL")){mt="R";break}}}mt=z<1||(Q=D[z-1])==="B"?"N":W[z-1];break;case"B":A=!1,i=!0,mt=w;break;case"S":s=!0,mt="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":A=!1;break;case"BN":mt="N"}return mt},$=function(q,D,W){var z=q.split("");return W&&V(z,W,{hiLevel:w}),z.reverse(),D&&D.reverse(),z.join("")},V=function(q,D,W){var z,Q,Z,lt,rt,mt=-1,ht=q.length,Dt=0,I=[],j=w?f:g,Y=[];for(A=!1,i=!1,s=!1,Q=0;Q<ht;Q++)Y[Q]=k(q[Q]);for(Z=0;Z<ht;Z++){if(rt=Dt,I[Z]=B(q,Y,I,Z),z=240&(Dt=j[rt][v[I[Z]]]),Dt&=15,D[Z]=lt=j[Dt][5],z>0)if(z===16){for(Q=mt;Q<Z;Q++)D[Q]=1;mt=-1}else mt=-1;if(j[Dt][6])mt===-1&&(mt=Z);else if(mt>-1){for(Q=mt;Q<Z;Q++)D[Q]=lt;mt=-1}Y[Z]==="B"&&(D[Z]=0),W.hiLevel|=lt}s&&function(L,M,H){for(var G=0;G<H;G++)if(L[G]==="S"){M[G]=w;for(var et=G-1;et>=0&&L[et]==="WS";et--)M[et]=w}}(Y,D,ht)},nt=function(q,D,W,z,Q){if(!(Q.hiLevel<q)){if(q===1&&w===1&&!i)return D.reverse(),void(W&&W.reverse());for(var Z,lt,rt,mt,ht=D.length,Dt=0;Dt<ht;){if(z[Dt]>=q){for(rt=Dt+1;rt<ht&&z[rt]>=q;)rt++;for(mt=Dt,lt=rt-1;mt<lt;mt++,lt--)Z=D[mt],D[mt]=D[lt],D[lt]=Z,W&&(Z=W[mt],W[mt]=W[lt],W[lt]=Z);Dt=rt}Dt++}}},ct=function(q,D,W){var z=q.split(""),Q={hiLevel:w};return W||(W=[]),V(z,W,Q),function(Z,lt,rt){if(rt.hiLevel!==0&&d)for(var mt,ht=0;ht<Z.length;ht++)lt[ht]===1&&(mt=S.indexOf(Z[ht]))>=0&&(Z[ht]=S[mt+1])}(z,W,Q),nt(2,z,D,W,Q),nt(1,z,D,W,Q),z.join("")};return this.__bidiEngine__.doBidiReorder=function(q,D,W){if(function(Q,Z){if(Z)for(var lt=0;lt<Q.length;lt++)Z[lt]=lt;a===void 0&&(a=T(Q)),u===void 0&&(u=T(Q))}(q,D),o||!c||u)if(o&&c&&a^u)w=a?1:0,q=$(q,D,W);else if(!o&&c&&u)w=a?1:0,q=ct(q,D,W),q=$(q,D);else if(!o||a||c||u){if(o&&!c&&a^u)q=$(q,D),a?(w=0,q=ct(q,D,W)):(w=1,q=ct(q,D,W),q=$(q,D));else if(o&&a&&!c&&u)w=1,q=ct(q,D,W),q=$(q,D);else if(!o&&!c&&a^u){var z=d;a?(w=1,q=ct(q,D,W),w=0,d=!1,q=ct(q,D,W),d=z):(w=0,q=ct(q,D,W),q=$(q,D),w=1,d=!1,q=ct(q,D,W),d=z,q=$(q,D))}}else w=0,q=ct(q,D,W);else w=a?1:0,q=ct(q,D,W);return q},this.__bidiEngine__.setOptions=function(q){q&&(o=q.isInputVisual,c=q.isOutputVisual,a=q.isInputRtl,u=q.isOutputRtl,d=q.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],e=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,e.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([e.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([e.doBidiReorder(i[a])]);r.text=o}else r.text=e.doBidiReorder(i);e.setOptions({isInputVisual:!0})}])}(Ae),Ae.API.TTFFont=function(){function n(t){var e;if(this.rawData=t,e=this.contents=new _o(t),this.contents.pos=4,e.readString(4)==="ttcf")throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new my(this),this.registerTTF()}return n.open=function(t){return new n(t)},n.prototype.parse=function(){return this.directory=new ny(this.contents),this.head=new iy(this),this.name=new cy(this),this.cmap=new D0(this),this.toUnicode={},this.hhea=new sy(this),this.maxp=new uy(this),this.hmtx=new hy(this),this.post=new ay(this),this.os2=new oy(this),this.loca=new gy(this),this.glyf=new fy(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var t,e,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,c,u;for(u=[],o=0,a=(c=this.bbox).length;o<a;o++)t=c[o],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(e=i>>16)&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(t){var e;return((e=this.cmap.unicode)!=null?e.codeMap[t]:void 0)||0},n.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},n.prototype.widthOfString=function(t,e,r){var i,s,o,a;for(o=0,s=0,a=(t=""+t).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=t.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/e)||0;return o*(e/1e3)},n.prototype.lineHeight=function(t,e){var r;return e==null&&(e=!1),r=e?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},n}();var es,_o=function(){function n(t){this.data=t??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(t){return this.data[this.pos++]=t},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},n.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},n.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},n.prototype.readString=function(t){var e,r;for(r=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)r[e]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(t){var e,r,i;for(i=[],e=0,r=t.length;0<=r?e<r:e>r;e=0<=r?++e:--e)i.push(this.writeByte(t.charCodeAt(e)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(t){return this.writeInt16(t)},n.prototype.readLongLong=function(){var t,e,r,i,s,o,a,c;return t=this.readByte(),e=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^c)+1):72057594037927940*t+281474976710656*e+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+c},n.prototype.writeLongLong=function(t){var e,r;return e=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(t){return this.writeInt32(t)},n.prototype.read=function(t){var e,r;for(e=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)e.push(this.readByte());return e},n.prototype.write=function(t){var e,r,i,s;for(s=[],r=0,i=t.length;r<i;r++)e=t[r],s.push(this.writeByte(e));return s},n}(),ny=function(){var n;function t(e){var r,i,s;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(e){var r,i,s,o,a,c,u,d,p,g,f,v,x;for(x in f=Object.keys(e).length,c=Math.log(2),p=16*Math.floor(Math.log(f)/c),o=Math.floor(p/c),d=16*f-p,(i=new _o).writeInt(this.scalarType),i.writeShort(f),i.writeShort(p),i.writeShort(o),i.writeShort(d),s=16*f,u=i.pos+s,a=null,v=[],e)for(g=e[x],i.writeString(x),i.writeInt(n(g)),i.writeInt(u),i.writeInt(g.length),v=v.concat(g),x==="head"&&(a=u),u+=g.length;u%4;)v.push(0),u++;return i.write(v),r=2981146554-n(i.data),i.pos=a+8,i.writeUInt32(r),i.data},n=function(e){var r,i,s,o;for(e=j0.call(e);e.length%4;)e.push(0);for(s=new _o(e),i=0,r=0,o=e.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},t}(),ry={}.hasOwnProperty,As=function(n,t){for(var e in t)ry.call(t,e)&&(n[e]=t[e]);function r(){this.constructor=n}return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n};es=function(){function n(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var iy=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return As(t,es),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new _o).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),W1=function(){function n(t,e){var r,i,s,o,a,c,u,d,p,g,f,v,x,S,y,A,w;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),p=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(f=t.readUInt16(),g=f/2,t.pos+=6,s=function(){var k,T;for(T=[],c=k=0;0<=g?k<g:k>g;c=0<=g?++k:--k)T.push(t.readUInt16());return T}(),t.pos+=2,x=function(){var k,T;for(T=[],c=k=0;0<=g?k<g:k>g;c=0<=g?++k:--k)T.push(t.readUInt16());return T}(),u=function(){var k,T;for(T=[],c=k=0;0<=g?k<g:k>g;c=0<=g?++k:--k)T.push(t.readUInt16());return T}(),d=function(){var k,T;for(T=[],c=k=0;0<=g?k<g:k>g;c=0<=g?++k:--k)T.push(t.readUInt16());return T}(),i=(this.length-t.pos+this.offset)/2,a=function(){var k,T;for(T=[],c=k=0;0<=i?k<i:k>i;c=0<=i?++k:--k)T.push(t.readUInt16());return T}(),c=y=0,w=s.length;y<w;c=++y)for(S=s[c],r=A=v=x[c];v<=S?A<=S:A>=S;r=v<=S?++A:--A)d[c]===0?o=r+u[c]:(o=a[d[c]/2+(r-v)-(g-c)]||0)!==0&&(o+=u[c]),this.codeMap[r]=65535&o}t.pos=p}return n.encode=function(t,e){var r,i,s,o,a,c,u,d,p,g,f,v,x,S,y,A,w,k,T,B,$,V,nt,ct,q,D,W,z,Q,Z,lt,rt,mt,ht,Dt,I,j,Y,L,M,H,G,et,wt,bt,Ct;switch(z=new _o,o=Object.keys(t).sort(function(Et,Ut){return Et-Ut}),e){case"macroman":for(x=0,S=function(){var Et=[];for(v=0;v<256;++v)Et.push(0);return Et}(),A={0:0},s={},Q=0,mt=o.length;Q<mt;Q++)A[et=t[i=o[Q]]]==null&&(A[et]=++x),s[i]={old:t[i],new:A[t[i]]},S[i]=A[t[i]];return z.writeUInt16(1),z.writeUInt16(0),z.writeUInt32(12),z.writeUInt16(0),z.writeUInt16(262),z.writeUInt16(0),z.write(S),{charMap:s,subtable:z.data,maxGlyphID:x+1};case"unicode":for(D=[],p=[],w=0,A={},r={},y=u=null,Z=0,ht=o.length;Z<ht;Z++)A[T=t[i=o[Z]]]==null&&(A[T]=++w),r[i]={old:T,new:A[T]},a=A[T]-i,y!=null&&a===u||(y&&p.push(y),D.push(i),u=a),y=i;for(y&&p.push(y),p.push(65535),D.push(65535),ct=2*(nt=D.length),V=2*Math.pow(Math.log(nt)/Math.LN2,2),g=Math.log(V/2)/Math.LN2,$=2*nt-V,c=[],B=[],f=[],v=lt=0,Dt=D.length;lt<Dt;v=++lt){if(q=D[v],d=p[v],q===65535){c.push(0),B.push(0);break}if(q-(W=r[q].new)>=32768)for(c.push(0),B.push(2*(f.length+nt-v)),i=rt=q;q<=d?rt<=d:rt>=d;i=q<=d?++rt:--rt)f.push(r[i].new);else c.push(W-q),B.push(0)}for(z.writeUInt16(3),z.writeUInt16(1),z.writeUInt32(12),z.writeUInt16(4),z.writeUInt16(16+8*nt+2*f.length),z.writeUInt16(0),z.writeUInt16(ct),z.writeUInt16(V),z.writeUInt16(g),z.writeUInt16($),H=0,I=p.length;H<I;H++)i=p[H],z.writeUInt16(i);for(z.writeUInt16(0),G=0,j=D.length;G<j;G++)i=D[G],z.writeUInt16(i);for(wt=0,Y=c.length;wt<Y;wt++)a=c[wt],z.writeUInt16(a);for(bt=0,L=B.length;bt<L;bt++)k=B[bt],z.writeUInt16(k);for(Ct=0,M=f.length;Ct<M;Ct++)x=f[Ct],z.writeUInt16(x);return{charMap:r,subtable:z.data,maxGlyphID:w+1}}},n}(),D0=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return As(t,es),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,i,s;for(e.pos=this.offset,this.version=e.readUInt16(),s=e.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new W1(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var i,s;return r==null&&(r="macroman"),i=W1.encode(e,r),(s=new _o).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},t}(),sy=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return As(t,es),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),oy=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return As(t,es),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(e.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(e.readInt());return i}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(e.readInt());return i}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),ay=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return As(t,es),t.prototype.tag="post",t.prototype.parse=function(e){var r,i,s;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:break;case 131072:var o;for(i=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],s=[];e.pos<this.offset+this.length;)r=e.readByte(),s.push(this.names.push(e.readString(r)));return s;case 151552:return i=e.readUInt16(),this.offsets=e.read(i);case 196608:break;case 262144:return this.map=(function(){var a,c,u;for(u=[],o=a=0,c=this.file.maxp.numGlyphs;0<=c?a<c:a>c;o=0<=c?++a:--a)u.push(e.readUInt32());return u}).call(this)}},t}(),ly=function(n,t){this.raw=n,this.length=n.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},cy=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return As(t,es),t.prototype.tag="name",t.prototype.parse=function(e){var r,i,s,o,a,c,u,d,p,g,f;for(e.pos=this.offset,e.readShort(),r=e.readShort(),c=e.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+c+e.readShort()});for(u={},o=p=0,g=i.length;p<g;o=++p)s=i[o],e.pos=s.offset,d=e.readString(s.length),a=new ly(d,s),u[f=s.nameID]==null&&(u[f]=[]),u[s.nameID].push(a);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),uy=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return As(t,es),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),hy=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return As(t,es),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,i,s,o,a,c,u;for(e.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,p;for(p=[],r=d=0;0<=s?d<s:d>s;r=0<=s?++d:--d)p.push(e.readInt16());return p}(),this.widths=(function(){var d,p,g,f;for(f=[],d=0,p=(g=this.metrics).length;d<p;d++)o=g[d],f.push(o.advance);return f}).call(this),i=this.widths[this.widths.length-1],u=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)u.push(this.widths.push(i));return u},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),j0=[].slice,fy=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return As(t,es),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,i,s,o,a,c,u,d,p,g;return e in this.cache?this.cache[e]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(e),(s=o.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+i,a=(c=new _o(r.read(s))).readShort(),d=c.readShort(),g=c.readShort(),u=c.readShort(),p=c.readShort(),this.cache[e]=a===-1?new py(c,d,g,u,p):new dy(c,a,d,g,u,p),this.cache[e]))},t.prototype.encode=function(e,r,i){var s,o,a,c,u;for(a=[],o=[],c=0,u=r.length;c<u;c++)s=e[r[c]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},t}(),dy=function(){function n(t,e,r,i,s,o){this.raw=t,this.numberOfContours=e,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),py=function(){function n(t,e,r,i,s){var o,a;for(this.raw=t,this.xMin=e,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return n.prototype.encode=function(){var t,e,r;for(e=new _o(j0.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)e.pos=this.glyphOffsets[t];return e.data},n}(),gy=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return As(t,es),t.prototype.tag="loca",t.prototype.parse=function(e){var r,i;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(e.readUInt32());return o}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var c=this.offsets[a],u=this.offsets[a+1]-c;u>0&&(s+=u)}for(var d=new Array(4*i.length),p=0;p<i.length;++p)d[4*p+3]=255&i[p],d[4*p+2]=(65280&i[p])>>8,d[4*p+1]=(16711680&i[p])>>16,d[4*p]=(4278190080&i[p])>>24;return d},t}(),my=function(){function n(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var t,e,r,i,s;for(e in i=this.font.cmap.tables[0].codeMap,t={},s=this.subset)r=s[e],t[e]=i[r];return t},n.prototype.glyphsFor=function(t){var e,r,i,s,o,a,c;for(i={},o=0,a=t.length;o<a;o++)i[s=t[o]]=this.font.glyf.glyphFor(s);for(s in e=[],i)(r=i[s])!=null&&r.compound&&e.push.apply(e,r.glyphIDs);if(e.length>0)for(s in c=this.glyphsFor(e))r=c[s],i[s]=r;return i},n.prototype.encode=function(t,e){var r,i,s,o,a,c,u,d,p,g,f,v,x,S,y;for(i in r=D0.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),f={0:0},y=r.charMap)f[(c=y[i]).old]=c.new;for(v in g=r.maxGlyphID,o)v in f||(f[v]=g++);return d=function(A){var w,k;for(w in k={},A)k[A[w]]=w;return k}(f),p=Object.keys(d).sort(function(A,w){return A-w}),x=function(){var A,w,k;for(k=[],A=0,w=p.length;A<w;A++)a=p[A],k.push(d[a]);return k}(),s=this.font.glyf.encode(o,x,f),u=this.font.loca.encode(s.offsets,x),S={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},n}();Ae.API.PDFObject=function(){var n;function t(){}return n=function(e,r){return(Array(r+1).join("0")+e).slice(-r)},t.convert=function(e){var r,i,s,o;if(Array.isArray(e))return"["+function(){var a,c,u;for(u=[],a=0,c=e.length;a<c;a++)r=e[a],u.push(t.convert(r));return u}().join(" ")+"]";if(typeof e=="string")return"/"+e;if(e!=null&&e.isString)return"("+e+")";if(e instanceof Date)return"(D:"+n(e.getUTCFullYear(),4)+n(e.getUTCMonth(),2)+n(e.getUTCDate(),2)+n(e.getUTCHours(),2)+n(e.getUTCMinutes(),2)+n(e.getUTCSeconds(),2)+"Z)";if({}.toString.call(e)==="[object Object]"){for(i in s=["<<"],e)o=e[i],s.push("/"+i+" "+t.convert(o));return s.push(">>"),s.join(`
`)}return""+e},t}();class by{constructor(t){Tt.register("modules/cursors",bv),this.quill=new Tt(t,{modules:{cursors:!0},placeholder:"请输入内容..."})}focus(){this.quill.focus()}undo(){this.quill.history.undo()}redo(){this.quill.history.redo()}clear(){this.quill.setText(`
`),this.focus()}insertText(t){let{index:e}=this.quill.getSelection(!0);this.quill.insertText(e,t)}getCurrentCursor(){return this.quill.getSelection(!0).index}format(t,e){var r=this.quill.getSelection(!0);if(!r)return console.warn("User cursor is not in editor");let{index:i,length:s}=r,{bold:o,italic:a,strike:c,underline:u}=this.quill.getFormat(i,s);t==="icon-cuti"&&this.quill.formatText(i,s,"bold",!o),t==="icon-italic"&&this.quill.formatText(i,s,"italic",!a),t==="icon-strikethrough"&&this.quill.formatText(i,s,"strike",!c),t==="icon-zitixiahuaxian"&&this.quill.formatText(i,s,"underline",!u),t==="color"&&this.quill.formatText(i,s,"color",e),t==="icon-daochu"&&this.exportPdf()}insertEmbed(t,e,r){this.quill.insertEmbed(t||this.getCurrentCursor(),e,r)}exportPdf(t="document.pdf",e=2){const r=this.quill.root;html2canvas(r,{scale:Math.min(e*2,5),useCORS:!0,width:r.offsetWidth*e,height:r.offsetHeight*e}).then(i=>{const s=i.toDataURL("image/png",1),o=new Ae({orientation:"portrait",unit:"mm"}),a=i.width,c=i.height;o.addImage(s,"PNG",0,0,a,c),o.save(t)}).catch(i=>{console.error("Error generating PDF:",i)})}getDetail(){let t=this.quill.getContents();return console.log(t),t.ops.forEach(e=>{e.insert.image?e.insert="#image#"+e.insert.image:e.insert=e.insert.replace(/[']/g,"#[d]#")}),t}init(t){console.log(t);let e="",r=t.replace(/[\r]/g,"#r#").replace(/[\n]/g,"#n#").replace(/[\t]/g,"#t#");try{e=JSON.parse(r),console.log(e)}catch{return jo.error("文档格式解析失败！")}e.forEach((i,s)=>{i.insert.includes("#image#")?i.insert={image:i.insert.replace("#image#","")}:i.insert=yv(i.insert.toString().trim().replace(/#n#/g,`
`).replace(/#r#/g,"\r").replace(/#t#/g,"	").replace(/#[d]#/g,"'").replace(/#[s]#/g,'"'))}),this.quill.setContents(e)}}const Ki=()=>new Map,bf=n=>{const t=Ki();return n.forEach((e,r)=>{t.set(r,e)}),t},ko=(n,t,e)=>{let r=n.get(t);return r===void 0&&n.set(t,r=e()),r},vy=(n,t)=>{const e=[];for(const[r,i]of n)e.push(t(i,r));return e},yy=(n,t)=>{for(const[e,r]of n)if(t(r,e))return!0;return!1},Ka=()=>new Set,Ch=n=>n[n.length-1],wy=(n,t)=>{for(let e=0;e<t.length;e++)n.push(t[e])},Ao=Array.from,_y=Array.isArray;let Ay=class{constructor(){this._observers=Ki()}on(t,e){ko(this._observers,t,Ka).add(e)}once(t,e){const r=(...i)=>{this.off(t,r),e(...i)};this.on(t,r)}off(t,e){const r=this._observers.get(t);r!==void 0&&(r.delete(e),r.size===0&&this._observers.delete(t))}emit(t,e){return Ao((this._observers.get(t)||Ki()).values()).forEach(r=>r(...e))}destroy(){this._observers=Ki()}};const xo=Math.floor,su=Math.abs,F0=(n,t)=>n<t?n:t,Xo=(n,t)=>n>t?n:t,B0=n=>n!==0?n<0:1/n<0,G1=1,K1=2,Ih=4,Oh=8,Hl=32,Fs=64,pi=128,Ru=31,vf=63,Bo=127,xy=2147483647,U0=Number.MAX_SAFE_INTEGER,Ny=Number.isInteger||(n=>typeof n=="number"&&isFinite(n)&&xo(n)===n),Sy=n=>n.toLowerCase(),Ly=/^\s*/g,ky=n=>n.replace(Ly,""),Ey=/([A-Z])/g,Y1=(n,t)=>ky(n.replace(Ey,e=>`${t}${Sy(e)}`)),Cy=n=>{const t=unescape(encodeURIComponent(n)),e=t.length,r=new Uint8Array(e);for(let i=0;i<e;i++)r[i]=t.codePointAt(i);return r},Vl=typeof TextEncoder<"u"?new TextEncoder:null,Iy=n=>Vl.encode(n),Oy=Vl?Iy:Cy;let Il=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Il&&Il.decode(new Uint8Array).length===1&&(Il=null);let ic=class{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}};const Du=()=>new ic,Ty=n=>{let t=n.cpos;for(let e=0;e<n.bufs.length;e++)t+=n.bufs[e].length;return t},ps=n=>{const t=new Uint8Array(Ty(n));let e=0;for(let r=0;r<n.bufs.length;r++){const i=n.bufs[r];t.set(i,e),e+=i.length}return t.set(new Uint8Array(n.cbuf.buffer,0,n.cpos),e),t},Py=(n,t)=>{const e=n.cbuf.length;e-n.cpos<t&&(n.bufs.push(new Uint8Array(n.cbuf.buffer,0,n.cpos)),n.cbuf=new Uint8Array(Xo(e,t)*2),n.cpos=0)},Sr=(n,t)=>{const e=n.cbuf.length;n.cpos===e&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(e*2),n.cpos=0),n.cbuf[n.cpos++]=t},yf=Sr,Je=(n,t)=>{for(;t>Bo;)Sr(n,pi|Bo&t),t=xo(t/128);Sr(n,Bo&t)},td=(n,t)=>{const e=B0(t);for(e&&(t=-t),Sr(n,(t>vf?pi:0)|(e?Fs:0)|vf&t),t=xo(t/64);t>0;)Sr(n,(t>Bo?pi:0)|Bo&t),t=xo(t/128)},wf=new Uint8Array(3e4),qy=wf.length/3,My=(n,t)=>{if(t.length<qy){const e=Vl.encodeInto(t,wf).written||0;Je(n,e);for(let r=0;r<e;r++)Sr(n,wf[r])}else ci(n,Oy(t))},Ry=(n,t)=>{const e=unescape(encodeURIComponent(t)),r=e.length;Je(n,r);for(let i=0;i<r;i++)Sr(n,e.codePointAt(i))},Da=Vl&&Vl.encodeInto?My:Ry,ju=(n,t)=>{const e=n.cbuf.length,r=n.cpos,i=F0(e-r,t.length),s=t.length-i;n.cbuf.set(t.subarray(0,i),r),n.cpos+=i,s>0&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(Xo(e*2,s)),n.cbuf.set(t.subarray(i)),n.cpos=s)},ci=(n,t)=>{Je(n,t.byteLength),ju(n,t)},ed=(n,t)=>{Py(n,t);const e=new DataView(n.cbuf.buffer,n.cpos,t);return n.cpos+=t,e},Dy=(n,t)=>ed(n,4).setFloat32(0,t,!1),jy=(n,t)=>ed(n,8).setFloat64(0,t,!1),Fy=(n,t)=>ed(n,8).setBigInt64(0,t,!1),J1=new DataView(new ArrayBuffer(4)),By=n=>(J1.setFloat32(0,n),J1.getFloat32(0)===n),$l=(n,t)=>{switch(typeof t){case"string":Sr(n,119),Da(n,t);break;case"number":Ny(t)&&su(t)<=xy?(Sr(n,125),td(n,t)):By(t)?(Sr(n,124),Dy(n,t)):(Sr(n,123),jy(n,t));break;case"bigint":Sr(n,122),Fy(n,t);break;case"object":if(t===null)Sr(n,126);else if(_y(t)){Sr(n,117),Je(n,t.length);for(let e=0;e<t.length;e++)$l(n,t[e])}else if(t instanceof Uint8Array)Sr(n,116),ci(n,t);else{Sr(n,118);const e=Object.keys(t);Je(n,e.length);for(let r=0;r<e.length;r++){const i=e[r];Da(n,i),$l(n,t[i])}}break;case"boolean":Sr(n,t?120:121);break;default:Sr(n,127)}};class X1 extends ic{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&Je(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const Z1=n=>{n.count>0&&(td(n.encoder,n.count===1?n.s:-n.s),n.count>1&&Je(n.encoder,n.count-2))};class ou{constructor(){this.encoder=new ic,this.s=0,this.count=0}write(t){this.s===t?this.count++:(Z1(this),this.count=1,this.s=t)}toUint8Array(){return Z1(this),ps(this.encoder)}}const Q1=n=>{if(n.count>0){const t=n.diff*2+(n.count===1?0:1);td(n.encoder,t),n.count>1&&Je(n.encoder,n.count-2)}};class Th{constructor(){this.encoder=new ic,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(Q1(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return Q1(this),ps(this.encoder)}}class Uy{constructor(){this.sarr=[],this.s="",this.lensE=new ou}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new ic;return this.sarr.push(this.s),this.s="",Da(t,this.sarr.join("")),ju(t,this.lensE.toUint8Array()),ps(t)}}const No=n=>new Error(n),bs=()=>{throw No("Method unimplemented")},Ji=()=>{throw No("Unexpected case")},z0=No("Unexpected end of array"),H0=No("Integer out of Range");let Fu=class{constructor(t){this.arr=t,this.pos=0}};const tl=n=>new Fu(n),zy=n=>n.pos!==n.arr.length,Hy=(n,t)=>{const e=new Uint8Array(n.arr.buffer,n.pos+n.arr.byteOffset,t);return n.pos+=t,e},ui=n=>Hy(n,Ge(n)),Ya=n=>n.arr[n.pos++],Ge=n=>{let t=0,e=1;const r=n.arr.length;for(;n.pos<r;){const i=n.arr[n.pos++];if(t=t+(i&Bo)*e,e*=128,i<pi)return t;if(t>U0)throw H0}throw z0},nd=n=>{let t=n.arr[n.pos++],e=t&vf,r=64;const i=(t&Fs)>0?-1:1;if(!(t&pi))return i*e;const s=n.arr.length;for(;n.pos<s;){if(t=n.arr[n.pos++],e=e+(t&Bo)*r,r*=128,t<pi)return i*e;if(e>U0)throw H0}throw z0},Vy=n=>{let t=Ge(n);if(t===0)return"";{let e=String.fromCodePoint(Ya(n));if(--t<100)for(;t--;)e+=String.fromCodePoint(Ya(n));else for(;t>0;){const r=t<1e4?t:1e4,i=n.arr.subarray(n.pos,n.pos+r);n.pos+=r,e+=String.fromCodePoint.apply(null,i),t-=r}return decodeURIComponent(escape(e))}},$y=n=>Il.decode(ui(n)),ja=Il?$y:Vy,rd=(n,t)=>{const e=new DataView(n.arr.buffer,n.arr.byteOffset+n.pos,t);return n.pos+=t,e},Wy=n=>rd(n,4).getFloat32(0,!1),Gy=n=>rd(n,8).getFloat64(0,!1),Ky=n=>rd(n,8).getBigInt64(0,!1),Yy=[n=>{},n=>null,nd,Wy,Gy,Ky,n=>!1,n=>!0,ja,n=>{const t=Ge(n),e={};for(let r=0;r<t;r++){const i=ja(n);e[i]=Wl(n)}return e},n=>{const t=Ge(n),e=[];for(let r=0;r<t;r++)e.push(Wl(n));return e},ui],Wl=n=>Yy[127-Ya(n)](n);class tp extends Fu{constructor(t,e){super(t),this.reader=e,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),zy(this)?this.count=Ge(this)+1:this.count=-1),this.count--,this.s}}class au extends Fu{constructor(t){super(t),this.s=0,this.count=0}read(){if(this.count===0){this.s=nd(this);const t=B0(this.s);this.count=1,t&&(this.s=-this.s,this.count=Ge(this)+2)}return this.count--,this.s}}class Ph extends Fu{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const t=nd(this),e=t&1;this.diff=xo(t/2),this.count=1,e&&(this.count=Ge(this)+2)}return this.s+=this.diff,this.count--,this.s}}class Jy{constructor(t){this.decoder=new au(t),this.str=ja(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),e=this.str.slice(this.spos,t);return this.spos=t,e}}const Xy=crypto.getRandomValues.bind(crypto),V0=()=>Xy(new Uint32Array(1))[0],Zy=[1e7]+-1e3+-4e3+-8e3+-1e11,Qy=()=>Zy.replace(/[018]/g,n=>(n^V0()&15>>n/4).toString(16)),ep=n=>new Promise(n);Promise.all.bind(Promise);const np=n=>n===void 0?null:n;let tw=class{constructor(){this.map=new Map}setItem(t,e){this.map.set(t,e)}getItem(t){return this.map.get(t)}},$0=new tw,ew=!0;try{typeof localStorage<"u"&&localStorage&&($0=localStorage,ew=!1)}catch{}const nw=$0,rw=Object.assign,iw=Object.keys,sw=(n,t)=>{for(const e in n)t(n[e],e)},rp=n=>iw(n).length,ow=n=>{for(const t in n)return!1;return!0},aw=(n,t)=>{for(const e in n)if(!t(n[e],e))return!1;return!0},lw=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),cw=(n,t)=>n===t||rp(n)===rp(t)&&aw(n,(e,r)=>(e!==void 0||lw(t,r))&&t[r]===e),id=(n,t,e=0)=>{try{for(;e<n.length;e++)n[e](...t)}finally{e<n.length&&id(n,t,e+1)}},uw=n=>n,hw=(n,t)=>t.includes(n),Gl=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";let cs;const fw=()=>{if(cs===void 0)if(Gl){cs=Ki();const n=process.argv;let t=null;for(let e=0;e<n.length;e++){const r=n[e];r[0]==="-"?(t!==null&&cs.set(t,""),t=r):t!==null&&(cs.set(t,r),t=null)}t!==null&&cs.set(t,"")}else typeof location=="object"?(cs=Ki(),(location.search||"?").slice(1).split("&").forEach(n=>{if(n.length!==0){const[t,e]=n.split("=");cs.set(`--${Y1(t,"-")}`,e),cs.set(`-${Y1(t,"-")}`,e)}})):cs=Ki();return cs},_f=n=>fw().has(n),Af=n=>np(Gl?process.env[n.toUpperCase()]:nw.getItem(n)),dw=n=>_f("--"+n)||Af(n)!==null;dw("production");const ip=Gl&&hw({}.FORCE_COLOR,["true","1","2"]),pw=!_f("no-colors")&&(!Gl||process.stdout.isTTY||ip)&&(!Gl||_f("color")||ip||Af("COLORTERM")!==null||(Af("TERM")||"").includes("color")),gw=n=>new Uint8Array(n),mw=n=>{const t=gw(n.byteLength);return t.set(n),t};class bw{constructor(t,e){this.left=t,this.right=e}}const js=(n,t)=>new bw(n,t);typeof DOMParser<"u"&&new DOMParser;const vw=n=>vy(n,(t,e)=>`${e}:${t};`).join(""),$s=Symbol,W0=$s(),G0=$s(),yw=$s(),ww=$s(),_w=$s(),K0=$s(),Aw=$s(),Y0=$s(),xw=$s(),Nw=n=>{const t=[];let e=0;for(;e<n.length;e++){const r=n[e];r.constructor===String||r.constructor===Number||r.constructor===Object&&t.push(JSON.stringify(r))}return t},Sw={[W0]:js("font-weight","bold"),[G0]:js("font-weight","normal"),[yw]:js("color","blue"),[_w]:js("color","green"),[ww]:js("color","grey"),[K0]:js("color","red"),[Aw]:js("color","purple"),[Y0]:js("color","orange"),[xw]:js("color","black")},Lw=n=>{const t=[],e=[],r=Ki();let i=[],s=0;for(;s<n.length;s++){const o=n[s],a=Sw[o];if(a!==void 0)r.set(a.left,a.right);else if(o.constructor===String||o.constructor===Number){const c=vw(r);s>0||c.length>0?(t.push("%c"+o),e.push(c)):t.push(o)}else break}for(s>0&&(i=e,i.unshift(t.join("")));s<n.length;s++){const o=n[s];o instanceof Symbol||i.push(o)}return i},kw=pw?Lw:Nw,Ew=(...n)=>{console.log(...kw(n)),Cw.forEach(t=>t.print(n))},Cw=Ka(),J0=n=>({[Symbol.iterator](){return this},next:n}),Iw=(n,t)=>J0(()=>{let e;do e=n.next();while(!e.done&&!t(e.value));return e}),qh=(n,t)=>J0(()=>{const{done:e,value:r}=n.next();return{done:e,value:e?void 0:t(r)}});class sd{constructor(t,e){this.clock=t,this.len=e}}class sc{constructor(){this.clients=new Map}}const X0=(n,t,e)=>t.clients.forEach((r,i)=>{const s=n.doc.store.clients.get(i);for(let o=0;o<r.length;o++){const a=r[o];fg(n,s,a.clock,a.len,e)}}),Ow=(n,t)=>{let e=0,r=n.length-1;for(;e<=r;){const i=xo((e+r)/2),s=n[i],o=s.clock;if(o<=t){if(t<o+s.len)return i;e=i+1}else r=i-1}return null},Z0=(n,t)=>{const e=n.clients.get(t.client);return e!==void 0&&Ow(e,t.clock)!==null},od=n=>{n.clients.forEach(t=>{t.sort((i,s)=>i.clock-s.clock);let e,r;for(e=1,r=1;e<t.length;e++){const i=t[r-1],s=t[e];i.clock+i.len>=s.clock?i.len=Xo(i.len,s.clock+s.len-i.clock):(r<e&&(t[r]=s),r++)}t.length=r})},Tw=n=>{const t=new sc;for(let e=0;e<n.length;e++)n[e].clients.forEach((r,i)=>{if(!t.clients.has(i)){const s=r.slice();for(let o=e+1;o<n.length;o++)wy(s,n[o].clients.get(i)||[]);t.clients.set(i,s)}});return od(t),t},mu=(n,t,e,r)=>{ko(n.clients,t,()=>[]).push(new sd(e,r))},Pw=()=>new sc,qw=n=>{const t=Pw();return n.clients.forEach((e,r)=>{const i=[];for(let s=0;s<e.length;s++){const o=e[s];if(o.deleted){const a=o.id.clock;let c=o.length;if(s+1<e.length)for(let u=e[s+1];s+1<e.length&&u.deleted;u=e[++s+1])c+=u.length;i.push(new sd(a,c))}}i.length>0&&t.clients.set(r,i)}),t},el=(n,t)=>{Je(n.restEncoder,t.clients.size),Ao(t.clients.entries()).sort((e,r)=>r[0]-e[0]).forEach(([e,r])=>{n.resetDsCurVal(),Je(n.restEncoder,e);const i=r.length;Je(n.restEncoder,i);for(let s=0;s<i;s++){const o=r[s];n.writeDsClock(o.clock),n.writeDsLen(o.len)}})},ad=n=>{const t=new sc,e=Ge(n.restDecoder);for(let r=0;r<e;r++){n.resetDsCurVal();const i=Ge(n.restDecoder),s=Ge(n.restDecoder);if(s>0){const o=ko(t.clients,i,()=>[]);for(let a=0;a<s;a++)o.push(new sd(n.readDsClock(),n.readDsLen()))}}return t},sp=(n,t,e)=>{const r=new sc,i=Ge(n.restDecoder);for(let s=0;s<i;s++){n.resetDsCurVal();const o=Ge(n.restDecoder),a=Ge(n.restDecoder),c=e.clients.get(o)||[],u=fr(e,o);for(let d=0;d<a;d++){const p=n.readDsClock(),g=p+n.readDsLen();if(p<u){u<g&&mu(r,o,u,g-u);let f=ws(c,p),v=c[f];for(!v.deleted&&v.id.clock<p&&(c.splice(f+1,0,xu(t,v,p-v.id.clock)),f++);f<c.length&&(v=c[f++],v.id.clock<g);)v.deleted||(g<v.id.clock+v.length&&c.splice(f,0,xu(t,v,g-v.id.clock)),v.delete(t))}else mu(r,o,p,g-p)}}if(r.clients.size>0){const s=new zo;return Je(s.restEncoder,0),el(s,r),s.toUint8Array()}return null},Q0=V0;class nl extends Ay{constructor({guid:t=Qy(),collectionid:e=null,gc:r=!0,gcFilter:i=()=>!0,meta:s=null,autoLoad:o=!1,shouldLoad:a=!0}={}){super(),this.gc=r,this.gcFilter=i,this.clientID=Q0(),this.guid=t,this.collectionid=e,this.share=new Map,this.store=new ug,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=o,this.meta=s,this.isLoaded=!1,this.isSynced=!1,this.whenLoaded=ep(u=>{this.on("load",()=>{this.isLoaded=!0,u(this)})});const c=()=>ep(u=>{const d=p=>{(p===void 0||p===!0)&&(this.off("sync",d),u())};this.on("sync",d)});this.on("sync",u=>{u===!1&&this.isSynced&&(this.whenSynced=c()),this.isSynced=u===void 0||u===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[])}),this.whenSynced=c()}load(){const t=this._item;t!==null&&!this.shouldLoad&&In(t.parent.doc,e=>{e.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Ao(this.subdocs).map(t=>t.guid))}transact(t,e=null){return In(this,t,e)}get(t,e=Pr){const r=ko(this.share,t,()=>{const s=new e;return s._integrate(this,null),s}),i=r.constructor;if(e!==Pr&&i!==e)if(i===Pr){const s=new e;s._map=r._map,r._map.forEach(o=>{for(;o!==null;o=o.left)o.parent=s}),s._start=r._start;for(let o=s._start;o!==null;o=o.right)o.parent=s;return s._length=r._length,this.share.set(t,s),s._integrate(this,null),s}else throw new Error(`Type with the name ${t} has already been defined with a different constructor`);return r}getArray(t=""){return this.get(t,Ba)}getText(t=""){return this.get(t,Za)}getMap(t=""){return this.get(t,Xa)}getXmlFragment(t=""){return this.get(t,Ho)}toJSON(){const t={};return this.share.forEach((e,r)=>{t[r]=e.toJSON()}),t}destroy(){Ao(this.subdocs).forEach(e=>e.destroy());const t=this._item;if(t!==null){this._item=null;const e=t.content;e.doc=new nl({guid:this.guid,...e.opts,shouldLoad:!1}),e.doc._item=t,In(t.parent.doc,r=>{const i=e.doc;t.deleted||r.subdocsAdded.add(i),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(t,e){super.on(t,e)}off(t,e){super.off(t,e)}}class tg{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return Ge(this.restDecoder)}readDsLen(){return Ge(this.restDecoder)}}class eg extends tg{readLeftID(){return ze(Ge(this.restDecoder),Ge(this.restDecoder))}readRightID(){return ze(Ge(this.restDecoder),Ge(this.restDecoder))}readClient(){return Ge(this.restDecoder)}readInfo(){return Ya(this.restDecoder)}readString(){return ja(this.restDecoder)}readParentInfo(){return Ge(this.restDecoder)===1}readTypeRef(){return Ge(this.restDecoder)}readLen(){return Ge(this.restDecoder)}readAny(){return Wl(this.restDecoder)}readBuf(){return mw(ui(this.restDecoder))}readJSON(){return JSON.parse(ja(this.restDecoder))}readKey(){return ja(this.restDecoder)}}class Mw{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=Ge(this.restDecoder),this.dsCurrVal}readDsLen(){const t=Ge(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class Ja extends Mw{constructor(t){super(t),this.keys=[],Ge(t),this.keyClockDecoder=new Ph(ui(t)),this.clientDecoder=new au(ui(t)),this.leftClockDecoder=new Ph(ui(t)),this.rightClockDecoder=new Ph(ui(t)),this.infoDecoder=new tp(ui(t),Ya),this.stringDecoder=new Jy(ui(t)),this.parentInfoDecoder=new tp(ui(t),Ya),this.typeRefDecoder=new au(ui(t)),this.lenDecoder=new au(ui(t))}readLeftID(){return new Fa(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Fa(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Wl(this.restDecoder)}readBuf(){return ui(this.restDecoder)}readJSON(){return Wl(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const e=this.stringDecoder.read();return this.keys.push(e),e}}}class ng{constructor(){this.restEncoder=Du()}toUint8Array(){return ps(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){Je(this.restEncoder,t)}writeDsLen(t){Je(this.restEncoder,t)}}class oc extends ng{writeLeftID(t){Je(this.restEncoder,t.client),Je(this.restEncoder,t.clock)}writeRightID(t){Je(this.restEncoder,t.client),Je(this.restEncoder,t.clock)}writeClient(t){Je(this.restEncoder,t)}writeInfo(t){yf(this.restEncoder,t)}writeString(t){Da(this.restEncoder,t)}writeParentInfo(t){Je(this.restEncoder,t?1:0)}writeTypeRef(t){Je(this.restEncoder,t)}writeLen(t){Je(this.restEncoder,t)}writeAny(t){$l(this.restEncoder,t)}writeBuf(t){ci(this.restEncoder,t)}writeJSON(t){Da(this.restEncoder,JSON.stringify(t))}writeKey(t){Da(this.restEncoder,t)}}class rg{constructor(){this.restEncoder=Du(),this.dsCurrVal=0}toUint8Array(){return ps(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const e=t-this.dsCurrVal;this.dsCurrVal=t,Je(this.restEncoder,e)}writeDsLen(t){t===0&&Ji(),Je(this.restEncoder,t-1),this.dsCurrVal+=t}}class zo extends rg{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new Th,this.clientEncoder=new ou,this.leftClockEncoder=new Th,this.rightClockEncoder=new Th,this.infoEncoder=new X1(yf),this.stringEncoder=new Uy,this.parentInfoEncoder=new X1(yf),this.typeRefEncoder=new ou,this.lenEncoder=new ou}toUint8Array(){const t=Du();return Je(t,0),ci(t,this.keyClockEncoder.toUint8Array()),ci(t,this.clientEncoder.toUint8Array()),ci(t,this.leftClockEncoder.toUint8Array()),ci(t,this.rightClockEncoder.toUint8Array()),ci(t,ps(this.infoEncoder)),ci(t,this.stringEncoder.toUint8Array()),ci(t,ps(this.parentInfoEncoder)),ci(t,this.typeRefEncoder.toUint8Array()),ci(t,this.lenEncoder.toUint8Array()),ju(t,ps(this.restEncoder)),ps(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){$l(this.restEncoder,t)}writeBuf(t){ci(this.restEncoder,t)}writeJSON(t){$l(this.restEncoder,t)}writeKey(t){const e=this.keyMap.get(t);e===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(e)}}const Rw=(n,t,e,r)=>{r=Xo(r,t[0].id.clock);const i=ws(t,r);Je(n.restEncoder,t.length-i),n.writeClient(e),Je(n.restEncoder,r);const s=t[i];s.write(n,r-s.id.clock);for(let o=i+1;o<t.length;o++)t[o].write(n,0)},ld=(n,t,e)=>{const r=new Map;e.forEach((i,s)=>{fr(t,s)>i&&r.set(s,i)}),Bu(t).forEach((i,s)=>{e.has(s)||r.set(s,0)}),Je(n.restEncoder,r.size),Ao(r.entries()).sort((i,s)=>s[0]-i[0]).forEach(([i,s])=>{Rw(n,t.clients.get(i),i,s)})},Dw=(n,t)=>{const e=Ki(),r=Ge(n.restDecoder);for(let i=0;i<r;i++){const s=Ge(n.restDecoder),o=new Array(s),a=n.readClient();let c=Ge(n.restDecoder);e.set(a,{i:0,refs:o});for(let u=0;u<s;u++){const d=n.readInfo();switch(Ru&d){case 0:{const p=n.readLen();o[u]=new Ii(ze(a,c),p),c+=p;break}case 10:{const p=Ge(n.restDecoder);o[u]=new Oi(ze(a,c),p),c+=p;break}default:{const p=(d&(Fs|pi))===0,g=new Kn(ze(a,c),null,(d&pi)===pi?n.readLeftID():null,null,(d&Fs)===Fs?n.readRightID():null,p?n.readParentInfo()?t.get(n.readString()):n.readLeftID():null,p&&(d&Hl)===Hl?n.readString():null,Og(n,d));o[u]=g,c+=g.length}}}}return e},jw=(n,t,e)=>{const r=[];let i=Ao(e.keys()).sort((f,v)=>f-v);if(i.length===0)return null;const s=()=>{if(i.length===0)return null;let f=e.get(i[i.length-1]);for(;f.refs.length===f.i;)if(i.pop(),i.length>0)f=e.get(i[i.length-1]);else return null;return f};let o=s();if(o===null)return null;const a=new ug,c=new Map,u=(f,v)=>{const x=c.get(f);(x==null||x>v)&&c.set(f,v)};let d=o.refs[o.i++];const p=new Map,g=()=>{for(const f of r){const v=f.id.client,x=e.get(v);x?(x.i--,a.clients.set(v,x.refs.slice(x.i)),e.delete(v),x.i=0,x.refs=[]):a.clients.set(v,[f]),i=i.filter(S=>S!==v)}r.length=0};for(;;){if(d.constructor!==Oi){const v=ko(p,d.id.client,()=>fr(t,d.id.client))-d.id.clock;if(v<0)r.push(d),u(d.id.client,d.id.clock-1),g();else{const x=d.getMissing(n,t);if(x!==null){r.push(d);const S=e.get(x)||{refs:[],i:0};if(S.refs.length===S.i)u(x,fr(t,x)),g();else{d=S.refs[S.i++];continue}}else(v===0||v<d.length)&&(d.integrate(n,v),p.set(d.id.client,d.id.clock+d.length))}}if(r.length>0)d=r.pop();else if(o!==null&&o.i<o.refs.length)d=o.refs[o.i++];else{if(o=s(),o===null)break;d=o.refs[o.i++]}}if(a.clients.size>0){const f=new zo;return ld(f,a,new Map),Je(f.restEncoder,0),{missing:c,update:f.toUint8Array()}}return null},Fw=(n,t)=>ld(n,t.doc.store,t.beforeState),Bw=(n,t,e,r=new Ja(n))=>In(t,i=>{i.local=!1;let s=!1;const o=i.doc,a=o.store,c=Dw(r,o),u=jw(i,a,c),d=a.pendingStructs;if(d){for(const[g,f]of d.missing)if(f<fr(a,g)){s=!0;break}if(u){for(const[g,f]of u.missing){const v=d.missing.get(g);(v==null||v>f)&&d.missing.set(g,f)}d.update=bu([d.update,u.update])}}else a.pendingStructs=u;const p=sp(r,i,a);if(a.pendingDs){const g=new Ja(tl(a.pendingDs));Ge(g.restDecoder);const f=sp(g,i,a);p&&f?a.pendingDs=bu([p,f]):a.pendingDs=p||f}else a.pendingDs=p;if(s){const g=a.pendingStructs.update;a.pendingStructs=null,ig(i.doc,g)}},e,!1),ig=(n,t,e,r=Ja)=>{const i=tl(t);Bw(i,n,e,new r(i))},Uw=(n,t,e)=>ig(n,t,e,eg),zw=(n,t,e=new Map)=>{ld(n,t.store,e),el(n,qw(t.store))},Hw=(n,t=new Uint8Array([0]),e=new zo)=>{const r=sg(t);zw(e,n,r);const i=[e.toUint8Array()];if(n.store.pendingDs&&i.push(n.store.pendingDs),n.store.pendingStructs&&i.push(o3(n.store.pendingStructs.update,t)),i.length>1){if(e.constructor===oc)return i3(i.map((s,o)=>o===0?s:l3(s)));if(e.constructor===zo)return bu(i)}return i[0]},Vw=(n,t)=>Hw(n,t,new oc),$w=n=>{const t=new Map,e=Ge(n.restDecoder);for(let r=0;r<e;r++){const i=Ge(n.restDecoder),s=Ge(n.restDecoder);t.set(i,s)}return t},sg=n=>$w(new tg(tl(n))),og=(n,t)=>(Je(n.restEncoder,t.size),Ao(t.entries()).sort((e,r)=>r[0]-e[0]).forEach(([e,r])=>{Je(n.restEncoder,e),Je(n.restEncoder,r)}),n),Ww=(n,t)=>og(n,Bu(t.store)),Gw=(n,t=new rg)=>(n instanceof Map?og(t,n):Ww(t,n),t.toUint8Array()),Kw=n=>Gw(n,new ng);class Yw{constructor(){this.l=[]}}const op=()=>new Yw,ap=(n,t)=>n.l.push(t),lp=(n,t)=>{const e=n.l,r=e.length;n.l=e.filter(i=>t!==i),r===n.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},ag=(n,t,e)=>id(n.l,[t,e]);class Fa{constructor(t,e){this.client=t,this.clock=e}}const Ca=(n,t)=>n===t||n!==null&&t!==null&&n.client===t.client&&n.clock===t.clock,ze=(n,t)=>new Fa(n,t),lg=n=>{for(const[t,e]of n.doc.share.entries())if(e===n)return t;throw Ji()};class cg{constructor(t,e,r,i=0){this.type=t,this.tname=e,this.item=r,this.assoc=i}}const cp=n=>new cg(n.type==null?null:ze(n.type.client,n.type.clock),n.tname||null,n.item==null?null:ze(n.item.client,n.item.clock),n.assoc==null?0:n.assoc);class Jw{constructor(t,e,r=0){this.type=t,this.index=e,this.assoc=r}}const Xw=(n,t,e=0)=>new Jw(n,t,e),Wc=(n,t,e)=>{let r=null,i=null;return n._item===null?i=lg(n):r=ze(n._item.id.client,n._item.id.clock),new cg(r,i,t,e)},up=(n,t,e=0)=>{let r=n._start;if(e<0){if(t===0)return Wc(n,null,e);t--}for(;r!==null;){if(!r.deleted&&r.countable){if(r.length>t)return Wc(n,ze(r.id.client,r.id.clock+t),e);t-=r.length}if(r.right===null&&e<0)return Wc(n,r.lastId,e);r=r.right}return Wc(n,null,e)},hp=(n,t)=>{const e=t.store,r=n.item,i=n.type,s=n.tname,o=n.assoc;let a=null,c=0;if(r!==null){if(fr(e,r.client)<=r.clock)return null;const u=wp(e,r),d=u.item;if(!(d instanceof Kn))return null;if(a=d.parent,a._item===null||!a._item.deleted){c=d.deleted||!d.countable?0:u.diff+(o>=0?0:1);let p=d.left;for(;p!==null;)!p.deleted&&p.countable&&(c+=p.length),p=p.left}}else{if(s!==null)a=t.get(s);else if(i!==null){if(fr(e,i.client)<=i.clock)return null;const{item:u}=wp(e,i);if(u instanceof Kn&&u.content instanceof xs)a=u.content.type;else return null}else throw Ji();o>=0?c=a._length:c=0}return Xw(a,c,n.assoc)},fp=(n,t)=>n===t||n!==null&&t!==null&&n.tname===t.tname&&Ca(n.item,t.item)&&Ca(n.type,t.type)&&n.assoc===t.assoc,La=(n,t)=>t===void 0?!n.deleted:t.sv.has(n.id.client)&&(t.sv.get(n.id.client)||0)>n.id.clock&&!Z0(t.ds,n.id),xf=(n,t)=>{const e=ko(n.meta,xf,Ka),r=n.doc.store;e.has(t)||(t.sv.forEach((i,s)=>{i<fr(r,s)&&So(n,ze(s,i))}),X0(n,t.ds,i=>{}),e.add(t))};class ug{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Bu=n=>{const t=new Map;return n.clients.forEach((e,r)=>{const i=e[e.length-1];t.set(r,i.id.clock+i.length)}),t},fr=(n,t)=>{const e=n.clients.get(t);if(e===void 0)return 0;const r=e[e.length-1];return r.id.clock+r.length},hg=(n,t)=>{let e=n.clients.get(t.id.client);if(e===void 0)e=[],n.clients.set(t.id.client,e);else{const r=e[e.length-1];if(r.id.clock+r.length!==t.id.clock)throw Ji()}e.push(t)},ws=(n,t)=>{let e=0,r=n.length-1,i=n[r],s=i.id.clock;if(s===t)return r;let o=xo(t/(s+i.length-1)*r);for(;e<=r;){if(i=n[o],s=i.id.clock,s<=t){if(t<s+i.length)return o;e=o+1}else r=o-1;o=xo((e+r)/2)}throw Ji()},Zw=(n,t)=>{const e=n.clients.get(t.client);return e[ws(e,t.clock)]},lu=Zw,Nf=(n,t,e)=>{const r=ws(t,e),i=t[r];return i.id.clock<e&&i instanceof Kn?(t.splice(r+1,0,xu(n,i,e-i.id.clock)),r+1):r},So=(n,t)=>{const e=n.doc.store.clients.get(t.client);return e[Nf(n,e,t.clock)]},dp=(n,t,e)=>{const r=t.clients.get(e.client),i=ws(r,e.clock),s=r[i];return e.clock!==s.id.clock+s.length-1&&s.constructor!==Ii&&r.splice(i+1,0,xu(n,s,e.clock-s.id.clock+1)),s},Qw=(n,t,e)=>{const r=n.clients.get(t.id.client);r[ws(r,t.id.clock)]=e},fg=(n,t,e,r,i)=>{if(r===0)return;const s=e+r;let o=Nf(n,t,e),a;do a=t[o++],s<a.id.clock+a.length&&Nf(n,t,s),i(a);while(o<t.length&&t[o].id.clock<s)};class t3{constructor(t,e,r){this.doc=t,this.deleteSet=new sc,this.beforeState=Bu(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=e,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const pp=(n,t)=>t.deleteSet.clients.size===0&&!yy(t.afterState,(e,r)=>t.beforeState.get(r)!==e)?!1:(od(t.deleteSet),Fw(n,t),el(n,t.deleteSet),!0),gp=(n,t,e)=>{const r=t._item;(r===null||r.id.clock<(n.beforeState.get(r.id.client)||0)&&!r.deleted)&&ko(n.changed,t,Ka).add(e)},cu=(n,t)=>{let e=n[t],r=n[t-1],i=t;for(;i>0;e=r,r=n[--i-1]){if(r.deleted===e.deleted&&r.constructor===e.constructor&&r.mergeWith(e)){e instanceof Kn&&e.parentSub!==null&&e.parent._map.get(e.parentSub)===e&&e.parent._map.set(e.parentSub,r);continue}break}const s=t-i;return s&&n.splice(t+1-s,s),s},e3=(n,t,e)=>{for(const[r,i]of n.clients.entries()){const s=t.clients.get(r);for(let o=i.length-1;o>=0;o--){const a=i[o],c=a.clock+a.len;for(let u=ws(s,a.clock),d=s[u];u<s.length&&d.id.clock<c;d=s[++u]){const p=s[u];if(a.clock+a.len<=p.id.clock)break;p instanceof Kn&&p.deleted&&!p.keep&&e(p)&&p.gc(t,!1)}}}},n3=(n,t)=>{n.clients.forEach((e,r)=>{const i=t.clients.get(r);for(let s=e.length-1;s>=0;s--){const o=e[s],a=F0(i.length-1,1+ws(i,o.clock+o.len-1));for(let c=a,u=i[c];c>0&&u.id.clock>=o.clock;u=i[c])c-=1+cu(i,c)}})},dg=(n,t)=>{if(t<n.length){const e=n[t],r=e.doc,i=r.store,s=e.deleteSet,o=e._mergeStructs;try{od(s),e.afterState=Bu(e.doc.store),r.emit("beforeObserverCalls",[e,r]);const a=[];e.changed.forEach((c,u)=>a.push(()=>{(u._item===null||!u._item.deleted)&&u._callObserver(e,c)})),a.push(()=>{e.changedParentTypes.forEach((c,u)=>{u._dEH.l.length>0&&(u._item===null||!u._item.deleted)&&(c=c.filter(d=>d.target._item===null||!d.target._item.deleted),c.forEach(d=>{d.currentTarget=u,d._path=null}),c.sort((d,p)=>d.path.length-p.path.length),ag(u._dEH,c,e))})}),a.push(()=>r.emit("afterTransaction",[e,r])),id(a,[]),e._needFormattingCleanup&&A3(e)}finally{r.gc&&e3(s,i,r.gcFilter),n3(s,i),e.afterState.forEach((d,p)=>{const g=e.beforeState.get(p)||0;if(g!==d){const f=i.clients.get(p),v=Xo(ws(f,g),1);for(let x=f.length-1;x>=v;)x-=1+cu(f,x)}});for(let d=o.length-1;d>=0;d--){const{client:p,clock:g}=o[d].id,f=i.clients.get(p),v=ws(f,g);v+1<f.length&&cu(f,v+1)>1||v>0&&cu(f,v)}if(!e.local&&e.afterState.get(r.clientID)!==e.beforeState.get(r.clientID)&&(Ew(Y0,W0,"[yjs] ",G0,K0,"Changed the client-id because another client seems to be using it."),r.clientID=Q0()),r.emit("afterTransactionCleanup",[e,r]),r._observers.has("update")){const d=new oc;pp(d,e)&&r.emit("update",[d.toUint8Array(),e.origin,r,e])}if(r._observers.has("updateV2")){const d=new zo;pp(d,e)&&r.emit("updateV2",[d.toUint8Array(),e.origin,r,e])}const{subdocsAdded:a,subdocsLoaded:c,subdocsRemoved:u}=e;(a.size>0||u.size>0||c.size>0)&&(a.forEach(d=>{d.clientID=r.clientID,d.collectionid==null&&(d.collectionid=r.collectionid),r.subdocs.add(d)}),u.forEach(d=>r.subdocs.delete(d)),r.emit("subdocs",[{loaded:c,added:a,removed:u},r,e]),u.forEach(d=>d.destroy())),n.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,n])):dg(n,t+1)}}},In=(n,t,e=null,r=!0)=>{const i=n._transactionCleanups;let s=!1,o=null;n._transaction===null&&(s=!0,n._transaction=new t3(n,e,r),i.push(n._transaction),i.length===1&&n.emit("beforeAllTransactions",[n]),n.emit("beforeTransaction",[n._transaction,n]));try{o=t(n._transaction)}finally{if(s){const a=n._transaction===i[0];n._transaction=null,a&&dg(i,0)}}return o};function*r3(n){const t=Ge(n.restDecoder);for(let e=0;e<t;e++){const r=Ge(n.restDecoder),i=n.readClient();let s=Ge(n.restDecoder);for(let o=0;o<r;o++){const a=n.readInfo();if(a===10){const c=Ge(n.restDecoder);yield new Oi(ze(i,s),c),s+=c}else if(Ru&a){const c=(a&(Fs|pi))===0,u=new Kn(ze(i,s),null,(a&pi)===pi?n.readLeftID():null,null,(a&Fs)===Fs?n.readRightID():null,c?n.readParentInfo()?n.readString():n.readLeftID():null,c&&(a&Hl)===Hl?n.readString():null,Og(n,a));yield u,s+=u.length}else{const c=n.readLen();yield new Ii(ze(i,s),c),s+=c}}}}class cd{constructor(t,e){this.gen=r3(t),this.curr=null,this.done=!1,this.filterSkips=e,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Oi);return this.curr}}class ud{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const i3=n=>bu(n,eg,oc),s3=(n,t)=>{if(n.constructor===Ii){const{client:e,clock:r}=n.id;return new Ii(ze(e,r+t),n.length-t)}else if(n.constructor===Oi){const{client:e,clock:r}=n.id;return new Oi(ze(e,r+t),n.length-t)}else{const e=n,{client:r,clock:i}=e.id;return new Kn(ze(r,i+t),null,ze(r,i+t-1),null,e.rightOrigin,e.parent,e.parentSub,e.content.splice(t))}},bu=(n,t=Ja,e=zo)=>{if(n.length===1)return n[0];const r=n.map(d=>new t(tl(d)));let i=r.map(d=>new cd(d,!0)),s=null;const o=new e,a=new ud(o);for(;i=i.filter(g=>g.curr!==null),i.sort((g,f)=>{if(g.curr.id.client===f.curr.id.client){const v=g.curr.id.clock-f.curr.id.clock;return v===0?g.curr.constructor===f.curr.constructor?0:g.curr.constructor===Oi?1:-1:v}else return f.curr.id.client-g.curr.id.client}),i.length!==0;){const d=i[0],p=d.curr.id.client;if(s!==null){let g=d.curr,f=!1;for(;g!==null&&g.id.clock+g.length<=s.struct.id.clock+s.struct.length&&g.id.client>=s.struct.id.client;)g=d.next(),f=!0;if(g===null||g.id.client!==p||f&&g.id.clock>s.struct.id.clock+s.struct.length)continue;if(p!==s.struct.id.client)co(a,s.struct,s.offset),s={struct:g,offset:0},d.next();else if(s.struct.id.clock+s.struct.length<g.id.clock)if(s.struct.constructor===Oi)s.struct.length=g.id.clock+g.length-s.struct.id.clock;else{co(a,s.struct,s.offset);const v=g.id.clock-s.struct.id.clock-s.struct.length;s={struct:new Oi(ze(p,s.struct.id.clock+s.struct.length),v),offset:0}}else{const v=s.struct.id.clock+s.struct.length-g.id.clock;v>0&&(s.struct.constructor===Oi?s.struct.length-=v:g=s3(g,v)),s.struct.mergeWith(g)||(co(a,s.struct,s.offset),s={struct:g,offset:0},d.next())}}else s={struct:d.curr,offset:0},d.next();for(let g=d.curr;g!==null&&g.id.client===p&&g.id.clock===s.struct.id.clock+s.struct.length&&g.constructor!==Oi;g=d.next())co(a,s.struct,s.offset),s={struct:g,offset:0}}s!==null&&(co(a,s.struct,s.offset),s=null),hd(a);const c=r.map(d=>ad(d)),u=Tw(c);return el(o,u),o.toUint8Array()},o3=(n,t,e=Ja,r=zo)=>{const i=sg(t),s=new r,o=new ud(s),a=new e(tl(n)),c=new cd(a,!1);for(;c.curr;){const d=c.curr,p=d.id.client,g=i.get(p)||0;if(c.curr.constructor===Oi){c.next();continue}if(d.id.clock+d.length>g)for(co(o,d,Xo(g-d.id.clock,0)),c.next();c.curr&&c.curr.id.client===p;)co(o,c.curr,0),c.next();else for(;c.curr&&c.curr.id.client===p&&c.curr.id.clock+c.curr.length<=g;)c.next()}hd(o);const u=ad(a);return el(s,u),s.toUint8Array()},pg=n=>{n.written>0&&(n.clientStructs.push({written:n.written,restEncoder:ps(n.encoder.restEncoder)}),n.encoder.restEncoder=Du(),n.written=0)},co=(n,t,e)=>{n.written>0&&n.currClient!==t.id.client&&pg(n),n.written===0&&(n.currClient=t.id.client,n.encoder.writeClient(t.id.client),Je(n.encoder.restEncoder,t.id.clock+e)),t.write(n.encoder,e),n.written++},hd=n=>{pg(n);const t=n.encoder.restEncoder;Je(t,n.clientStructs.length);for(let e=0;e<n.clientStructs.length;e++){const r=n.clientStructs[e];Je(t,r.written),ju(t,r.restEncoder)}},a3=(n,t,e,r)=>{const i=new e(tl(n)),s=new cd(i,!1),o=new r,a=new ud(o);for(let u=s.curr;u!==null;u=s.next())co(a,t(u),0);hd(a);const c=ad(i);return el(o,c),o.toUint8Array()},l3=n=>a3(n,uw,Ja,oc),mp="You must not compute changes after the event-handler fired.";class Uu{constructor(t,e){this.target=t,this.currentTarget=t,this.transaction=e,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=c3(this.currentTarget,this.target))}deletes(t){return Z0(this.transaction.deleteSet,t.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw No(mp);const t=new Map,e=this.target;this.transaction.changed.get(e).forEach(i=>{if(i!==null){const s=e._map.get(i);let o,a;if(this.adds(s)){let c=s.left;for(;c!==null&&this.adds(c);)c=c.left;if(this.deletes(s))if(c!==null&&this.deletes(c))o="delete",a=Ch(c.content.getContent());else return;else c!==null&&this.deletes(c)?(o="update",a=Ch(c.content.getContent())):(o="add",a=void 0)}else if(this.deletes(s))o="delete",a=Ch(s.content.getContent());else return;t.set(i,{action:o,oldValue:a})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(t===null){if(this.transaction.doc._transactionCleanups.length===0)throw No(mp);const e=this.target,r=Ka(),i=Ka(),s=[];if(t={added:r,deleted:i,delta:s,keys:this.keys},this.transaction.changed.get(e).has(null)){let a=null;const c=()=>{a&&s.push(a)};for(let u=e._start;u!==null;u=u.right)u.deleted?this.deletes(u)&&!this.adds(u)&&((a===null||a.delete===void 0)&&(c(),a={delete:0}),a.delete+=u.length,i.add(u)):this.adds(u)?((a===null||a.insert===void 0)&&(c(),a={insert:[]}),a.insert=a.insert.concat(u.content.getContent()),r.add(u)):((a===null||a.retain===void 0)&&(c(),a={retain:0}),a.retain+=u.length);a!==null&&a.retain===void 0&&c()}this._changes=t}return t}}const c3=(n,t)=>{const e=[];for(;t._item!==null&&t!==n;){if(t._item.parentSub!==null)e.unshift(t._item.parentSub);else{let r=0,i=t._item.parent._start;for(;i!==t._item&&i!==null;)i.deleted||r++,i=i.right;e.unshift(r)}t=t._item.parent}return e},gg=80;let fd=0;class u3{constructor(t,e){t.marker=!0,this.p=t,this.index=e,this.timestamp=fd++}}const h3=n=>{n.timestamp=fd++},mg=(n,t,e)=>{n.p.marker=!1,n.p=t,t.marker=!0,n.index=e,n.timestamp=fd++},f3=(n,t,e)=>{if(n.length>=gg){const r=n.reduce((i,s)=>i.timestamp<s.timestamp?i:s);return mg(r,t,e),r}else{const r=new u3(t,e);return n.push(r),r}},zu=(n,t)=>{if(n._start===null||t===0||n._searchMarker===null)return null;const e=n._searchMarker.length===0?null:n._searchMarker.reduce((s,o)=>su(t-s.index)<su(t-o.index)?s:o);let r=n._start,i=0;for(e!==null&&(r=e.p,i=e.index,h3(e));r.right!==null&&i<t;){if(!r.deleted&&r.countable){if(t<i+r.length)break;i+=r.length}r=r.right}for(;r.left!==null&&i>t;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return e!==null&&su(e.index-i)<r.parent.length/gg?(mg(e,r,i),e):f3(n._searchMarker,r,i)},Kl=(n,t,e)=>{for(let r=n.length-1;r>=0;r--){const i=n[r];if(e>0){let s=i.p;for(s.marker=!1;s&&(s.deleted||!s.countable);)s=s.left,s&&!s.deleted&&s.countable&&(i.index-=s.length);if(s===null||s.marker===!0){n.splice(r,1);continue}i.p=s,s.marker=!0}(t<i.index||e>0&&t===i.index)&&(i.index=Xo(t,i.index+e))}},Hu=(n,t,e)=>{const r=n,i=t.changedParentTypes;for(;ko(i,n,()=>[]).push(e),n._item!==null;)n=n._item.parent;ag(r._eH,e,t)};class Pr{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=op(),this._dEH=op(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,e){this.doc=t,this._item=e}_copy(){throw bs()}clone(){throw bs()}_write(t){}get _first(){let t=this._start;for(;t!==null&&t.deleted;)t=t.right;return t}_callObserver(t,e){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){ap(this._eH,t)}observeDeep(t){ap(this._dEH,t)}unobserve(t){lp(this._eH,t)}unobserveDeep(t){lp(this._dEH,t)}toJSON(){}}const bg=(n,t,e)=>{t<0&&(t=n._length+t),e<0&&(e=n._length+e);let r=e-t;const i=[];let s=n._start;for(;s!==null&&r>0;){if(s.countable&&!s.deleted){const o=s.content.getContent();if(o.length<=t)t-=o.length;else{for(let a=t;a<o.length&&r>0;a++)i.push(o[a]),r--;t=0}}s=s.right}return i},vg=n=>{const t=[];let e=n._start;for(;e!==null;){if(e.countable&&!e.deleted){const r=e.content.getContent();for(let i=0;i<r.length;i++)t.push(r[i])}e=e.right}return t},Yl=(n,t)=>{let e=0,r=n._start;for(;r!==null;){if(r.countable&&!r.deleted){const i=r.content.getContent();for(let s=0;s<i.length;s++)t(i[s],e++,n)}r=r.right}},yg=(n,t)=>{const e=[];return Yl(n,(r,i)=>{e.push(t(r,i,n))}),e},d3=n=>{let t=n._start,e=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(e===null){for(;t!==null&&t.deleted;)t=t.right;if(t===null)return{done:!0,value:void 0};e=t.content.getContent(),r=0,t=t.right}const i=e[r++];return e.length<=r&&(e=null),{done:!1,value:i}}}},wg=(n,t)=>{const e=zu(n,t);let r=n._start;for(e!==null&&(r=e.p,t-=e.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},vu=(n,t,e,r)=>{let i=e;const s=n.doc,o=s.clientID,a=s.store,c=e===null?t._start:e.right;let u=[];const d=()=>{u.length>0&&(i=new Kn(ze(o,fr(a,o)),i,i&&i.lastId,c,c&&c.id,t,null,new Vo(u)),i.integrate(n,0),u=[])};r.forEach(p=>{if(p===null)u.push(p);else switch(p.constructor){case Number:case Object:case Boolean:case Array:case String:u.push(p);break;default:switch(d(),p.constructor){case Uint8Array:case ArrayBuffer:i=new Kn(ze(o,fr(a,o)),i,i&&i.lastId,c,c&&c.id,t,null,new ac(new Uint8Array(p))),i.integrate(n,0);break;case nl:i=new Kn(ze(o,fr(a,o)),i,i&&i.lastId,c,c&&c.id,t,null,new lc(p)),i.integrate(n,0);break;default:if(p instanceof Pr)i=new Kn(ze(o,fr(a,o)),i,i&&i.lastId,c,c&&c.id,t,null,new xs(p)),i.integrate(n,0);else throw new Error("Unexpected content type in insert operation")}}}),d()},_g=()=>No("Length exceeded!"),Ag=(n,t,e,r)=>{if(e>t._length)throw _g();if(e===0)return t._searchMarker&&Kl(t._searchMarker,e,r.length),vu(n,t,null,r);const i=e,s=zu(t,e);let o=t._start;for(s!==null&&(o=s.p,e-=s.index,e===0&&(o=o.prev,e+=o&&o.countable&&!o.deleted?o.length:0));o!==null;o=o.right)if(!o.deleted&&o.countable){if(e<=o.length){e<o.length&&So(n,ze(o.id.client,o.id.clock+e));break}e-=o.length}return t._searchMarker&&Kl(t._searchMarker,i,r.length),vu(n,t,o,r)},p3=(n,t,e)=>{let i=(t._searchMarker||[]).reduce((s,o)=>o.index>s.index?o:s,{index:0,p:t._start}).p;if(i)for(;i.right;)i=i.right;return vu(n,t,i,e)},xg=(n,t,e,r)=>{if(r===0)return;const i=e,s=r,o=zu(t,e);let a=t._start;for(o!==null&&(a=o.p,e-=o.index);a!==null&&e>0;a=a.right)!a.deleted&&a.countable&&(e<a.length&&So(n,ze(a.id.client,a.id.clock+e)),e-=a.length);for(;r>0&&a!==null;)a.deleted||(r<a.length&&So(n,ze(a.id.client,a.id.clock+r)),a.delete(n),r-=a.length),a=a.right;if(r>0)throw _g();t._searchMarker&&Kl(t._searchMarker,i,-s+r)},yu=(n,t,e)=>{const r=t._map.get(e);r!==void 0&&r.delete(n)},dd=(n,t,e,r)=>{const i=t._map.get(e)||null,s=n.doc,o=s.clientID;let a;if(r==null)a=new Vo([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:a=new Vo([r]);break;case Uint8Array:a=new ac(r);break;case nl:a=new lc(r);break;default:if(r instanceof Pr)a=new xs(r);else throw new Error("Unexpected content type")}new Kn(ze(o,fr(s.store,o)),i,i&&i.lastId,null,null,t,e,a).integrate(n,0)},pd=(n,t)=>{const e=n._map.get(t);return e!==void 0&&!e.deleted?e.content.getContent()[e.length-1]:void 0},Ng=n=>{const t={};return n._map.forEach((e,r)=>{e.deleted||(t[r]=e.content.getContent()[e.length-1])}),t},Sg=(n,t)=>{const e=n._map.get(t);return e!==void 0&&!e.deleted},g3=(n,t)=>{const e={};return n._map.forEach((r,i)=>{let s=r;for(;s!==null&&(!t.sv.has(s.id.client)||s.id.clock>=(t.sv.get(s.id.client)||0));)s=s.left;s!==null&&La(s,t)&&(e[i]=s.content.getContent()[s.length-1])}),e},Gc=n=>Iw(n.entries(),t=>!t[1].deleted);class m3 extends Uu{constructor(t,e){super(t,e),this._transaction=e}}class Ba extends Pr{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const e=new Ba;return e.push(t),e}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Ba}clone(){const t=new Ba;return t.insert(0,this.toArray().map(e=>e instanceof Pr?e.clone():e)),t}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}_callObserver(t,e){super._callObserver(t,e),Hu(this,t,new m3(this,t))}insert(t,e){this.doc!==null?In(this.doc,r=>{Ag(r,this,t,e)}):this._prelimContent.splice(t,0,...e)}push(t){this.doc!==null?In(this.doc,e=>{p3(e,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,e=1){this.doc!==null?In(this.doc,r=>{xg(r,this,t,e)}):this._prelimContent.splice(t,e)}get(t){return wg(this,t)}toArray(){return vg(this)}slice(t=0,e=this.length){return bg(this,t,e)}toJSON(){return this.map(t=>t instanceof Pr?t.toJSON():t)}map(t){return yg(this,t)}forEach(t){Yl(this,t)}[Symbol.iterator](){return d3(this)}_write(t){t.writeTypeRef(B3)}}const b3=n=>new Ba;class v3 extends Uu{constructor(t,e,r){super(t,e),this.keysChanged=r}}class Xa extends Pr{constructor(t){super(),this._prelimContent=null,t===void 0?this._prelimContent=new Map:this._prelimContent=new Map(t)}_integrate(t,e){super._integrate(t,e),this._prelimContent.forEach((r,i)=>{this.set(i,r)}),this._prelimContent=null}_copy(){return new Xa}clone(){const t=new Xa;return this.forEach((e,r)=>{t.set(r,e instanceof Pr?e.clone():e)}),t}_callObserver(t,e){Hu(this,t,new v3(this,t,e))}toJSON(){const t={};return this._map.forEach((e,r)=>{if(!e.deleted){const i=e.content.getContent()[e.length-1];t[r]=i instanceof Pr?i.toJSON():i}}),t}get size(){return[...Gc(this._map)].length}keys(){return qh(Gc(this._map),t=>t[0])}values(){return qh(Gc(this._map),t=>t[1].content.getContent()[t[1].length-1])}entries(){return qh(Gc(this._map),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){this._map.forEach((e,r)=>{e.deleted||t(e.content.getContent()[e.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(t){this.doc!==null?In(this.doc,e=>{yu(e,this,t)}):this._prelimContent.delete(t)}set(t,e){return this.doc!==null?In(this.doc,r=>{dd(r,this,t,e)}):this._prelimContent.set(t,e),e}get(t){return pd(this,t)}has(t){return Sg(this,t)}clear(){this.doc!==null?In(this.doc,t=>{this.forEach(function(e,r,i){yu(t,i,r)})}):this._prelimContent.clear()}_write(t){t.writeTypeRef(U3)}}const y3=n=>new Xa,bo=(n,t)=>n===t||typeof n=="object"&&typeof t=="object"&&n&&t&&cw(n,t);class Sf{constructor(t,e,r,i){this.left=t,this.right=e,this.index=r,this.currentAttributes=i}forward(){switch(this.right===null&&Ji(),this.right.content.constructor){case yr:this.right.deleted||rl(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const bp=(n,t,e)=>{for(;t.right!==null&&e>0;){switch(t.right.content.constructor){case yr:t.right.deleted||rl(t.currentAttributes,t.right.content);break;default:t.right.deleted||(e<t.right.length&&So(n,ze(t.right.id.client,t.right.id.clock+e)),t.index+=t.right.length,e-=t.right.length);break}t.left=t.right,t.right=t.right.right}return t},Kc=(n,t,e,r)=>{const i=new Map,s=r?zu(t,e):null;if(s){const o=new Sf(s.p.left,s.p,s.index,i);return bp(n,o,e-s.index)}else{const o=new Sf(null,t._start,0,i);return bp(n,o,e)}},Lg=(n,t,e,r)=>{for(;e.right!==null&&(e.right.deleted===!0||e.right.content.constructor===yr&&bo(r.get(e.right.content.key),e.right.content.value));)e.right.deleted||r.delete(e.right.content.key),e.forward();const i=n.doc,s=i.clientID;r.forEach((o,a)=>{const c=e.left,u=e.right,d=new Kn(ze(s,fr(i.store,s)),c,c&&c.lastId,u,u&&u.id,t,null,new yr(a,o));d.integrate(n,0),e.right=d,e.forward()})},rl=(n,t)=>{const{key:e,value:r}=t;r===null?n.delete(e):n.set(e,r)},kg=(n,t)=>{for(;n.right!==null;){if(!(n.right.deleted||n.right.content.constructor===yr&&bo(t[n.right.content.key]||null,n.right.content.value)))break;n.forward()}},Eg=(n,t,e,r)=>{const i=n.doc,s=i.clientID,o=new Map;for(const a in r){const c=r[a],u=e.currentAttributes.get(a)||null;if(!bo(u,c)){o.set(a,u);const{left:d,right:p}=e;e.right=new Kn(ze(s,fr(i.store,s)),d,d&&d.lastId,p,p&&p.id,t,null,new yr(a,c)),e.right.integrate(n,0),e.forward()}}return o},Mh=(n,t,e,r,i)=>{e.currentAttributes.forEach((g,f)=>{i[f]===void 0&&(i[f]=null)});const s=n.doc,o=s.clientID;kg(e,i);const a=Eg(n,t,e,i),c=r.constructor===String?new _s(r):r instanceof Pr?new xs(r):new Zo(r);let{left:u,right:d,index:p}=e;t._searchMarker&&Kl(t._searchMarker,e.index,c.getLength()),d=new Kn(ze(o,fr(s.store,o)),u,u&&u.lastId,d,d&&d.id,t,null,c),d.integrate(n,0),e.right=d,e.index=p,e.forward(),Lg(n,t,e,a)},vp=(n,t,e,r,i)=>{const s=n.doc,o=s.clientID;kg(e,i);const a=Eg(n,t,e,i);t:for(;e.right!==null&&(r>0||a.size>0&&(e.right.deleted||e.right.content.constructor===yr));){if(!e.right.deleted)switch(e.right.content.constructor){case yr:{const{key:c,value:u}=e.right.content,d=i[c];if(d!==void 0){if(bo(d,u))a.delete(c);else{if(r===0)break t;a.set(c,u)}e.right.delete(n)}else e.currentAttributes.set(c,u);break}default:r<e.right.length&&So(n,ze(e.right.id.client,e.right.id.clock+r)),r-=e.right.length;break}e.forward()}if(r>0){let c="";for(;r>0;r--)c+=`
`;e.right=new Kn(ze(o,fr(s.store,o)),e.left,e.left&&e.left.lastId,e.right,e.right&&e.right.id,t,null,new _s(c)),e.right.integrate(n,0),e.forward()}Lg(n,t,e,a)},Cg=(n,t,e,r,i)=>{let s=t;const o=Ki();for(;s&&(!s.countable||s.deleted);){if(!s.deleted&&s.content.constructor===yr){const u=s.content;o.set(u.key,u)}s=s.right}let a=0,c=!1;for(;t!==s;){if(e===t&&(c=!0),!t.deleted){const u=t.content;switch(u.constructor){case yr:{const{key:d,value:p}=u,g=r.get(d)||null;(o.get(d)!==u||g===p)&&(t.delete(n),a++,!c&&(i.get(d)||null)===p&&g!==p&&(g===null?i.delete(d):i.set(d,g))),!c&&!t.deleted&&rl(i,u);break}}}t=t.right}return a},w3=(n,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const e=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===yr){const r=t.content.key;e.has(r)?t.delete(n):e.add(r)}t=t.left}},_3=n=>{let t=0;return In(n.doc,e=>{let r=n._start,i=n._start,s=Ki();const o=bf(s);for(;i;){if(i.deleted===!1)switch(i.content.constructor){case yr:rl(o,i.content);break;default:t+=Cg(e,r,i,s,o),s=bf(o),r=i;break}i=i.right}}),t},A3=n=>{const t=new Set,e=n.doc;for(const[r,i]of n.afterState.entries()){const s=n.beforeState.get(r)||0;i!==s&&fg(n,e.store.clients.get(r),s,i,o=>{!o.deleted&&o.content.constructor===yr&&o.constructor!==Ii&&t.add(o.parent)})}In(e,r=>{X0(n,n.deleteSet,i=>{if(i instanceof Ii||!i.parent._hasFormatting||t.has(i.parent))return;const s=i.parent;i.content.constructor===yr?t.add(s):w3(r,i)});for(const i of t)_3(i)})},yp=(n,t,e)=>{const r=e,i=bf(t.currentAttributes),s=t.right;for(;e>0&&t.right!==null;){if(t.right.deleted===!1)switch(t.right.content.constructor){case xs:case Zo:case _s:e<t.right.length&&So(n,ze(t.right.id.client,t.right.id.clock+e)),e-=t.right.length,t.right.delete(n);break}t.forward()}s&&Cg(n,s,t.right,i,t.currentAttributes);const o=(t.left||t.right).parent;return o._searchMarker&&Kl(o._searchMarker,t.index,-r+e),t};class x3 extends Uu{constructor(t,e,r){super(t,e),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(i=>{i===null?this.childListChanged=!0:this.keysChanged.add(i)})}get changes(){if(this._changes===null){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(this._delta===null){const t=this.target.doc,e=[];In(t,r=>{const i=new Map,s=new Map;let o=this.target._start,a=null;const c={};let u="",d=0,p=0;const g=()=>{if(a!==null){let f=null;switch(a){case"delete":p>0&&(f={delete:p}),p=0;break;case"insert":(typeof u=="object"||u.length>0)&&(f={insert:u},i.size>0&&(f.attributes={},i.forEach((v,x)=>{v!==null&&(f.attributes[x]=v)}))),u="";break;case"retain":d>0&&(f={retain:d},ow(c)||(f.attributes=rw({},c))),d=0;break}f&&e.push(f),a=null}};for(;o!==null;){switch(o.content.constructor){case xs:case Zo:this.adds(o)?this.deletes(o)||(g(),a="insert",u=o.content.getContent()[0],g()):this.deletes(o)?(a!=="delete"&&(g(),a="delete"),p+=1):o.deleted||(a!=="retain"&&(g(),a="retain"),d+=1);break;case _s:this.adds(o)?this.deletes(o)||(a!=="insert"&&(g(),a="insert"),u+=o.content.str):this.deletes(o)?(a!=="delete"&&(g(),a="delete"),p+=o.length):o.deleted||(a!=="retain"&&(g(),a="retain"),d+=o.length);break;case yr:{const{key:f,value:v}=o.content;if(this.adds(o)){if(!this.deletes(o)){const x=i.get(f)||null;bo(x,v)?v!==null&&o.delete(r):(a==="retain"&&g(),bo(v,s.get(f)||null)?delete c[f]:c[f]=v)}}else if(this.deletes(o)){s.set(f,v);const x=i.get(f)||null;bo(x,v)||(a==="retain"&&g(),c[f]=x)}else if(!o.deleted){s.set(f,v);const x=c[f];x!==void 0&&(bo(x,v)?x!==null&&o.delete(r):(a==="retain"&&g(),v===null?delete c[f]:c[f]=v))}o.deleted||(a==="insert"&&g(),rl(i,o.content));break}}o=o.right}for(g();e.length>0;){const f=e[e.length-1];if(f.retain!==void 0&&f.attributes===void 0)e.pop();else break}}),this._delta=e}return this._delta}}class Za extends Pr{constructor(t){super(),this._pending=t!==void 0?[()=>this.insert(0,t)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this._length}_integrate(t,e){super._integrate(t,e);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new Za}clone(){const t=new Za;return t.applyDelta(this.toDelta()),t}_callObserver(t,e){super._callObserver(t,e);const r=new x3(this,t,e);Hu(this,t,r),!t.local&&this._hasFormatting&&(t._needFormattingCleanup=!0)}toString(){let t="",e=this._start;for(;e!==null;)!e.deleted&&e.countable&&e.content.constructor===_s&&(t+=e.content.str),e=e.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:e=!0}={}){this.doc!==null?In(this.doc,r=>{const i=new Sf(null,this._start,0,new Map);for(let s=0;s<t.length;s++){const o=t[s];if(o.insert!==void 0){const a=!e&&typeof o.insert=="string"&&s===t.length-1&&i.right===null&&o.insert.slice(-1)===`
`?o.insert.slice(0,-1):o.insert;(typeof a!="string"||a.length>0)&&Mh(r,this,i,a,o.attributes||{})}else o.retain!==void 0?vp(r,this,i,o.retain,o.attributes||{}):o.delete!==void 0&&yp(r,i,o.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,e,r){const i=[],s=new Map,o=this.doc;let a="",c=this._start;function u(){if(a.length>0){const p={};let g=!1;s.forEach((v,x)=>{g=!0,p[x]=v});const f={insert:a};g&&(f.attributes=p),i.push(f),a=""}}const d=()=>{for(;c!==null;){if(La(c,t)||e!==void 0&&La(c,e))switch(c.content.constructor){case _s:{const p=s.get("ychange");t!==void 0&&!La(c,t)?(p===void 0||p.user!==c.id.client||p.type!=="removed")&&(u(),s.set("ychange",r?r("removed",c.id):{type:"removed"})):e!==void 0&&!La(c,e)?(p===void 0||p.user!==c.id.client||p.type!=="added")&&(u(),s.set("ychange",r?r("added",c.id):{type:"added"})):p!==void 0&&(u(),s.delete("ychange")),a+=c.content.str;break}case xs:case Zo:{u();const p={insert:c.content.getContent()[0]};if(s.size>0){const g={};p.attributes=g,s.forEach((f,v)=>{g[v]=f})}i.push(p);break}case yr:La(c,t)&&(u(),rl(s,c.content));break}c=c.right}u()};return t||e?In(o,p=>{t&&xf(p,t),e&&xf(p,e),d()},"cleanup"):d(),i}insert(t,e,r){if(e.length<=0)return;const i=this.doc;i!==null?In(i,s=>{const o=Kc(s,this,t,!r);r||(r={},o.currentAttributes.forEach((a,c)=>{r[c]=a})),Mh(s,this,o,e,r)}):this._pending.push(()=>this.insert(t,e,r))}insertEmbed(t,e,r){const i=this.doc;i!==null?In(i,s=>{const o=Kc(s,this,t,!r);Mh(s,this,o,e,r||{})}):this._pending.push(()=>this.insertEmbed(t,e,r||{}))}delete(t,e){if(e===0)return;const r=this.doc;r!==null?In(r,i=>{yp(i,Kc(i,this,t,!0),e)}):this._pending.push(()=>this.delete(t,e))}format(t,e,r){if(e===0)return;const i=this.doc;i!==null?In(i,s=>{const o=Kc(s,this,t,!1);o.right!==null&&vp(s,this,o,e,r)}):this._pending.push(()=>this.format(t,e,r))}removeAttribute(t){this.doc!==null?In(this.doc,e=>{yu(e,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,e){this.doc!==null?In(this.doc,r=>{dd(r,this,t,e)}):this._pending.push(()=>this.setAttribute(t,e))}getAttribute(t){return pd(this,t)}getAttributes(){return Ng(this)}_write(t){t.writeTypeRef(z3)}}const N3=n=>new Za;class Rh{constructor(t,e=()=>!0){this._filter=e,this._root=t,this._currentNode=t._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let t=this._currentNode,e=t&&t.content&&t.content.type;if(t!==null&&(!this._firstCall||t.deleted||!this._filter(e)))do if(e=t.content.type,!t.deleted&&(e.constructor===Jl||e.constructor===Ho)&&e._start!==null)t=e._start;else for(;t!==null;)if(t.right!==null){t=t.right;break}else t.parent===this._root?t=null:t=t.parent._item;while(t!==null&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,t===null?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class Ho extends Pr{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Ho}clone(){const t=new Ho;return t.insert(0,this.toArray().map(e=>e instanceof Pr?e.clone():e)),t}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(t){return new Rh(this,t)}querySelector(t){t=t.toUpperCase();const r=new Rh(this,i=>i.nodeName&&i.nodeName.toUpperCase()===t).next();return r.done?null:r.value}querySelectorAll(t){return t=t.toUpperCase(),Ao(new Rh(this,e=>e.nodeName&&e.nodeName.toUpperCase()===t))}_callObserver(t,e){Hu(this,t,new k3(this,e,t))}toString(){return yg(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,e={},r){const i=t.createDocumentFragment();return r!==void 0&&r._createAssociation(i,this),Yl(this,s=>{i.insertBefore(s.toDOM(t,e,r),null)}),i}insert(t,e){this.doc!==null?In(this.doc,r=>{Ag(r,this,t,e)}):this._prelimContent.splice(t,0,...e)}insertAfter(t,e){if(this.doc!==null)In(this.doc,r=>{const i=t&&t instanceof Pr?t._item:t;vu(r,this,i,e)});else{const r=this._prelimContent,i=t===null?0:r.findIndex(s=>s===t)+1;if(i===0&&t!==null)throw No("Reference item not found");r.splice(i,0,...e)}}delete(t,e=1){this.doc!==null?In(this.doc,r=>{xg(r,this,t,e)}):this._prelimContent.splice(t,e)}toArray(){return vg(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return wg(this,t)}slice(t=0,e=this.length){return bg(this,t,e)}forEach(t){Yl(this,t)}_write(t){t.writeTypeRef(V3)}}const S3=n=>new Ho;class Jl extends Ho{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,e){super._integrate(t,e),this._prelimAttrs.forEach((r,i)=>{this.setAttribute(i,r)}),this._prelimAttrs=null}_copy(){return new Jl(this.nodeName)}clone(){const t=new Jl(this.nodeName),e=this.getAttributes();return sw(e,(r,i)=>{typeof r=="string"&&t.setAttribute(i,r)}),t.insert(0,this.toArray().map(r=>r instanceof Pr?r.clone():r)),t}toString(){const t=this.getAttributes(),e=[],r=[];for(const a in t)r.push(a);r.sort();const i=r.length;for(let a=0;a<i;a++){const c=r[a];e.push(c+'="'+t[c]+'"')}const s=this.nodeName.toLocaleLowerCase(),o=e.length>0?" "+e.join(" "):"";return`<${s}${o}>${super.toString()}</${s}>`}removeAttribute(t){this.doc!==null?In(this.doc,e=>{yu(e,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,e){this.doc!==null?In(this.doc,r=>{dd(r,this,t,e)}):this._prelimAttrs.set(t,e)}getAttribute(t){return pd(this,t)}hasAttribute(t){return Sg(this,t)}getAttributes(t){return t?g3(this,t):Ng(this)}toDOM(t=document,e={},r){const i=t.createElement(this.nodeName),s=this.getAttributes();for(const o in s){const a=s[o];typeof a=="string"&&i.setAttribute(o,a)}return Yl(this,o=>{i.appendChild(o.toDOM(t,e,r))}),r!==void 0&&r._createAssociation(i,this),i}_write(t){t.writeTypeRef(H3),t.writeKey(this.nodeName)}}const L3=n=>new Jl(n.readKey());class k3 extends Uu{constructor(t,e,r){super(t,r),this.childListChanged=!1,this.attributesChanged=new Set,e.forEach(i=>{i===null?this.childListChanged=!0:this.attributesChanged.add(i)})}}class wu extends Xa{constructor(t){super(),this.hookName=t}_copy(){return new wu(this.hookName)}clone(){const t=new wu(this.hookName);return this.forEach((e,r)=>{t.set(r,e)}),t}toDOM(t=document,e={},r){const i=e[this.hookName];let s;return i!==void 0?s=i.createDom(this):s=document.createElement(this.hookName),s.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(s,this),s}_write(t){t.writeTypeRef($3),t.writeKey(this.hookName)}}const E3=n=>new wu(n.readKey());class _u extends Za{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new _u}clone(){const t=new _u;return t.applyDelta(this.toDelta()),t}toDOM(t=document,e,r){const i=t.createTextNode(this.toString());return r!==void 0&&r._createAssociation(i,this),i}toString(){return this.toDelta().map(t=>{const e=[];for(const i in t.attributes){const s=[];for(const o in t.attributes[i])s.push({key:o,value:t.attributes[i][o]});s.sort((o,a)=>o.key<a.key?-1:1),e.push({nodeName:i,attrs:s})}e.sort((i,s)=>i.nodeName<s.nodeName?-1:1);let r="";for(let i=0;i<e.length;i++){const s=e[i];r+=`<${s.nodeName}`;for(let o=0;o<s.attrs.length;o++){const a=s.attrs[o];r+=` ${a.key}="${a.value}"`}r+=">"}r+=t.insert;for(let i=e.length-1;i>=0;i--)r+=`</${e[i].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(W3)}}const C3=n=>new _u;class gd{constructor(t,e){this.id=t,this.length=e}get deleted(){throw bs()}mergeWith(t){return!1}write(t,e,r){throw bs()}integrate(t,e){throw bs()}}const I3=0;class Ii extends gd{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,e){e>0&&(this.id.clock+=e,this.length-=e),hg(t.doc.store,this)}write(t,e){t.writeInfo(I3),t.writeLen(this.length-e)}getMissing(t,e){return null}}class ac{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new ac(this.content)}splice(t){throw bs()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeBuf(this.content)}getRef(){return 3}}const O3=n=>new ac(n.readBuf());class Xl{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Xl(this.len)}splice(t){const e=new Xl(this.len-t);return this.len=t,e}mergeWith(t){return this.len+=t.len,!0}integrate(t,e){mu(t.deleteSet,e.id.client,e.id.clock,this.len),e.markDeleted()}delete(t){}gc(t){}write(t,e){t.writeLen(this.len-e)}getRef(){return 1}}const T3=n=>new Xl(n.readLen()),Ig=(n,t)=>new nl({guid:n,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class lc{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const e={};this.opts=e,t.gc||(e.gc=!1),t.autoLoad&&(e.autoLoad=!0),t.meta!==null&&(e.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new lc(Ig(this.doc.guid,this.opts))}splice(t){throw bs()}mergeWith(t){return!1}integrate(t,e){this.doc._item=e,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,e){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const P3=n=>new lc(Ig(n.readString(),n.readAny()));class Zo{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Zo(this.embed)}splice(t){throw bs()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeJSON(this.embed)}getRef(){return 5}}const q3=n=>new Zo(n.readJSON());class yr{constructor(t,e){this.key=t,this.value=e}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new yr(this.key,this.value)}splice(t){throw bs()}mergeWith(t){return!1}integrate(t,e){const r=e.parent;r._searchMarker=null,r._hasFormatting=!0}delete(t){}gc(t){}write(t,e){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const M3=n=>new yr(n.readKey(),n.readJSON());class Au{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Au(this.arr)}splice(t){const e=new Au(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const r=this.arr.length;t.writeLen(r-e);for(let i=e;i<r;i++){const s=this.arr[i];t.writeString(s===void 0?"undefined":JSON.stringify(s))}}getRef(){return 2}}const R3=n=>{const t=n.readLen(),e=[];for(let r=0;r<t;r++){const i=n.readString();i==="undefined"?e.push(void 0):e.push(JSON.parse(i))}return new Au(e)};class Vo{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Vo(this.arr)}splice(t){const e=new Vo(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const r=this.arr.length;t.writeLen(r-e);for(let i=e;i<r;i++){const s=this.arr[i];t.writeAny(s)}}getRef(){return 8}}const D3=n=>{const t=n.readLen(),e=[];for(let r=0;r<t;r++)e.push(n.readAny());return new Vo(e)};class _s{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new _s(this.str)}splice(t){const e=new _s(this.str.slice(t));this.str=this.str.slice(0,t);const r=this.str.charCodeAt(t-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,t-1)+"�",e.str="�"+e.str.slice(1)),e}mergeWith(t){return this.str+=t.str,!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeString(e===0?this.str:this.str.slice(e))}getRef(){return 4}}const j3=n=>new _s(n.readString()),F3=[b3,y3,N3,L3,S3,E3,C3],B3=0,U3=1,z3=2,H3=3,V3=4,$3=5,W3=6;class xs{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new xs(this.type._copy())}splice(t){throw bs()}mergeWith(t){return!1}integrate(t,e){this.type._integrate(t.doc,e)}delete(t){let e=this.type._start;for(;e!==null;)e.deleted?e.id.clock<(t.beforeState.get(e.id.client)||0)&&t._mergeStructs.push(e):e.delete(t),e=e.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(t.beforeState.get(r.id.client)||0)&&t._mergeStructs.push(r):r.delete(t)}),t.changed.delete(this.type)}gc(t){let e=this.type._start;for(;e!==null;)e.gc(t,!0),e=e.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(t,!0),r=r.left}),this.type._map=new Map}write(t,e){this.type._write(t)}getRef(){return 7}}const G3=n=>new xs(F3[n.readTypeRef()](n)),wp=(n,t)=>{let e=t,r=0,i;do r>0&&(e=ze(e.client,e.clock+r)),i=lu(n,e),r=e.clock-i.id.clock,e=i.redone;while(e!==null&&i instanceof Kn);return{item:i,diff:r}},xu=(n,t,e)=>{const{client:r,clock:i}=t.id,s=new Kn(ze(r,i+e),t,ze(r,i+e-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(e));return t.deleted&&s.markDeleted(),t.keep&&(s.keep=!0),t.redone!==null&&(s.redone=ze(t.redone.client,t.redone.clock+e)),t.right=s,s.right!==null&&(s.right.left=s),n._mergeStructs.push(s),s.parentSub!==null&&s.right===null&&s.parent._map.set(s.parentSub,s),t.length=e,s};class Kn extends gd{constructor(t,e,r,i,s,o,a,c){super(t,c.getLength()),this.origin=r,this.left=e,this.right=i,this.rightOrigin=s,this.parent=o,this.parentSub=a,this.redone=null,this.content=c,this.info=this.content.isCountable()?K1:0}set marker(t){(this.info&Oh)>0!==t&&(this.info^=Oh)}get marker(){return(this.info&Oh)>0}get keep(){return(this.info&G1)>0}set keep(t){this.keep!==t&&(this.info^=G1)}get countable(){return(this.info&K1)>0}get deleted(){return(this.info&Ih)>0}set deleted(t){this.deleted!==t&&(this.info^=Ih)}markDeleted(){this.info|=Ih}getMissing(t,e){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=fr(e,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=fr(e,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Fa&&this.id.client!==this.parent.client&&this.parent.clock>=fr(e,this.parent.client))return this.parent.client;if(this.origin&&(this.left=dp(t,e,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=So(t,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===Ii||this.right&&this.right.constructor===Ii)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===Kn&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===Kn&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Fa){const r=lu(e,this.parent);r.constructor===Ii?this.parent=null:this.parent=r.content.type}return null}integrate(t,e){if(e>0&&(this.id.clock+=e,this.left=dp(t,t.doc.store,ze(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(e),this.length-=e),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,i;if(r!==null)i=r.right;else if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start;const s=new Set,o=new Set;for(;i!==null&&i!==this.right;){if(o.add(i),s.add(i),Ca(this.origin,i.origin)){if(i.id.client<this.id.client)r=i,s.clear();else if(Ca(this.rightOrigin,i.rightOrigin))break}else if(i.origin!==null&&o.has(lu(t.doc.store,i.origin)))s.has(lu(t.doc.store,i.origin))||(r=i,s.clear());else break;i=i.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(t)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),hg(t.doc.store,this),this.content.integrate(t,this),gp(t,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(t)}else new Ii(this.id,this.length).integrate(t,0)}get next(){let t=this.right;for(;t!==null&&t.deleted;)t=t.right;return t}get prev(){let t=this.left;for(;t!==null&&t.deleted;)t=t.left;return t}get lastId(){return this.length===1?this.id:ze(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&Ca(t.origin,this.lastId)&&this.right===t&&Ca(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&this.redone===null&&t.redone===null&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const e=this.parent._searchMarker;return e&&e.forEach(r=>{r.p===t&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,this.right!==null&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const e=this.parent;this.countable&&this.parentSub===null&&(e._length-=this.length),this.markDeleted(),mu(t.deleteSet,this.id.client,this.id.clock,this.length),gp(t,e,this.parentSub),this.content.delete(t)}}gc(t,e){if(!this.deleted)throw Ji();this.content.gc(t),e?Qw(t,this,new Ii(this.id,this.length)):this.content=new Xl(this.length)}write(t,e){const r=e>0?ze(this.id.client,this.id.clock+e-1):this.origin,i=this.rightOrigin,s=this.parentSub,o=this.content.getRef()&Ru|(r===null?0:pi)|(i===null?0:Fs)|(s===null?0:Hl);if(t.writeInfo(o),r!==null&&t.writeLeftID(r),i!==null&&t.writeRightID(i),r===null&&i===null){const a=this.parent;if(a._item!==void 0){const c=a._item;if(c===null){const u=lg(a);t.writeParentInfo(!0),t.writeString(u)}else t.writeParentInfo(!1),t.writeLeftID(c.id)}else a.constructor===String?(t.writeParentInfo(!0),t.writeString(a)):a.constructor===Fa?(t.writeParentInfo(!1),t.writeLeftID(a)):Ji();s!==null&&t.writeString(s)}this.content.write(t,e)}}const Og=(n,t)=>K3[t&Ru](n),K3=[()=>{Ji()},T3,R3,O3,j3,q3,M3,G3,D3,P3,()=>{Ji()}],Y3=10;class Oi extends gd{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,e){Ji()}write(t,e){t.writeInfo(Y3),Je(t.restEncoder,this.length-e)}getMissing(t,e){return null}}const Tg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},Pg="__ $YJS$ __";Tg[Pg]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");Tg[Pg]=!0;const qg=()=>new Set,J3=Array.from,X3=String.fromCharCode,Z3=n=>n.toLowerCase(),Q3=/^\s*/g,t4=n=>n.replace(Q3,""),e4=/([A-Z])/g,_p=(n,t)=>t4(n.replace(e4,e=>`${t}${Z3(e)}`)),n4=n=>{const t=unescape(encodeURIComponent(n)),e=t.length,r=new Uint8Array(e);for(let i=0;i<e;i++)r[i]=t.codePointAt(i);return r},Zl=typeof TextEncoder<"u"?new TextEncoder:null,r4=n=>Zl.encode(n),i4=Zl?r4:n4;let Ol=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Ol&&Ol.decode(new Uint8Array).length===1&&(Ol=null);const Ua=()=>new Map,Mg=(n,t,e)=>{let r=n.get(t);return r===void 0&&n.set(t,r=e()),r},Ap=n=>n===void 0?null:n;class s4{constructor(){this.map=new Map}setItem(t,e){this.map.set(t,e)}getItem(t){return this.map.get(t)}}let Rg=new s4,md=!0;try{typeof localStorage<"u"&&(Rg=localStorage,md=!1)}catch{}const Dg=Rg,o4=n=>md||addEventListener("storage",n),a4=n=>md||removeEventListener("storage",n),l4=Object.keys,c4=(n,t)=>{const e=[];for(const r in n)e.push(t(n[r],r));return e},xp=n=>l4(n).length,u4=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),h4=(n,t)=>n===t,Tl=(n,t)=>{if(n==null||t==null)return h4(n,t);if(n.constructor!==t.constructor)return!1;if(n===t)return!0;switch(n.constructor){case ArrayBuffer:n=new Uint8Array(n),t=new Uint8Array(t);case Uint8Array:{if(n.byteLength!==t.byteLength)return!1;for(let e=0;e<n.length;e++)if(n[e]!==t[e])return!1;break}case Set:{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;break}case Map:{if(n.size!==t.size)return!1;for(const e of n.keys())if(!t.has(e)||!Tl(n.get(e),t.get(e)))return!1;break}case Object:if(xp(n)!==xp(t))return!1;for(const e in n)if(!u4(n,e)||!Tl(n[e],t[e]))return!1;break;case Array:if(n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(!Tl(n[e],t[e]))return!1;break;default:return!1}return!0},f4=(n,t)=>t.includes(n),Qa=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name),jg=typeof window<"u"&&typeof document<"u"&&!Qa;let us;const d4=()=>{if(us===void 0)if(Qa){us=Ua();const n=process.argv;let t=null;for(let e=0;e<n.length;e++){const r=n[e];r[0]==="-"?(t!==null&&us.set(t,""),t=r):t!==null&&(us.set(t,r),t=null)}t!==null&&us.set(t,"")}else typeof location=="object"?(us=Ua(),(location.search||"?").slice(1).split("&").forEach(n=>{if(n.length!==0){const[t,e]=n.split("=");us.set(`--${_p(t,"-")}`,e),us.set(`-${_p(t,"-")}`,e)}})):us=Ua();return us},Lf=n=>d4().has(n),kf=n=>Ap(Qa?process.env[n.toUpperCase()]:Dg.getItem(n)),p4=n=>Lf("--"+n)||kf(n)!==null;p4("production");const Np=Qa&&f4({}.FORCE_COLOR,["true","1","2"]);!Lf("no-colors")&&(!Qa||process.stdout.isTTY||Np)&&(!Qa||Lf("color")||Np||kf("COLORTERM")!==null||(kf("TERM")||"").includes("color"));const Fg=Math.floor,Bg=(n,t)=>n<t?n:t,g4=(n,t)=>n>t?n:t,m4=Math.pow,Ug=128,uu=127,b4=Number.MAX_SAFE_INTEGER,zg=n=>new Error(n),v4=zg("Unexpected end of array"),y4=zg("Integer out of Range");class w4{constructor(t){this.arr=t,this.pos=0}}const Hg=n=>new w4(n),_4=(n,t)=>{const e=$g(n.arr.buffer,n.pos+n.arr.byteOffset,t);return n.pos+=t,e},Vu=n=>_4(n,yo(n)),Sp=n=>n.arr[n.pos++],yo=n=>{let t=0,e=1;const r=n.arr.length;for(;n.pos<r;){const i=n.arr[n.pos++];if(t=t+(i&uu)*e,e*=128,i<Ug)return t;if(t>b4)throw y4}throw v4},A4=n=>{let t=yo(n);if(t===0)return"";{let e=String.fromCodePoint(Sp(n));if(--t<100)for(;t--;)e+=String.fromCodePoint(Sp(n));else for(;t>0;){const r=t<1e4?t:1e4,i=n.arr.subarray(n.pos,n.pos+r);n.pos+=r,e+=String.fromCodePoint.apply(null,i),t-=r}return decodeURIComponent(escape(e))}},x4=n=>Ol.decode(Vu(n)),Vg=Ol?x4:A4,N4=n=>new Uint8Array(n),$g=(n,t,e)=>new Uint8Array(n,t,e),S4=n=>new Uint8Array(n),L4=n=>{let t="";for(let e=0;e<n.byteLength;e++)t+=X3(n[e]);return btoa(t)},k4=n=>Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("base64"),E4=n=>{const t=atob(n),e=N4(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e},C4=n=>{const t=Buffer.from(n,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},I4=jg?L4:k4,O4=jg?E4:C4;class T4{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Si=()=>new T4,bd=n=>{let t=n.cpos;for(let e=0;e<n.bufs.length;e++)t+=n.bufs[e].length;return t},hi=n=>{const t=new Uint8Array(bd(n));let e=0;for(let r=0;r<n.bufs.length;r++){const i=n.bufs[r];t.set(i,e),e+=i.length}return t.set($g(n.cbuf.buffer,0,n.cpos),e),t},Nu=(n,t)=>{const e=n.cbuf.length;n.cpos===e&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(e*2),n.cpos=0),n.cbuf[n.cpos++]=t},sr=(n,t)=>{for(;t>uu;)Nu(n,Ug|uu&t),t=Fg(t/128);Nu(n,uu&t)},Ef=new Uint8Array(3e4),P4=Ef.length/3,q4=(n,t)=>{if(t.length<P4){const e=Zl.encodeInto(t,Ef).written||0;sr(n,e);for(let r=0;r<e;r++)Nu(n,Ef[r])}else Bs(n,i4(t))},M4=(n,t)=>{const e=unescape(encodeURIComponent(t)),r=e.length;sr(n,r);for(let i=0;i<r;i++)Nu(n,e.codePointAt(i))},R4=Zl&&Zl.encodeInto?q4:M4,D4=(n,t)=>{const e=n.cbuf.length,r=n.cpos,i=Bg(e-r,t.length),s=t.length-i;n.cbuf.set(t.subarray(0,i),r),n.cpos+=i,s>0&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(g4(e*2,s)),n.cbuf.set(t.subarray(i)),n.cpos=s)},Bs=(n,t)=>{sr(n,t.byteLength),D4(n,t)},$o=Date.now;class Wg{constructor(){this._observers=Ua()}on(t,e){Mg(this._observers,t,qg).add(e)}once(t,e){const r=(...i)=>{this.off(t,r),e(...i)};this.on(t,r)}off(t,e){const r=this._observers.get(t);r!==void 0&&(r.delete(e),r.size===0&&this._observers.delete(t))}emit(t,e){return J3((this._observers.get(t)||Ua()).values()).forEach(r=>r(...e))}destroy(){this._observers=Ua()}}const Dh=3e4;class j4 extends Wg{constructor(t){super(),this.doc=t,this.clientID=t.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const e=$o();this.getLocalState()!==null&&Dh/2<=e-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const r=[];this.meta.forEach((i,s)=>{s!==this.clientID&&Dh<=e-i.lastUpdated&&this.states.has(s)&&r.push(s)}),r.length>0&&vd(this,r,"timeout")},Fg(Dh/10)),t.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const e=this.clientID,r=this.meta.get(e),i=r===void 0?0:r.clock+1,s=this.states.get(e);t===null?this.states.delete(e):this.states.set(e,t),this.meta.set(e,{clock:i,lastUpdated:$o()});const o=[],a=[],c=[],u=[];t===null?u.push(e):s==null?t!=null&&o.push(e):(a.push(e),Tl(s,t)||c.push(e)),(o.length>0||c.length>0||u.length>0)&&this.emit("change",[{added:o,updated:c,removed:u},"local"]),this.emit("update",[{added:o,updated:a,removed:u},"local"])}setLocalStateField(t,e){const r=this.getLocalState();r!==null&&this.setLocalState({...r,[t]:e})}getStates(){return this.states}}const vd=(n,t,e)=>{const r=[];for(let i=0;i<t.length;i++){const s=t[i];if(n.states.has(s)){if(n.states.delete(s),s===n.clientID){const o=n.meta.get(s);n.meta.set(s,{clock:o.clock+1,lastUpdated:$o()})}r.push(s)}}r.length>0&&(n.emit("change",[{added:[],updated:[],removed:r},e]),n.emit("update",[{added:[],updated:[],removed:r},e]))},Pl=(n,t,e=n.states)=>{const r=t.length,i=Si();sr(i,r);for(let s=0;s<r;s++){const o=t[s],a=e.get(o)||null,c=n.meta.get(o).clock;sr(i,o),sr(i,c),R4(i,JSON.stringify(a))}return hi(i)},F4=(n,t,e)=>{const r=Hg(t),i=$o(),s=[],o=[],a=[],c=[],u=yo(r);for(let d=0;d<u;d++){const p=yo(r);let g=yo(r);const f=JSON.parse(Vg(r)),v=n.meta.get(p),x=n.states.get(p),S=v===void 0?0:v.clock;(S<g||S===g&&f===null&&n.states.has(p))&&(f===null?p===n.clientID&&n.getLocalState()!=null?g++:n.states.delete(p):n.states.set(p,f),n.meta.set(p,{clock:g,lastUpdated:i}),v===void 0&&f!==null?s.push(p):v!==void 0&&f===null?c.push(p):f!==null&&(Tl(f,x)||a.push(p),o.push(p)))}(s.length>0||a.length>0||c.length>0)&&n.emit("change",[{added:s,updated:a,removed:c},e]),(s.length>0||o.length>0||c.length>0)&&n.emit("update",[{added:s,updated:o,removed:c},e])},Yc=(n,t,e,r,i)=>{try{if(t&&t.cursor&&e!==r.clientID){const s=t.user||{},o=s.color||"#ffa500",a=s.name||`User: ${e}`;n.createCursor(e.toString(),a,o);const c=hp(cp(t.cursor.anchor),r),u=hp(cp(t.cursor.head),r);c&&u&&c.type===i&&n.moveCursor(e.toString(),{index:c.index,length:u.index-c.index})}else n.removeCursor(e.toString())}catch(s){console.error(s)}};class B4{constructor(t,e,r){const i=t.doc;this.type=t,this.doc=i,this.quill=e;const s=e.getModule("cursors")||null;this.quillCursors=s,this._negatedUsedFormats={},this.awareness=r,this._awarenessChange=({added:o,removed:a,updated:c})=>{const u=r.getStates();o.forEach(d=>{Yc(s,u.get(d),d,i,t)}),c.forEach(d=>{Yc(s,u.get(d),d,i,t)}),a.forEach(d=>{s.removeCursor(d.toString())})},this._typeObserver=o=>{if(o.transaction.origin!==this){const a=o.delta,c=[];for(let u=0;u<a.length;u++){const d=a[u];d.insert!==void 0?c.push(Object.assign({},d,{attributes:Object.assign({},this._negatedUsedFormats,d.attributes||{})})):c.push(d)}e.updateContents(c,this)}},t.observe(this._typeObserver),this._quillObserver=(o,a,c,u)=>{if(a&&a.ops){const d=a.ops;d.forEach(p=>{if(p.attributes!==void 0)for(let g in p.attributes)this._negatedUsedFormats[g]===void 0&&(this._negatedUsedFormats[g]=!1)}),u!==this&&i.transact(()=>{t.applyDelta(d)},this)}if(r&&s){const d=e.getSelection(),p=r.getLocalState();if(d===null)r.getLocalState()!==null&&r.setLocalStateField("cursor",null);else{const g=up(t,d.index),f=up(t,d.index+d.length);(!p||!p.cursor||!fp(g,p.cursor.anchor)||!fp(f,p.cursor.head))&&r.setLocalStateField("cursor",{anchor:g,head:f})}r.getStates().forEach((g,f)=>{Yc(s,g,f,i,t)})}},e.on("editor-change",this._quillObserver),e.setContents(t.toDelta(),this),s!==null&&r&&(r.getStates().forEach((o,a)=>{Yc(s,o,a,i,t)}),r.on("change",this._awarenessChange))}destroy(){this.type.unobserve(this._typeObserver),this.quill.off("editor-change",this._quillObserver),this.awareness&&this.awareness.off("change",this._awarenessChange)}}const Gg=new Map;class U4{constructor(t){this.room=t,this.onmessage=null,this._onChange=e=>e.key===t&&this.onmessage!==null&&this.onmessage({data:O4(e.newValue||"")}),o4(this._onChange)}postMessage(t){Dg.setItem(this.room,I4(S4(t)))}close(){a4(this._onChange)}}const z4=typeof BroadcastChannel>"u"?U4:BroadcastChannel,yd=n=>Mg(Gg,n,()=>{const t=qg(),e=new z4(n);return e.onmessage=r=>t.forEach(i=>i(r.data,"broadcastchannel")),{bc:e,subs:t}}),H4=(n,t)=>(yd(n).subs.add(t),t),V4=(n,t)=>{const e=yd(n),r=e.subs.delete(t);return r&&e.subs.size===0&&(e.bc.close(),Gg.delete(n)),r},ka=(n,t,e=null)=>{const r=yd(n);r.bc.postMessage(t),r.subs.forEach(i=>i(t,e))},Kg=0,wd=1,Yg=2,Cf=(n,t)=>{sr(n,Kg);const e=Kw(t);Bs(n,e)},Jg=(n,t,e)=>{sr(n,wd),Bs(n,Vw(t,e))},$4=(n,t,e)=>Jg(t,e,Vu(n)),Xg=(n,t,e)=>{try{Uw(t,Vu(n),e)}catch(r){console.error("Caught error while handling a Yjs update",r)}},W4=(n,t)=>{sr(n,Yg),Bs(n,t)},G4=Xg,K4=(n,t,e,r)=>{const i=yo(n);switch(i){case Kg:$4(n,t,e);break;case wd:Xg(n,e,r);break;case Yg:G4(n,e,r);break;default:throw new Error("Unknown message type")}return i},Y4=0,J4=(n,t,e)=>{switch(yo(n)){case Y4:e(t,Vg(n))}},X4=n=>c4(n,(t,e)=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`).join("&"),Do=0,Zg=3,za=1,Z4=2,cc=[];cc[Do]=(n,t,e,r,i)=>{sr(n,Do);const s=K4(t,n,e.doc,e);r&&s===wd&&!e.synced&&(e.synced=!0)};cc[Zg]=(n,t,e,r,i)=>{sr(n,za),Bs(n,Pl(e.awareness,Array.from(e.awareness.getStates().keys())))};cc[za]=(n,t,e,r,i)=>{F4(e.awareness,Vu(t),e)};cc[Z4]=(n,t,e,r,i)=>{J4(t,e.doc,(s,o)=>Q4(e,o))};const Lp=3e4,Q4=(n,t)=>console.warn(`Permission denied to access ${n.url}.
${t}`),Qg=(n,t,e)=>{const r=Hg(t),i=Si(),s=yo(r),o=n.messageHandlers[s];return o?o(i,r,n,e,s):console.error("Unable to compute message"),i},t2=n=>{if(n.shouldConnect&&n.ws===null){const t=new n._WS(n.url);t.binaryType="arraybuffer",n.ws=t,n.wsconnecting=!0,n.wsconnected=!1,n.synced=!1,t.onmessage=e=>{n.wsLastMessageReceived=$o();const r=Qg(n,new Uint8Array(e.data),!0);bd(r)>1&&t.send(hi(r))},t.onerror=e=>{n.emit("connection-error",[e,n])},t.onclose=e=>{n.emit("connection-close",[e,n]),n.ws=null,n.wsconnecting=!1,n.wsconnected?(n.wsconnected=!1,n.synced=!1,vd(n.awareness,Array.from(n.awareness.getStates().keys()).filter(r=>r!==n.doc.clientID),n),n.emit("status",[{status:"disconnected"}])):n.wsUnsuccessfulReconnects++,setTimeout(t2,Bg(m4(2,n.wsUnsuccessfulReconnects)*100,n.maxBackoffTime),n)},t.onopen=()=>{n.wsLastMessageReceived=$o(),n.wsconnecting=!1,n.wsconnected=!0,n.wsUnsuccessfulReconnects=0,n.emit("status",[{status:"connected"}]);const e=Si();if(sr(e,Do),Cf(e,n.doc),t.send(hi(e)),n.awareness.getLocalState()!==null){const r=Si();sr(r,za),Bs(r,Pl(n.awareness,[n.doc.clientID])),t.send(hi(r))}},n.emit("status",[{status:"connecting"}])}},jh=(n,t)=>{const e=n.ws;n.wsconnected&&e&&e.readyState===e.OPEN&&e.send(t),n.bcconnected&&ka(n.bcChannel,t,n)};class t_ extends Wg{constructor(t,e,r,{connect:i=!0,awareness:s=new j4(r),params:o={},WebSocketPolyfill:a=WebSocket,resyncInterval:c=-1,maxBackoffTime:u=2500,disableBc:d=!1}={}){for(super();t[t.length-1]==="/";)t=t.slice(0,t.length-1);const p=X4(o);this.maxBackoffTime=u,this.bcChannel=t+"/"+e,this.url=t+"/"+e+(p.length===0?"":"?"+p),this.roomname=e,this.doc=r,this._WS=a,this.awareness=s,this.wsconnected=!1,this.wsconnecting=!1,this.bcconnected=!1,this.disableBc=d,this.wsUnsuccessfulReconnects=0,this.messageHandlers=cc.slice(),this._synced=!1,this.ws=null,this.wsLastMessageReceived=0,this.shouldConnect=i,this._resyncInterval=0,c>0&&(this._resyncInterval=setInterval(()=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN){const g=Si();sr(g,Do),Cf(g,r),this.ws.send(hi(g))}},c)),this._bcSubscriber=(g,f)=>{if(f!==this){const v=Qg(this,new Uint8Array(g),!1);bd(v)>1&&ka(this.bcChannel,hi(v),this)}},this._updateHandler=(g,f)=>{if(f!==this){const v=Si();sr(v,Do),W4(v,g),jh(this,hi(v))}},this.doc.on("update",this._updateHandler),this._awarenessUpdateHandler=({added:g,updated:f,removed:v},x)=>{const S=g.concat(f).concat(v),y=Si();sr(y,za),Bs(y,Pl(s,S)),jh(this,hi(y))},this._unloadHandler=()=>{vd(this.awareness,[r.clientID],"window unload")},typeof window<"u"?window.addEventListener("unload",this._unloadHandler):typeof process<"u"&&process.on("exit",this._unloadHandler),s.on("update",this._awarenessUpdateHandler),this._checkInterval=setInterval(()=>{this.wsconnected&&Lp<$o()-this.wsLastMessageReceived&&this.ws.close()},Lp/10),i&&this.connect()}get synced(){return this._synced}set synced(t){this._synced!==t&&(this._synced=t,this.emit("synced",[t]),this.emit("sync",[t]))}destroy(){this._resyncInterval!==0&&clearInterval(this._resyncInterval),clearInterval(this._checkInterval),this.disconnect(),typeof window<"u"?window.removeEventListener("unload",this._unloadHandler):typeof process<"u"&&process.off("exit",this._unloadHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.doc.off("update",this._updateHandler),super.destroy()}connectBc(){if(this.disableBc)return;this.bcconnected||(H4(this.bcChannel,this._bcSubscriber),this.bcconnected=!0);const t=Si();sr(t,Do),Cf(t,this.doc),ka(this.bcChannel,hi(t),this);const e=Si();sr(e,Do),Jg(e,this.doc),ka(this.bcChannel,hi(e),this);const r=Si();sr(r,Zg),ka(this.bcChannel,hi(r),this);const i=Si();sr(i,za),Bs(i,Pl(this.awareness,[this.doc.clientID])),ka(this.bcChannel,hi(i),this)}disconnectBc(){const t=Si();sr(t,za),Bs(t,Pl(this.awareness,[this.doc.clientID],new Map)),jh(this,hi(t)),this.bcconnected&&(V4(this.bcChannel,this._bcSubscriber),this.bcconnected=!1)}disconnect(){this.shouldConnect=!1,this.disconnectBc(),this.ws!==null&&this.ws.close()}connect(){this.shouldConnect=!0,!this.wsconnected&&this.ws===null&&(t2(this),this.connectBc())}}function e_({username:n,doc:t,provider:e}){if(!t&&!e)return new Error("Failed to create awareness,pleace afferented doc or procider into the function. ");let{awareness:r}=e||{awareness:new awarenessProtocol.Awareness(t)},i=Math.random().toString(16).split(".")[1],s="#"+i.slice(0,6),o={name:n||`用户_${i.slice(0,3)}`,color:s};return r.setLocalStateField("user",o),r}class n_{constructor(t,e,r){this.ydoc=new nl;const i=this.ydoc.getText("quill"),s=new t_(`${U2}?yjs`,e,this.ydoc);Fh.commit("setWebsocketProvider",s),new B4(i,t.quill,e_({username:r,provider:s}))}}const r_=[[{icon:"icon-chexiao",title:"撤销"},{icon:"icon-zhongzuo",title:"重做"},{icon:"icon-cachu",title:"清空"},{icon:"icon-anjianfengexian",title:""},{icon:"icon-cuti",title:"粗体"},{icon:"icon-italic",title:"斜体"},{icon:"icon-strikethrough",title:"删除线"},{icon:"icon-zitixiahuaxian",title:"下划线"},{icon:"icon-daochu",title:"导出为pdf"}],[{icon:"icon-anjianfengexian",title:""},{icon:"icon-tupian",title:"插入图片"},{icon:"icon-baocun",title:"每30秒自动保存"}],[{icon:"icon-24gl-fullScreenEnter2",title:"进入全屏"}]];const i_={class:"toolbar"},s_={class:"toolbar-left"},o_=["title","onClick"],a_={class:"iconfont icon-zitiyanse"},l_={class:"colorBox"},c_=["title","onClick"],u_={class:"iconfont icon-emoji emoji",title:"emoji"},h_={class:"emoji-box"},f_=["onClick"],d_={class:"toolbar-right"},p_=["title","onClick"],g_={__name:"tabbar",setup(n){let t=Rl({});const e=Vi("");let r=Vi("");z2(r,d=>t.format("color",d));const i=Rl(r_),s=d=>{switch(d){case"icon-chexiao":t.undo();break;case"icon-zhongzuo":t.redo();break;case"icon-cachu":t.clear();break;case"icon-cuti":case"icon-italic":case"icon-strikethrough":case"icon-zitixiahuaxian":t.format(d);break;case"icon-baocun":o(JSON.stringify(t.getDetail()));break;case"icon-daochu":t.format(d);break;case"icon-tupian":e.value.click();break;case"icon-24gl-fullScreenEnter2":document.querySelector(".header").style.display="none",i[2].pop(),i[2].push({icon:"icon-a-122-tuichuquanping",title:"退出全屏"});break;case"icon-a-122-tuichuquanping":document.querySelector(".header").style.display="flex",i[2].pop(),i[2].push({icon:"icon-24gl-fullScreenEnter2",title:"进入全屏"});break}},o=async d=>{let p=vv(JSON.stringify(JSON.parse(d).ops).toString()),g=Bh.currentRoute.value.params.fileid,{userid:f}=JSON.parse(sessionStorage.getItem("user")),v=await t5({fileid:g,userid:f,content:p});if(v.code!==200)return jo.error(v.msg);jo.success(v.msg)},a=d=>t.insertText(d),c=async d=>{let{files:p}=d.target,g=new FormData;g.append("file",p[0]);let f=await e5(g);if(f.code!==200)return jo.error(f.msg);t.insertEmbed(null,"image",V2+f.data)},u=async d=>{let{ops:p}=t.getDetail();if(p[0].insert!==`
`)return;let g=await n5({fileid:d});g.code===200&&t.init(g.data)};return If(()=>{let{fileid:d}=Bh.currentRoute.value.params,{username:p}=JSON.parse(sessionStorage.getItem("user"));t=new by("#edit"),t.focus(),setTimeout(()=>u(d),100),new n_(t,d,p)}),(d,p)=>{const g=Wi("el-scrollbar");return dn(),zn("div",i_,[ke("div",s_,[(dn(!0),zn(uo,null,ho(i[0],f=>(dn(),zn("i",{key:f.icon,class:Zc(["iconfont",f.icon]),title:f.title,onClick:v=>s(f.icon)},null,10,o_))),128)),ke("i",a_,[ke("div",l_,[Ep(ke("input",{"onUpdate:modelValue":p[0]||(p[0]=f=>Cp(r)?r.value=f:r=f),type:"color"},null,512),[[H2,Yr(r)]])])]),(dn(!0),zn(uo,null,ho(i[1],f=>(dn(),zn("i",{key:f.icon,class:Zc(["iconfont",f.icon]),title:f.title,onClick:v=>s(f.icon)},null,10,c_))),128)),ke("i",u_,[ke("div",h_,[Ti(g,{height:"150px"},{default:Ei(()=>[(dn(!0),zn(uo,null,ho(Yr(j5),f=>(dn(),zn("span",{onClick:v=>a(f),key:f},Us(f),9,f_))),128))]),_:1})])])]),ke("div",d_,[(dn(!0),zn(uo,null,ho(i[2],f=>(dn(),zn("i",{key:f.icon,class:Zc(["iconfont",f.icon]),title:f.title,onClick:v=>s(f.icon)},null,10,p_))),128))]),ke("input",{onChange:c,type:"file",style:{display:"none"},name:"file",id:"file",ref_key:"uploadRef",ref:e,accept:"image/*"},null,544)])}}},m_=Wo(g_,[["__scopeId","data-v-c5f0d6f2"]]);const b_=n=>(Of("data-v-64679f20"),n=n(),Tf(),n),v_={class:"edit"},y_=b_(()=>ke("div",{id:"edit"},null,-1)),w_={__name:"index",setup(n){return(t,e)=>(dn(),zn("div",v_,[Ti(m_),y_]))}},__=Wo(w_,[["__scopeId","data-v-64679f20"]]),A_=(n,t,e)=>{n&&Object.keys(n).forEach(r=>{r!=="subscribe"&&r!=="unsubscribe"&&e.emitter.addListener(r,n[r],t)})},x_=(n,t,e)=>{n&&Object.keys(n).forEach(r=>{e.emitter.removeListener(r,t)})};const N_=n=>(Of("data-v-39a6a21a"),n=n(),Tf(),n),S_={class:"editbox"},L_={class:"editbox-left"},k_={class:"editbox-right"},E_=N_(()=>ke("div",{class:"editbox-right-top"},"文档交流区",-1)),C_={class:"editbox-right-main"},I_=["innerHTML"],O_={class:"item-info"},T_={class:"item-info-username"},P_={class:"item-info-content"},q_={class:"editbox-right-footer"},M_={__name:"index",setup(n){let t=Vi(!1),e=()=>(t.value=!t.value,u.value=0),r=JSON.parse(sessionStorage.getItem("user")),i=Vi(""),s=$2("socket"),{proxy:o}=W2();var a=Rl([]);let c=Rl([]),u=Vi(0),d=Vi(""),p={join:v=>{a.splice(0),v.forEach(x=>a.push(x))},message:v=>{c.push(v),t.value?u.value=0:u.value++}},g=()=>{let{userimg:v,userid:x,username:S}=JSON.parse(sessionStorage.getItem("user")),y={userimg:v,userid:x,username:S,time:J2().unix(),content:i.value};s.io.emit("send",{fileid:d.value,content:y}),i.value=""};const f=(v,x)=>{s.io.connect(),s.io.emit("init",{user:x,fileid:v})};return If(()=>{d.value=window.location.hash.split("edit/")[1];let v=JSON.parse(sessionStorage.getItem("user"));f(d.value,v),A_(p,o,s)}),G2(()=>{x_(p,o,s)}),(v,x)=>{const S=Wi("el-scrollbar"),y=Wi("el-input");return dn(),zn("div",S_,[ke("div",L_,[Ti(D5,{onOpen:Yr(e),socketuserlist:Yr(a),unread:Yr(u)},null,8,["onOpen","socketuserlist","unread"]),Ti(__)]),Ep(ke("div",k_,[E_,ke("div",C_,[Ti(S,{height:"100%"},{default:Ei(()=>[(dn(!0),zn(uo,null,ho(Yr(c),A=>(dn(),zn("div",{key:A.userid,class:Zc(["item",A.userid===Yr(r).userid?"my":""])},[ke("div",{class:"userimg_svg",innerHTML:A.userimg},null,8,I_),ke("div",O_,[ke("div",T_,Us(A.username),1),ke("div",P_,Us(A.content),1)])],2))),128))]),_:1})]),ke("div",q_,[Ti(y,{modelValue:Yr(i),"onUpdate:modelValue":x[0]||(x[0]=A=>Cp(i)?i.value=A:i=A),onKeydown:Y2(Yr(g),["enter"])},null,8,["modelValue","onKeydown"])])],512),[[K2,Yr(t)]])])}}},R_=Wo(M_,[["__scopeId","data-v-39a6a21a"]]),X_=Object.freeze(Object.defineProperty({__proto__:null,default:R_},Symbol.toStringTag,{value:"Module"}));export{pn as _,X_ as i};
